<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>7&nbsp; Panel-Daten – Kausalanalyse und maschinelles Lernen mit R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./IV.html" rel="next">
<link href="./Matching.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta name="robots" content="noindex">
<script>
  MathJax = {
    tex: {
      tags: 'ams'  // should be 'ams', 'none', or 'all'
    }
  };
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.js" integrity="sha512-aoZChv+8imY/U1O7KIHXvO87EOzCuKO0GhFtpD6G2Cyjo/xPeTgdf3/bchB10iB+AojMTDkMHDPLKNxPJVqDcw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<style>
  .panel-tabset .tab-content {
    border: 0;
    padding: 1em 0 0 0;
  }
  
  .panel-tabset .nav-item a {
    border-radius: 5px 5px 0 0;
  }
  
  .scientific_borders {
    border: 0;
    border-top: 2px solid black !important; 
    border-bottom: 2px solid black !important;
  }
  .table:not(.gt_table) > :not(caption)>*>* {
    border-bottom-width: 0;
  }
  .table:not(.gt_table) > thead {
    border-bottom: 1px solid black;
  }
  .soft-box-shadow {
    border: 1px solid rgba(233,236,239,.9) !important;
    border-radius: .5rem !important;
    background-color: rgba(250,250,250,.9) !important;
    box-shadow: 0px 1px 2px rgba(0,0,0,.1),
                0px 3px 7px rgba(0,0,0,.1),
                0px 12px 30px rgba(0,0,0,.08);
    margin-top: 2rem !important;
    margin-bottom: 2.5rem !important;
    padding: .25rem !important;
  }
  .obs-soft-box-shadow {
    border: 1px solid rgba(233,236,239,.9) !important;
    border-radius: .5rem !important;
    background-color: white !important;
    box-shadow: 0px 1px 2px rgba(0,0,0,.1),
                0px 3px 7px rgba(0,0,0,.1),
                0px 12px 30px rgba(0,0,0,.08);
    margin-top: 2rem !important;
    margin-bottom: 2.5rem !important;
    padding: .25rem !important;
  }
  
</style>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    
    var gt_tables = document.querySelectorAll(".gt_table");
    gt_tables.forEach(function(table) {
      table.classList.remove("table-striped");
    });
    
    var tables = document.querySelectorAll("table.table:not(.gt_table)");
    tables.forEach(function(table) {
      table.classList.remove("table-striped");
      table.classList.add("scientific_borders");
    });
    
    document.querySelectorAll("div.sourceCode").forEach(function(block) {
      block.classList.add("soft-box-shadow");
    });
    
    document.querySelectorAll("div.bg-white").forEach(function(block) {
      block.classList.remove("bg-white");
    });
    
const elements = document.querySelectorAll('[id^="qwebr-interactive-area"]');

    elements.forEach(element => {
        element.classList.add('box-shadow');
    });
    
    document.querySelectorAll('[id^="webr"]').forEach(function(block) {
      block.classList.add("box-shadow");
    });
    
        document.querySelectorAll('.card-header').forEach(function(block) {
      block.classList.add("box-shadow");
    });
    
  });
</script><style>
.qwebr-code-output-stdout {background-color: powderblue;}

.qwebr-button-run {
 width = 100%; 
}

.centered-caption {
   text-align: center;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/quizdown.js"></script><script>quizdown.init();</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="custom_styles.css">
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Matching.html">Kausale Inferenz</a></li><li class="breadcrumb-item"><a href="./FixedEffects.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Panel-Daten</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./"></a><a href="./index.html">Kausalanalyse und maschinelles Lernen mit R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/mca91/kasa_book" title="Quellcode" class="quarto-navigation-tool px-1" aria-label="Quellcode"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Lesemodus umschalten">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einleitung</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Grundlagen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_Einfuehrung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Statistische Programmierung mit R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reproduzierbarkeit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Simulation</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Kausale Inferenz</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Matching</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FixedEffects.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Panel-Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">IV-Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Difference-in-Differences</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./EventStudies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Event Studies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RDD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Regression Discontiniuty Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./SyntheticControl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Synthetic Control</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Machine Learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RegReg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Regularisierte Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./svm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Support Vector Machines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./trees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Baum-basierte Methoden</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Machine Learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Neuronale Netzwerke</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Literatur.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
    </ul>
</div>
    <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title"><a href="./index.html">Übersicht</a></h2>
   
  <ul>
<li><a href="#sec-panel-uh" id="toc-sec-panel-uh" class="nav-link active" data-scroll-target="#sec-panel-uh"><span class="header-section-number">7.1</span> Pooled Regression und unbeobachtbare Heterogenität</a></li>
  <li><a href="#regression-in-differenzen" id="toc-regression-in-differenzen" class="nav-link" data-scroll-target="#regression-in-differenzen"><span class="header-section-number">7.2</span> Regression in Differenzen</a></li>
  <li>
<a href="#fixed-effects-regression" id="toc-fixed-effects-regression" class="nav-link" data-scroll-target="#fixed-effects-regression"><span class="header-section-number">7.3</span> Fixed-Effects-Regression</a>
  <ul>
<li><a href="#sec-withldsv" id="toc-sec-withldsv" class="nav-link" data-scroll-target="#sec-withldsv"><span class="header-section-number">7.3.1</span> Within- und LSDV-Schätzer</a></li>
  <li><a href="#zeit-fixed-effects" id="toc-zeit-fixed-effects" class="nav-link" data-scroll-target="#zeit-fixed-effects"><span class="header-section-number">7.3.2</span> Zeit-Fixed-Effects</a></li>
  </ul>
</li>
  <li>
<a href="#random-effects" id="toc-random-effects" class="nav-link" data-scroll-target="#random-effects"><span class="header-section-number">7.4</span> Random Effects</a>
  <ul>
<li><a href="#verzerrung-bei-endogenit%C3%A4t" id="toc-verzerrung-bei-endogenität" class="nav-link" data-scroll-target="#verzerrung-bei-endogenit%C3%A4t"><span class="header-section-number">7.4.1</span> Verzerrung bei Endogenität</a></li>
  </ul>
</li>
  <li><a href="#sec-crse" id="toc-sec-crse" class="nav-link" data-scroll-target="#sec-crse"><span class="header-section-number">7.5</span> Cluster-robuste Standardfehler</a></li>
  <li>
<a href="#dynamische-modelle" id="toc-dynamische-modelle" class="nav-link" data-scroll-target="#dynamische-modelle"><span class="header-section-number">7.6</span> <i class="fa-solid fa-stairs" aria-label="stairs"></i> Dynamische Modelle</a>
  <ul>
<li><a href="#sec-vidp" id="toc-sec-vidp" class="nav-link" data-scroll-target="#sec-vidp"><span class="header-section-number">7.6.1</span> Verzerrung in dynamischen Modellen</a></li>
  </ul>
</li>
  <li><a href="#case-study-einkommen-und-demokratie" id="toc-case-study-einkommen-und-demokratie" class="nav-link" data-scroll-target="#case-study-einkommen-und-demokratie"><span class="header-section-number">7.7</span> Case Study: Einkommen und Demokratie</a></li>
  <li><a href="#zusammenfassung" id="toc-zusammenfassung" class="nav-link" data-scroll-target="#zusammenfassung"><span class="header-section-number">7.8</span> Zusammenfassung</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/mca91/kasa_book/edit/main/FixedEffects.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/mca91/kasa_book/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li></ul></div></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Matching.html">Kausale Inferenz</a></li><li class="breadcrumb-item"><a href="./FixedEffects.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Panel-Daten</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-paneldata" class="quarto-section-identifier"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Panel-Daten</span></span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="cell" data-edit="false">
<div>
<div id="webr-1">

</div>
<script type="webr-1-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsIm91dHB1dCI6ZmFsc2UsIm1lc3NhZ2UiOmZhbHNlLCJ3YXJuaW5nIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImVjaG8iOmZhbHNlfSwiY29kZSI6IiMgRm9ybWF0aWVydW5nIHZvbiBndC1UYWJlbGxlblxudGFib3B0cyA8LSBmdW5jdGlvbih4KSB7XG4gICAgZm10X251bWJlcih4LCBkZWNpbWFscyA9IDMsIGRyb3BfdHJhaWxpbmdfemVyb3MgPSBUKSAlPiVcbiAgdGFiX29wdGlvbnModGFibGVfYm9keS5obGluZXMuY29sb3IgPSBcIndoaXRlXCIsIFxuICAgICAgICAgICAgICBjb2x1bW5fbGFiZWxzLmJvcmRlci5ib3R0b20uY29sb3IgPSBcImJsYWNrXCIsIFxuICAgICAgICAgICAgIGNvbHVtbl9sYWJlbHMuYm9yZGVyLnRvcC5jb2xvciA9IFwiYmxhY2tcIixcbiAgICAgICAgICAgICB0YWJsZV9ib2R5LmJvcmRlci5ib3R0b20uY29sb3IgPSBcImJsYWNrXCIsIFxuICAgICAgICAgICAgIHRhYmxlLmJvcmRlci5ib3R0b20uY29sb3IgPSBcImJsYWNrXCIsXG4gICAgICAgICAgICAgY29sdW1uX2xhYmVscy5mb250LndlaWdodCA9IFwiYm9sZFwiLCBcbiAgICAgICAgICAgICB0YWJsZS5mb250LmNvbG9yID0gXCJibGFja1wiLCBcbiAgICAgICAgICAgICB0YWJsZS5mb250LnNpemUgPSAxNilcbn1cblxuIyBjcmVhdGUgZGF0YXNldCBkaXJlY3RvcnlcbmRpci5jcmVhdGUoXCJkYXRhc2V0c1wiKVxuIyBEb3dubG9hZCB0aGUgZGF0YXNldHNcbmRvd25sb2FkLmZpbGUoXG4gICAgXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWNhOTEva2F1c2FsX2RhdGEvbWFpbi9wYW5lbGRhdGEuY3N2XCIsXG4gICAgJ2RhdGFzZXRzL3BhbmVsZGF0YS5jc3YnLFxuKVxuZG93bmxvYWQuZmlsZShcbiAgICBcImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9tY2E5MS9rYXVzYWxfZGF0YS9tYWluL0FjZW1vZ2x1ZXRhbDIwMDguY3N2XCIsXG4gICAgJ2RhdGFzZXRzL2FjZW1vZ2x1ZXRhbDIwMDguY3N2JyxcbilcbmxpYnJhcnkoZHBseXIpXG5cbm9wdGlvbnMocGlsbGFyLmJvbGQgPSBUUlVFLCBwaWxsYXIuc3VidGxlID0gRkFMU0UpIn0=
</script>
</div>
</div>
<p>Das Ziel dieses Kapitels ist es, ein Verständnis der Vor- und Nachteile von Panel-Daten-Modellen für die Schätzung kausaler Effekte mit R zu vermitteln. Durch die zusätzliche zeitliche Dimension <span class="math inline">\(T &gt; 1\)</span> in Panel-Daten eröffnen sich erweiterte Möglichkeiten der Identifikation und Modellierung: Die Verfügbarkeit mehrerer Beobachtungen pro Beobachtungseinheit über die Zeit ermöglicht es, für <em>unbeobachtbare</em> Heterogenitäten zu korrigieren. So kann die Schätzung kausaler Effekte unter weniger restriktiven Annahmen erfolgen als bei Querschnittsdaten (<span class="math inline">\(T = 1\)</span>), wo wir annehmen, dass Kontrollieren für eine Menge beobachtbarer Kovariablen ausreichend ist, um Confounding zu vermeiden.</p>
<p>Darüber hinaus ermöglichen Panel-Ansätze oft eine präzisere statistische Inferenz im Vergleich zu Verfahren für Querschnittsdaten, da die zusätzliche Information in der Zeitdimension die Varianz der Schätzung verringert. Verschiedene Identifikationsstrategien wie Differenz-in-Differenzen (<a href="DiD.html" class="quarto-xref"><span>Kapitel 9</span></a>) oder Regressionsansätze mit Instrumentvariablen (<a href="IV.html" class="quarto-xref"><span>Kapitel 8</span></a>), machen sich diese zusätzliche Informationen zunutze.</p>
<section id="sec-panel-uh" class="level2 page-columns page-full" data-number="7.1"><h2 data-number="7.1" class="anchored" data-anchor-id="sec-panel-uh">
<span class="header-section-number">7.1</span> Pooled Regression und unbeobachtbare Heterogenität</h2>
<p>Ein Panel-Datensatz enthält Beobachtungen zu <span class="math inline">\(n\)</span> Einheiten für (bis zu) <span class="math inline">\(T\)</span> Zeitpunkte <span class="math inline">\(t=1,\dots,T\)</span>. Betrachte das Panel-Modell</p>
<span class="math display">\[\begin{align}
  Y_{it} = \beta_0 + \beta_1 B_{it} + \beta_2 X_i + \beta_3 U_i + \epsilon_{it},\label{eq:unobshetmodel}
\end{align}\]</span>
<p>wobei <span class="math inline">\(U_i\)</span> unbeobachtete und <span class="math inline">\(X_i\)</span> beobachtete, <em>zeitlich-invariante</em> Heterogenitäten zwischen den Beobachtungseinheiten <span class="math inline">\(i=1,\dots,n\)</span> sind. Wie zuvor ist <span class="math inline">\(B_{it}\)</span> die Behandlungsvariable und <span class="math inline">\(\beta_1\)</span> der interessierende kausale Effekt einer Veränderung von <span class="math inline">\(B_{it}\)</span> auf <span class="math inline">\(Y_{it}\)</span>.</p>
<p>Angenommen wir beobachten <span class="math inline">\(Y_{it}\)</span> und <span class="math inline">\(B_{it}\)</span> für <span class="math inline">\(T=1\)</span>, also für eine Periode. Bei Korrelation zwischen den <em>unbeobachtbaren</em> zeit-invarianten Effekten <span class="math inline">\(U_i\)</span> und der Behandlungsvariable <span class="math inline">\(B_{it}\)</span> kann der kausale Effekt <span class="math inline">\(\beta_1\)</span> nicht identifiziert werden. Diese Situation ist in <a href="#fig-FEDAG1" class="quarto-xref">Abbildung&nbsp;<span>7.1</span></a> dargestellt.</p>
<div class="cell page-columns page-full" data-fig-width="3" data-fig-height="3" data-layout-align="center">
<div class="cell-output-display page-columns page-full">
<div id="fig-FEDAG1" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-FEDAG1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<svg width="288" height="288" viewbox="0.00 0.00 273.97 252.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(36 216)"><title>FE_dag_single_period</title>
<polygon fill="white" stroke="transparent" points="-36,36 -36,-216 237.97,-216 237.97,36 -36,36"></polygon><!-- U --><g id="node1" class="node"><title>U</title>
<ellipse fill="none" stroke="gray" cx="174.97" cy="-162" rx="27" ry="18"></ellipse><text text-anchor="start" x="167.97" y="-158.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00" fill="gray">U</text><text text-anchor="start" x="178.08" y="-158.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00" fill="gray">i</text></g><!-- X --><g id="node2" class="node"><title>X</title>
<ellipse fill="none" stroke="black" cx="174.97" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="167.97" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">X</text><text text-anchor="start" x="178.08" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">i</text></g><!-- U&#45;&gt;X --><g id="edge1" class="edge"><title>U-&gt;X</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M174.97,-143.76C174.97,-119.2 174.97,-75.25 174.97,-46.35"></path><polygon fill="gray" stroke="gray" points="178.47,-46.09 174.97,-36.09 171.47,-46.09 178.47,-46.09"></polygon></g><!-- B --><g id="node3" class="node"><title>B</title>
<ellipse fill="none" stroke="black" cx="30.97" cy="-18" rx="30.37" ry="18"></ellipse><text text-anchor="start" x="16.91" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="26.24" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=1</text></g><!-- U&#45;&gt;B --><g id="edge3" class="edge"><title>U-&gt;B</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M159.83,-146.86C134.64,-121.67 83.96,-70.99 54.21,-41.25"></path><polygon fill="gray" stroke="gray" points="56.32,-38.4 46.78,-33.81 51.37,-43.35 56.32,-38.4"></polygon></g><!-- Y --><g id="node4" class="node"><title>Y</title>
<ellipse fill="none" stroke="black" cx="30.97" cy="-162" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="16.52" y="-158.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="26.63" y="-158.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=1</text></g><!-- U&#45;&gt;Y --><g id="edge2" class="edge"><title>U-&gt;Y</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M147.88,-162C126.57,-162 96.51,-162 72.21,-162"></path><polygon fill="gray" stroke="gray" points="72.19,-158.5 62.19,-162 72.19,-165.5 72.19,-158.5"></polygon></g><!-- X&#45;&gt;B --><g id="edge5" class="edge"><title>X-&gt;B</title>
<path fill="none" stroke="black" d="M147.88,-18C126.35,-18 95.9,-18 71.48,-18"></path><polygon fill="black" stroke="black" points="71.42,-14.5 61.42,-18 71.42,-21.5 71.42,-14.5"></polygon></g><!-- X&#45;&gt;Y --><g id="edge4" class="edge"><title>X-&gt;Y</title>
<path fill="none" stroke="black" d="M159.83,-33.14C134.64,-58.33 83.96,-109.01 54.21,-138.75"></path><polygon fill="black" stroke="black" points="51.37,-136.65 46.78,-146.19 56.32,-141.6 51.37,-136.65"></polygon></g><!-- B&#45;&gt;Y --><g id="edge6" class="edge"><title>B-&gt;Y</title>
<path fill="none" stroke="black" d="M30.97,-36.24C30.97,-60.8 30.97,-104.75 30.97,-133.65"></path><polygon fill="black" stroke="black" points="27.47,-133.91 30.97,-143.91 34.47,-133.91 27.47,-133.91"></polygon></g></g></svg>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-FEDAG1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;7.1: Backdoors durch beobachtete und unbeobachtete Variablen
</figcaption></figure>
</div>
</div>
</div>
<p><a href="#fig-FEDAG1" class="quarto-xref">Abbildung&nbsp;<span>7.1</span></a> zeigt Backdoors durch die <span class="math inline">\(U_i\)</span>, die wir mit einer “naiven” KQ-Schätzung der fehlspezifizierten Regression <span class="math display">\[\begin{align}
  Y_{it} = \beta_0 + \beta_1 B_{it} + \beta_2 X_i + \varepsilon_{it},\quad t=1,\label{eq:femodelfail}
\end{align}\]</span> mit <span class="math inline">\(\varepsilon_{it} = U_i + \epsilon_{it}\)</span> nicht schließen können.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Wegen <span class="math inline">\(E(\varepsilon_{it}\vert B_{it})\neq 0\)</span> ist der KQ-Schätzer von <span class="math inline">\(\beta_1\)</span> nicht erwartungstreu und inkonsistent.</p></div></div><p>Wir betrachten nun eine Generalisierung des DGP in <a href="#fig-FEDAG1" class="quarto-xref">Abbildung&nbsp;<span>7.1</span></a> für <span class="math inline">\(T=2\)</span> Perioden, dargestellt in <a href="#fig-FEDAG2" class="quarto-xref">Abbildung&nbsp;<span>7.2</span></a>.</p>
<div class="cell page-columns page-full" data-fig-width="6" data-fig-height="5" data-layout-align="center">
<div class="cell-output-display page-columns page-full">
<div id="fig-FEDAG2" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-FEDAG2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<svg width="576" height="480" viewbox="0.00 0.00 357.94 476.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 472)"><title>FE_dag2</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-472 353.94,-472 353.94,4 -4,4"></polygon><!-- U --><g id="node1" class="node"><title>U</title>
<ellipse fill="none" stroke="gray" cx="174.97" cy="-450" rx="27" ry="18"></ellipse><text text-anchor="start" x="167.97" y="-446.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00" fill="gray">U</text><text text-anchor="start" x="178.08" y="-446.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00" fill="gray">i</text></g><!-- X --><g id="node2" class="node"><title>X</title>
<ellipse fill="none" stroke="black" cx="174.97" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="167.97" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">X</text><text text-anchor="start" x="178.08" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">i</text></g><!-- U&#45;&gt;X --><g id="edge1" class="edge"><title>U-&gt;X</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M174.97,-431.99C174.97,-364.74 174.97,-128.08 174.97,-46.16"></path><polygon fill="gray" stroke="gray" points="178.47,-46.09 174.97,-36.09 171.47,-46.09 178.47,-46.09"></polygon></g><!-- B1 --><g id="node3" class="node"><title>B1</title>
<ellipse fill="none" stroke="black" cx="30.97" cy="-162" rx="30.37" ry="18"></ellipse><text text-anchor="start" x="16.91" y="-158.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="26.24" y="-158.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=1</text></g><!-- U&#45;&gt;B1 --><g id="edge3" class="edge"><title>U-&gt;B1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M166.39,-432.85C142.24,-384.54 73.51,-247.09 44.33,-188.73"></path><polygon fill="gray" stroke="gray" points="47.28,-186.81 39.68,-179.43 41.02,-189.94 47.28,-186.81"></polygon></g><!-- Y1 --><g id="node4" class="node"><title>Y1</title>
<ellipse fill="none" stroke="black" cx="30.97" cy="-306" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="16.52" y="-302.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="26.63" y="-302.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=1</text></g><!-- U&#45;&gt;Y1 --><g id="edge2" class="edge"><title>U-&gt;Y1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M159.83,-434.86C134.64,-409.67 83.96,-358.99 54.21,-329.25"></path><polygon fill="gray" stroke="gray" points="56.32,-326.4 46.78,-321.81 51.37,-331.35 56.32,-326.4"></polygon></g><!-- B2 --><g id="node5" class="node"><title>B2</title>
<ellipse fill="none" stroke="black" cx="318.97" cy="-162" rx="30.37" ry="18"></ellipse><text text-anchor="start" x="304.91" y="-158.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="314.24" y="-158.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=2</text></g><!-- U&#45;&gt;B2 --><g id="edge9" class="edge"><title>U-&gt;B2</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M183.54,-432.85C207.7,-384.54 276.42,-247.09 305.6,-188.73"></path><polygon fill="gray" stroke="gray" points="308.91,-189.94 310.25,-179.43 302.65,-186.81 308.91,-189.94"></polygon></g><!-- Y2 --><g id="node6" class="node"><title>Y2</title>
<ellipse fill="none" stroke="black" cx="318.97" cy="-306" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="304.52" y="-302.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="314.63" y="-302.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=2</text></g><!-- U&#45;&gt;Y2 --><g id="edge8" class="edge"><title>U-&gt;Y2</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M190.11,-434.86C215.3,-409.67 265.98,-358.99 295.72,-329.25"></path><polygon fill="gray" stroke="gray" points="298.56,-331.35 303.16,-321.81 293.61,-326.4 298.56,-331.35"></polygon></g><!-- X&#45;&gt;B1 --><g id="edge5" class="edge"><title>X-&gt;B1</title>
<path fill="none" stroke="black" d="M159.83,-33.14C134.64,-58.33 83.96,-109.01 54.21,-138.75"></path><polygon fill="black" stroke="black" points="51.37,-136.65 46.78,-146.19 56.32,-141.6 51.37,-136.65"></polygon></g><!-- X&#45;&gt;Y1 --><g id="edge4" class="edge"><title>X-&gt;Y1</title>
<path fill="none" stroke="black" d="M166.39,-35.15C142.24,-83.46 73.51,-220.91 44.33,-279.27"></path><polygon fill="black" stroke="black" points="41.02,-278.06 39.68,-288.57 47.28,-281.19 41.02,-278.06"></polygon></g><!-- X&#45;&gt;B2 --><g id="edge11" class="edge"><title>X-&gt;B2</title>
<path fill="none" stroke="black" d="M190.11,-33.14C215.3,-58.33 265.98,-109.01 295.72,-138.75"></path><polygon fill="black" stroke="black" points="293.61,-141.6 303.16,-146.19 298.56,-136.65 293.61,-141.6"></polygon></g><!-- X&#45;&gt;Y2 --><g id="edge10" class="edge"><title>X-&gt;Y2</title>
<path fill="none" stroke="black" d="M183.54,-35.15C207.7,-83.46 276.42,-220.91 305.6,-279.27"></path><polygon fill="black" stroke="black" points="302.65,-281.19 310.25,-288.57 308.91,-278.06 302.65,-281.19"></polygon></g><!-- B1&#45;&gt;Y1 --><g id="edge6" class="edge"><title>B1-&gt;Y1</title>
<path fill="none" stroke="black" d="M30.97,-180.24C30.97,-204.8 30.97,-248.75 30.97,-277.65"></path><polygon fill="black" stroke="black" points="27.47,-277.91 30.97,-287.91 34.47,-277.91 27.47,-277.91"></polygon></g><!-- B1&#45;&gt;B2 --><g id="edge7" class="edge"><title>B1-&gt;B2</title>
<path fill="none" stroke="black" d="M61.52,-162C113.58,-162 219.51,-162 277.96,-162"></path><polygon fill="black" stroke="black" points="278.3,-165.5 288.3,-162 278.3,-158.5 278.3,-165.5"></polygon></g><!-- B2&#45;&gt;Y2 --><g id="edge12" class="edge"><title>B2-&gt;Y2</title>
<path fill="none" stroke="black" d="M318.97,-180.24C318.97,-204.8 318.97,-248.75 318.97,-277.65"></path><polygon fill="black" stroke="black" points="315.47,-277.91 318.97,-287.91 322.47,-277.91 315.47,-277.91"></polygon></g></g></svg>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-FEDAG2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;7.2: Panel-Design mit Backdoors durch beobachtete und unbeobachtete zeit-invariante Variablen
</figcaption></figure>
</div>
</div>
</div>
<p>Der in <a href="#fig-FEDAG2" class="quarto-xref">Abbildung&nbsp;<span>7.2</span></a> gezeigte Zusammenhang führt (idealerweise) zwar zu einer Verdoppelung des Beobachtungsumfangs, jedoch besteht weiterhin das in <a href="#fig-FEDAG1" class="quarto-xref">Abbildung&nbsp;<span>7.1</span></a> gezeigte Endogenitätsproblem, falls die Regression <span class="math inline">\(\eqref{eq:femodelfail}\)</span> nun anhand einer Zusammenlegung (<strong>Pooling</strong>) aller Beobachtungen für <span class="math inline">\(t\in\{1,2\}\)</span> geschätzt wird:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Die unbeobachteten zeit-invarianten Einflüsse <span class="math inline">\(U_i\)</span> verursachen auch für Periode <span class="math inline">\(t=2\)</span> Backdoor-Pfade.</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;Pooled Regression kann auch berechnet werden, wenn nicht für alle <span class="math inline">\(n\)</span> Einheiten jeweils <span class="math inline">\(T\)</span> Beobachtungen vorliegen (unbalanced Panel).</p></div><div id="fn3"><p><sup>3</sup>&nbsp;Der (R code für den) DGP ist <a href="https://stats.stackexchange.com/a/188559">diesem StackExchange-Post</a> entnommen.</p></div></div><p>In diesem Kapitel betrachten wir Panel-Verfahren, welche den kausalen Effekt in <a href="#fig-FEDAG2" class="quarto-xref">Abbildung&nbsp;<span>7.2</span></a> und Verallgemeinerungen hiervon schätzen können. Bevor wir diese Methoden betrachten, veranschaulichen wir die verzerrte Schätzung eines Behandlungseffekts mit <em>Pooled Regression</em> in Modell <span class="math inline">\(\eqref{eq:femodelfail}\)</span> bei unbeobachtbaren Heterogenitäten für einen simulierten Datensatz <code>paneldata.csv</code>. Der Datensatz enthält Beobachtungen von <span class="math inline">\(n=12\)</span> Einheiten zu <span class="math inline">\(T=8\)</span> Perioden. Alle Einheiten weisen unbeobachtbare <em>zeit-invariante</em> Heterogenitäten auf, die mit <span class="math inline">\(B_{it}\)</span> korrelieren. Der wahre Behandlungseffekt beträgt <span class="math inline">\(\beta_1 = -1\)</span>.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>Wir lesen zunächst den Datensatz ein und selektieren die benötigten Variablen.</p>
<div class="cell">
<div>
<div id="webr-2">

</div>
<script type="webr-2-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShkcGx5cilcbmxpYnJhcnkocmVhZHIpXG5cbiMgRGF0ZW5zYXR6ICdwYW5lbGRhdGEuY3N2JyBlaW5sZXNlblxucGFuZWxkYXRhIDwtIHJlYWRfY3N2KFwiZGF0YXNldHMvcGFuZWxkYXRhLmNzdlwiKSAlPiUgXG4gIHNlbGVjdChYLCBZLCBJRCwgdGltZSwgY29sKSJ9
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-3">

</div>
<script type="webr-3-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBQYW5lbC1EaW1lbnNpb25lbiBiZXN0aW1tZW5cbnBhbmVsZGF0YSAlPiVcbiAgc3VtbWFyaXNlKFxuICAgIE4gPSB1bmlxdWUoSUQpICU+JSBsZW5ndGgoKSxcbiAgICBUID0gdW5pcXVlKHRpbWUpICU+JSBsZW5ndGgoKVxuICApIn0=
</script>
</div>
</div>
<p>Mit der Funktion <code><a href="https://rdrr.io/pkg/plm/man/is.pbalanced.html">plm::is.pbalanced()</a></code> überprüfen wir, ob im Panel-Datensatz für alle beobachteten Einheiten die gleiche Anzahl an Beobachtungsperioden vorliegt (<em>balanced panel</em>).<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;Fehlende Beobachtungen sind typischerweise mit einem <code>NA</code>-Wert gekennzeichnet. Der Differenz-Schätzer kann auch berechnet werden, wenn der Datensatz nicht ausgeglichen (<em>unbalanced</em>) ist.</p></div></div><div class="cell">
<div>
<div id="webr-4">

</div>
<script type="webr-4-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShwbG0pXG5cbiMgRGF0ZW5zYXR6IGJhbGFuY2VkP1xuaXMucGJhbGFuY2VkKFxuICB4ID0gcGFuZWxkYXRhLCBcbiAgaW5kZXggPSBjKFwiSURcIiwgXCJ0aW1lXCIpXG4pIn0=
</script>
</div>
</div>
<p>Zunächst schätzen wir eine Pooled Regression für die ersten beiden Zeitperioden, basierend auf einem entsprechend gefilterten Datensatz.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;Wir verweisen nachfolgend explizit auf Funktionen aus <code>dplyr</code>, falls Funktionen aus <code>plm</code> identische Namen haben.</p></div></div><div class="cell">
<div>
<div id="webr-5">

</div>
<script type="webr-5-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBTdWJzZXR0aW5nIGRlciBEYXRlbiBmw7xyIDIgUGVyaW9kZW4gKHQgPSB7MSwgMn0pXG5wYW5lbGRhdGFfVDIgPC0gcGFuZWxkYXRhICU+JSBcbiAgZmlsdGVyKFxuICAgIGRwbHlyOjpiZXR3ZWVuKHRpbWUsIDEsIDIpXG4gICkifQ==
</script>
</div>
</div>
<p>Für die Schätzung von Modell <span class="math inline">\(\eqref{eq:femodelfail}\)</span> nutzen wir <code><a href="https://lrberge.github.io/fixest/reference/feols.html">fixest::feols()</a></code>.</p>
<div class="cell">
<div>
<div id="webr-6">

</div>
<script type="webr-6-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShmaXhlc3QpXG5cbiMgTmFpdmUgS1EtU2Now6R0enVuZyBmw7xyIHQgPSB7MSwgMn1cbnBhbmVsX0tRIDwtIGZlb2xzKFxuICBmbWwgPSBZIH4gWCwgXG4gIGRhdGEgPSBwYW5lbGRhdGFfVDJcbilcblxuIyBTdGF0aXN0aXNjaGUgWnVzYW1tZW5mYXNzdW5nXG5zdW1tYXJ5KHBhbmVsX0tRKSJ9
</script>
</div>
</div>
<p>Die Schätzung von <span class="math inline">\(\beta_1\)</span> ist 3.81 und weist auf eine deutliche Verzerrung hin. Wir illustrieren diese Problematik in der nächsten Abbildung, in dem wir die für die Regression verwendeten Daten (Kreise) sowie die Beobachtungen späterer Perioden (Kreuze) nach Gruppenzugehörigkeit einfärben und die Schätzung der Pooled Regression abtragen.</p>
<div class="cell">
<div>
<div id="webr-7">

</div>
<script type="webr-7-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImxhYmVsIjoiZmlnLXBvb2xlZHJlZ3Jlc3Npb24xIiwiZWRpdCI6dHJ1ZX0sImNvZGUiOiJsaWJyYXJ5KGdncGxvdDIpXG5saWJyYXJ5KGNvd3Bsb3QpXG5cbiMgUGxvdDogTmFpdmVyIEtRLVNjaMOkdHplciBmw7xyIHQgPSAxLCAyXG5nZ3Bsb3QoXG4gIG1hcHBpbmcgPSBhZXMoeCA9IFgsIHkgPSBZKVxuKSArXG4gIGdlb21fcG9pbnQoXG4gICAgZGF0YSA9IHBhbmVsZGF0YSAlPiUgXG4gICAgICBmaWx0ZXIodGltZSA+IDIpLFxuICAgIG1hcHBpbmcgPSBhZXMoY29sb3IgPSBjb2wpLFxuICAgIHBjaCA9IDMsXG4gICAgc2hvdy5sZWdlbmQgPSBGXG4gICkgK1xuICBnZW9tX3BvaW50KFxuICAgIGRhdGEgPSBwYW5lbGRhdGEgJT4lIFxuICAgICAgZmlsdGVyKHRpbWUgJWluJSAxOjIpLFxuICAgIG1hcHBpbmcgPSBhZXMoY29sb3IgPSBjb2wpLFxuICAgIHNob3cubGVnZW5kID0gRlxuICApICtcbiAgIyBOYWl2ZSBLUS1TY2jDpHR6dW5nIGbDvHIgdCA9IDEsIDJcbiAgZ2VvbV9zbW9vdGgoXG4gICAgZGF0YSA9IHBhbmVsZGF0YSAlPiUgXG4gICAgICBmaWx0ZXIodGltZSAlaW4lIDEpLFxuICAgIG1ldGhvZCA9IFwibG1cIiwgXG4gICAgc2UgPSBGLFxuICAgIGNvbCA9IFwiYmxhY2tcIlxuICApICtcbiAgbGFicyhcbiAgICB0aXRsZSA9IFwiYHBhbmVsZGF0ZW4uY3N2YCAtLSBQb29sZWQgUmVncmVzc2lvbiBmw7xyIHQgPSAxLCAyXCJcbiAgKSArXG4gIHNjYWxlX2NvbG9yX2lkZW50aXR5KCkgK1xuICB0aGVtZV9jb3dwbG90KCkifQ==
</script>
</div>
</div>
<p>Die obige Grafik zeigt einen negativen Verlauf des Zusammenhangs zwischen X und Y anhand der Variation der Beobachtungen <em>innerhalb</em> der farblich gekennzeichneten Gruppen. Dieser negative Zusammenhang kann aufgrund der Endogenität von <span class="math inline">\(X\)</span> nicht erfasst werden.</p>
<p>Eine Erweiturung der Regression auf sämtliche Perioden (Pooling aller <span class="math inline">\(n\times T = 12 \times 8 = 96\)</span> Beobachtungen) erhöht lediglich die Präzision der Schätzung (geringerer Standardfehler von <span class="math inline">\(\widehat{\beta}_1\)</span>), nicht aber die Endogenität.</p>
<div class="cell">
<div>
<div id="webr-8">

</div>
<script type="webr-8-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBOYWl2ZSBLUS1TY2jDpHR6dW5nIGbDvHIgdCA9IDEsLi4uLDhcbnBhbmVsX0tRIDwtIGZlb2xzKFxuICBmbWwgPSBZIH4gWCwgXG4gIGRhdGEgPSBwYW5lbGRhdGEgXG4pXG5cbiMgU3RhdGlzdGlzY2hlIFp1c2FtbWVuZmFzc3VuZ1xuc3VtbWFyeShwYW5lbF9LUSkifQ==
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-9">

</div>
<script type="webr-9-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImxhYmVsIjoiZmlnLXBvb2xlZHJlZ3Jlc3Npb24yIiwiZWRpdCI6dHJ1ZX0sImNvZGUiOiIjIFBsb3Q6IE5haXZlciBLUS1TY2jDpHR6ZXIgZsO8ciB0ID0gMSwuLi4sOFxuZ2dwbG90KFxuICBkYXRhID0gcGFuZWxkYXRhLFxuICBtYXBwaW5nID0gYWVzKHggPSBYLCB5ID0gWSlcbikgK1xuICBnZW9tX3BvaW50KFxuICAgIG1hcHBpbmcgPSBhZXMoY29sb3IgPSBjb2wpLFxuICAgIHNob3cubGVnZW5kID0gRlxuICApICtcbiAgIyBQb29sZWQgU2Now6R0enVuZ1xuICBnZW9tX3Ntb290aChcbiAgICBkYXRhID0gcGFuZWxkYXRhLFxuICAgIG1ldGhvZCA9IFwibG1cIiwgXG4gICAgc2UgPSBGLFxuICAgIGNvbCA9IFwiYmxhY2tcIlxuICApICtcbiAgbGFicyhcbiAgICB0aXRsZSA9IFwiYHBhbmVsZGF0ZW4uY3N2YCAtLSBQb29sZWQgUmVncmVzc2lvbiBmw7xyIHQgPSAxLCAuLi4sIDhcIlxuICApICtcbiAgc2NhbGVfY29sb3JfaWRlbnRpdHkoKSArXG4gIHRoZW1lX2Nvd3Bsb3QoKSJ9
</script>
</div>
</div>
</section><section id="regression-in-differenzen" class="level2 page-columns page-full" data-number="7.2"><h2 data-number="7.2" class="anchored" data-anchor-id="regression-in-differenzen">
<span class="header-section-number">7.2</span> Regression in Differenzen</h2>
<p>Wir betrachten erneut den in <a href="#fig-FEDAG2" class="quarto-xref">Abbildung&nbsp;<span>7.2</span></a> dargestellten DGP für <span class="math inline">\(T=2\)</span> Zeitperioden. In dieser Situation können Backdoors durch die <span class="math inline">\(U_i\)</span> anhand einer simplen Transformation von Modell <span class="math inline">\(\eqref{eq:femodel}\)</span> geschlossen werden: Regression der Zeit-Differenzen zwischen den Perioden <span class="math inline">\(t=2\)</span> und <span class="math inline">\(t=1\)</span>, <span class="math display">\[\begin{align}
  \begin{split}
  \Delta Y_{it} = \beta_1 \Delta B_{it} + e_{it}, \qquad i=&amp;\,1,\dots,n,\\
  t=&amp;\,1,2
  \end{split}
  \label{eq:femodeldiff}
\end{align}\]</span> wobei <span class="math inline">\(\Delta Y_{it} := Y_{i2} - Y_{i1}\)</span> und <span class="math inline">\(\Delta e_{it} := \epsilon_{i2} - \epsilon_{i1}\)</span> für <span class="math inline">\(t=2\)</span>. Beachte, dass <span class="math inline">\(\Delta U_i=\Delta X_i=0\)</span>. Differenzieren der Komponenten führt zu einem Modell, in dem weder für (beobachtbare) <span class="math inline">\(X_i\)</span> noch für (unbeobachtbare) <span class="math inline">\(U_i\)</span> kontrolliert werden muss, damit <span class="math inline">\(\beta_1\)</span> identifiziert werden kann.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> Der Behandlungseffekt <span class="math inline">\(\beta_1\)</span> kann mit KQ geschätzt werden.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;Ein Nachteil der Differenzbildung ist also, dass wir die Koeffizienten der beobachtbaren, zeitlich konstanten Regressoren nicht schätzen können.</p></div><div id="fn7"><p><sup>7</sup>&nbsp;Der Differenzen-Schätzer ist erwartungstreu und konsistent, wenn <span class="math inline">\(E(\epsilon_{is}\vert B_{it})=0\)</span> für <span class="math inline">\(s\geq t\)</span>.</p></div></div><p>Zur Transformation der Regressoren in <code><a href="https://lrberge.github.io/fixest/reference/feols.html">fixest::feols()</a></code> verwenden wir den Operator <code>d()</code>. Dieser benötigt die im Argument <code>panel.id</code> als Formel spezifizierten Identifikationsvariablen für Einheiten (<code>ID</code>) und Zeitpunkte (<code>time</code>).</p>
<div class="cell">
<div>
<div id="webr-10">

</div>
<script type="webr-10-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBQYW5lbC1TY2jDpHR6ZXI6IEtRLVJlZ3Jlc3Npb24gaW4gRGlmZmVyZW56ZW5cbnBhbmVsX2RpZmYgPC0gZmVvbHMoXG4gIGZtbCA9IGQoWSkgfiBkKFgpIC0gMSwgXG4gIGRhdGEgPSBwYW5lbGRhdGEgJT4lIFxuICAgICAgZmlsdGVyKFxuICAgICAgICBkcGx5cjo6YmV0d2Vlbih0aW1lLCAxLCAyKVxuICAgICAgKSxcbiAgcGFuZWwuaWQgPSB+IElEICsgdGltZVxuKVxuXG4jIFN0YXRpc3Rpc2NoZSBadXNhbW1lbmZhc3N1bmdcbnN1bW1hcnkocGFuZWxfZGlmZikifQ==
</script>
</div>
</div>
<p>Die Schätzung anhand der Regression in Differenzen liegt nahe beim wahren Behandlungseffekt <span class="math inline">\(\beta_1 = -1\)</span>. In der nächsten Grafik plotten wir die ersten Differenzen der Daten und den mit KQ geschätzten Zusammenhang.</p>
<div class="cell">
<div>
<div id="webr-11">

</div>
<script type="webr-11-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImxhYmVsIjoiZmlnLWRpZmZyZWdyZXNzaW9uMSIsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeSh0aWR5cilcblxuIyBUcmFuc2Zvcm1hdGlvbiB6dSBEaWZmZXJlbnplblxucGFuZWxkYXRhX2RpZmYgPC0gcGFuZWxkYXRhICU+JSBcbiAgbXV0YXRlKFxuICAgIERlbHRhWCA9IFggLSBkcGx5cjo6bGFnKFgpLFxuICAgIERlbHRhWSA9IFkgLSBkcGx5cjo6bGFnKFkpXG4gICkgJT4lXG4gIGRyb3BfbmEoKVxuXG4jIFBsb3Q6IEtRLVNjaMOkdHplciBmw7xyIERpZmZlcmVuemVuICBcbiAgZ2dwbG90KFxuICAgIG1hcHBpbmcgPSBhZXMoeCA9IERlbHRhWCwgeSA9IERlbHRhWSlcbiAgKSArIFxuICAgIGdlb21fcG9pbnQoXG4gICAgICBkYXRhID0gcGFuZWxkYXRhX2RpZmYgJT4lIFxuICAgICAgICBmaWx0ZXIodGltZSA+IDIpLFxuICAgICAgbWFwcGluZyA9IGFlcyhjb2xvciA9IGNvbCksXG4gICAgICBwY2ggPSAzLFxuICAgICAgc2hvdy5sZWdlbmQgPSBGXG4gICAgKSArXG4gICAgZ2VvbV9wb2ludChcbiAgICAgIGRhdGEgPSBwYW5lbGRhdGFfZGlmZiAlPiUgXG4gICAgICAgIGZpbHRlcih0aW1lID09IDIpLFxuICAgICAgbWFwcGluZyA9IGFlcyhjb2xvciA9IGNvbCksXG4gICAgICBzaG93LmxlZ2VuZCA9IEZcbiAgICApICtcbiAgZ2VvbV9zbW9vdGgoXG4gICAgZGF0YSA9IHBhbmVsZGF0YV9kaWZmICU+JSBcbiAgICAgIGZpbHRlcih0aW1lID09IDIpLFxuICAgIG1ldGhvZCA9IFwibG1cIiwgXG4gICAgc2UgPSBGLFxuICAgIGNvbG9yID0gXCJibGFja1wiXG4gICkgKyBcbiAgbGFicyhcbiAgICB0aXRsZSA9IFwiYHBhbmVsZGF0ZW4uY3N2YCAtLSBSZWdyZXNzaW9uIGluIERpZmZlcmVuemVuIGbDvHIgdCA9IDJcIlxuICApICtcbiAgc2NhbGVfY29sb3JfaWRlbnRpdHkoKSArXG4gIHRoZW1lX2Nvd3Bsb3QoKSJ9
</script>
</div>
</div>
<p>Wie bei Pooling können wir den Differenzen-Schätzer für den gesamten Datensatz berechnen.</p>
<div class="cell">
<div>
<div id="webr-12">

</div>
<script type="webr-12-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBQYW5lbC1TY2jDpHR6ZXI6IEtRLVJlZ3Jlc3Npb24gaW4gRGlmZmVyZW56ZW5cbnBhbmVsX2RpZmYgPC0gZmVvbHMoXG4gIGZtbCA9IGQoWSkgfiBkKFgpIC0gMSwgXG4gIGRhdGEgPSBwYW5lbGRhdGEsXG4gIHBhbmVsLmlkID0gfiBJRCArIHRpbWVcbilcblxuIyBTdGF0aXN0aXNjaGUgWnVzYW1tZW5mYXNzdW5nXG5zdW1tYXJ5KHBhbmVsX2RpZmYpIn0=
</script>
</div>
</div>
<p>Beachte, dass der Standardfehler der Schätzers etwas größer ist als für den KQ-Schätzer in der Pooled Regression. Gründe hierfür sind der Verlust von <span class="math inline">\(12\)</span> Beobachtungen bei der Bildung der <span class="math inline">\(T-1 = 7\)</span> Differenzen und die standardmäßige Berechnung von cluster-robusten Standardfehlern durch <code>feols()</code>, siehe auch <a href="#sec-crse" class="quarto-xref"><span>Kapitel 7.5</span></a>.</p>
<div class="cell">
<div>
<div id="webr-13">

</div>
<script type="webr-13-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImxhYmVsIjoiZmlnLWRpZmZyZWdyZXNzaW9uMiIsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBQbG90OiBLUS1TY2jDpHR6ZXIgaW4gRGlmZmVyZW56ZW4gKGFsbGUgdClcbmdncGxvdChcbiAgZGF0YSA9IHBhbmVsZGF0YV9kaWZmLFxuICBtYXBwaW5nID0gYWVzKHggPSBEZWx0YVgsIHkgPSBEZWx0YVkpXG4pICsgXG4gIGdlb21fcG9pbnQoXG4gICAgY29sb3IgPSBcImdyYXlcIixcbiAgICBzaG93LmxlZ2VuZCA9IEZcbiAgKSArXG4gIGdlb21fcG9pbnQoXG4gICAgbWFwcGluZyA9IGFlcyhjb2xvciA9IGNvbCksXG4gICAgc2hvdy5sZWdlbmQgPSBGXG4gICkgK1xuICBnZW9tX3Ntb290aChcbiAgICBtZXRob2QgPSBcImxtXCIsIFxuICAgIHNlID0gRixcbiAgICBjb2xvciA9IFwiYmxhY2tcIlxuICApICsgXG4gIHNjYWxlX2NvbG9yX2lkZW50aXR5KCkgK1xuICBsYWJzKFxuICAgIHRpdGxlID0gXCJgcGFuZWxkYXRlbi5jc3ZgIC0tIFJlZ3Jlc3Npb24gaW4gRGlmZmVyZW56ZW4gZsO8ciB0ID0gMlwiXG4gICkgK1xuICB0aGVtZV9jb3dwbG90KCkifQ==
</script>
</div>
</div>
</section><section id="fixed-effects-regression" class="level2 page-columns page-full" data-number="7.3"><h2 data-number="7.3" class="anchored" data-anchor-id="fixed-effects-regression">
<span class="header-section-number">7.3</span> Fixed-Effects-Regression</h2>
<p>Die KQ-Schätzung der Regression in Differenzen hat den Nachteil, dass die Koeffizienten von einheiten-spezifischen Variablen nicht geschätzt werden können. Weiterhin impliziert die Differenzbildung einen Verlust des Beobachtungsumfangs bei der Schätzung des kausalen Effekts.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> Für den Datensatz <code>paneldata.csv</code> verlieren wir <span class="math inline">\(1/8\)</span> der Stichprobe. Abhängig von der empirischen Fragestellung und der Datenverfügbarkeit (Verhältnis von <span class="math inline">\(T\)</span> und <span class="math inline">\(n\)</span>) kann Fixed-Effects-Regression eine nützliche Alternative zu Regression in Differenzen sein.</p>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;Eine Reduktion des Beobachtungsumfangs erhöht die Varianz der Schätzung. Für <span class="math inline">\(T=2\)</span> ist der Differenzen-Schätzer äquivalent zu den Schätzern im Fixed-Effects-Modell, ist jedoch ineffizient für <span class="math inline">\(T&gt;2\)</span>.</p></div><div id="fn9"><p><sup>9</sup>&nbsp;Beachte, dass eine bessere Anpassung an die Daten bei der Modellierung von <code>paneldata.csv</code> mit einheiten-spezifischen Achsenabschnitten anhand der Grafik für die gepoolte Regression plausibel scheint.</p></div></div><p>Wir betrachten erneut Modell <span class="math inline">\(\eqref{eq:unobshetmodel}\)</span> und definieren <span class="math display">\[\begin{align*}
  \alpha_i = \beta_0 + \beta_3 U_i.
\end{align*}\]</span> Nach einsetzen in <span class="math inline">\(\eqref{eq:unobshetmodel}\)</span> erhalten wir das Modell <span class="math display">\[\begin{align}
  Y_{it} = \alpha_i + \beta_1 B_{it} + \beta_2 X_i + \epsilon_{it} \label{eq:femodel},
\end{align}\]</span> mit einheiten-spezifischen <strong>Konstanten</strong> (“feste Effekte”) <span class="math inline">\(\alpha_i\)</span> für <span class="math inline">\(i=1,\dots,n\)</span>, die als individuelle Achsenabschnitte nterpretieren werden können. Das Modell <span class="math inline">\(\eqref{eq:femodel}\)</span> wird daher auch als <em>Fixed-Effects-Modell</em> bezeichnet.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<section id="sec-withldsv" class="level3 page-columns page-full" data-number="7.3.1"><h3 data-number="7.3.1" class="anchored" data-anchor-id="sec-withldsv">
<span class="header-section-number">7.3.1</span> Within- und LSDV-Schätzer</h3>
<p>Für die Vermeidung von Backdoors durch die <span class="math inline">\(\alpha_i\)</span> subtrahieren wir die einheiten-spezifischen Mittelwerte von den Komponenten (<em>Within-Transformation</em>)<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>, <span class="math display">\[\begin{align}
  Y_{it} - \overline{Y}_i =&amp;\, (\alpha_i - \overline{\alpha}_i) + \beta_1 (B_{it} - \overline{B}_i) + \beta_2 (X_i - \overline{X}_i) + (\epsilon_{it} - \overline{\epsilon}_i)\notag\\
  \tilde Y_{it} =&amp;\, \beta_1 \tilde B_{it} + \tilde\epsilon_{it}.\label{eq:fewithin}
\end{align}\]</span> Der <em>Within-Schätzer</em> von <span class="math inline">\(\beta_1\)</span> ist der KQ-Schätzer in <span class="math inline">\(\eqref{eq:fewithin}\)</span>. Dieser Schätzer nutzt die Variabilität innerhalb der Beobachtungseinheiten über die Zeit, um die Koeffizienten der unabhängigen Variablen zu schätzen. Ähnlich wie für den Differenzen-Schätzer eliminieren die Mittelwert-Differenzen <span class="math inline">\(\alpha_i - \overline{\alpha}_i=0\)</span> und <span class="math inline">\(X_i - \overline{X}_i=0\)</span> den Einfluss zeit-invarianter Variablen.</p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;Die Durchschnitte werden hierbei also über die <em>Zeitperioden</em> berechnet.</p></div><div id="fn11"><p><sup>11</sup>&nbsp;Für <span class="math inline">\(n-1\)</span> Einheiten ist der individuelle Achsenabschnitt damit <span class="math inline">\(\beta_0 + \gamma_i\)</span> und für <em>eine</em> Einheit <span class="math inline">\(\beta_0\)</span>. Diese Einheit (hier <span class="math inline">\(i=1\)</span>) wird auch als <em>Referenzkategorie</em> bezeichnet. Alternativ kann das Modell mit <span class="math inline">\(n\)</span> Dummies und <em>ohne</em> die Konstante <span class="math inline">\(\beta_0\)</span> geschrieben werden.</p></div><div id="fn12"><p><sup>12</sup>&nbsp;KQ ist hier erwartungstreu und konsistent, sofern <span class="math inline">\(E(\epsilon_{is}\vert B_{it})=0\)</span> für alle <span class="math inline">\(s\)</span> und <span class="math inline">\(t\)</span>.</p></div></div><p>Das Modell <span class="math inline">\(\eqref{eq:femodel}\)</span> kann weiterhin als eine Regression mit <span class="math inline">\(n-1\)</span> Dummy-Variablen und einer Konstante geschrieben werden, <span class="math display">\[\begin{align}
  Y_{it} = \beta_0 + \beta_2 B_{it} + \beta_2 X_i  + \gamma_2 D^{(2)}_i + \gamma_3 D^{(3)}_i + \cdots + \gamma_n D^{(n)}_i + \epsilon_{it} \label{eq:drmodel}.
\end{align}\]</span> Die Darstellung <span class="math inline">\(\eqref{eq:drmodel}\)</span> hat <span class="math inline">\(n\)</span> verschiedene Achsenabschnitte – einen für jede Beobachtungseinheit – und kann ebenfalls mit KQ geschätzt werden.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> Der KQ-Schätzer ergibt für die Modelle <span class="math inline">\(\eqref{eq:femodel}\)</span> und <span class="math inline">\(\eqref{eq:drmodel}\)</span> numerisch äquivalente Schätzungen von <span class="math inline">\(\beta_1\)</span>, wenn <span class="math inline">\(X_i\)</span> in der Dummy-Regression ausgelassen wird.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> Die Schätzung von <span class="math inline">\(\eqref{eq:drmodel}\)</span> mit KQ wird in der Literatur auch als <em>Least Squares Dummy Variables</em> (LSDV) Regression bezeichnet.</p>
<p>Beachte, dass die Schätzung der Koeffizienten <em>beobachtbarer</em> zeitlich konstanter Regressoren wie <span class="math inline">\(X_{i}\)</span> lediglich in Modell <span class="math inline">\(\eqref{eq:drmodel}\)</span> möglich ist.</p>
<p>Fixed-Effects-Regressionen können mit <code><a href="https://lrberge.github.io/fixest/reference/feols.html">fixest::feols()</a></code> geschätzt werden.<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> Je nach Spezifikation des Formula-Arguments (<code>fml</code>) wird ein effizienter Algorithmus für die entsprechende Transformation von <span class="math inline">\(\eqref{eq:femodel}\)</span> angwandt. Für <code>paneldata.csv</code> erhalten wir mit <code>fml = Y ~ X | ID</code> per Referenz des Indikators <code>ID</code> eine Variante des Within-Schätzers.</p>
<div class="no-row-height column-margin column-container"><div id="fn13"><p><sup>13</sup>&nbsp;Eine Alternative ist <code><a href="https://rdrr.io/pkg/plm/man/plm.html">plm::plm()</a></code> mit dem Argument <code>method = "within"</code>.</p></div></div><div class="cell">
<div>
<div id="webr-14">

</div>
<script type="webr-14-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBGaXhlZC1FZmZlY3RzLVNjaMOkdHp1bmdcbnBhbmVsX0ZFIDwtIGZlb2xzKFxuICBmbWwgPSBZIH4gWCB8IElELCAgXG4gIGRhdGEgPSBwYW5lbGRhdGFcbilcblxuIyBTdGF0aXN0aXNjaGUgWnVzYW1tZW5mYXNzdW5nXG5zdW1tYXJ5KHBhbmVsX0ZFKSJ9
</script>
</div>
</div>
<p>Die Zusammenfassung der Schätzung zeigt einen signifikanten Koeffizienten, der mit einer Schätzung von <span class="math inline">\(-1.05\)</span> nahe beim wahren Wert von <span class="math inline">\(\beta_1 = -1\)</span> liegt. Die geschätzten einheiten-spezifischen Effekte können mit <code><a href="https://rdrr.io/pkg/nlme/man/fixed.effects.html">fixest::fixef()</a></code> ausgelesen werden.</p>
<div class="cell">
<div>
<div id="webr-15">

</div>
<script type="webr-15-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBHZXNjaMOkdHp0ZSBGaXhlZCBFZmZlY3RzIChFaW5oZWl0ZW4pIGF1c2xlc2VuXG5maXhlc3Q6OmZpeGVmKHBhbmVsX0ZFKSJ9
</script>
</div>
</div>
<p>Mit <code>fml = Y ~ X + factor(ID)</code> erfolgt eine Schätzung der Dummy-Regression <span class="math inline">\(\eqref{eq:drmodel}\)</span> mit <span class="math inline">\(n-1=11\)</span> Dummies. Der Referenzeinheit ist <code>ID == 1</code>. Wir sehen, dass der geschätzte Koeffizient von <span class="math inline">\(X\)</span> mit dem Ergebnis des Within-Schätzers übereinstimmt.</p>
<div class="cell">
<div>
<div id="webr-16">

</div>
<script type="webr-16-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBMU0RWLVNjaMOkdHp1bmdcbnBhbmVsX0xTRFYgPC0gZmVvbHMoXG4gIGZtbCA9IFkgfiBYICsgZmFjdG9yKElEKSwgIFxuICBkYXRhID0gcGFuZWxkYXRhXG4pXG5cbiMgU3RhdGlzdGlzY2hlIFp1c2FtbWVuZmFzc3VuZ1xuc3VtbWFyeShwYW5lbF9MU0RWKSJ9
</script>
</div>
</div>
</section><section id="zeit-fixed-effects" class="level3 page-columns page-full" data-number="7.3.2"><h3 data-number="7.3.2" class="anchored" data-anchor-id="zeit-fixed-effects">
<span class="header-section-number">7.3.2</span> Zeit-Fixed-Effects</h3>
<p>Neben zeit-invarianten Heterogenitäten zwischen den Beobachtungseinheiten können beobachtbare und unbeobachtbare Einflüsse vorliegen, die nicht zwischen den Einheiten, jedoch über die Zeit variieren. Ein DGP mit solchen zeitabhängigen Heterogenitäten ist in <a href="#fig-FEDAG3" class="quarto-xref">Abbildung&nbsp;<span>7.3</span></a> für <span class="math inline">\(T=2\)</span> dargestellt.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn14"><p><sup>14</sup>&nbsp;Zur Vereinfachung der Interpretierbarkeit vernachlässigt das DAG in <a href="#fig-FEDAG3" class="quarto-xref">Abbildung&nbsp;<span>7.3</span></a> zeitlich konstante Variablen.</p></div></div><div class="cell page-columns page-full" data-fig-width="6" data-fig-height="4" data-layout-align="center">
<div class="cell-output-display page-columns page-full">
<div id="fig-FEDAG3" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-FEDAG3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<svg width="576" height="384" viewbox="0.00 0.00 501.94 476.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 472)"><title>FE_dag3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-472 497.94,-472 497.94,4 -4,4"></polygon><!-- U1 --><g id="node1" class="node"><title>U1</title>
<ellipse fill="none" stroke="gray" cx="174.97" cy="-450" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="160.52" y="-446.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00" fill="gray">U</text><text text-anchor="start" x="170.63" y="-446.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00" fill="gray">t=1</text></g><!-- U2 --><g id="node2" class="node"><title>U2</title>
<ellipse fill="none" stroke="gray" cx="318.97" cy="-450" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="304.52" y="-446.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00" fill="gray">U</text><text text-anchor="start" x="314.63" y="-446.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00" fill="gray">t=2</text></g><!-- U1&#45;&gt;U2 --><g id="edge14" class="edge"><title>U1-&gt;U2</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M206.21,-450C227.16,-450 254.97,-450 277.72,-450"></path><polygon fill="gray" stroke="gray" points="277.78,-453.5 287.78,-450 277.78,-446.5 277.78,-453.5"></polygon></g><!-- X1 --><g id="node3" class="node"><title>X1</title>
<ellipse fill="none" stroke="black" cx="174.97" cy="-18" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="160.52" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">X</text><text text-anchor="start" x="170.63" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=1</text></g><!-- U1&#45;&gt;X1 --><g id="edge1" class="edge"><title>U1-&gt;X1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M174.97,-431.99C174.97,-364.74 174.97,-128.08 174.97,-46.16"></path><polygon fill="gray" stroke="gray" points="178.47,-46.09 174.97,-36.09 171.47,-46.09 178.47,-46.09"></polygon></g><!-- B1 --><g id="node5" class="node"><title>B1</title>
<ellipse fill="none" stroke="black" cx="30.97" cy="-162" rx="30.37" ry="18"></ellipse><text text-anchor="start" x="16.91" y="-158.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="26.24" y="-158.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=1</text></g><!-- U1&#45;&gt;B1 --><g id="edge3" class="edge"><title>U1-&gt;B1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M166.18,-432.42C141.82,-383.7 73.34,-246.74 44.28,-188.62"></path><polygon fill="gray" stroke="gray" points="47.25,-186.73 39.64,-179.35 40.99,-189.86 47.25,-186.73"></polygon></g><!-- Y1 --><g id="node6" class="node"><title>Y1</title>
<ellipse fill="none" stroke="black" cx="30.97" cy="-306" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="16.52" y="-302.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="26.63" y="-302.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=1</text></g><!-- U1&#45;&gt;Y1 --><g id="edge2" class="edge"><title>U1-&gt;Y1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M159.28,-434.32C133.86,-408.89 83.52,-358.55 54.01,-329.04"></path><polygon fill="gray" stroke="gray" points="56.18,-326.26 46.63,-321.67 51.23,-331.21 56.18,-326.26"></polygon></g><!-- X2 --><g id="node4" class="node"><title>X2</title>
<ellipse fill="none" stroke="black" cx="318.97" cy="-18" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="304.52" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">X</text><text text-anchor="start" x="314.63" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=2</text></g><!-- U2&#45;&gt;X2 --><g id="edge8" class="edge"><title>U2-&gt;X2</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M318.97,-431.99C318.97,-364.74 318.97,-128.08 318.97,-46.16"></path><polygon fill="gray" stroke="gray" points="322.47,-46.09 318.97,-36.09 315.47,-46.09 322.47,-46.09"></polygon></g><!-- B2 --><g id="node7" class="node"><title>B2</title>
<ellipse fill="none" stroke="black" cx="462.97" cy="-162" rx="30.37" ry="18"></ellipse><text text-anchor="start" x="448.91" y="-158.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="458.24" y="-158.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=2</text></g><!-- U2&#45;&gt;B2 --><g id="edge10" class="edge"><title>U2-&gt;B2</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M327.76,-432.42C352.12,-383.7 420.6,-246.74 449.66,-188.62"></path><polygon fill="gray" stroke="gray" points="452.95,-189.86 454.29,-179.35 446.69,-186.73 452.95,-189.86"></polygon></g><!-- Y2 --><g id="node8" class="node"><title>Y2</title>
<ellipse fill="none" stroke="black" cx="462.97" cy="-306" rx="30.94" ry="18"></ellipse><text text-anchor="start" x="448.52" y="-302.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="458.63" y="-302.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t=2</text></g><!-- U2&#45;&gt;Y2 --><g id="edge9" class="edge"><title>U2-&gt;Y2</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M334.65,-434.32C360.08,-408.89 410.42,-358.55 439.93,-329.04"></path><polygon fill="gray" stroke="gray" points="442.71,-331.21 447.3,-321.67 437.76,-326.26 442.71,-331.21"></polygon></g><!-- X1&#45;&gt;X2 --><g id="edge15" class="edge"><title>X1-&gt;X2</title>
<path fill="none" stroke="black" d="M206.21,-18C227.16,-18 254.97,-18 277.72,-18"></path><polygon fill="black" stroke="black" points="277.78,-21.5 287.78,-18 277.78,-14.5 277.78,-21.5"></polygon></g><!-- X1&#45;&gt;B1 --><g id="edge5" class="edge"><title>X1-&gt;B1</title>
<path fill="none" stroke="black" d="M159.28,-33.68C133.86,-59.11 83.52,-109.45 54.01,-138.96"></path><polygon fill="black" stroke="black" points="51.23,-136.79 46.63,-146.33 56.18,-141.74 51.23,-136.79"></polygon></g><!-- X1&#45;&gt;Y1 --><g id="edge4" class="edge"><title>X1-&gt;Y1</title>
<path fill="none" stroke="black" d="M166.18,-35.58C141.82,-84.3 73.34,-221.26 44.28,-279.38"></path><polygon fill="black" stroke="black" points="40.99,-278.14 39.64,-288.65 47.25,-281.27 40.99,-278.14"></polygon></g><!-- X2&#45;&gt;B2 --><g id="edge12" class="edge"><title>X2-&gt;B2</title>
<path fill="none" stroke="black" d="M334.65,-33.68C360.08,-59.11 410.42,-109.45 439.93,-138.96"></path><polygon fill="black" stroke="black" points="437.76,-141.74 447.3,-146.33 442.71,-136.79 437.76,-141.74"></polygon></g><!-- X2&#45;&gt;Y2 --><g id="edge11" class="edge"><title>X2-&gt;Y2</title>
<path fill="none" stroke="black" d="M327.76,-35.58C352.12,-84.3 420.6,-221.26 449.66,-279.38"></path><polygon fill="black" stroke="black" points="446.69,-281.27 454.29,-288.65 452.95,-278.14 446.69,-281.27"></polygon></g><!-- B1&#45;&gt;Y1 --><g id="edge6" class="edge"><title>B1-&gt;Y1</title>
<path fill="none" stroke="black" d="M30.97,-180.24C30.97,-204.8 30.97,-248.75 30.97,-277.65"></path><polygon fill="black" stroke="black" points="27.47,-277.91 30.97,-287.91 34.47,-277.91 27.47,-277.91"></polygon></g><!-- B1&#45;&gt;B2 --><g id="edge7" class="edge"><title>B1-&gt;B2</title>
<path fill="none" stroke="black" d="M61.69,-162C138.02,-162 336.31,-162 422.25,-162"></path><polygon fill="black" stroke="black" points="422.4,-165.5 432.4,-162 422.4,-158.5 422.4,-165.5"></polygon></g><!-- B2&#45;&gt;Y2 --><g id="edge13" class="edge"><title>B2-&gt;Y2</title>
<path fill="none" stroke="black" d="M462.97,-180.24C462.97,-204.8 462.97,-248.75 462.97,-277.65"></path><polygon fill="black" stroke="black" points="459.47,-277.91 462.97,-287.91 466.47,-277.91 459.47,-277.91"></polygon></g></g></svg>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-FEDAG3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;7.3: Panel-Design mit Backdoors durch beobachtete und unbeobachtete zeitabhängige Variablen
</figcaption></figure>
</div>
</div>
</div>
<p>Für beobachtbare zeitabhängige Backdoor-Variablen <span class="math inline">\(X_t\)</span> kann durch Aufnahme dieser in die Regression <span class="math inline">\(\eqref{eq:femodel}\)</span> kontrolliert werden. Analog zum Fixed-Effects-Ansatz mit einheiten-spezifischen Konstanten können Backdoors durch unbeobachtbare zeitabhängige Einflüsse <span class="math inline">\(U_t\)</span> durch Kontrolle für perioden-spezifische Dummies <span class="math inline">\(D_t^{(t)}\)</span> (Time Fixed Effects) vermieden werden. Das Modell lautet dann</p>
<span class="math display">\[\begin{align*}
  Y_{it} = \beta_0 + \beta_1 B_{it} + \beta_2 X_t + \lambda_2 D_t^{(2)} + \cdots + \lambda_T D_t^{(T)} + \epsilon_{it}.
\end{align*}\]</span>
<p>In empirischen Anwendung ist es häufig plausibel, für zeit- und einheiten-spezifische Effekte zu kontrollieren. Der entsprechende Regressionsansatz wird als <em>Two Way Fixed Effects</em> (TWFE) bezeichnet.</p>
<p>Ein TWFE-Modell für <code>paneldata.csv</code> kann mit <code>feols()</code> leicht unter Angabe der Identifikationsvariable für die Zeitperioden (<code>time</code>) innerhalb des <code>fml</code>-Arguments geschätzt werden.</p>
<div class="cell">
<div>
<div id="webr-17">

</div>
<script type="webr-17-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBUV0ZFLVNjaMOkdHp1bmdcbnBhbmVsX1RXRkUgPC0gZmVvbHMoXG4gIGZtbCA9IFkgfiBYIHwgSUQgKyB0aW1lLCAgXG4gIGRhdGEgPSBwYW5lbGRhdGFcbilcblxuIyBTdGF0aXN0aXNjaGUgWnVzYW1tZW5mYXNzdW5nXG5zdW1tYXJ5KHBhbmVsX1RXRkUpIn0=
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-18">

</div>
<script type="webr-18-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBHZXNjaMOkdHp0ZSBGaXhlZCBFZmZlY3RzIChFaW5oZWl0ZW4gKyBaZWl0KSBhdXNsZXNlblxuZml4ZXN0OjpmaXhlZihwYW5lbF9UV0ZFKSJ9
</script>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Facts zu Fixed-Effects-Regression
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Ein Fixed-Effects-Designs betrachten <em>unbeobachtete</em>, mit den erklärenden Variablen korrelierte Heterogenitäten als <em>konstante</em> parameter. Korrigieren für diese Heterogenitäten ist Voraussetzung für eine verzerrungsfreie Schätzung kausaler Effekte.</p></li>
<li>
<p>Fixed-Effects-Schätzer schließen Backdoors aufgrund von Heterogenitäten zwischen Beobachtungseinheiten die über die Zeit konstant sind (einheiten-spezifische Effekte) und/oder für Heterogenitäten, die identisch für die Beobachtungseinheiten sind, jedoch über die Zeit variieren (Zeit-Effekte):</p>
<ul>
<li><p>KQ nach der Within-Transformation (Within-Schätzer) ist erwartungstreu und konsistent, solange die erklärenden Variablen zeitlich unkorreliert mit den Fehlertermen sind.</p></li>
<li><p>LSDV-Regression ist eine Variante die Backdoors durch unbeobachtbare Heterogenitäten mit Dummy-Variablen schließt. In einer LSDV-Regression können die Koeffizienten zeitlich konstanter Variablen geschätzt werden.</p></li>
</ul>
</li>
<li><p>Statistische Inferenz für Fixed-Effects-Schätzer erfolgt anhand einer Approximation der asymptotischen Normalverteilung. Da die Fehlerterme heteroskedastisch und/oder über die Zeit korreliert sein können, sollten cluster-robuste Standardfehler verwendet werden, vgl. <a href="#sec-crse" class="quarto-xref"><span>Kapitel 7.5</span></a>.</p></li>
<li><p>Fixed-Effects-Modelle können in R mit dem Paketen <code>fixest</code> oder <code>plm</code> berechnet werden.</p></li>
</ul>
</div>
</div>
</section></section><section id="random-effects" class="level2 page-columns page-full" data-number="7.4"><h2 data-number="7.4" class="anchored" data-anchor-id="random-effects">
<span class="header-section-number">7.4</span> Random Effects</h2>
<p>Der Fixed-Effects-Ansatz behandelt die einheiten-spezifischen Effekte <span class="math inline">\(\alpha_i\)</span> in Modell <span class="math inline">\(\eqref{eq:femodel}\)</span> als konstante Parameter, für die korrigiert oder kontrolliert werden muss. Der Random-Effects-Ansatz betrachtet die <span class="math inline">\(\alpha_i\)</span> als <strong>Zufallsvariablen</strong> mit einer identischen Verteilung, unter der Annahme, dass die <span class="math inline">\(\alpha_i\)</span> <em>nicht</em> mit den erklärenden Variablen korrelieren.<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> Falls diese Annahmen erfüllt sind, ist der Random-Random-Effects-Schätzer effizienter als der Fixed-Effects-Schätzer: Der mittlere quadratische Fehler der Schätzung ist geringer.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn15"><p><sup>15</sup>&nbsp;Erwartungstreue und Konsistenz und Effizienz erfordern <span class="math inline">\(E(\alpha_i\vert B_{it})=0\)</span> <em>und</em> <span class="math inline">\(E(\epsilon_{it}\vert\alpha_i,B_{it})=0\)</span>.</p></div><div id="fn16"><p><sup>16</sup>&nbsp;Die Schätzung erfolgt meist mit der Generalized Least Squares (GLS) oder mit <a href="https://de.wikipedia.org/wiki/Maximum-Likelihood-Methode">Maximum-Likelihood</a> (ML).</p></div></div><p>Das einfache Random-Effects-Modell notieren wir als <span class="math display">\[\begin{align*}
  Y_{it} =&amp;\, \beta_0 + \beta_1 B_{it} + \varepsilon_{it},
\end{align*}\]</span> wobei sich der Fehlerterm <span class="math inline">\(\varepsilon_{it}\)</span> aus dem zufälligen individuellen Effekt <span class="math inline">\(\alpha_i\)</span> und dem unabhängigen Fehler <span class="math inline">\(\epsilon_{it}\)</span> zusammensetzt, <span class="math display">\[\begin{align*}
  \varepsilon_{it} = \alpha_i + \epsilon_{it}.
\end{align*}\]</span></p>
<p>Für ein Beispiel simulieren wir Daten gemäß der Vorschrift <span class="math display">\[\begin{align}
  Y_{it} = \alpha_i + \beta B_{it} + \epsilon_{it}\label{eq:resim}
\end{align}\]</span> und wählen <span class="math display">\[\begin{align*}
  &amp; \alpha_i \overset{u.i.v}{\sim} N(0,2.5^2), \\
  &amp; \beta_1 = -1,\\
  &amp; B_{it} \sim N(0,1),\\
  &amp; \epsilon_{it} \overset{u.i.v}{\sim} N(0,0.75^2).
\end{align*}\]</span> Wie in <code>paneldata.csv</code> erzeugen wir Daten für <span class="math inline">\(n=12\)</span> Individuen, die zu <span class="math inline">\(T=8\)</span> Zeitperioden beobachtet werden. Mit diesen Komponenten wird die Outcome-Variable <span class="math inline">\(Y_{it}\)</span> wie in <span class="math inline">\(\eqref{eq:resim}\)</span> generiert. Der nachstehende Code erzeugt die Daten als Matrizen <code>B</code> und <code>Y</code>, die anschließend in ein langes Datenformat (<code>tibble</code>) umgewandelt werden.</p>
<div class="cell">
<div>
<div id="webr-19">

</div>
<script type="webr-19-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShwbG0pXG5cbnNldC5zZWVkKDEyMzQpXG5cbiMgUGFyYW1ldGVyXG5uIDwtIDEyICAjIEluZGl2aWR1ZW5cbm0gPC0gOCAgICMgUGVyaW9kZW5cbmJldGEgPC0gLTEgIyBCZWhhbmRsdW5nc2VmZmVrdFxuc2lnbWFfYWxwaGEgPC0gMi41ICMgU0QgZsO8ciBSRVxuc2lnbWFfZXBzaWxvbiA8LSAwLjc1ICMgU0QgZsO8ciBGZWhsZXJcblxuIyBSYW5kb20gRWZmZWN0c1xuYWxwaGEgPC0gcm5vcm0obiwgbWVhbiA9IDAsIHNkID0gc2lnbWFfYWxwaGEpXG5cbiMgTWF0cml6ZW5cbkIgPC0gbWF0cml4KE5BLCBucm93ID0gbSwgbmNvbCA9IG4pXG5ZIDwtIG1hdHJpeChOQSwgbnJvdyA9IG0sIG5jb2wgPSBuKVxuXG4jIFNpbXVsYXRpb25cbmZvciAoaSBpbiAxOm4pIHtcbiAgZm9yICh0IGluIDE6bSkge1xuICAgIEJbdCwgaV0gPC0gcm5vcm0oMSwgbWVhbiA9IDAsIHNkID0gMSlcbiAgICBlcHNpbG9uX2l0IDwtIHJub3JtKDEsIG1lYW4gPSAwLCBzZCA9IHNpZ21hX2Vwc2lsb24pXG4gICAgWVt0LCBpXSA8LSBhbHBoYVtpXSArIGJldGEgKiBCW3QsIGldICsgZXBzaWxvbl9pdFxuICB9XG59XG5cbiMgdGliYmxlIGVyemV1Z2VuXG5SRV9wYW5lbGRhdGEgPC0gdGliYmxlKFxuICBpZCA9IGZhY3RvcihyZXAoMTpuLCBlYWNoID0gbSkpLFxuICB0aW1lID0gcmVwKDE6bSwgdGltZXMgPSBuKSxcbiAgQiA9IGFzLnZlY3RvcihCKSxcbiAgWSA9IGFzLnZlY3RvcihZKVxuKVxuXG4jIMOcYmVyYmxpY2tcbnNsaWNlX2hlYWQoXG4gIC5kYXRhID0gUkVfcGFuZWxkYXRhLCBcbiAgbiA9IDEwXG4pIn0=
</script>
</div>
</div>
<p>Für die Anpassung des Random-Effect-Schätzers an den simulierten Datensatz <code>RE_paneldata</code> nutzen wir <code><a href="https://rdrr.io/pkg/plm/man/plm.html">plm::plm()</a></code> mit <code>model = "random"</code>. Mit <code>effect = "individual"</code> legen wir einheiten-spezifische Random Effects fest.<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn17"><p><sup>17</sup>&nbsp;Analog zu Fixed-Effects-Modellen können mit <code>effect = "twoway"</code> einheiten- <em>und</em> zeit-spezifische zufällige Effekte modelliert werden.</p></div></div><div class="cell">
<div>
<div id="webr-20">

</div>
<script type="webr-20-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBSYW5kb20tRWZmZWN0cy1Nb2RlbGwgYW5wYXNzZW5cbnBhbmVsX1JFIDwtIHBsbShcbiAgZm9ybXVsYSA9IFkgfiBCLCBcbiAgZGF0YSA9IFJFX3BhbmVsZGF0YSwgXG4gIGluZGV4ID0gYyhcImlkXCIsIFwidGltZVwiKSxcbiAgZWZmZWN0ID0gXCJpbmRpdmlkdWFsXCIsXG4gIG1vZGVsID0gXCJyYW5kb21cIlxuKVxuXG4jIFN0YXRpc3Rpc2NoZSBadXNhbW1lbmZhc3N1bmdcbnN1bW1hcnkocGFuZWxfUkUpIn0=
</script>
</div>
</div>
<p>Die Schätzung zeigt eine gute Anpassung an die Daten und der geschätzte Behandlungseffekt liegt mit <span class="math inline">\(-0.996\)</span> nahe am wahren Koeffizienten <span class="math inline">\(\beta_1 = -1\)</span>.</p>
<p>Mit <code><a href="https://rdrr.io/pkg/nlme/man/random.effects.html">plm::ranef()</a></code> erhalten wir <em>Differenzen</em> der geschätzten einheiten-spezifischen Effekte vom geschätzten Erwartungswert <code>(Intercept)</code>.</p>
<div class="cell">
<div>
<div id="webr-21">

</div>
<script type="webr-21-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBHZXNjaC4gUmFuZG9tIEVmZmVjdHMgYXVzbGVzZW46XG4jIERpZmZlcmVuemVuIHp1ciBLb25zdGFudGUgKEludGVyY2VwdClcbnJhbmVmKHBhbmVsX1JFKSJ9
</script>
</div>
</div>
<p>Für die grafische Darstellung der Schätzung berechnen wir zunächst mit <code><a href="https://rdrr.io/r/stats/fitted.values.html">fitted()</a></code> die angepassten Werte. Für ein mit <code>plm()</code> geschätztes Random-Effects-Modell werden die individuellen Effekte von <code><a href="https://rdrr.io/r/stats/fitted.values.html">fitted()</a></code> nicht berücksichtigt und müssen daher manuell hinzugefügt werden. Hierfür lesen wir zunächst den geschätzten Erwartungswert der gemeinsamen Verteilung <span class="math inline">\(\widehat{\beta}_0\)</span> aus und addieren anschließend die von <code>ranef()</code> ausgegebenen Differenzen der individuellen Effekte gruppenweise.</p>
<div class="cell">
<div>
<div id="webr-22">

</div>
<script type="webr-22-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBJbnRlcmNlcHRcbmhhdF9iZXRhXzAgPC0gcGFuZWxfUkUkY29lZmZpY2llbnRzWzFdXG5cbiMgR2VzY2guIFJhbmRvbSBFZmZlY3RzIGpld2VpbHMgYmVyw7xja3NpY2h0aWdlblxuUkVfcGFuZWxkYXRhIDwtIFJFX3BhbmVsZGF0YSAlPiVcbiAgbXV0YXRlKFxuICAgIGZpdHRlZF9SRSA9IFxuICAgICAgZml0dGVkKHBhbmVsX1JFKSBcbiAgICArIGhhdF9iZXRhXzAgXG4gICAgKyByZXAocmFuZWYocGFuZWxfUkUpLCBlYWNoID0gbSlcbiAgKVxuXG4jIMOcYmVyYmxpY2tcbnNsaWNlX2hlYWQoXG4gIC5kYXRhID0gUkVfcGFuZWxkYXRhLFxuICBuID0gMTBcbikifQ==
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-23">

</div>
<script type="webr-23-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImxhYmVsIjoiZmlnLXJlcGFuZWxlc3QiLCJlZGl0Ijp0cnVlfSwiY29kZSI6IiMgRGF0ZW4gdW5kIGdlc2Now6R0enRlcyBSRS1Nb2RlbGwgcGxvdHRlblxuZ2dwbG90KFxuICBkYXRhID0gUkVfcGFuZWxkYXRhLCBcbiAgbWFwcGluZyA9IFxuICAgIGFlcyhcbiAgICAgIHggPSBCLCBcbiAgICAgIHkgPSBZLCBcbiAgICAgIGNvbCA9IGlkXG4gICAgKVxuKSArIFxuICBnZW9tX3BvaW50KHNob3cubGVnZW5kID0gRikgK1xuICBnZW9tX2xpbmUoXG4gICAgbWFwcGluZyA9IGFlcyh5ID0gZml0dGVkX1JFLCBncm91cCA9IGlkKSwgXG4gICAgc2hvdy5sZWdlbmQgPSBGXG4gICkgK1xuICBsYWJzKFxuICAgIHRpdGxlID0gXCJgUkVfcGFuZWxkYXRhYCAtLSBSYW5kb20tRWZmZWN0cy1TY2jDpHR6dW5nIGbDvHIgc2ltdWxpZXJ0ZSBEYXRlblwiXG4gICkgK1xuICB0aGVtZV9jb3dwbG90KCkifQ==
</script>
</div>
</div>
<section id="verzerrung-bei-endogenität" class="level3 page-columns page-full" data-number="7.4.1"><h3 data-number="7.4.1" class="anchored" data-anchor-id="verzerrung-bei-endogenität">
<span class="header-section-number">7.4.1</span> Verzerrung bei Endogenität</h3>
<p>Die Random-Effects-Methode findet bei kausalen Analyse in empirischen Anwendungen selten Anwendung, weil die Annahme von Unkorreliertheit mit den erklärenden Regressoren oft unplausibel ist. Falls diese Annahme (wie in den DAGs <a href="#fig-FEDAG1" class="quarto-xref">Abbildung&nbsp;<span>7.1</span></a> und <a href="#fig-FEDAG2" class="quarto-xref">Abbildung&nbsp;<span>7.2</span></a>) verletzt ist, kann Random Effects die ensprechenden Backdoors nicht schließen: Der Random-Effects-Schätzer ist dann verzerrt und inkonsistent, ähnlich wie der naive KQ-Schätzer in einer Pooled Regression. Im nächsten Abschnitt untersuchen wir Konsequenzen dieser Eigenschaft anhand simulierter Daten.</p>
<p>Zur Illustration der Verzerrung des Random-Effects-Schätzers bei Endogenität von erklärenden Variablen verwenden wir erneut den anhand eines Fixed-Effects-DGPs simulierten Datensatz <code>paneldata.csv</code>.</p>
<div class="cell">
<div>
<div id="webr-24">

</div>
<script type="webr-24-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBSYW5kb20tRWZmZWN0cy1TY2jDpHR6dW5nIGbDvHIgYHBhbmVsZGF0YWBcbnBhbmVsX1JFIDwtIHBsbShcbiAgZm9ybXVsYSA9IFkgfiBYLCBcbiAgZWZmZWN0ID0gXCJpbmRpdmlkdWFsXCIsXG4gIG1vZGVsID0gXCJyYW5kb21cIixcbiAgaW5kZXggPSBjKFwiSURcIiwgXCJ0aW1lXCIpLCAgXG4gIGRhdGEgPSBwYW5lbGRhdGFcbilcblxuIyBTdGF0aXN0aXNjaGUgWnVzYW1tZW5mYXNzdW5nXG5zdW1tYXJ5KHBhbmVsX1JFKSJ9
</script>
</div>
</div>
<p>Offenbar weicht der Random-Effects-Schätzer des Effects von <span class="math inline">\(X\)</span> auf <span class="math inline">\(Y\)</span> deutlich vom wahren Parameter <span class="math inline">\(\beta_1 = -1\)</span> ab. Diese Abweichung ist auf die Endogenität von <span class="math inline">\(X\)</span> zurückzuführen.</p>
<p>Die nächste Grafik vergleicht die Schätzungen des Behandlungseffekts für den Datensatz <code>paneldata.csv</code> mit Pooling (schwarze Linie), Fixed Effects (farbige Linien) und Random Effects (gestrichelte schwarze Linie). Vorab erweitern wir <code>paneldata</code> um die angepassten Werte für die Fixed- und die Random-Effects-Schätzung in <code>panel_FE</code> und <code>panel_RE</code>.<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn18"><p><sup>18</sup>&nbsp;Für bessere Lesbarkeit erzeugen wir hier mit <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> <em>eine</em> Regressionsgerade, deren Achsenabschnitt dem geschätzten Erwartungswert der Random-Effects-Verteilung entspricht.</p></div></div><div class="cell">
<div>
<div id="webr-25">

</div>
<script type="webr-25-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoicGFuZWxkYXRhIDwtIHBhbmVsZGF0YSAlPiUgXG4gIG11dGF0ZShcbiAgICAjIFZvcmhlcmdlc2FndGUgV2VydGUgZsO8ciBGRS1TY2jDpHR6dW5nXG4gICAgeWhhdF9GRSA9IGZpdHRlZChwYW5lbF9GRSksXG4gICAgIyBWb3JoZXJnZXNhZ3RlIFdlcnRlIGbDvHIgUkUtU2Now6R0enVuZ1xuICAgIHloYXRfUkUgPSBwcmVkaWN0KHBhbmVsX1JFKVxuICApIn0=
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-26">

</div>
<script type="webr-26-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImxhYmVsIjoiZmlnLXBhbmVsY29tcGFyaXNvbiIsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBHcmFmaWsgZsO8ciBWZXJnbGVpY2hcbmdncGxvdChcbiAgZGF0YSA9IHBhbmVsZGF0YSxcbiAgbWFwcGluZyA9IGFlcyh4ID0gWCwgeSA9IFkpXG4pICtcbiAgIyBCZW9hY2h0dW5nZW5cbiAgZ2VvbV9wb2ludChcbiAgICBtYXBwaW5nID0gYWVzKGNvbG9yID0gY29sKSwgXG4gICAgc2hvdy5sZWdlbmQgPSBGXG4gICkgK1xuICAjIFBvb2xpbmdcbiAgZ2VvbV9zbW9vdGgoXG4gICAgbWV0aG9kID0gXCJsbVwiLCBcbiAgICBzZSA9IEYsXG4gICAgY29sID0gXCJibGFja1wiXG4gICkgK1xuICAjIEZpeGVkIEVmZmVjdHNcbiAgZ2VvbV9saW5lKFxuICAgIG1hcHBpbmcgPSBhZXMoXG4gICAgICB5ID0geWhhdF9GRSxcbiAgICAgIGdyb3VwID0gSUQsXG4gICAgICBjb2wgPSBjb2xcbiAgICApLCBcbiAgICBzaG93LmxlZ2VuZCA9IEZcbiAgKSArXG4gICMgUmFuZG9tIEVmZmVjdHNcbiAgZ2VvbV9saW5lKFxuICAgIG1hcHBpbmcgPSBhZXMoeSA9IHloYXRfUkUpLCBcbiAgICBsdHkgPSBcImRhc2hlZFwiLCBcbiAgICBzaG93LmxlZ2VuZCA9IEZcbiAgKSArXG4gIGxhYnMoXG4gICAgdGl0bGUgPSBcImBwYW5lbGRhdGVuLmNzdmAgLS0gVmVyZ2xlaWNoIHZvbiBTY2jDpHR6ZXJuIGJlaSBFaW5oZWl0ZW4gbWl0IGVuZG9nZW5lZW4gRWZmZWt0ZW5cIlxuICApICsgXG4gIHRoZW1lX2Nvd3Bsb3QoKSJ9
</script>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Facts zu Random-Effects-Regression
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Random-Effects-Ansätze basieren auf der Annahme, dass (unbeobachtbare) Heterogenitäten <em>zufällig</em> sind. Wir nehmen an, dass die unbeobachteten Heterogenitäten <em>nicht</em> mit den erklärenden Variablen korreliert sind. Letzteres führt zu inkonsistenten Schätzern!</p></li>
<li><p>Iteratives GLS oder MLE ermöglichen eine effizientere Schätzung des Random-Effects-Modells als Pooling oder Fixed-Effects-Schätzer, da sowohl die Variation innerhalb als auch zwischen den Beoabchtungseinheiten Einheiten genutzt wird.</p></li>
<li><p>In Random-Effects-Modellen können die Effekte zeitlich konstanter Variablen geschätzt werden, da die einheiten-spezifischen Effekte als zufällig betrachtet werden.</p></li>
<li><p>Unter den skizzierten Annahmen sind Random-Effects-Schätzer asymptotisch normalverteilt. Für Inferenz-Statistiken sollten cluster-robuste Standardfehler verwendet werden, vgl. <a href="#sec-crse" class="quarto-xref"><span>Kapitel 7.5</span></a>.</p></li>
<li><p>Random-Effects-Modelle können in R mit den Paketen <code>plm</code> geschätzt werden.</p></li>
</ul>
</div>
</div>
<hr>
<p><strong>Interaktive Illustration von Panel-Schätzern</strong></p>
<p>Die nachfolgende interaktive Illustration erlaubt einen Vergleich der bisher geschätzten und geplotteten Regressionsfunktionen für <code>paneldata.csv</code> mit dem wahren DGP (<em>Show truth</em>).</p>
<div class="cell page-columns page-full" data-layout-align="center">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/panelcomp_qr.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="64"></p>
</figure>
</div>
</div></div></div>
<iframe width="100%" height="642" frameborder="0" class="obs-soft-box-shadow" src="https://observablehq.com/embed/@mca91/panelcomp?cells=viewof+showgroups%2Cviewof+showdgp%2Cviewof+regtype%2Ctheplot">
</iframe>
</section></section><section id="sec-crse" class="level2 page-columns page-full" data-number="7.5"><h2 data-number="7.5" class="anchored" data-anchor-id="sec-crse">
<span class="header-section-number">7.5</span> Cluster-robuste Standardfehler</h2>
<p>Aufgrund der Zeit-Dimension bei Panel-Datensätzen ist es in vielen empirischen Anwendungen plausibel, dass die Fehlerterme der bisher betrachteten Modelle nicht unabhängig sind: Beobachtungen einer Einheit (auch Cluster genannt), wie z.B. Individuen, Firmen oder geografische Regionen sind oftmals über die Zeit oft korreliert. Solche Abhängigkeit zwischen dem Fehlern führen zu verzerrten Standardfehlern, wenn diese anhand von Formeln berechnet werden, die unter der Annahme von u.i.v. Fehlertermen hergeleitet wurden: Standardfehler für Schätzer, die u.i.v. Fehler annehmen, können die tatsächliche Varianz unterschätzen, was zu falsch-positiven<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a> Ergebnissen bei Signifikanztests für die Modell-Koeffizienten und damit zu ungültiger Inferenz hinsichtlich kausaler Effekte führen kann.</p>
<div class="no-row-height column-margin column-container"><div id="fn19"><p><sup>19</sup>&nbsp;Ein falsch-positiver Test zeigt einen “positiven” Zustand (hier ein von null verschiedener Koeffizient) an, obwohl dieser tatsächlich nicht vorliegt.</p></div></div><p>Sogenannte <em>cluster-robuste Standardfehler</em> korrigieren für zeitliche Korrelation und Heteroskedastizität und ermöglichen konservative Schätzungen hinsichtlich der Variabilität von Koeffizientenschätzern. <code><a href="https://lrberge.github.io/fixest/reference/feols.html">fixest::feols()</a></code> berechnet standardmäßig cluster-robuste Standardfehler, wenn Einheiten- oder Perioden-Variablen innerhalb der Formel (bspw. <code>Y ~ X | ID + time</code>) oder separat im Argument <code>index</code> (etwa <code>panel.id = ~ ID + time</code>) angegeben werden. Für die Identifikation der Cluster wird stets die zuerst genannte Variable (hier <code>ID</code>) herangezogen. Details der zu verwendenen Standardfehler können über das Argument <code>vcov</code> festgelegt werden, siehe <code>?feols</code> für weitere Hinweise hierzu.</p>
<p>Für den LSDV-Schätzer in <a href="#sec-withldsv" class="quarto-xref"><span>Kapitel 7.3.1</span></a> erreichen wir clustering nach <code>ID</code> mit <code>vcov = ~ ID</code>.</p>
<div class="cell">
<div>
<div id="webr-27">

</div>
<script type="webr-27-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBMU0RWIG1pdCBjbHVzdGVyLXJvYnVzdGVuIFN0YW5kYXJkZmVobGVyblxucGFuZWxfTFNEVl9jbHVzdCA8LSBmZW9scyhcbiAgZm1sID0gWSB+IFggKyBmYWN0b3IoSUQpLCAgXG4gIGRhdGEgPSBwYW5lbGRhdGEsXG4gIHZjb3YgPSB+IElEXG4pXG5cbnBhbmVsX0xTRFZfY2x1c3QifQ==
</script>
</div>
</div>
<p>Beachte, dass die Standradfehler der meisten Koeffizienten in <code>panel_LSDV_clust</code> etwas größer sind, als für das in <a href="#sec-withldsv" class="quarto-xref"><span>Kapitel 7.3.1</span></a> geschätzte Modell <code>panel_LSDV</code>.</p>
<p>Für Schätzungen mit<code><a href="https://rdrr.io/pkg/plm/man/plm.html">plm::plm()</a></code> werden von <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> grundsätzlich Standardfehler unter Annahme homoskedastischer u.i.v. Fehler berechnet. Für cluster-robuste Standardfehler muss ein entsprechender Schätzer im Argument <code>vcov = vcovHC()</code> übergeben werden. Mit <code>cluster = "group"</code> wird Korrelation innerhalb der Beobachtungseinheiten über die Zeit berücksichtigt.<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a> Für die Random-Effects-Schätzung in <code>panel_RE</code> erreichen wir dies wiefolgt.</p>
<div class="no-row-height column-margin column-container"><div id="fn20"><p><sup>20</sup>&nbsp;Clustering für Zeitperioden erfolgt mit <code>group = time</code>.</p></div></div><div class="cell">
<div>
<div id="webr-28">

</div>
<script type="webr-28-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBadXNhbW1lbmZhc3N1bmcgUkUtU2Now6R0enVuZyBtaXQgY2x1c3RlcmVkLVNFc1xuc3VtbWFyeShcbiAgb2JqZWN0ID0gcGFuZWxfUkUsIFxuICB2Y292ID0gdmNvdkhDKFxuICAgIHggPSBwYW5lbF9SRSwgXG4gICAgdHlwZSA9IFwiSEMxXCIsIFxuICAgIGNsdXN0ZXIgPSBcImdyb3VwXCJcbiAgKVxuKSJ9
</script>
</div>
</div>
</section><section id="dynamische-modelle" class="level2 page-columns page-full" data-number="7.6"><h2 data-number="7.6" class="anchored" data-anchor-id="dynamische-modelle">
<span class="header-section-number">7.6</span> <i class="fa-solid fa-stairs" aria-label="stairs"></i> Dynamische Modelle</h2>
<p>Viele ökonomische und soziale Prozesse sind autoregressiv: Der Zustand einer Variable in der Vergangenheit beeinflusst ihren aktuellen Zustand. Bei der Modellierung von Outcome-Variablen in Panel-Designs kann es notwendig sein, diese Abhängigkeit zu berücksichtigen, um die Identifizierbarkeit kausaler Effekte zu gewährleisten. Dynamische Panelmodelle verwenden hierzu vergangene Werte (lags) der Outcome-Variable, <span class="math inline">\(Y_{it-j}\)</span> mit <span class="math inline">\(j&gt;0\)</span> als (zusätzliche) Regressoren. Ein einfaches dynamisches Panelmodell ist <span class="math display">\[\begin{align}
  Y_{it} = \rho Y_{it-1} + \beta_1 B_{it} + \epsilon_{it}, \label{eq:dynpanel}
\end{align}\]</span> wobei <span class="math inline">\(Y_{it-1}\)</span> der Wert von <span class="math inline">\(Y_{it}\)</span> in der Periode <span class="math inline">\(t-1\)</span> ist, <span class="math inline">\(0\neq\lvert\rho\rvert&lt;1\)</span>, und <span class="math inline">\(\epsilon_{i,t}\)</span> ein u.i.v. Fehlerterm ist. In diesem Modell ist <span class="math inline">\(Y_{it-1}\)</span> <em>kausal</em> für <span class="math inline">\(Y_{it}\)</span>.</p>
<p>Die Verwendung dynamischer Modelle hat folgende Motivationen:</p>
<ul>
<li>
<strong>Präzisere Schätzung</strong>: Berücksichtigen von gelaggten abhängigen Variablen ermöglicht die Modellierung einer zeitabhängigen Dynamik von <span class="math inline">\(Y_{it}\)</span>. Die Autokorrelation und damit die Varianz der Fehlerterme kann reduziert werden, da ein Teil dieser zeitlichen Abhängigkeiten direkt modelliert wird. Dies kann die Präzision der Schätzung des kausalen Effekts <span class="math inline">\(\beta_1\)</span> verbessern, vgl. <a href="#fig-LDVOKa" class="quarto-xref">Abbildung&nbsp;<span>7.4</span></a>.</li>
</ul>
<div class="cell page-columns page-full" data-fig-width="3" data-fig-height="3" data-layout-align="default">
<div class="cell-output-display page-columns page-full">
<div id="fig-LDVOKa" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-LDVOKa-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<svg width="288" height="288" viewbox="0.00 0.00 241.20 151.20" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(21.6 129.6)"><title>LDVOK2</title>
<polygon fill="white" stroke="transparent" points="-21.6,21.6 -21.6,-129.6 219.6,-129.6 219.6,21.6 -21.6,21.6"></polygon><!-- Bt --><g id="node1" class="node"><title>Bt</title>
<ellipse fill="none" stroke="black" cx="27" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="20.39" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="29.72" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t</text></g><!-- Yt --><g id="node2" class="node"><title>Yt</title>
<ellipse fill="none" stroke="black" cx="171" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="164" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="174.11" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t</text></g><!-- Bt&#45;&gt;Yt --><g id="edge1" class="edge"><title>Bt-&gt;Yt</title>
<path fill="none" stroke="black" d="M54.09,-18C76.47,-18 108.5,-18 133.37,-18"></path><polygon fill="black" stroke="black" points="133.55,-21.5 143.55,-18 133.55,-14.5 133.55,-21.5"></polygon></g><!-- Ytm1 --><g id="node3" class="node"><title>Ytm1</title>
<ellipse fill="none" stroke="black" cx="99" cy="-90" rx="28.98" ry="18"></ellipse><text text-anchor="start" x="86.17" y="-86.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="96.28" y="-86.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t-1</text></g><!-- Ytm1&#45;&gt;Yt --><g id="edge2" class="edge"><title>Ytm1-&gt;Yt</title>
<path fill="none" stroke="black" d="M114.27,-74.73C124.2,-64.8 137.32,-51.68 148.44,-40.56"></path><polygon fill="black" stroke="black" points="151.16,-42.79 155.75,-33.25 146.21,-37.84 151.16,-42.79"></polygon></g></g></svg>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-LDVOKa-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;7.4: Kontrolle für vergangenen Wert verbessert Präzision
</figcaption></figure>
</div>
</div>
</div>
<ul>
<li>
<strong>Vermeidung von Endogenität</strong>: Nichtberücksichtigen von <em>relevanten</em> gelaggten abhängigen Variablen führt zu verzerrten und inkonsistenten Schätzern, vgl. <a href="#fig-LDVOKb" class="quarto-xref">Abbildung&nbsp;<span>7.5</span></a>.</li>
</ul>
<div class="cell page-columns page-full" data-fig-width="3" data-fig-height="3" data-layout-align="center">
<div class="cell-output-display page-columns page-full">
<div id="fig-LDVOKb" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-LDVOKb-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<svg width="288" height="288" viewbox="0.00 0.00 241.20 223.20" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(21.6 201.6)"><title>LDVOK1</title>
<polygon fill="white" stroke="transparent" points="-21.6,21.6 -21.6,-201.6 219.6,-201.6 219.6,21.6 -21.6,21.6"></polygon><!-- Bt --><g id="node1" class="node"><title>Bt</title>
<ellipse fill="none" stroke="black" cx="27" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="20.39" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="29.72" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t</text></g><!-- Yt --><g id="node3" class="node"><title>Yt</title>
<ellipse fill="none" stroke="black" cx="171" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="164" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="174.11" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t</text></g><!-- Bt&#45;&gt;Yt --><g id="edge3" class="edge"><title>Bt-&gt;Yt</title>
<path fill="none" stroke="black" d="M54.09,-18C76.47,-18 108.5,-18 133.37,-18"></path><polygon fill="black" stroke="black" points="133.55,-21.5 143.55,-18 133.55,-14.5 133.55,-21.5"></polygon></g><!-- V --><g id="node2" class="node"><title>V</title>
<ellipse fill="none" stroke="gray" cx="27" cy="-162" rx="27" ry="18"></ellipse><text text-anchor="middle" x="27" y="-157.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00" fill="gray">V</text></g><!-- V&#45;&gt;Bt --><g id="edge1" class="edge"><title>V-&gt;Bt</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M27,-143.76C27,-119.2 27,-75.25 27,-46.35"></path><polygon fill="gray" stroke="gray" points="30.5,-46.09 27,-36.09 23.5,-46.09 30.5,-46.09"></polygon></g><!-- Ytm1 --><g id="node4" class="node"><title>Ytm1</title>
<ellipse fill="none" stroke="black" cx="99" cy="-90" rx="28.98" ry="18"></ellipse><text text-anchor="start" x="86.17" y="-86.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="96.28" y="-86.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t-1</text></g><!-- V&#45;&gt;Ytm1 --><g id="edge2" class="edge"><title>V-&gt;Ytm1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M42.27,-146.73C52.06,-136.94 64.96,-124.04 75.98,-113.02"></path><polygon fill="gray" stroke="gray" points="78.66,-115.29 83.25,-105.75 73.71,-110.34 78.66,-115.29"></polygon></g><!-- Ytm1&#45;&gt;Yt --><g id="edge4" class="edge"><title>Ytm1-&gt;Yt</title>
<path fill="none" stroke="black" d="M114.27,-74.73C124.2,-64.8 137.32,-51.68 148.44,-40.56"></path><polygon fill="black" stroke="black" points="151.16,-42.79 155.75,-33.25 146.21,-37.84 151.16,-42.79"></polygon></g></g></svg>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-LDVOKb-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;7.5: Kontrolle für <span class="math inline">\(y_{t-1}\)</span> schließt Backdoor-Pfad
</figcaption></figure>
</div>
</div>
</div>
<p>Die Entscheidung, ob Lags der Outcome-Variable als Regressoren aufgenommen werden, sollte sorgfältig und, falls möglich, unter Berücksichtigung von ökonomischer Theorie hinsichtlich der zeitlichen Dynamik von <span class="math inline">\(Y_{it}\)</span> erfolgen. Beobachtete (Auto)Korrelation von <span class="math inline">\(Y_{it}\)</span> und <span class="math inline">\(Y_{it-1}\)</span> muss nicht ausschließlich durch einen (kausalen) autoregressiven Zusammenhang verursacht werden. Ein DGP bei dem unsere Regression <em>nicht</em> für <span class="math inline">\(Y_{it-1}\)</span> kontrollieren sollte, ist in <a href="#fig-LDVnotOK" class="quarto-xref">Abbildung&nbsp;<span>7.6</span></a> gezeigt.</p>
<div class="cell page-columns page-full" data-fig-width="3" data-fig-height="3" data-layout-align="center">
<div class="cell-output-display page-columns page-full">
<div id="fig-LDVnotOK" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-LDVnotOK-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<svg width="288" height="288" viewbox="0.00 0.00 241.20 223.20" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(21.6 201.6)"><title>LDVnotOK</title>
<polygon fill="white" stroke="transparent" points="-21.6,21.6 -21.6,-201.6 219.6,-201.6 219.6,21.6 -21.6,21.6"></polygon><!-- Bt --><g id="node1" class="node"><title>Bt</title>
<ellipse fill="none" stroke="black" cx="27" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="20.39" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">B</text><text text-anchor="start" x="29.72" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t</text></g><!-- Yt --><g id="node4" class="node"><title>Yt</title>
<ellipse fill="none" stroke="black" cx="171" cy="-18" rx="27" ry="18"></ellipse><text text-anchor="start" x="164" y="-14.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="174.11" y="-14.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t</text></g><!-- Bt&#45;&gt;Yt --><g id="edge5" class="edge"><title>Bt-&gt;Yt</title>
<path fill="none" stroke="black" d="M54.09,-18C76.47,-18 108.5,-18 133.37,-18"></path><polygon fill="black" stroke="black" points="133.55,-21.5 143.55,-18 133.55,-14.5 133.55,-21.5"></polygon></g><!-- V --><g id="node2" class="node"><title>V</title>
<ellipse fill="none" stroke="gray" cx="27" cy="-162" rx="27" ry="18"></ellipse><text text-anchor="middle" x="27" y="-157.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00" fill="gray">V</text></g><!-- V&#45;&gt;Bt --><g id="edge1" class="edge"><title>V-&gt;Bt</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M27,-143.76C27,-119.2 27,-75.25 27,-46.35"></path><polygon fill="gray" stroke="gray" points="30.5,-46.09 27,-36.09 23.5,-46.09 30.5,-46.09"></polygon></g><!-- Ytm1 --><g id="node5" class="node"><title>Ytm1</title>
<ellipse fill="none" stroke="black" cx="99" cy="-90" rx="28.98" ry="18"></ellipse><text text-anchor="start" x="86.17" y="-86.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Y</text><text text-anchor="start" x="96.28" y="-86.8" font-family="Helvetica,Arial,sans-serif" baseline-shift="sub" font-size="14.00">t-1</text></g><!-- V&#45;&gt;Ytm1 --><g id="edge2" class="edge"><title>V-&gt;Ytm1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M42.27,-146.73C52.06,-136.94 64.96,-124.04 75.98,-113.02"></path><polygon fill="gray" stroke="gray" points="78.66,-115.29 83.25,-105.75 73.71,-110.34 78.66,-115.29"></polygon></g><!-- U --><g id="node3" class="node"><title>U</title>
<ellipse fill="none" stroke="gray" cx="171" cy="-162" rx="27" ry="18"></ellipse><text text-anchor="middle" x="171" y="-157.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00" fill="gray">U</text></g><!-- U&#45;&gt;Yt --><g id="edge4" class="edge"><title>U-&gt;Yt</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M171,-143.76C171,-119.2 171,-75.25 171,-46.35"></path><polygon fill="gray" stroke="gray" points="174.5,-46.09 171,-36.09 167.5,-46.09 174.5,-46.09"></polygon></g><!-- U&#45;&gt;Ytm1 --><g id="edge3" class="edge"><title>U-&gt;Ytm1</title>
<path fill="none" stroke="gray" stroke-dasharray="5,2" d="M155.73,-146.73C145.94,-136.94 133.04,-124.04 122.02,-113.02"></path><polygon fill="gray" stroke="gray" points="124.29,-110.34 114.75,-105.75 119.34,-115.29 124.29,-110.34"></polygon></g></g></svg>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-LDVnotOK-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;7.6: Kontrolle für <span class="math inline">\(y_{t-1}\)</span> <em>öffnet</em> Backdoor-Pfad
</figcaption></figure>
</div>
</div>
</div>
<p>Hier ist <span class="math inline">\(Y_{it-1}\)</span> nicht kausal für <span class="math inline">\(Y_{it}\)</span> und ein <em>Collider</em>. Kontrollieren für <span class="math inline">\(Y_{it-1}\)</span> öffnet also den Backdoor-Pfad</p>
<span class="math display">\[\begin{align*}
  B_{it} \leftarrow V \rightarrow Y_{it-1} \leftarrow U \rightarrow Y_{it}.
\end{align*}\]</span>
<p>Eine ähnliche Problematik besteht bei der Schätzung dynamischer Panel-Modelle mit mit Fixed- oder Random-Effects-Ansätzen. Wir erläutern dies näher in <a href="#sec-vidp" class="quarto-xref"><span>Kapitel 7.6.1</span></a>.</p>
<section id="sec-vidp" class="level3 page-columns page-full" data-number="7.6.1"><h3 data-number="7.6.1" class="anchored" data-anchor-id="sec-vidp">
<span class="header-section-number">7.6.1</span> Verzerrung in dynamischen Modellen</h3>
<p>Ein zentrales Problem bei der Schätzung dynamischer Panelmodelle ist der sogenannte <em>Nickell-Bias</em>. Dieser tritt auf, wenn die Within-Transformation in Anwesenheit von gelagten abhängigen Variablen verwendet wird. Die Mittelwert-Differenzen eliminieren zwar die zeit-invarianten Effekte, führt aber zu Korrelation zwischen den gelagten abhängigen Variablen und den transformierten Fehlertermen: Der Nickell-Bias entsteht bei der Within-Transformation, weil der Regressor (<span class="math inline">\(Y_{i,t-1} - \overline{Y}_{i,-1}\)</span>)<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a> mit dem transformierten Fehlerterm (<span class="math inline">\(\epsilon_{it} - \overline{\epsilon}_i\)</span>) korreliert ist, was zu einer verzerrten Schätzung führt.</p>
<div class="no-row-height column-margin column-container"><div id="fn21"><p><sup>21</sup>&nbsp;Hier ist <span class="math inline">\(\overline{Y}_{i,-1} = \frac{1}{T-1}\sum_{t=2}^T y_{it-1}\)</span>.</p></div><div id="fn22"><p><sup>22</sup>&nbsp;Dies ist problematisch für Mikro-Studien: Die Querschnittsdimension des Panels kann oft “hinreichend” groß gewählt werden. Die Zeit-Dimension ist aus natürlichen Gegebenheiten jedoch oft klein.</p></div></div><p><span class="citation" data-cites="Nickell1981">Nickell (<a href="Literatur.html#ref-Nickell1981" role="doc-biblioref">1981</a>)</span> zeigt, dass diese Verzerrung des Within-Schätzers <span class="math inline">\(\widehat{\rho}^\textup{Within}\)</span> nicht verschwindet, wenn die Anzahl der Beobachtungseinheiten (<span class="math inline">\(n\)</span>) divergiert, solange die Zeitdimension (<span class="math inline">\(T\)</span>) endlich ist.<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup>22</sup></a> Der Nickell-Bias ist besonders bei kurzen Panelen (kleines <span class="math inline">\(T\)</span>) problematisch. Es ist <span class="math display">\[\begin{align*}
  \widehat{\rho}^\textup{Within} \approx \rho - \frac{1 + \rho}{T-1},
\end{align*}\]</span> d.h. die Verzerrung beträgt ungefähr <span class="math inline">\(-\frac{1+\rho}{T-1}\)</span>.</p>
<p>Hinzufügen von <span class="math inline">\(Y_{it-1}\)</span> als Regressor in Fixed- und Random-Effects-Modellen ist jenseits der verzerrten Schätzung von <span class="math inline">\(\rho\)</span> problematisch, wenn <span class="math inline">\(Y_{it-1}\)</span> mit <span class="math inline">\(B_{it}\)</span> korreliert ist. Kontrollieren für <span class="math inline">\(Y_{it-1}\)</span> öffnet dann Backdoor-Pfade, die wir mit FE- oder RE-Ansätzen schließen wollen. In sämtlichen dynamischen Varianten der Fixed- und Random-Effects-Modelle sind die in diesem Kapitel behandelten Schätzer eines kausalen Effekts <span class="math inline">\(\beta_1 \neq 0\)</span> von <span class="math inline">\(B_{it}\)</span> auf <span class="math inline">\(Y_{it}\)</span> daher verzerrt.</p>
<p>Der Arellano-Bond-Schätzer <span class="citation" data-cites="ArellanoBond1991">(<a href="Literatur.html#ref-ArellanoBond1991" role="doc-biblioref">Arellano und Bond 1991</a>)</span> ist eine Methode, für diese Form von Endogenität in dynamischen Panel-Modellen korrigiert. Das Verfahren betrachtet die Regression in Differenzen zur Korrektur für Heterogenitäten zwischen den Einheiten und schätzt die Koeffizienten anhand der generalisierten Momentenmethode (<a href="https://en.wikipedia.org/wiki/Generalized_method_of_moments">GMM</a>). Hierbei werden vergangene Werte von <span class="math inline">\(Y_{it}\)</span> als Instrumente für endogene Differenzen von <span class="math inline">\(Y_{it}\)</span> genutzt. Siehe <span class="citation" data-cites="Wooldrige2010">Wooldridge (<a href="Literatur.html#ref-Wooldrige2010" role="doc-biblioref">2010</a>)</span> für Beispiele.</p>
<p>Analog zu Anwendungen mit Querschnittsdaten können die hier betrachteten Panel-Schätzer Endogenitäten aufgrund simultaner Kausalität nicht beheben. Zur Korrektur für simultante Kausalität können Panel-Methoden in Kombination mit einer Schätzstrategie basierend auf Instrument-Variablen hilfreich sein. Wir betrachten solche Schätzer in den empirischen Beispielen in <a href="IV.html" class="quarto-xref"><span>Kapitel 8</span></a>.</p>
</section></section><section id="case-study-einkommen-und-demokratie" class="level2 page-columns page-full" data-number="7.7"><h2 data-number="7.7" class="anchored" data-anchor-id="case-study-einkommen-und-demokratie">
<span class="header-section-number">7.7</span> Case Study: Einkommen und Demokratie</h2>
<p>Eine Vielzahl polit-ökonomischer Standardwerke und Studien <span class="citation" data-cites="Dahl1971 Huntington1991 Rueschemeyer1992">(bspw. <a href="Literatur.html#ref-Dahl1971" role="doc-biblioref">Dahl 1971</a>; <a href="Literatur.html#ref-Huntington1991" role="doc-biblioref">Huntington 1991</a>; <a href="Literatur.html#ref-Rueschemeyer1992" role="doc-biblioref">Rueschemeyer, Stephens, und Stephens 1992</a>)</span> liefert vermeindliche Belege für einen zentralen Grundsatz der <a href="https://de.wikipedia.org/wiki/Modernisierungstheorie">Modernisierungstheorie</a>: Ein höheres Pro-Kopf-Einkommen erhöht die Nachfrage der Bevölkerung nach politischer Freiheit und demokratischen Insitutionen. <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span> argumentieren, dass der in derartigen länderübergreifenden Analysen mit Pooling häufig als positiv geschätzte Zusammenhang zwischen Einkommen und Demokratisierung nicht kausal interpetiert werden sollte. Ein Grund hierfür ist, dass (unbeobachtbare) ausgelassene länder-spezifische Faktoren, die sowohl die ökonomische Entwicklung als auch die Stärke demokratischer Institutionen beeinflussen, wahrscheinlich sind. Um diese mögliche Ursache für Endogenität des Einkommens im Modell <span class="math display">\[\begin{align}
  \text{Demokratisierung}_{it} = \beta_0 + \beta_1\,\text{PK-Einkommen}_{it-1} + \epsilon_{it}
\end{align}\]</span> zu adressieren, nutzen <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span> Panel-Modelle und Schätzer, die insbesondere für länderspezifische zeit-invariante Einflüsse kontrollieren.</p>
<p>Das Kernergebnis von <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span> ist, dass es <em>keinen</em> kausalen Zusammenhang zwischen dem Einkommen (Wirtschaftswachstum) und der Demokratisierung gibt. Die Autoren zeigen, dass historische und geografische Faktoren, die sowohl das Einkommen als auch die politischen Institutionen beeinflussen, den vermeintlichen Zusammenhang erklären können.</p>
<p>Für die nachfolgenden Code-Beispiele nutzen wir einen Auszug des Datensatzes aus dem Replikationspaket zu <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span>, siehe <span class="citation" data-cites="Acemogluetal2008data">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008data" role="doc-biblioref">2008b</a>)</span>.</p>
<p>Wir lesen zunächst den Datensatz <code>acemogluetal2008.csv</code> ein.</p>
<div class="cell">
<div>
<div id="webr-29">

</div>
<script type="webr-29-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiZGVtaW5jIDwtIHJlYWRfY3N2KFwiZGF0YXNldHMvYWNlbW9nbHVldGFsMjAwOC5jc3ZcIilcbmdsaW1wc2UoZGVtaW5jKSJ9
</script>
</div>
</div>
<p><a href="#tbl-deminc" class="quarto-xref">Tabelle&nbsp;<span>7.1</span></a> enthält Beschreibungen der in <code>deminc</code> verfügbaren Variablen.</p>
<div id="tbl-deminc" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><div aria-describedby="tbl-deminc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;"><strong>Variable</strong></th>
<th style="text-align: center;"><strong>Beschreibung</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>country</strong></td>
<td style="text-align: center;">Land</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>code</strong></td>
<td style="text-align: center;">Länder-Code</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>fhpolrigaug</strong></td>
<td style="text-align: center;">Freedom House Political Rights Index (FHPRI)</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>lrgdpch</strong></td>
<td style="text-align: center;">Log(Reales-Pro-Kopf-Einkommen)</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>polity4</strong></td>
<td style="text-align: center;">Polity Composite Democracy Index</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>sample</strong></td>
<td style="text-align: center;">Zugehörigkeit zur verwendeten Stichprobe (Indikator)</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>year</strong></td>
<td style="text-align: center;">Jahr</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>year_numeric</strong></td>
<td style="text-align: center;">ID-Variable f.&nbsp;Jahr</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-tbl margin-caption" id="tbl-deminc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;7.1: <code>deminc</code>: Demokratisierung und Einkommen <span class="citation" data-cites="Acemogluetal2008">(<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">Acemoglu u.&nbsp;a. 2008a</a>)</span>
</figcaption></figure>
</div>
<p>Wie der output von <code>glimpse(deminc)</code> zeigt, enthält der Datensatz in allen Modell-Variablen <code>NA</code>-Einträge und ist damit nicht ‘balanced’, da die entsprechenden Beobachtungen nicht bei der Schätzung berücksichigt werden können.</p>
<div class="cell">
<div>
<div id="webr-30">

</div>
<script type="webr-30-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBCZXJlaW5pZ3RlciBEYXRlbnNhdHogaXN0IG5pY2h0ICdiYWxhbmNlZCdcbmlzLnBiYWxhbmNlZChcbiAgeCA9IGRlbWluYyAlPiUgXG4gICAgZHJvcF9uYSgpLCBcbiAgaW5kZXggPSBjKFwiY291bnRyeVwiLCBcInllYXJcIikgICBcbikifQ==
</script>
</div>
</div>
<p>Wir vernachlässigen zunächst die Panel-Struktur der Daten und regressieren FHPRI auf das Pro-Kopf-Einkommen für die in <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span> verwendete Stichprobe mit Beobachtungen in 5-Jahresschritten von 1955 bis 2000 (Beobachtungen mit <code>sample == 1</code>).</p>
<div class="cell">
<div>
<div id="webr-31">

</div>
<script type="webr-31-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShkcGx5cilcbmxpYnJhcnkoZml4ZXN0KVxuXG4jIFBvb2xlZCBSZWdyZXNzaW9uXG5kZW1pbmNfcG9vbGluZzEgPC0gZmVvbHMoXG4gIGZtbCA9IGZocG9scmlnYXVnIH4gbHJnZHBjaCxcbiAgZGF0YSA9IGRlbWluYyAlPiUgXG4gICAgZmlsdGVyKHNhbXBsZSA9PSAxKSwgXG4pXG5cbnN1bW1hcnkoZGVtaW5jX3Bvb2xpbmcxKSJ9
</script>
</div>
</div>
<p>Dieser naive Ansatz ingoriert konstante Heterogenitäten zwischen den Ländern und einen (plausiblen) zeitlich verzögerten Einfluss ökonomisch günstiger Bedingung auf die Demokratisierung. Der geschätzte Koeffizient von <code>lrgdpch</code> zeigt einen positiven Zusammenhang an und ist signifikant.</p>
<p>Die Regression von FHPRI auf das Einkommen in <span class="math inline">\(t-1\)</span> (<code>l(lrgdpch)</code>) führt zu ähnlichen Schätzungen der Koeffizienten.<a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a> Dies ist plausibel unter der Hypothese, dass es ausgelassende Faktoren gibt, welche die Demokratisierung und das Pro-Kopf-Einkommen in sämtlichen Perioden beeinflussion.</p>
<div class="no-row-height column-margin column-container"><div id="fn23"><p><sup>23</sup>&nbsp;Die Verwendung von Lags mit <code>l()</code> in <code>fml</code> erfordert die Angabe von <code>panel.id = ~ country + year</code>, damit die Beobachtungen zugeordnet werden können.</p></div></div><div class="cell">
<div>
<div id="webr-32">

</div>
<script type="webr-32-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBQb29saW5nIG1pdCBFaW5rb21tZW1fe3QtMX1cbmRlbWluY19wb29saW5nX2xhZyA8LSBmZW9scyhcbiAgZm1sID0gZmhwb2xyaWdhdWcgfiBsKGxyZ2RwY2gpLFxuICBwYW5lbC5pZCA9IH4gY291bnRyeSArIHllYXIsXG4gIGRhdGEgPSBkZW1pbmMgJT4lIFxuICAgIGZpbHRlcihzYW1wbGUgPT0gMSksIFxuKVxuXG5zdW1tYXJ5KGRlbWluY19wb29saW5nX2xhZykifQ==
</script>
</div>
</div>
<p>Ein simpler Ansatz zur Kontrolle für fixe länderspezifische Effekte ist die KQ-Schätzung des Regressionsmodells in ersten Differenzen. Analog zu Abbildung 2 in <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span> schätzen wir hierfür zunächst ein Modell der Differenzen zwischen den Perioden 1995 und 1970. Zur Schätzung und anschließenden Reproduktion der Grafik berechnen wir die Differenzen anhand eines gruppierten Datensatzes.</p>
<div class="cell">
<div>
<div id="webr-33">

</div>
<script type="webr-33-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBaZWl0LURpZmZlcmVuemVuIGzDpG5kZXJ3ZWlzZSBiZXJlY2huZW5cbmRlbWluY19mIDwtIGRlbWluYyAlPiVcbiAgZmlsdGVyKFxuICAgIHllYXIgJWluJSBjKDE5NzAsIDE5OTUpXG4gICkgJT4lXG4gIGdyb3VwX2J5KGNvZGUpICU+JVxuICBzdW1tYXJpc2UoXG4gICAgZGxyZ2RwY2ggPSBkaWZmKGxyZ2RwY2gpLFxuICAgIGRmaHBvbHJpZ2F1ZyA9IGRpZmYoZmhwb2xyaWdhdWcpXG4gICAgKSAlPiVcbiAgZHJvcF9uYSgpXG5cbiMgw5xiZXJibGlja1xuZ2xpbXBzZShkZW1pbmNfZikifQ==
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-34">

</div>
<script type="webr-34-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBLUS1TY2jDpHR6dW5nIGbDvHIgRGlmZmVyZW56ZW4gMTk5NSAtIDE5NzBcbmRlbWluY19kaWZmXzcwOTUgPC0gZmVvbHMoXG4gIGZtbCA9IGRmaHBvbHJpZ2F1ZyB+IGRscmdkcGNoLFxuICBkYXRhID0gZGVtaW5jX2ZcbikgXG5cbmRlbWluY19kaWZmXzcwOTUgJT4lIFxuICBzdW1tYXJ5KCkifQ==
</script>
</div>
</div>
<p>Die Ergebnisse in <code>deminc_diff_7095</code> passen zu unserer Vermutung hinsichtlich ausgelassener länderspezifischer Heterogenitäten: Der geschätzte Koeffizient von <code>dlrgdpch</code> ist positiv, jedoch klein und nicht signifikant von 0 verschieden.</p>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-35">

</div>
<script type="webr-35-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsImxhYmVsIjoiZmlnLWFjZW1maWcyIiwiZmlnLWFsaWduIjoiY2VudGVyIn0sImNvZGUiOiIjIEdyYWZpayAyIGF1cyBBY2Vtb2dsdSAoMjAwOGEpXG5nZ3Bsb3QoXG4gIGRhdGEgPSBkZW1pbmNfZixcbiAgbWFwcGluZyA9IGFlcyhcbiAgICB4ID0gZGxyZ2RwY2gsXG4gICAgeSA9IGRmaHBvbHJpZ2F1Z1xuICApIFxuICApICtcbiAgIyBSZWZlcmVuei1MaW5pZSAoa2VpbiBFZmZla3QpXG4gIGdlb21faGxpbmUoeWludGVyY2VwdCA9IDAsIGx0eSA9IDIpICtcbiAgIyBEYXRlbnB1bmt0ZVxuICBnZW9tX3RleHQoXG4gICAgbWFwcGluZyA9IGFlcyhsYWJlbCA9IGNvZGUpLFxuICAgIHBvc2l0aW9uID0gcG9zaXRpb25faml0dGVyKFxuICAgICAgaGVpZ2h0ID0gLjA1LCBcbiAgICAgIHNlZWQgPSAxMjM0XG4gICAgICApXG4gICAgKSArXG4gICMgZ2VzY2guIGxpbmVhcmVzIE1vZGVsbCBlaW56ZWljaG5lblxuICBnZW9tX3Ntb290aChcbiAgICBtZXRob2QgPSBcImxtXCIsIFxuICAgIHNlID0gRikgK1xuICBsYWJzKFxuICAgIHggPSBcIkRpZmYuIExvZyhQcm8tS29wZi1CSVApICgxOTcwIC0gMTk5NSlcIixcbiAgICB5ID0gXCJEaWZmLiBEZW1va3JhdGllLUluZGV4ICgxOTcwIC0gMTk5NSlcIixcbiAgICB0aXRsZSA9IFwiYGRlbWluY2AgLS0gUmVncmVzc2lvbiBkZXIgWmVpdC1EaWZmZXJlbnplbiB6d2lzY2hlbiAxOTk1IHVuZCAxOTcwXCJcbiAgKSArXG4gIHRoZW1lX2Nvd3Bsb3QoKSJ9
</script>
</div>
</div>
<p>Für die KQ-Schätzung in ersten Differenzen bei Verwendung des gesamten Datensatzes ist das Ergebis noch deutlicher: Die Schätzungen beider Koeffizienten sind klein und insignifikant.</p>
<div class="cell">
<div>
<div id="webr-36">

</div>
<script type="webr-36-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBQYW5lbC1TY2jDpHR6ZXI6IEtRLVJlZ3Jlc3Npb24gaW4gRGlmZmVyZW56ZW5cbiMgKEFsbGUgUGVyaW9kZW4pXG5kZW1pbmNfZGlmZl9tb2QgPC0gZmVvbHMoXG4gIGZtbCA9IGQoZmhwb2xyaWdhdWcpIH4gZChscmdkcGNoKSwgXG4gIGRhdGEgPSBkZW1pbmMsXG4gIHBhbmVsLmlkID0gfiBjb3VudHJ5ICsgeWVhclxuKVxuXG5zdW1tYXJ5KGRlbWluY19kaWZmX21vZCkifQ==
</script>
</div>
</div>
<p>Tabelle 2 in <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span> vergleicht verschiedene Schätzer des dynamischen Modells</p>
<span class="math display">\[\begin{align}
  \text{FHPRI}_{it} = \beta_0 + \alpha_i + \lambda_t + \beta_1 \text{FHPRI}_{it-1} + \beta_2 \text{Einkommen}_{it-1}  + \varepsilon_{it}\label{eq:acemmod}
\end{align}\]</span>
<p>mit Länder- und Zeit-Effekten <span class="math inline">\(\alpha_i + \lambda_t\)</span>. Der Regressor <code>\text{FHPRI}_{it-1}</code> soll die “Beständigkeit” der Demokratie zu erfassen und möglicherweise kurz- bis mittelfristige Dynamiken zu berücksichtigen (d.h. die Tendenz des Demokratie-Scores, zu einem Gleichgewichtswert zurückzukehren). Wir betrachten zunächst die Fixed-Effects-Schätzung von <span class="math inline">\(\eqref{eq:acemmod}\)</span>.</p>
<div class="cell">
<div>
<div id="webr-37">

</div>
<script type="webr-37-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBaZWl0ICsgY291bnRyeSBGaXhlZCBFZmZlY3RzXG5kZW1pbmNfRkVfbW9kIDwtIGZlb2xzKFxuICBmbWwgPSBmaHBvbHJpZ2F1ZyB+IFxuICAgIGwoZmhwb2xyaWdhdWcpIFxuICArIGwobHJnZHBjaCkgXG4gIHwgeWVhciArIGNvdW50cnksXG4gIHBhbmVsLmlkID0gfiBjb3VudHJ5ICsgeWVhcixcbiAgY2x1c3RlciA9IH4gY291bnRyeSxcbiAgZGF0YSA9IGRlbWluYywgXG4pXG5cbnN1bW1hcnkoZGVtaW5jX0ZFX21vZCkifQ==
</script>
</div>
</div>
<p>Ähnlich wie in der Differenzen-Regression <code>deminc_diff_mod</code> finden wir bei Kontrolle für Länder- und Zeit-Effekte keine Evidenz für einen Zusammenhang des Pro-Kopf-Einkommens (der Vorperiode) und dem Demokratie-Score. Mit <code>fixef(deminc_FE_mod)</code> lesen wir die gschätzten Effekte aus. Aufgrund der Vielzahl an Länder-Effekten empfiehlt sich eine grafische Zusammenfassung anhand eines Histogramms mit absoluten Häufigkeiten.</p>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-38">

</div>
<script type="webr-38-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsImxhYmVsIjoiZmlnLWFjZW1maWczIiwiZmlnLWFsaWduIjoiY2VudGVyIn0sImNvZGUiOiIjIFZlcnRlaWx1bmcgZGVyIGdlc2NoLiBMw6RuZGVyLUZpeGVkLUVmZmVjdHNcbiMgbWl0IEhpc3RvZ3JhbW0gdmlzdWFsaXNpZXJlblxudGliYmxlKFxuICAgIEZFID0gZml4ZWYoZGVtaW5jX0ZFX21vZCkkY291bnRyeSwgXG4gICAgY291bnRyeSA9IG5hbWVzKGZpeGVmKGRlbWluY19GRV9tb2QpJGNvdW50cnkpXG4gICAgKSAlPiVcblxuZ2dwbG90KGFlcyh4ID0gRkUpKSArXG4gIGdlb21faGlzdG9ncmFtKFxuICAgIGJpbnMgPSAyMCxcbiAgICBmaWxsID0gXCJzdGVlbGJsdWVcIixcbiAgICBjb2xvciA9IFwid2hpdGVcIlxuICApICtcbiAgbGFicyhcbiAgICB0aXRsZSA9IFwiYGRlbWluY2AgLS0gVmVydGVpbHVuZyB2b24gTMOkbmRlci1GaXhlZC1FZmZlY3RzXCJcbiAgKSArXG4gIHRoZW1lX2Nvd3Bsb3QoKSArXG4gIGNvb3JkX2NhcnRlc2lhbihleHBhbmQgPSBGKSJ9
</script>
</div>
</div>
<p>Eine Random-Effects-Schätzung mit Länder- und Zeit-Effekten liefert ebenfalls keine Evidenz für einen kausalen Effekt des ökonomischen Wohlstands auf die Demokratisierung.</p>
<div class="cell">
<div>
<div id="webr-39">

</div>
<script type="webr-39-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBEYXRlbnNhdHogZsO8ciBwbG0oKSBmb3JtYXRpZXJlblxuZGVtaW5jX3BkZiA8LSBwZGF0YS5mcmFtZShcbiAgZGVtaW5jICU+JSBmaWx0ZXIoc2FtcGxlID09IDEpICU+JSBcbiAgICBkcm9wX25hKCksIFxuICBpbmRleCA9IGMoXCJjb3VudHJ5XCIsIFwieWVhcl9udW1lcmljXCIpICAgXG4pXG5cbiMgUmFuZG9tLUVmZmVjdHMtTW9kZWxsXG5kZW1pbmNfUkVfbW9kIDwtIHBsbShcbiAgZm9ybXVsYSA9IGZocG9scmlnYXVnIH4gXG4gICAgbGFnKGZocG9scmlnYXVnLCAxKSBcbiAgKyBsYWcobHJnZHBjaCwgMSksIFxuICBlZmZlY3QgPSBcInR3b3dheXNcIixcbiAgbW9kZWwgPSBcInJhbmRvbVwiLFxuICBkYXRhID0gZGVtaW5jX3BkZlxuKVxuXG5zdW1tYXJ5KGRlbWluY19SRV9tb2QpIn0=
</script>
</div>
</div>
<p>Um für Endogenität der Regressoren aufgrund des dynamischen Modells zu korrigieren, verwenden <span class="citation" data-cites="Acemogluetal2008">Acemoglu u.&nbsp;a. (<a href="Literatur.html#ref-Acemogluetal2008" role="doc-biblioref">2008a</a>)</span> weiterhin den Arellano-Bond-Schätzer. Dieser wird auf die Differenz-Transformation</p>
<span class="math display">\[\begin{align}
  \Delta\text{FHPRI}_{it} = \beta_1 \Delta\text{FHPRI}_{it-1} + \beta_2 \Delta\text{Einkommen}_{it-1} + \Delta\epsilon_{it}, \quad t\geq3,\label{eq:acemabmod}
\end{align}\]</span>
<p>von Modell <span class="math inline">\(\eqref{eq:acemmod}\)</span> angewendet und nutzt, dass <span class="math inline">\(\text{FHPRI}_{it-j}\)</span> und <span class="math inline">\(\text{Einkommen}_{it-j}\)</span> für <span class="math inline">\(j\geq2\)</span> nicht mit <span class="math inline">\(\Delta\varepsilon_{it}\)</span> korreliert sind und damit als Instrumente in einem GMM-Ansatz verwendet werden können.<a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup>24</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn24"><p><sup>24</sup>&nbsp;Damit die Lags gültige Instrumente sind, darf <span class="math inline">\(\epsilon_{it}\)</span> nicht seriell korreliert sein.</p></div></div><p>Der Arellano-Bond-Schätzer ist in der Funktion <code><a href="https://rdrr.io/pkg/plm/man/pgmm.html">plm::pgmm()</a></code> implementiert. Wir schätzen Modell <span class="math inline">\(\eqref{eq:acemabmod}\)</span> mit den zweiten und dritten Lags von <span class="math inline">\(\text{FHPRI}_{it}\)</span> und <span class="math inline">\(\text{Einkommen}_{it}\)</span> als Instrumente. Die Spezifikation erfolgt durch den Zusatz <code>| lag(fhpolrigaug, 2:3) + lag(lrgdpch, 2:3)</code> im Argument <code>formula</code>.</p>
<div class="cell">
<div>
<div id="webr-40">

</div>
<script type="webr-40-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiIyBBcmVsbGFuby1Cb25kLVNjaMOkdHplclxuZGVtaW5jX0FCX21vZCA8LSBwZ21tKFxuICBmb3JtdWxhID0gXG4gICAgZmhwb2xyaWdhdWcgfiBcbiAgICBsYWcoZmhwb2xyaWdhdWcsIDEpIFxuICArIGxhZyhscmdkcGNoLCAxKSBcbiAgIyBJbnN0cnVtZW50ZTpcbiAgfCBsYWcoZmhwb2xyaWdhdWcsIDI6MylcbiAgKyBsYWcobHJnZHBjaCwgMjozKSxcbiAgICBlZmZlY3QgPSBcInR3b3dheXNcIiwgXG4gICAgbW9kZWwgPSBcInR3b3N0ZXBzXCIsXG4gICAgZGF0YSA9IGRlbWluY19wZGZcbikgXG5cbnN1bW1hcnkoZGVtaW5jX0FCX21vZCkifQ==
</script>
</div>
</div>
<p>Auch der Arellano-Bond-Schätzer liefert keine Evidenz für die Theorie eines positiven kausalen Effekts des Einkommens fürdie Stärke demokratischer Institutionen: Der interessierende geschätzte Koeffizient ist negativ und insignifikant.</p>
<p>Weiterhin bekräftigen zusätzliche Inferenzstatistiken im Output von <code>summary(deminc_AB_mod)</code> die Adäquanz des GMM-Verfahrens:</p>
<ul>
<li><p><code>Sargan test:</code> Die Nullhypothese des Sargan-Tests<a href="#fn25" class="footnote-ref" id="fnref25" role="doc-noteref"><sup>25</sup></a> ist, dass die Instrumente gültig, d.h. unkorreliert mit den Fehlertermen, sind. Diese Hypothese können wir zu keinem in der Praxis relevanten Signifikanzniveau ablehnen.</p></li>
<li><p><code>Autocorrelation test (1):</code> Test der Nullhypothese, dass die <span class="math inline">\(\Delta\epsilon_{it}\)</span> <em>keine</em> AR(1)-Korrelationsstruktur aufweisen. Für unkorrelierte <span class="math inline">\(\epsilon_{it}\)</span> sind die ersten Differenzen <span class="math inline">\(\Delta\epsilon_{it}\)</span> AR(1)-korreliert. Tatsächlich können wir diese Nullhypothese ablehnen.</p></li>
<li><p><code>Autocorrelation test (2):</code> Test der Nullhypothese, dass die <span class="math inline">\(\Delta\epsilon_{it}\)</span> <em>keine</em> AR(2)-Korrelationsstruktur aufweisen. Dies ist relevant für die Gültigkeit des Arellano-Bond-Schätzers, da AR-Korrelation zweiter (oder höherer) Ordnung darauf hinweisen würde, dass die verwendeten Instrumente ungültig sind.</p></li>
<li><p><code>Wald test for coefficients:</code> Wir lehnen die Nullhypothese, dass <span class="math inline">\(\Delta\text{FHPRI}_{it-1}\)</span> und <span class="math inline">\(\Delta\text{Einkommen}_{it-1}\)</span> keine Erklärtungskraft für <span class="math inline">\(\Delta\text{FHPRI}_{it}\)</span> haben, ab. Unter der Alternativ-Hypothese ist <em>mindestens ein</em> Koeffizient von null verschieden. Hierunter fällt das Szenario, dass <span class="math inline">\(\Delta\text{FHPRI}_{it-1}\)</span> zeitliche Dynamik in der Outcome-Variable erklärt, jedoch <span class="math inline">\(\Delta\text{Einkommen}_{it-1}\)</span> irrelevant ist (kein kausaler Effekt).</p></li>
<li><p><code>Wald test for time dummies:</code> Die Nullhyothese, dass die Zeit-Fixed-Effects irrelevant sind, wird zum 5%-Niveau abgelehnt.</p></li>
</ul>
<div class="no-row-height column-margin column-container"><div id="fn25"><p><sup>25</sup>&nbsp;Auch Sargan-Hansen-Test genannt <span class="citation" data-cites="Sargan1958 Hansen1982">(nach <a href="Literatur.html#ref-Sargan1958" role="doc-biblioref">Sargan 1958</a>; <a href="Literatur.html#ref-Hansen1982" role="doc-biblioref">Hansen 1982</a>)</span>.</p></div></div><p>Mit <code><a href="https://modelsummary.com/man/modelsummary.html">modelsummary::modelsummary()</a></code> stellen wir die Koeffizientenschätzungen tabellarisch dar. Für eine bessere Lesbarkeit formatieren wir die (andernfalls aus dem jeweiligen <code>formula</code>/<code>fml</code>-Argument übernommenen) Bezeichnungen der Koeffizienten anhand eines bennanten Vektors <code>coef_map</code>.</p>
<div class="cell">
<div>
<div id="webr-41">

</div>
<script type="webr-41-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsIndhcm5pbmciOmZhbHNlfSwiY29kZSI6ImxpYnJhcnkobW9kZWxzdW1tYXJ5KVxuXG4jIE1hcHBpbmcgZsO8ciBLb2VmZml6aWVudGVuIGZlc3RsZWdlblxuY29lZl9tYXAgPC0gYyhcbiAgXCJsKGxyZ2RwY2gsIDEpXCIgPSBcIkVpbmtvbW1lbl97dC0xfVwiLFxuICBcImxhZyhscmdkcGNoLCAxKVwiID0gXCJFaW5rb21tZW5fe3QtMX1cIixcbiAgXCJsKGZocG9scmlnYXVnLCAxKVwiID0gXCJGSFBSSV97dC0xfVwiLFxuICBcImxhZyhmaHBvbHJpZ2F1ZywgMSlcIiA9IFwiRkhQUklfe3QtMX1cIlxuKVxuXG4jIFRhYmVsbGFyaXNjaGUgw5xiZXJzaWNodCBlcnpldWdlblxubW9kZWxzdW1tYXJ5KFxuICBtb2RlbHMgPSBsaXN0KFxuICAgIFwiUG9vbFwiID0gZGVtaW5jX3Bvb2xpbmdfbGFnLFxuICAgIFwiRkVcIiA9IGRlbWluY19GRV9tb2QsXG4gICAgXCJSRVwiID0gZGVtaW5jX1JFX21vZCxcbiAgICBcIkFCXCIgPSBkZW1pbmNfQUJfbW9kXG4gICksXG4gIGNvZWZfb21pdCA9IFwiSW50ZXJjZXB0XCIsXG4gIGNvZWZfbWFwID0gY29lZl9tYXAsXG4gIGdvZl9vbWl0ID0gXCJeKD8hJCkuKlwiLCBcbiAgb3V0cHV0ID0gXCJndFwiLFxuICBzdGFycyA9IFRSVUUsXG4pICU+JSAgXG4gIHRhYl9jYXB0aW9uKFxuICAgIGNhcHRpb24gPSBcIlJlZ3Jlc3Npb25zZXJnZWJuaXNzZSB6dSBBY2Vtb2dsdSBldCBhbC4gKDIwMDhhKVwiXG4gICkgJT4lXG4gIHRhYm9wdHMoKSJ9
</script>
</div>
</div>
</section><section id="zusammenfassung" class="level2" data-number="7.8"><h2 data-number="7.8" class="anchored" data-anchor-id="zusammenfassung">
<span class="header-section-number">7.8</span> Zusammenfassung</h2>
<p>Bei entsprechender Datenverfügbarkeit sind Panel-Methoden alternative Ansätze für die Schätzung kausaler Effekte, die Probleme wie Confounding durch unbeobachtbare Heterogenitäten adressieren. Fixed-Effects-Schätzung eliminiert zeitlich-invariante unbeobachtete Heterogenitäten für eine konsistente Schätzung der Effekte zeitlich variierender Variablen. Zeit-Fixed-Effects kontrollieren für zeitabhängige Einflüsse, die alle Einheiten eines Panels in einem bestimmten Zeitpunkt betreffen. Mit Random Effects modellieren wir unbeobachtbare Heterogenitäten zwischen den Beobachtungseinheiten als zufällig. Wenn diese Heterogenitäten nicht mit den erklärenden Variablen korrelieren, können Random-Effects-Schätzer die Variation innerhalb und zwischen den Einheiten für eine unverzerrte und effizientere Schätzungen nutzen.</p>
<p>Dynamische Panel-Modelle kontrollieren für vergangene Werte der Outcome-Variable zur Vermeidung von Confounding aufgrund zeitlicher Abhängigkeitstrukturen. Verfahren wie der Arellano-Bond-Schätzer adressieren inhärante Endogenitätsprobleme in dynamischen Panel-Modellen. Hierbei werden vergangene Werte der Outcome-Variable als Instrumente genutzt, um eine konsistente Schätzungen zu gewährleisten.</p>
<p>Insbesondere wenn in empirischen Anwendungen heteroskedastische oder zeitlich korrelierte Fehler plausibel sind, sollten cluster-robuste Standardfehler für korrekte Inferenz zu kausalen Effekten mit Panel-Schätzungen verwendet werden.</p>
<p>Mit den Paketen <code>fixest</code> und <code>plm</code> stehen vielseitige Implementierungen zur Verfügung, um Fixed- und Random-Effects-Modelle sowie dynamische Panel-Modelle mit R zu schätzen.</p>


<!-- -->

<script type="webr-data">
eyJyZW5kZXJfZGYiOiJkZWZhdWx0IiwicGFja2FnZXMiOnsicmVwb3MiOlsiaHR0cHM6Ly9yc3R1ZGlvLnItdW5pdmVyc2UuZGV2Il0sInBrZ3MiOlsiZXZhbHVhdGUiLCJrbml0ciIsImh0bWx0b29scyIsImJyb29tIiwiY293cGxvdCIsImRwbHlyIiwiZ2dwbG90MiIsImd0IiwiZml4ZXN0IiwicGxtIiwidGlkeXIiLCJyZWFkciJdfSwib3B0aW9ucyI6eyJiYXNlVXJsIjoiaHR0cHM6Ly93ZWJyLnItd2FzbS5vcmcvdjAuNC4xLyJ9fQ==
</script><script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV80MTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNDEiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNDEgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici00MS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTQxLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzQxID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl80MSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTQxIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV80MDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNDAiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNDAgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici00MC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTQwLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzQwID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl80MCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTQwIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zOTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzkiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzkgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zOS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTM5LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzM5ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zOSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTM5IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zODtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzgiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzggPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zOC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTM4LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzM4ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zOCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTM4IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zNztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzciLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzcgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zNy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTM3LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzM3ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zNywge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTM3IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zNjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzYiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzYgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zNi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTM2LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzM2ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zNiwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTM2IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzUiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzUgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zNS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTM1LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzM1ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zNSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTM1IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zNDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzQiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzQgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zNC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTM0LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzM0ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zNCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTM0IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zMztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzMiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzMgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zMy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTMzLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzMzID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zMywge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTMzIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzIiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzIgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTMyLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzMyID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zMiwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTMyIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zMTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzEiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzEgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTMxLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzMxID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zMSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTMxIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zMDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMzAiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMzAgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zMC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTMwLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzMwID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zMCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTMwIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yOTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjkiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjkgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yOS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTI5LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzI5ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yOSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTI5IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yODtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjgiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjggPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yOC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTI4LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzI4ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yOCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTI4IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yNztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjciLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjcgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yNy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTI3LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzI3ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yNywge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTI3IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yNjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjYiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjYgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yNi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTI2LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzI2ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yNiwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTI2IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjUiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjUgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yNS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTI1LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzI1ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yNSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTI1IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yNDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjQiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjQgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yNC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTI0LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzI0ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yNCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTI0IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yMztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjMiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjMgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yMy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTIzLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzIzID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yMywge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTIzIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjIiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjIgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTIyLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzIyID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yMiwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTIyIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yMTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjEiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjEgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTIxLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzIxID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yMSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTIxIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yMDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjAiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMjAgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yMC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTIwLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzIwID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yMCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTIwIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xOTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTkiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTkgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xOS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTE5LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzE5ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xOSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTE5IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xODtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTgiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTggPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xOC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTE4LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzE4ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xOCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTE4IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTciLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTcgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xNy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTE3LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzE3ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xNywge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTE3IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTYiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTYgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xNi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTE2LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzE2ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xNiwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTE2IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTUiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTUgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xNS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTE1LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzE1ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xNSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTE1IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTQiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTQgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xNC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTE0LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzE0ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xNCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTE0IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTMiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTMgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTEzLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzEzID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xMywge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTEzIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTIiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTIgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTEyLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzEyID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xMiwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTEyIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTEiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTEgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTExLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzExID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xMSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTExIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTAiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTAgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTEwLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzEwID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xMCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTEwIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV85O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC05IiwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0In0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzkgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici05LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItOS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV85ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl85LCB7fSk7XG4iLCJpbmxpbmUiOmZhbHNlLCJjZWxsTmFtZSI6IndlYnItOSIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQifSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfODtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtOCIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCJ9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl84ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItOC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTgtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfOCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfOCwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTgiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0In0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzc7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJpbmxpbmUiOmZhbHNlLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTciLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNyA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTctY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici03LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzcgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzcsIHt9KTtcbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici03IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV82O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC02IiwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0In0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzYgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici02LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItNi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV82ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl82LCB7fSk7XG4iLCJpbmxpbmUiOmZhbHNlLCJjZWxsTmFtZSI6IndlYnItNiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQifSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNSIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCJ9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl81ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTUtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfNSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNSwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTUiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0In0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzQ7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJpbmxpbmUiOmZhbHNlLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTQiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNCA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTQtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici00LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzQgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzQsIHt9KTtcbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici00IiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zO1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0zIiwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0In0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzMgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItMy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8zID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zLCB7fSk7XG4iLCJpbmxpbmUiOmZhbHNlLCJjZWxsTmFtZSI6IndlYnItMyIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQifSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCJ9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl8yID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTItY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfMiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMiwge30pO1xuIiwiaW5saW5lIjpmYWxzZSwiY2VsbE5hbWUiOiJ3ZWJyLTIiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0In0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzE7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJpbmxpbmUiOmZhbHNlLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTEiLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6Il93ZWJyX3ZhbHVlXzEgPSB7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0UiwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJ3ZWJyLTEtY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUiBjb2RlXG4gIGNvbnN0IHJlc3VsdCA9IHdlYlJPanMucHJvY2Vzcyh7Y29kZTogYmxvY2suY29kZSwgb3B0aW9uc30sIHt9KTtcblxuICAvLyBFYXJseSB5aWVsZCB3aGlsZSB3ZSB3YWl0IGZvciB0aGUgZmlyc3QgZXZhbHVhdGlvbiBhbmQgcmVuZGVyXG4gIGlmIChvcHRpb25zLm91dHB1dCAmJiAhKFwiMVwiIGluIHdlYlJPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSByXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKGhpZ2hsaWdodFIoYmxvY2suY29kZSkpO1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItZ3JvdyBzcGlubmVyLWdyb3ctc20gbS0yIHBvc2l0aW9uLWFic29sdXRlIHRvcC0wIGVuZC0wXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByZUVsZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItc21cIjtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICB9XG5cbiAgICB5aWVsZCBjb250YWluZXI7XG4gIH1cblxuICB3ZWJST2pzLnJlbmRlcmVkT2pzW1wiMVwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici0xIiwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoid2ViUk9qcyA9IHtcbiAgY29uc3QgeyBXZWJSIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lLldlYlI7XG4gIGNvbnN0IHtcbiAgICBXZWJSRXZhbHVhdG9yLFxuICAgIFdlYlJFbnZpcm9ubWVudE1hbmFnZXIsXG4gICAgc2V0dXBSLFxuICAgIGI2NERlY29kZSxcbiAgICBjb2xsYXBzZVBhdGhcbiAgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc3RhdHVzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLXN0YXR1c1wiKTtcbiAgY29uc3QgaW5kaWNhdG9yQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLWluZGljYXRvclwiKTtcbiAgaW5kaWNhdG9yQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIik7XG5cbiAgbGV0IHN0YXR1c1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gIHN0YXR1c1RleHQuY2xhc3NMaXN0ID0gXCJleGVyY2lzZS1sb2FkaW5nLWRldGFpbHNcIjtcbiAgc3RhdHVzVGV4dCA9IHN0YXR1c0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNUZXh0KTtcbiAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBJbml0aWFsaXNlYDtcblxuICAvLyBIb2lzdCBpbmRpY2F0b3Igb3V0IGZyb20gZmluYWwgc2xpZGUgd2hlbiBydW5uaW5nIHVuZGVyIHJldmVhbFxuICBjb25zdCByZXZlYWxTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmVhbCAuZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGlmIChyZXZlYWxTdGF0dXMpIHtcbiAgICByZXZlYWxTdGF0dXMucmVtb3ZlKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgPiAuc2xpZGVzXCIpLmFwcGVuZENoaWxkKHJldmVhbFN0YXR1cyk7XG4gIH1cblxuICAvLyB3ZWJSIHN1cHBsZW1lbnRhbCBkYXRhIGFuZCBvcHRpb25zXG4gIGNvbnN0IGRhdGFDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItZGF0YVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGI2NERlY29kZShkYXRhQ29udGVudCkpO1xuXG4gIC8vIEdyYWIgbGlzdCBvZiByZXNvdXJjZXMgdG8gYmUgZG93bmxvYWRlZFxuICBjb25zdCBmaWxlc0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwidmZzLWZpbGVcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBmaWxlcyA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGZpbGVzQ29udGVudCkpO1xuXG4gIC8vIEluaXRpYWxpc2Ugd2ViUiBhbmQgc2V0dXAgZm9yIFIgY29kZSBldmFsdWF0aW9uXG4gIGxldCB3ZWJSUHJvbWlzZSA9IChhc3luYyAod2ViUikgPT4ge1xuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgd2ViUmA7XG4gICAgYXdhaXQgd2ViUi5pbml0KCk7XG5cbiAgICAvLyBJbnN0YWxsIHByb3ZpZGVkIGxpc3Qgb2YgcGFja2FnZXNcbiAgICAvLyBFbnN1cmUgd2ViUiBkZWZhdWx0IHJlcG8gaXMgaW5jbHVkZWRcbiAgICBkYXRhLnBhY2thZ2VzLnJlcG9zLnB1c2goXCJodHRwczovL3JlcG8uci13YXNtLm9yZ1wiKVxuICAgIGF3YWl0IGRhdGEucGFja2FnZXMucGtncy5tYXAoKHBrZykgPT4gKCkgPT4ge1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyBwYWNrYWdlOiAke3BrZ31gO1xuICAgICAgcmV0dXJuIHdlYlIuZXZhbFJWb2lkKGBcbiAgICAgICAgd2Vicjo6aW5zdGFsbChwa2csIHJlcG9zID0gcmVwb3MpXG4gICAgICAgIGxpYnJhcnkocGtnLCBjaGFyYWN0ZXIub25seSA9IFRSVUUpXG4gICAgICBgLCB7IGVudjoge1xuICAgICAgICBwa2c6IHBrZyxcbiAgICAgICAgcmVwb3M6IGRhdGEucGFja2FnZXMucmVwb3MsXG4gICAgICB9fSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAvLyBEb3dubG9hZCBhbmQgaW5zdGFsbCByZXNvdXJjZXNcbiAgICBhd2FpdCBmaWxlcy5tYXAoKGZpbGUpID0+IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLnN1YnN0cmluZyhmaWxlLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcmVzb3VyY2U6ICR7bmFtZX1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBkb3dubG9hZCBcXGAke2ZpbGV9XFxgLiBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306IFwiJHtyZXNwb25zZS5zdGF0dXNUZXh0fVwiLmApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG5cbiAgICAgIC8vIFN0b3JlIFVSTHMgaW4gdGhlIGN3ZCB3aXRob3V0IGFueSBzdWJkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBpZiAoZmlsZS5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICBmaWxlID0gbmFtZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGFwc2UgaGlnaGVyIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGZpbGUgPSBjb2xsYXBzZVBhdGgoZmlsZSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkaXJlY3RvcnkgdHJlZSwgaWdub3JpbmcgXCJkaXJlY3RvcnkgZXhpc3RzXCIgVkZTIGVycm9yc1xuICAgICAgY29uc3QgcGFydHMgPSBmaWxlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IHBhdGggPSAnJztcbiAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhdGggKz0gcGFydHMuc2hpZnQoKSArICcvJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB3ZWJSLkZTLm1rZGlyKHBhdGgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKCFlLm1lc3NhZ2UuaW5jbHVkZXMoXCJGUyBlcnJvclwiKSkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV3JpdGUgdGhpcyBmaWxlIHRvIHRoZSBWRlNcbiAgICAgIHJldHVybiBhd2FpdCB3ZWJSLkZTLndyaXRlRmlsZShmaWxlLCBuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYEluc3RhbGxpbmcgd2ViUiBzaGltc2A7XG4gICAgYXdhaXQgd2ViUi5ldmFsUlZvaWQoYHdlYnI6OnNoaW1faW5zdGFsbCgpYCk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYFdlYlIgZW52aXJvbm1lbnQgc2V0dXBgO1xuICAgIGF3YWl0IHNldHVwUih3ZWJSLCBkYXRhKTtcblxuICAgIHN0YXR1c1RleHQucmVtb3ZlKCk7XG4gICAgaWYgKHN0YXR1c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgc3RhdHVzQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiB3ZWJSO1xuICB9KShuZXcgV2ViUihkYXRhLm9wdGlvbnMpKTtcblxuICAvLyBLZWVwIHRyYWNrIG9mIGluaXRpYWwgT0pTIGJsb2NrIHJlbmRlclxuICBjb25zdCByZW5kZXJlZE9qcyA9IHt9O1xuXG4gIGNvbnN0IHByb2Nlc3MgPSBhc3luYyAoY29udGV4dCwgaW5wdXRzKSA9PiB7XG4gICAgY29uc3Qgd2ViUiA9IGF3YWl0IHdlYlJQcm9taXNlO1xuICAgIGNvbnN0IGV2YWx1YXRvciA9IG5ldyBXZWJSRXZhbHVhdG9yKHdlYlIsIGNvbnRleHQpXG4gICAgYXdhaXQgZXZhbHVhdG9yLnByb2Nlc3MoaW5wdXRzKTtcbiAgICByZXR1cm4gZXZhbHVhdG9yLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvY2VzcyxcbiAgICB3ZWJSUHJvbWlzZSxcbiAgICByZW5kZXJlZE9qcyxcbiAgfTtcbn1cbiIsImlubGluZSI6ZmFsc2UsImNlbGxOYW1lIjoid2Vici1wcmVsdWRlIiwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0In1dfQ==
</script><div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Acemogluetal2008" class="csl-entry" role="listitem">
Acemoglu, Daron, Simon Johnson, James A. Robinson, und Pierre Yared. 2008a. <span>„Income and Democracy“</span>. <em>American Economic Review</em> 98 (3): 808–42. <a href="https://doi.org/10.1257/aer.98.3.808">https://doi.org/10.1257/aer.98.3.808</a>.
</div>
<div id="ref-Acemogluetal2008data" class="csl-entry" role="listitem">
———. 2008b. <span>„Replication data for: Income and Democracy“</span>. ICPSR - Interuniversity Consortium for Political; Social Research. <a href="https://doi.org/10.3886/E113251V1">https://doi.org/10.3886/E113251V1</a>.
</div>
<div id="ref-ArellanoBond1991" class="csl-entry" role="listitem">
Arellano, Manuel, und Stephen Bond. 1991. <span>„Some Tests of Specification for Panel Data: Monte Carlo Evidence and an Application to Employment Equations“</span>. <em>The Review of Economic Studies</em> 58 (2): 277. <a href="https://doi.org/10.2307/2297968">https://doi.org/10.2307/2297968</a>.
</div>
<div id="ref-Dahl1971" class="csl-entry" role="listitem">
Dahl, Robert Alan. 1971. <em>Polyarchy: Participation and Opposition: Participation and opposition</em>. New Haven: Yale Univ. Press.
</div>
<div id="ref-Hansen1982" class="csl-entry" role="listitem">
Hansen, Lars Peter. 1982. <span>„Large Sample Properties of Generalized Method of Moments Estimators“</span>. <em>Econometrica</em> 50 (4): 1029. <a href="https://doi.org/10.2307/1912775">https://doi.org/10.2307/1912775</a>.
</div>
<div id="ref-Huntington1991" class="csl-entry" role="listitem">
Huntington, Samuel P. 1991. <em>The Third Wave: Democratization in the Late Twentieth Century: Democratization in the late twentieth century</em>. Norman, OK: Univ. of Oklahoma Press.
</div>
<div id="ref-Nickell1981" class="csl-entry" role="listitem">
Nickell, Stephen. 1981. <span>„Biases in Dynamic Models with Fixed Effects“</span>. <em>Econometrica</em> 49 (6): 1417. <a href="https://doi.org/10.2307/1911408">https://doi.org/10.2307/1911408</a>.
</div>
<div id="ref-Rueschemeyer1992" class="csl-entry" role="listitem">
Rueschemeyer, Dietrich, Evelyne H. Stephens, und John D. Stephens. 1992. <em>Capitalist development and democracy</em>. Cambridge: Polity Pr.
</div>
<div id="ref-Sargan1958" class="csl-entry" role="listitem">
Sargan, J. D. 1958. <span>„The Estimation of Economic Relationships using Instrumental Variables“</span>. <em>Econometrica</em> 26 (3): 393. <a href="https://doi.org/10.2307/1907619">https://doi.org/10.2307/1907619</a>.
</div>
<div id="ref-Wooldrige2010" class="csl-entry" role="listitem">
Wooldridge, Jeffrey. 2010. <em>Econometric Analysis of Cross Section and Panel Data</em>. Second edition. Cambridge, Massachusetts: MIT.
</div>
</div>
</section></main><!-- /main --><script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script><script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./Matching.html" class="pagination-link" aria-label="Matching">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Matching</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./IV.html" class="pagination-link" aria-label="IV-Regression">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">IV-Regression</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> live-html</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">webr:</span><span class="co"> </span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">  packages: </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'broom'</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'cowplot'</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'dplyr'</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'ggplot2'</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'gt'</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'fixest'</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'plm'</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'tidyr'</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - 'readr'</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">  repos:</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - https://rstudio.r-universe.dev</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>{{&lt; include ./_extensions/r-wasm/live/_knitr.qmd &gt;}}</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu"># Panel-Daten {#sec-paneldata}</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=F,message=F,warning=F}</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="in"># Formatierung von gt-Tabellen</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="in">library(gt)</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="in">tabopts &lt;- function(x) {</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="in">    fmt_number(x, decimals = 3, drop_trailing_zeros = T) %&gt;%</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="in">    tab_options(table_body.hlines.color = "white",</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="in">              column_labels.border.bottom.color = "black", </span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="in">             column_labels.border.top.color = "black",</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="in">             table_body.border.bottom.color = "black", </span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="in">             table.border.bottom.color = "black",</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="in">             column_labels.font.weight = "bold", </span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="in">             table.font.color = "black", </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="in">             table.font.size = 16)</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="in">options(pillar.sigfig = 2)</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="in">#| echo: false</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="in">#| output: false</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="in">#| edit: false</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="in">#| message: false</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="in">#| warning: false</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="in"># Formatierung von gt-Tabellen</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="in">tabopts &lt;- function(x) {</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="in">    fmt_number(x, decimals = 3, drop_trailing_zeros = T) %&gt;%</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_options(table_body.hlines.color = "white", </span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="in">              column_labels.border.bottom.color = "black", </span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="in">             column_labels.border.top.color = "black",</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="in">             table_body.border.bottom.color = "black", </span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="in">             table.border.bottom.color = "black",</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="in">             column_labels.font.weight = "bold", </span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="in">             table.font.color = "black", </span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="in">             table.font.size = 16)</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="in"># create dataset directory</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="in">dir.create("datasets")</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="in"># Download the datasets</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="in">download.file(</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="in">    "https://raw.githubusercontent.com/mca91/kausal_data/main/paneldata.csv",</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="in">    'datasets/paneldata.csv',</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="in">download.file(</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="in">    "https://raw.githubusercontent.com/mca91/kausal_data/main/Acemogluetal2008.csv",</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="in">    'datasets/acemogluetal2008.csv',</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="in">options(pillar.bold = TRUE, pillar.subtle = FALSE)</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>Das Ziel dieses Kapitels ist es, ein Verständnis der Vor- und Nachteile von Panel-Daten-Modellen für die Schätzung kausaler Effekte mit R zu vermitteln. Durch die zusätzliche zeitliche Dimension $T &gt; 1$ in Panel-Daten eröffnen sich erweiterte Möglichkeiten der Identifikation und Modellierung: Die Verfügbarkeit mehrerer Beobachtungen pro Beobachtungseinheit über die Zeit ermöglicht es, für *unbeobachtbare* Heterogenitäten zu korrigieren. So kann die Schätzung kausaler Effekte unter weniger restriktiven Annahmen erfolgen als bei Querschnittsdaten ($T = 1$), wo wir annehmen, dass Kontrollieren für eine Menge beobachtbarer Kovariablen ausreichend ist, um Confounding zu vermeiden.</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>Darüber hinaus ermöglichen Panel-Ansätze oft eine präzisere statistische Inferenz im Vergleich zu Verfahren für Querschnittsdaten, da die zusätzliche Information in der Zeitdimension die Varianz der Schätzung verringert. Verschiedene Identifikationsstrategien wie Differenz-in-Differenzen (@sec-did) oder Regressionsansätze mit Instrumentvariablen (@sec-IV), machen sich diese zusätzliche Informationen zunutze.</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pooled Regression und unbeobachtbare Heterogenität {#sec-panel-uh}</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>Ein Panel-Datensatz enthält Beobachtungen zu $n$ Einheiten für (bis zu) $T$ Zeitpunkte $t=1,\dots,T$. Betrachte das Panel-Modell</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{=tex}</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="in">\begin{align}</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="in">  Y_{it} = \beta_0 + \beta_1 B_{it} + \beta_2 X_i + \beta_3 U_i + \epsilon_{it},\label{eq:unobshetmodel}</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="in">\end{align}</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>wobei $U_i$ unbeobachtete und $X_i$ beobachtete, *zeitlich-invariante* Heterogenitäten zwischen den Beobachtungseinheiten $i=1,\dots,n$ sind. Wie zuvor ist $B_{it}$ die Behandlungsvariable und $\beta_1$ der interessierende kausale Effekt einer Veränderung von $B_{it}$ auf $Y_{it}$.</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>Angenommen wir beobachten $Y_{it}$ und $B_{it}$ für $T=1$, also für eine Periode. Bei Korrelation zwischen den *unbeobachtbaren* zeit-invarianten Effekten $U_i$ und der Behandlungsvariable $B_{it}$ kann der kausale Effekt $\beta_1$ nicht identifiziert werden. Diese Situation ist in @fig-FEDAG1 dargestellt.</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{dot}</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-width: 3</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-height: 3</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-align: 'center'</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-cap: "Backdoors durch beobachtete und unbeobachtete Variablen"</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a><span class="in">//| label: "fig-FEDAG1" </span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="in">digraph FE_dag_single_period {</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="in">    layout=neato</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a><span class="in">    fontname="Helvetica,Arial,sans-serif"</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="in">    node [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a><span class="in">    edge [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a><span class="in">    splines=true</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a><span class="in">    pad=.5</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a><span class="in">    // Zeitinvariante Einflüsse</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a><span class="in">    U [pos="2,8!", label=&lt;U&lt;SUB&gt;i&lt;/SUB&gt;&gt;, color=gray, fontcolor=gray];</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a><span class="in">    // Knoten für Zeitvariante Einflüsse</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a><span class="in">    X [pos="2,6!", label=&lt;X&lt;SUB&gt;i&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a><span class="in">    // Knoten für eine Periode</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a><span class="in">    B [pos="0,6!", label=&lt;B&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a><span class="in">    Y [pos="0,8!", label=&lt;Y&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a><span class="in">    // Kanten für eine Periode</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; X [color=gray, style=dashed];</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; Y [color=gray, style=dashed];</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; B [color=gray, style=dashed];</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a><span class="in">    X -&gt; Y;</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="in">    X -&gt; B;</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a><span class="in">    B -&gt; Y;</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>@fig-FEDAG1 zeigt Backdoors durch die $U_i$, die wir mit einer "naiven" KQ-Schätzung der fehlspezifizierten Regression \begin{align}</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>  Y_{it} = \beta_0 + \beta_1 B_{it} + \beta_2 X_i + \varepsilon_{it},\quad t=1,\label{eq:femodelfail}</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>\end{align} mit $\varepsilon_{it} = U_i + \epsilon_{it}$ nicht schließen können.<span class="ot">[^fixedeffects-1]</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-1]: </span>Wegen $E(\varepsilon_{it}\vert B_{it})\neq 0$ ist der KQ-Schätzer von $\beta_1$ nicht erwartungstreu und inkonsistent.</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>Wir betrachten nun eine Generalisierung des DGP in @fig-FEDAG1 für $T=2$ Perioden, dargestellt in @fig-FEDAG2.</span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{dot}</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-width: 6</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-height: 5</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-align: 'center'</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-cap: "Panel-Design mit Backdoors durch beobachtete und unbeobachtete zeit-invariante Variablen"</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a><span class="in">//| label: "fig-FEDAG2" </span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a><span class="in">digraph FE_dag2 {</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a><span class="in">    layout=neato</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a><span class="in">    fontname="Helvetica,Arial,sans-serif"</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="in">    node [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a><span class="in">    edge [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a><span class="in">    splines=true</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a><span class="in">    // Zeitinvariante Einflüsse</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a><span class="in">    U [pos="2,8!", label=&lt;U&lt;SUB&gt;i&lt;/SUB&gt;&gt;, color=gray, fontcolor=gray];</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a><span class="in">    X [pos="2,2!", label=&lt;X&lt;SUB&gt;i&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a><span class="in">    // Knoten für Perioden 1</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a><span class="in">    B1 [pos="0,4!", label=&lt;B&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a><span class="in">    Y1 [pos="0,6!", label=&lt;Y&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a><span class="in">    // Knoten für Perioden 2</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a><span class="in">    B2 [pos="4,4!", label=&lt;B&lt;SUB&gt;t=2&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a><span class="in">    Y2 [pos="4,6!", label=&lt;Y&lt;SUB&gt;t=2&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a><span class="in">    // Kanten für Perioden 1</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; X [color=gray, style=dashed];</span></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; Y1 [color=gray, style=dashed];</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; B1 [color=gray, style=dashed];</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a><span class="in">    X -&gt; Y1;</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a><span class="in">    X -&gt; B1;</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a><span class="in">    B1 -&gt; Y1;</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a><span class="in">    B1 -&gt; B2;</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a><span class="in">    // Kanten für Perioden 2</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; Y2 [color=gray, style=dashed];</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; B2 [color=gray, style=dashed];</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a><span class="in">    X -&gt; Y2;</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a><span class="in">    X -&gt; B2;</span></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a><span class="in">    B2 -&gt; Y2;</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>Der in @fig-FEDAG2 gezeigte Zusammenhang führt (idealerweise) zwar zu einer Verdoppelung des Beobachtungsumfangs, jedoch besteht weiterhin das in @fig-FEDAG1 gezeigte Endogenitätsproblem, falls die Regression \eqref{eq:femodelfail} nun anhand einer Zusammenlegung (**Pooling**) aller Beobachtungen für $t\in<span class="sc">\{</span>1,2<span class="sc">\}</span>$ geschätzt wird:<span class="ot">[^fixedeffects-2]</span> Die unbeobachteten zeit-invarianten Einflüsse $U_i$ verursachen auch für Periode $t=2$ Backdoor-Pfade.</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-2]: </span>Pooled Regression kann auch berechnet werden, wenn nicht für alle $n$ Einheiten jeweils $T$ Beobachtungen vorliegen (unbalanced Panel).</span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>In diesem Kapitel betrachten wir Panel-Verfahren, welche den kausalen Effekt in @fig-FEDAG2 und Verallgemeinerungen hiervon schätzen können. Bevor wir diese Methoden betrachten, veranschaulichen wir die verzerrte Schätzung eines Behandlungseffekts mit *Pooled Regression* in Modell \eqref{eq:femodelfail} bei unbeobachtbaren Heterogenitäten für einen simulierten Datensatz `paneldata.csv`. Der Datensatz enthält Beobachtungen von $n=12$ Einheiten zu $T=8$ Perioden. Alle Einheiten weisen unbeobachtbare *zeit-invariante* Heterogenitäten auf, die mit $B_{it}$ korrelieren. Der wahre Behandlungseffekt beträgt $\beta_1 = -1$.<span class="ot">[^fixedeffects-3]</span></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-3]: </span>Der (R code für den) DGP ist <span class="co">[</span><span class="ot">diesem StackExchange-Post</span><span class="co">](https://stats.stackexchange.com/a/188559)</span> entnommen.</span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>Wir lesen zunächst den Datensatz ein und selektieren die benötigten Variablen.</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a><span class="in">library(readr)</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a><span class="in"># Datensatz 'paneldata.csv' einlesen</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a><span class="in">paneldata &lt;- read_csv("datasets/paneldata.csv") %&gt;% </span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a><span class="in">  select(X, Y, ID, time, col)</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a><span class="in"># Panel-Dimensionen bestimmen</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a><span class="in">paneldata %&gt;%</span></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(</span></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a><span class="in">    N = unique(ID) %&gt;% length(),</span></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a><span class="in">    T = unique(time) %&gt;% length()</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>Mit der Funktion <span class="in">`plm::is.pbalanced()`</span> überprüfen wir, ob im Panel-Datensatz für alle beobachteten Einheiten die gleiche Anzahl an Beobachtungsperioden vorliegt (*balanced panel*).<span class="ot">[^fixedeffects-4]</span></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-4]: </span>Fehlende Beobachtungen sind typischerweise mit einem <span class="in">`NA`</span>-Wert gekennzeichnet. Der Differenz-Schätzer kann auch berechnet werden, wenn der Datensatz nicht ausgeglichen (*unbalanced*) ist.</span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a><span class="in">library(plm)</span></span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a><span class="in"># Datensatz balanced?</span></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a><span class="in">is.pbalanced(</span></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a><span class="in">  x = paneldata, </span></span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a><span class="in">  index = c("ID", "time")</span></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a>Zunächst schätzen wir eine Pooled Regression für die ersten beiden Zeitperioden, basierend auf einem entsprechend gefilterten Datensatz.<span class="ot">[^fixedeffects-5]</span></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-5]: </span>Wir verweisen nachfolgend explizit auf Funktionen aus <span class="in">`dplyr`</span>, falls Funktionen aus <span class="in">`plm`</span> identische Namen haben.</span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a><span class="in"># Subsetting der Daten für 2 Perioden (t = {1, 2})</span></span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a><span class="in">paneldata_T2 &lt;- paneldata %&gt;% </span></span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a><span class="in">    dplyr::between(time, 1, 2)</span></span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a>Für die Schätzung von Modell \eqref{eq:femodelfail} nutzen wir <span class="in">`fixest::feols()`</span>.</span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a><span class="in">library(fixest)</span></span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a><span class="in"># Naive KQ-Schätzung für t = {1, 2}</span></span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a><span class="in">panel_KQ &lt;- feols(</span></span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = Y ~ X, </span></span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata_T2</span></span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_KQ)</span></span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a>Die Schätzung von $\beta_1$ ist 3.81 und weist auf eine deutliche Verzerrung hin. Wir illustrieren diese Problematik in der nächsten Abbildung, in dem wir die für die Regression verwendeten Daten (Kreise) sowie die Beobachtungen späterer Perioden (Kreuze) nach Gruppenzugehörigkeit einfärben und die Schätzung der Pooled Regression abtragen.</span>
<span id="cb1-264"><a href="#cb1-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-267"><a href="#cb1-267" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-268"><a href="#cb1-268" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-pooledregression1</span></span>
<span id="cb1-269"><a href="#cb1-269" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb1-270"><a href="#cb1-270" aria-hidden="true" tabindex="-1"></a><span class="in">library(cowplot)</span></span>
<span id="cb1-271"><a href="#cb1-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-272"><a href="#cb1-272" aria-hidden="true" tabindex="-1"></a><span class="in"># Plot: Naiver KQ-Schätzer für t = 1, 2</span></span>
<span id="cb1-273"><a href="#cb1-273" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(</span></span>
<span id="cb1-274"><a href="#cb1-274" aria-hidden="true" tabindex="-1"></a><span class="in">  mapping = aes(x = X, y = Y)</span></span>
<span id="cb1-275"><a href="#cb1-275" aria-hidden="true" tabindex="-1"></a><span class="in">) +</span></span>
<span id="cb1-276"><a href="#cb1-276" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(</span></span>
<span id="cb1-277"><a href="#cb1-277" aria-hidden="true" tabindex="-1"></a><span class="in">    data = paneldata %&gt;% </span></span>
<span id="cb1-278"><a href="#cb1-278" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(time &gt; 2),</span></span>
<span id="cb1-279"><a href="#cb1-279" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(color = col),</span></span>
<span id="cb1-280"><a href="#cb1-280" aria-hidden="true" tabindex="-1"></a><span class="in">    pch = 3,</span></span>
<span id="cb1-281"><a href="#cb1-281" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-282"><a href="#cb1-282" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-283"><a href="#cb1-283" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(</span></span>
<span id="cb1-284"><a href="#cb1-284" aria-hidden="true" tabindex="-1"></a><span class="in">    data = paneldata %&gt;% </span></span>
<span id="cb1-285"><a href="#cb1-285" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(time %in% 1:2),</span></span>
<span id="cb1-286"><a href="#cb1-286" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(color = col),</span></span>
<span id="cb1-287"><a href="#cb1-287" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-288"><a href="#cb1-288" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-289"><a href="#cb1-289" aria-hidden="true" tabindex="-1"></a><span class="in">  # Naive KQ-Schätzung für t = 1, 2</span></span>
<span id="cb1-290"><a href="#cb1-290" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_smooth(</span></span>
<span id="cb1-291"><a href="#cb1-291" aria-hidden="true" tabindex="-1"></a><span class="in">    data = paneldata %&gt;% </span></span>
<span id="cb1-292"><a href="#cb1-292" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(time %in% 1),</span></span>
<span id="cb1-293"><a href="#cb1-293" aria-hidden="true" tabindex="-1"></a><span class="in">    method = "lm", </span></span>
<span id="cb1-294"><a href="#cb1-294" aria-hidden="true" tabindex="-1"></a><span class="in">    se = F,</span></span>
<span id="cb1-295"><a href="#cb1-295" aria-hidden="true" tabindex="-1"></a><span class="in">    col = "black"</span></span>
<span id="cb1-296"><a href="#cb1-296" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-297"><a href="#cb1-297" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-298"><a href="#cb1-298" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`paneldaten.csv` -- Pooled Regression für t = 1, 2"</span></span>
<span id="cb1-299"><a href="#cb1-299" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-300"><a href="#cb1-300" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_color_identity() +</span></span>
<span id="cb1-301"><a href="#cb1-301" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot()</span></span>
<span id="cb1-302"><a href="#cb1-302" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-303"><a href="#cb1-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-304"><a href="#cb1-304" aria-hidden="true" tabindex="-1"></a>Die obige Grafik zeigt einen negativen Verlauf des Zusammenhangs zwischen X und Y anhand der Variation der Beobachtungen *innerhalb* der farblich gekennzeichneten Gruppen. Dieser negative Zusammenhang kann aufgrund der Endogenität von $X$ nicht erfasst werden.</span>
<span id="cb1-305"><a href="#cb1-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-306"><a href="#cb1-306" aria-hidden="true" tabindex="-1"></a>Eine Erweiturung der Regression auf sämtliche Perioden (Pooling aller $n\times T = 12 \times 8 = 96$ Beobachtungen) erhöht lediglich die Präzision der Schätzung (geringerer Standardfehler von $\widehat{\beta}_1$), nicht aber die Endogenität.</span>
<span id="cb1-307"><a href="#cb1-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-310"><a href="#cb1-310" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-311"><a href="#cb1-311" aria-hidden="true" tabindex="-1"></a><span class="in"># Naive KQ-Schätzung für t = 1,...,8</span></span>
<span id="cb1-312"><a href="#cb1-312" aria-hidden="true" tabindex="-1"></a><span class="in">panel_KQ &lt;- feols(</span></span>
<span id="cb1-313"><a href="#cb1-313" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = Y ~ X, </span></span>
<span id="cb1-314"><a href="#cb1-314" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata </span></span>
<span id="cb1-315"><a href="#cb1-315" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-316"><a href="#cb1-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-317"><a href="#cb1-317" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-318"><a href="#cb1-318" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_KQ)</span></span>
<span id="cb1-319"><a href="#cb1-319" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-320"><a href="#cb1-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-323"><a href="#cb1-323" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-324"><a href="#cb1-324" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-pooledregression2</span></span>
<span id="cb1-325"><a href="#cb1-325" aria-hidden="true" tabindex="-1"></a><span class="in"># Plot: Naiver KQ-Schätzer für t = 1,...,8</span></span>
<span id="cb1-326"><a href="#cb1-326" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(</span></span>
<span id="cb1-327"><a href="#cb1-327" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata,</span></span>
<span id="cb1-328"><a href="#cb1-328" aria-hidden="true" tabindex="-1"></a><span class="in">  mapping = aes(x = X, y = Y)</span></span>
<span id="cb1-329"><a href="#cb1-329" aria-hidden="true" tabindex="-1"></a><span class="in">) +</span></span>
<span id="cb1-330"><a href="#cb1-330" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(</span></span>
<span id="cb1-331"><a href="#cb1-331" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(color = col),</span></span>
<span id="cb1-332"><a href="#cb1-332" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-333"><a href="#cb1-333" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-334"><a href="#cb1-334" aria-hidden="true" tabindex="-1"></a><span class="in">  # Pooled Schätzung</span></span>
<span id="cb1-335"><a href="#cb1-335" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_smooth(</span></span>
<span id="cb1-336"><a href="#cb1-336" aria-hidden="true" tabindex="-1"></a><span class="in">    data = paneldata,</span></span>
<span id="cb1-337"><a href="#cb1-337" aria-hidden="true" tabindex="-1"></a><span class="in">    method = "lm", </span></span>
<span id="cb1-338"><a href="#cb1-338" aria-hidden="true" tabindex="-1"></a><span class="in">    se = F,</span></span>
<span id="cb1-339"><a href="#cb1-339" aria-hidden="true" tabindex="-1"></a><span class="in">    col = "black"</span></span>
<span id="cb1-340"><a href="#cb1-340" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-341"><a href="#cb1-341" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-342"><a href="#cb1-342" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`paneldaten.csv` -- Pooled Regression für t = 1, ..., 8"</span></span>
<span id="cb1-343"><a href="#cb1-343" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-344"><a href="#cb1-344" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_color_identity() +</span></span>
<span id="cb1-345"><a href="#cb1-345" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot()</span></span>
<span id="cb1-346"><a href="#cb1-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-347"><a href="#cb1-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-348"><a href="#cb1-348" aria-hidden="true" tabindex="-1"></a><span class="fu">## Regression in Differenzen</span></span>
<span id="cb1-349"><a href="#cb1-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-350"><a href="#cb1-350" aria-hidden="true" tabindex="-1"></a>Wir betrachten erneut den in @fig-FEDAG2 dargestellten DGP für $T=2$ Zeitperioden. In dieser Situation können Backdoors durch die $U_i$ anhand einer simplen Transformation von Modell \eqref{eq:femodel} geschlossen werden: Regression der Zeit-Differenzen zwischen den Perioden $t=2$ und $t=1$,</span>
<span id="cb1-351"><a href="#cb1-351" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb1-352"><a href="#cb1-352" aria-hidden="true" tabindex="-1"></a>  \begin{split}</span>
<span id="cb1-353"><a href="#cb1-353" aria-hidden="true" tabindex="-1"></a>  \Delta Y_{it} = \beta_1 \Delta B_{it} + e_{it}, \qquad i=&amp;\,1,\dots,n,<span class="sc">\\</span></span>
<span id="cb1-354"><a href="#cb1-354" aria-hidden="true" tabindex="-1"></a>  t=&amp;\,1,2 </span>
<span id="cb1-355"><a href="#cb1-355" aria-hidden="true" tabindex="-1"></a>  \end{split}</span>
<span id="cb1-356"><a href="#cb1-356" aria-hidden="true" tabindex="-1"></a>  \label{eq:femodeldiff}</span>
<span id="cb1-357"><a href="#cb1-357" aria-hidden="true" tabindex="-1"></a>\end{align} </span>
<span id="cb1-358"><a href="#cb1-358" aria-hidden="true" tabindex="-1"></a>wobei $\Delta Y_{it} := Y_{i2} - Y_{i1}$ und $\Delta e_{it} := \epsilon_{i2} - \epsilon_{i1}$ für $t=2$. Beachte, dass $\Delta U_i=\Delta X_i=0$. Differenzieren der Komponenten führt zu einem Modell, in dem weder für (beobachtbare) $X_i$ noch für (unbeobachtbare) $U_i$ kontrolliert werden muss, damit $\beta_1$ identifiziert werden kann.<span class="ot">[^fixedeffects-6]</span> Der Behandlungseffekt $\beta_1$ kann mit KQ geschätzt werden.<span class="ot">[^fixedeffects-7]</span></span>
<span id="cb1-359"><a href="#cb1-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-360"><a href="#cb1-360" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-6]: </span>Ein Nachteil der Differenzbildung ist also, dass wir die Koeffizienten der beobachtbaren, zeitlich konstanten Regressoren nicht schätzen können.</span>
<span id="cb1-361"><a href="#cb1-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-362"><a href="#cb1-362" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-7]: </span>Der Differenzen-Schätzer ist erwartungstreu und konsistent, wenn $E(\epsilon_{is}\vert B_{it})=0$ für $s\geq t$.</span>
<span id="cb1-363"><a href="#cb1-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-364"><a href="#cb1-364" aria-hidden="true" tabindex="-1"></a>Zur Transformation der Regressoren in <span class="in">`fixest::feols()`</span> verwenden wir den Operator <span class="in">`d()`</span>. Dieser benötigt die im Argument <span class="in">`panel.id`</span> als Formel spezifizierten Identifikationsvariablen für Einheiten (<span class="in">`ID`</span>) und Zeitpunkte (<span class="in">`time`</span>).</span>
<span id="cb1-365"><a href="#cb1-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-368"><a href="#cb1-368" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-369"><a href="#cb1-369" aria-hidden="true" tabindex="-1"></a><span class="in"># Panel-Schätzer: KQ-Regression in Differenzen</span></span>
<span id="cb1-370"><a href="#cb1-370" aria-hidden="true" tabindex="-1"></a><span class="in">panel_diff &lt;- feols(</span></span>
<span id="cb1-371"><a href="#cb1-371" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = d(Y) ~ d(X) - 1, </span></span>
<span id="cb1-372"><a href="#cb1-372" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata %&gt;% </span></span>
<span id="cb1-373"><a href="#cb1-373" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(</span></span>
<span id="cb1-374"><a href="#cb1-374" aria-hidden="true" tabindex="-1"></a><span class="in">        dplyr::between(time, 1, 2)</span></span>
<span id="cb1-375"><a href="#cb1-375" aria-hidden="true" tabindex="-1"></a><span class="in">      ),</span></span>
<span id="cb1-376"><a href="#cb1-376" aria-hidden="true" tabindex="-1"></a><span class="in">  panel.id = ~ ID + time</span></span>
<span id="cb1-377"><a href="#cb1-377" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-378"><a href="#cb1-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-379"><a href="#cb1-379" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-380"><a href="#cb1-380" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_diff)</span></span>
<span id="cb1-381"><a href="#cb1-381" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-382"><a href="#cb1-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-383"><a href="#cb1-383" aria-hidden="true" tabindex="-1"></a>Die Schätzung anhand der Regression in Differenzen liegt nahe beim wahren Behandlungseffekt $\beta_1 = -1$. In der nächsten Grafik plotten wir die ersten Differenzen der Daten und den mit KQ geschätzten Zusammenhang.</span>
<span id="cb1-384"><a href="#cb1-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-387"><a href="#cb1-387" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-388"><a href="#cb1-388" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-diffregression1</span></span>
<span id="cb1-389"><a href="#cb1-389" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyr)</span></span>
<span id="cb1-390"><a href="#cb1-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-391"><a href="#cb1-391" aria-hidden="true" tabindex="-1"></a><span class="in"># Transformation zu Differenzen</span></span>
<span id="cb1-392"><a href="#cb1-392" aria-hidden="true" tabindex="-1"></a><span class="in">paneldata_diff &lt;- paneldata %&gt;% </span></span>
<span id="cb1-393"><a href="#cb1-393" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb1-394"><a href="#cb1-394" aria-hidden="true" tabindex="-1"></a><span class="in">    DeltaX = X - dplyr::lag(X),</span></span>
<span id="cb1-395"><a href="#cb1-395" aria-hidden="true" tabindex="-1"></a><span class="in">    DeltaY = Y - dplyr::lag(Y)</span></span>
<span id="cb1-396"><a href="#cb1-396" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb1-397"><a href="#cb1-397" aria-hidden="true" tabindex="-1"></a><span class="in">  drop_na()</span></span>
<span id="cb1-398"><a href="#cb1-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-399"><a href="#cb1-399" aria-hidden="true" tabindex="-1"></a><span class="in"># Plot: KQ-Schätzer für Differenzen  </span></span>
<span id="cb1-400"><a href="#cb1-400" aria-hidden="true" tabindex="-1"></a><span class="in">  ggplot(</span></span>
<span id="cb1-401"><a href="#cb1-401" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(x = DeltaX, y = DeltaY)</span></span>
<span id="cb1-402"><a href="#cb1-402" aria-hidden="true" tabindex="-1"></a><span class="in">  ) + </span></span>
<span id="cb1-403"><a href="#cb1-403" aria-hidden="true" tabindex="-1"></a><span class="in">    geom_point(</span></span>
<span id="cb1-404"><a href="#cb1-404" aria-hidden="true" tabindex="-1"></a><span class="in">      data = paneldata_diff %&gt;% </span></span>
<span id="cb1-405"><a href="#cb1-405" aria-hidden="true" tabindex="-1"></a><span class="in">        filter(time &gt; 2),</span></span>
<span id="cb1-406"><a href="#cb1-406" aria-hidden="true" tabindex="-1"></a><span class="in">      mapping = aes(color = col),</span></span>
<span id="cb1-407"><a href="#cb1-407" aria-hidden="true" tabindex="-1"></a><span class="in">      pch = 3,</span></span>
<span id="cb1-408"><a href="#cb1-408" aria-hidden="true" tabindex="-1"></a><span class="in">      show.legend = F</span></span>
<span id="cb1-409"><a href="#cb1-409" aria-hidden="true" tabindex="-1"></a><span class="in">    ) +</span></span>
<span id="cb1-410"><a href="#cb1-410" aria-hidden="true" tabindex="-1"></a><span class="in">    geom_point(</span></span>
<span id="cb1-411"><a href="#cb1-411" aria-hidden="true" tabindex="-1"></a><span class="in">      data = paneldata_diff %&gt;% </span></span>
<span id="cb1-412"><a href="#cb1-412" aria-hidden="true" tabindex="-1"></a><span class="in">        filter(time == 2),</span></span>
<span id="cb1-413"><a href="#cb1-413" aria-hidden="true" tabindex="-1"></a><span class="in">      mapping = aes(color = col),</span></span>
<span id="cb1-414"><a href="#cb1-414" aria-hidden="true" tabindex="-1"></a><span class="in">      show.legend = F</span></span>
<span id="cb1-415"><a href="#cb1-415" aria-hidden="true" tabindex="-1"></a><span class="in">    ) +</span></span>
<span id="cb1-416"><a href="#cb1-416" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_smooth(</span></span>
<span id="cb1-417"><a href="#cb1-417" aria-hidden="true" tabindex="-1"></a><span class="in">    data = paneldata_diff %&gt;% </span></span>
<span id="cb1-418"><a href="#cb1-418" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(time == 2),</span></span>
<span id="cb1-419"><a href="#cb1-419" aria-hidden="true" tabindex="-1"></a><span class="in">    method = "lm", </span></span>
<span id="cb1-420"><a href="#cb1-420" aria-hidden="true" tabindex="-1"></a><span class="in">    se = F,</span></span>
<span id="cb1-421"><a href="#cb1-421" aria-hidden="true" tabindex="-1"></a><span class="in">    color = "black"</span></span>
<span id="cb1-422"><a href="#cb1-422" aria-hidden="true" tabindex="-1"></a><span class="in">  ) + </span></span>
<span id="cb1-423"><a href="#cb1-423" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-424"><a href="#cb1-424" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`paneldaten.csv` -- Regression in Differenzen für t = 2"</span></span>
<span id="cb1-425"><a href="#cb1-425" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-426"><a href="#cb1-426" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_color_identity() +</span></span>
<span id="cb1-427"><a href="#cb1-427" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot()</span></span>
<span id="cb1-428"><a href="#cb1-428" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-429"><a href="#cb1-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-430"><a href="#cb1-430" aria-hidden="true" tabindex="-1"></a>Wie bei Pooling können wir den Differenzen-Schätzer für den gesamten Datensatz berechnen.</span>
<span id="cb1-431"><a href="#cb1-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-434"><a href="#cb1-434" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-435"><a href="#cb1-435" aria-hidden="true" tabindex="-1"></a><span class="in"># Panel-Schätzer: KQ-Regression in Differenzen</span></span>
<span id="cb1-436"><a href="#cb1-436" aria-hidden="true" tabindex="-1"></a><span class="in">panel_diff &lt;- feols(</span></span>
<span id="cb1-437"><a href="#cb1-437" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = d(Y) ~ d(X) - 1, </span></span>
<span id="cb1-438"><a href="#cb1-438" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata,</span></span>
<span id="cb1-439"><a href="#cb1-439" aria-hidden="true" tabindex="-1"></a><span class="in">  panel.id = ~ ID + time</span></span>
<span id="cb1-440"><a href="#cb1-440" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-441"><a href="#cb1-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-442"><a href="#cb1-442" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-443"><a href="#cb1-443" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_diff)</span></span>
<span id="cb1-444"><a href="#cb1-444" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-445"><a href="#cb1-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-446"><a href="#cb1-446" aria-hidden="true" tabindex="-1"></a>Beachte, dass der Standardfehler der Schätzers etwas größer ist als für den KQ-Schätzer in der Pooled Regression. Gründe hierfür sind der Verlust von $12$ Beobachtungen bei der Bildung der $T-1 = 7$ Differenzen und die standardmäßige Berechnung von cluster-robusten Standardfehlern durch <span class="in">`feols()`</span>, siehe auch @sec-crse.</span>
<span id="cb1-447"><a href="#cb1-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-450"><a href="#cb1-450" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-451"><a href="#cb1-451" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-diffregression2</span></span>
<span id="cb1-452"><a href="#cb1-452" aria-hidden="true" tabindex="-1"></a><span class="in"># Plot: KQ-Schätzer in Differenzen (alle t)</span></span>
<span id="cb1-453"><a href="#cb1-453" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(</span></span>
<span id="cb1-454"><a href="#cb1-454" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata_diff,</span></span>
<span id="cb1-455"><a href="#cb1-455" aria-hidden="true" tabindex="-1"></a><span class="in">  mapping = aes(x = DeltaX, y = DeltaY)</span></span>
<span id="cb1-456"><a href="#cb1-456" aria-hidden="true" tabindex="-1"></a><span class="in">) + </span></span>
<span id="cb1-457"><a href="#cb1-457" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(</span></span>
<span id="cb1-458"><a href="#cb1-458" aria-hidden="true" tabindex="-1"></a><span class="in">    color = "gray",</span></span>
<span id="cb1-459"><a href="#cb1-459" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-460"><a href="#cb1-460" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-461"><a href="#cb1-461" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(</span></span>
<span id="cb1-462"><a href="#cb1-462" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(color = col),</span></span>
<span id="cb1-463"><a href="#cb1-463" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-464"><a href="#cb1-464" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-465"><a href="#cb1-465" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_smooth(</span></span>
<span id="cb1-466"><a href="#cb1-466" aria-hidden="true" tabindex="-1"></a><span class="in">    method = "lm", </span></span>
<span id="cb1-467"><a href="#cb1-467" aria-hidden="true" tabindex="-1"></a><span class="in">    se = F,</span></span>
<span id="cb1-468"><a href="#cb1-468" aria-hidden="true" tabindex="-1"></a><span class="in">    color = "black"</span></span>
<span id="cb1-469"><a href="#cb1-469" aria-hidden="true" tabindex="-1"></a><span class="in">  ) + </span></span>
<span id="cb1-470"><a href="#cb1-470" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_color_identity() +</span></span>
<span id="cb1-471"><a href="#cb1-471" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-472"><a href="#cb1-472" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`paneldaten.csv` -- Regression in Differenzen für t = 2"</span></span>
<span id="cb1-473"><a href="#cb1-473" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-474"><a href="#cb1-474" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot()</span></span>
<span id="cb1-475"><a href="#cb1-475" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-476"><a href="#cb1-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-477"><a href="#cb1-477" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fixed-Effects-Regression</span></span>
<span id="cb1-478"><a href="#cb1-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-479"><a href="#cb1-479" aria-hidden="true" tabindex="-1"></a>Die KQ-Schätzung der Regression in Differenzen hat den Nachteil, dass die Koeffizienten von einheiten-spezifischen Variablen nicht geschätzt werden können. Weiterhin impliziert die Differenzbildung einen Verlust des Beobachtungsumfangs bei der Schätzung des kausalen Effekts.<span class="ot">[^fixedeffects-8]</span> Für den Datensatz <span class="in">`paneldata.csv`</span> verlieren wir $1/8$ der Stichprobe. Abhängig von der empirischen Fragestellung und der Datenverfügbarkeit (Verhältnis von $T$ und $n$) kann Fixed-Effects-Regression eine nützliche Alternative zu Regression in Differenzen sein.</span>
<span id="cb1-480"><a href="#cb1-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-481"><a href="#cb1-481" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-8]: </span>Eine Reduktion des Beobachtungsumfangs erhöht die Varianz der Schätzung. Für $T=2$ ist der Differenzen-Schätzer äquivalent zu den Schätzern im Fixed-Effects-Modell, ist jedoch ineffizient für $T&gt;2$.</span>
<span id="cb1-482"><a href="#cb1-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-483"><a href="#cb1-483" aria-hidden="true" tabindex="-1"></a>Wir betrachten erneut Modell \eqref{eq:unobshetmodel} und definieren \begin{align*}</span>
<span id="cb1-484"><a href="#cb1-484" aria-hidden="true" tabindex="-1"></a>  \alpha_i = \beta_0 + \beta_3 U_i.</span>
<span id="cb1-485"><a href="#cb1-485" aria-hidden="true" tabindex="-1"></a>\end{align*} Nach einsetzen in \eqref{eq:unobshetmodel} erhalten wir das Modell \begin{align}</span>
<span id="cb1-486"><a href="#cb1-486" aria-hidden="true" tabindex="-1"></a>  Y_{it} = \alpha_i + \beta_1 B_{it} + \beta_2 X_i + \epsilon_{it} \label{eq:femodel},</span>
<span id="cb1-487"><a href="#cb1-487" aria-hidden="true" tabindex="-1"></a>\end{align} mit einheiten-spezifischen **Konstanten** ("feste Effekte") $\alpha_i$ für $i=1,\dots,n$, die als individuelle Achsenabschnitte nterpretieren werden können. Das Modell \eqref{eq:femodel} wird daher auch als *Fixed-Effects-Modell* bezeichnet.<span class="ot">[^fixedeffects-9]</span></span>
<span id="cb1-488"><a href="#cb1-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-489"><a href="#cb1-489" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-9]: </span>Beachte, dass eine bessere Anpassung an die Daten bei der Modellierung von <span class="in">`paneldata.csv`</span> mit einheiten-spezifischen Achsenabschnitten anhand der Grafik für die gepoolte Regression plausibel scheint.</span>
<span id="cb1-490"><a href="#cb1-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-491"><a href="#cb1-491" aria-hidden="true" tabindex="-1"></a><span class="fu">### Within- und LSDV-Schätzer {#sec-withldsv}</span></span>
<span id="cb1-492"><a href="#cb1-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-493"><a href="#cb1-493" aria-hidden="true" tabindex="-1"></a>Für die Vermeidung von Backdoors durch die $\alpha_i$ subtrahieren wir die einheiten-spezifischen Mittelwerte von den Komponenten (*Within-Transformation*)<span class="ot">[^fixedeffects-10]</span>, \begin{align}</span>
<span id="cb1-494"><a href="#cb1-494" aria-hidden="true" tabindex="-1"></a>  Y_{it} - \overline{Y}_i =&amp;\, (\alpha_i - \overline{\alpha}_i) + \beta_1 (B_{it} - \overline{B}_i) + \beta_2 (X_i - \overline{X}_i) + (\epsilon_{it} - \overline{\epsilon}_i)\notag<span class="sc">\\</span></span>
<span id="cb1-495"><a href="#cb1-495" aria-hidden="true" tabindex="-1"></a>  \tilde Y_{it} =&amp;\, \beta_1 \tilde B_{it} + \tilde\epsilon_{it}.\label{eq:fewithin}</span>
<span id="cb1-496"><a href="#cb1-496" aria-hidden="true" tabindex="-1"></a>\end{align} Der *Within-Schätzer* von $\beta_1$ ist der KQ-Schätzer in \eqref{eq:fewithin}. Dieser Schätzer nutzt die Variabilität innerhalb der Beobachtungseinheiten über die Zeit, um die Koeffizienten der unabhängigen Variablen zu schätzen. Ähnlich wie für den Differenzen-Schätzer eliminieren die Mittelwert-Differenzen $\alpha_i - \overline{\alpha}_i=0$ und $X_i - \overline{X}_i=0$ den Einfluss zeit-invarianter Variablen.</span>
<span id="cb1-497"><a href="#cb1-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-498"><a href="#cb1-498" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-10]: </span>Die Durchschnitte werden hierbei also über die *Zeitperioden* berechnet.</span>
<span id="cb1-499"><a href="#cb1-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-500"><a href="#cb1-500" aria-hidden="true" tabindex="-1"></a>Das Modell \eqref{eq:femodel} kann weiterhin als eine Regression mit $n-1$ Dummy-Variablen und einer Konstante geschrieben werden, \begin{align}</span>
<span id="cb1-501"><a href="#cb1-501" aria-hidden="true" tabindex="-1"></a>  Y_{it} = \beta_0 + \beta_2 B_{it} + \beta_2 X_i  + \gamma_2 D^{(2)}_i + \gamma_3 D^{(3)}_i + \cdots + \gamma_n D^{(n)}_i + \epsilon_{it} \label{eq:drmodel}.</span>
<span id="cb1-502"><a href="#cb1-502" aria-hidden="true" tabindex="-1"></a>\end{align} Die Darstellung \eqref{eq:drmodel} hat $n$ verschiedene Achsenabschnitte -- einen für jede Beobachtungseinheit -- und kann ebenfalls mit KQ geschätzt werden.<span class="ot">[^fixedeffects-11]</span> Der KQ-Schätzer ergibt für die Modelle \eqref{eq:femodel} und \eqref{eq:drmodel} numerisch äquivalente Schätzungen von $\beta_1$, wenn $X_i$ in der Dummy-Regression ausgelassen wird.<span class="ot">[^fixedeffects-12]</span> Die Schätzung von \eqref{eq:drmodel} mit KQ wird in der Literatur auch als *Least Squares Dummy Variables* (LSDV) Regression bezeichnet.</span>
<span id="cb1-503"><a href="#cb1-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-504"><a href="#cb1-504" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-11]: </span>Für $n-1$ Einheiten ist der individuelle Achsenabschnitt damit $\beta_0 + \gamma_i$ und für *eine* Einheit $\beta_0$. Diese Einheit (hier $i=1$) wird auch als *Referenzkategorie* bezeichnet. Alternativ kann das Modell mit $n$ Dummies und *ohne* die Konstante $\beta_0$ geschrieben werden.</span>
<span id="cb1-505"><a href="#cb1-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-506"><a href="#cb1-506" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-12]: </span>KQ ist hier erwartungstreu und konsistent, sofern $E(\epsilon_{is}\vert B_{it})=0$ für alle $s$ und $t$.</span>
<span id="cb1-507"><a href="#cb1-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-508"><a href="#cb1-508" aria-hidden="true" tabindex="-1"></a>Beachte, dass die Schätzung der Koeffizienten *beobachtbarer* zeitlich konstanter Regressoren wie $X_{i}$ lediglich in Modell \eqref{eq:drmodel} möglich ist.</span>
<span id="cb1-509"><a href="#cb1-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-510"><a href="#cb1-510" aria-hidden="true" tabindex="-1"></a>Fixed-Effects-Regressionen können mit <span class="in">`fixest::feols()`</span> geschätzt werden.<span class="ot">[^fixedeffects-13]</span> Je nach Spezifikation des Formula-Arguments (<span class="in">`fml`</span>) wird ein effizienter Algorithmus für die entsprechende Transformation von \eqref{eq:femodel} angwandt. Für <span class="in">`paneldata.csv`</span> erhalten wir mit <span class="in">`fml = Y ~ X | ID`</span> per Referenz des Indikators <span class="in">`ID`</span> eine Variante des Within-Schätzers.</span>
<span id="cb1-511"><a href="#cb1-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-512"><a href="#cb1-512" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-13]: </span>Eine Alternative ist <span class="in">`plm::plm()`</span> mit dem Argument <span class="in">`method = "within"`</span>.</span>
<span id="cb1-513"><a href="#cb1-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-516"><a href="#cb1-516" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-517"><a href="#cb1-517" aria-hidden="true" tabindex="-1"></a><span class="in"># Fixed-Effects-Schätzung</span></span>
<span id="cb1-518"><a href="#cb1-518" aria-hidden="true" tabindex="-1"></a><span class="in">panel_FE &lt;- feols(</span></span>
<span id="cb1-519"><a href="#cb1-519" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = Y ~ X | ID,  </span></span>
<span id="cb1-520"><a href="#cb1-520" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata</span></span>
<span id="cb1-521"><a href="#cb1-521" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-522"><a href="#cb1-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-523"><a href="#cb1-523" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-524"><a href="#cb1-524" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_FE)</span></span>
<span id="cb1-525"><a href="#cb1-525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-526"><a href="#cb1-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-527"><a href="#cb1-527" aria-hidden="true" tabindex="-1"></a>Die Zusammenfassung der Schätzung zeigt einen signifikanten Koeffizienten, der mit einer Schätzung von $-1.05$ nahe beim wahren Wert von $\beta_1 = -1$ liegt. Die geschätzten einheiten-spezifischen Effekte können mit <span class="in">`fixest::fixef()`</span> ausgelesen werden.</span>
<span id="cb1-528"><a href="#cb1-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-531"><a href="#cb1-531" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-532"><a href="#cb1-532" aria-hidden="true" tabindex="-1"></a><span class="in"># Geschätzte Fixed Effects (Einheiten) auslesen</span></span>
<span id="cb1-533"><a href="#cb1-533" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::fixef(panel_FE)</span></span>
<span id="cb1-534"><a href="#cb1-534" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-535"><a href="#cb1-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-536"><a href="#cb1-536" aria-hidden="true" tabindex="-1"></a>Mit <span class="in">`fml = Y ~ X + factor(ID)`</span> erfolgt eine Schätzung der Dummy-Regression \eqref{eq:drmodel} mit $n-1=11$ Dummies. Der Referenzeinheit ist <span class="in">`ID == 1`</span>. Wir sehen, dass der geschätzte Koeffizient von $X$ mit dem Ergebnis des Within-Schätzers übereinstimmt.</span>
<span id="cb1-537"><a href="#cb1-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-540"><a href="#cb1-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-541"><a href="#cb1-541" aria-hidden="true" tabindex="-1"></a><span class="in"># LSDV-Schätzung</span></span>
<span id="cb1-542"><a href="#cb1-542" aria-hidden="true" tabindex="-1"></a><span class="in">panel_LSDV &lt;- feols(</span></span>
<span id="cb1-543"><a href="#cb1-543" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = Y ~ X + factor(ID),  </span></span>
<span id="cb1-544"><a href="#cb1-544" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata</span></span>
<span id="cb1-545"><a href="#cb1-545" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-546"><a href="#cb1-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-547"><a href="#cb1-547" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-548"><a href="#cb1-548" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_LSDV)</span></span>
<span id="cb1-549"><a href="#cb1-549" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-550"><a href="#cb1-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-551"><a href="#cb1-551" aria-hidden="true" tabindex="-1"></a><span class="fu">### Zeit-Fixed-Effects</span></span>
<span id="cb1-552"><a href="#cb1-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-553"><a href="#cb1-553" aria-hidden="true" tabindex="-1"></a>Neben zeit-invarianten Heterogenitäten zwischen den Beobachtungseinheiten können beobachtbare und unbeobachtbare Einflüsse vorliegen, die nicht zwischen den Einheiten, jedoch über die Zeit variieren. Ein DGP mit solchen zeitabhängigen Heterogenitäten ist in @fig-FEDAG3 für $T=2$ dargestellt.<span class="ot">[^fixedeffects-14]</span></span>
<span id="cb1-554"><a href="#cb1-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-555"><a href="#cb1-555" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-14]: </span>Zur Vereinfachung der Interpretierbarkeit vernachlässigt das DAG in @fig-FEDAG3 zeitlich konstante Variablen.</span>
<span id="cb1-556"><a href="#cb1-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-559"><a href="#cb1-559" aria-hidden="true" tabindex="-1"></a><span class="in">```{dot}</span></span>
<span id="cb1-560"><a href="#cb1-560" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-width: 6</span></span>
<span id="cb1-561"><a href="#cb1-561" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-height: 4</span></span>
<span id="cb1-562"><a href="#cb1-562" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-align: 'center'</span></span>
<span id="cb1-563"><a href="#cb1-563" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-cap: "Panel-Design mit Backdoors durch beobachtete und unbeobachtete zeitabhängige Variablen"</span></span>
<span id="cb1-564"><a href="#cb1-564" aria-hidden="true" tabindex="-1"></a><span class="in">//| label: "fig-FEDAG3" </span></span>
<span id="cb1-565"><a href="#cb1-565" aria-hidden="true" tabindex="-1"></a><span class="in">digraph FE_dag3 {</span></span>
<span id="cb1-566"><a href="#cb1-566" aria-hidden="true" tabindex="-1"></a><span class="in">    layout=neato</span></span>
<span id="cb1-567"><a href="#cb1-567" aria-hidden="true" tabindex="-1"></a><span class="in">    fontname="Helvetica,Arial,sans-serif"</span></span>
<span id="cb1-568"><a href="#cb1-568" aria-hidden="true" tabindex="-1"></a><span class="in">    node [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-569"><a href="#cb1-569" aria-hidden="true" tabindex="-1"></a><span class="in">    edge [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-570"><a href="#cb1-570" aria-hidden="true" tabindex="-1"></a><span class="in">    splines=true</span></span>
<span id="cb1-571"><a href="#cb1-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-572"><a href="#cb1-572" aria-hidden="true" tabindex="-1"></a><span class="in">    // Zeitvariante unbeobachtete Effekte</span></span>
<span id="cb1-573"><a href="#cb1-573" aria-hidden="true" tabindex="-1"></a><span class="in">    U1 [pos="1,8!", label=&lt;U&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;, color=gray, fontcolor=gray];</span></span>
<span id="cb1-574"><a href="#cb1-574" aria-hidden="true" tabindex="-1"></a><span class="in">    U2 [pos="3,8!", label=&lt;U&lt;SUB&gt;t=2&lt;/SUB&gt;&gt;, color=gray, fontcolor=gray];</span></span>
<span id="cb1-575"><a href="#cb1-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-576"><a href="#cb1-576" aria-hidden="true" tabindex="-1"></a><span class="in">    // Knoten für Zeitvariante Einflüsse</span></span>
<span id="cb1-577"><a href="#cb1-577" aria-hidden="true" tabindex="-1"></a><span class="in">    X1 [pos="1,2!", label=&lt;X&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-578"><a href="#cb1-578" aria-hidden="true" tabindex="-1"></a><span class="in">    X2 [pos="3,2!", label=&lt;X&lt;SUB&gt;t=2&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-579"><a href="#cb1-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-580"><a href="#cb1-580" aria-hidden="true" tabindex="-1"></a><span class="in">    // Knoten für Perioden 1</span></span>
<span id="cb1-581"><a href="#cb1-581" aria-hidden="true" tabindex="-1"></a><span class="in">    B1 [pos="-1,4!", label=&lt;B&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-582"><a href="#cb1-582" aria-hidden="true" tabindex="-1"></a><span class="in">    Y1 [pos="-1,6!", label=&lt;Y&lt;SUB&gt;t=1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-583"><a href="#cb1-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-584"><a href="#cb1-584" aria-hidden="true" tabindex="-1"></a><span class="in">    // Knoten für Perioden 2</span></span>
<span id="cb1-585"><a href="#cb1-585" aria-hidden="true" tabindex="-1"></a><span class="in">    B2 [pos="5,4!", label=&lt;B&lt;SUB&gt;t=2&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-586"><a href="#cb1-586" aria-hidden="true" tabindex="-1"></a><span class="in">    Y2 [pos="5,6!", label=&lt;Y&lt;SUB&gt;t=2&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-587"><a href="#cb1-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-588"><a href="#cb1-588" aria-hidden="true" tabindex="-1"></a><span class="in">    // Kanten für Perioden 1</span></span>
<span id="cb1-589"><a href="#cb1-589" aria-hidden="true" tabindex="-1"></a><span class="in">    U1 -&gt; X1 [color=gray, style=dashed];</span></span>
<span id="cb1-590"><a href="#cb1-590" aria-hidden="true" tabindex="-1"></a><span class="in">    U1 -&gt; Y1 [color=gray, style=dashed];</span></span>
<span id="cb1-591"><a href="#cb1-591" aria-hidden="true" tabindex="-1"></a><span class="in">    U1 -&gt; B1 [color=gray, style=dashed];</span></span>
<span id="cb1-592"><a href="#cb1-592" aria-hidden="true" tabindex="-1"></a><span class="in">    X1 -&gt; Y1;</span></span>
<span id="cb1-593"><a href="#cb1-593" aria-hidden="true" tabindex="-1"></a><span class="in">    X1 -&gt; B1;</span></span>
<span id="cb1-594"><a href="#cb1-594" aria-hidden="true" tabindex="-1"></a><span class="in">    B1 -&gt; Y1;</span></span>
<span id="cb1-595"><a href="#cb1-595" aria-hidden="true" tabindex="-1"></a><span class="in">    B1 -&gt; B2;</span></span>
<span id="cb1-596"><a href="#cb1-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-597"><a href="#cb1-597" aria-hidden="true" tabindex="-1"></a><span class="in">    // Kanten für Perioden 2</span></span>
<span id="cb1-598"><a href="#cb1-598" aria-hidden="true" tabindex="-1"></a><span class="in">    U2 -&gt; X2 [color=gray, style=dashed];</span></span>
<span id="cb1-599"><a href="#cb1-599" aria-hidden="true" tabindex="-1"></a><span class="in">    U2 -&gt; Y2 [color=gray, style=dashed];</span></span>
<span id="cb1-600"><a href="#cb1-600" aria-hidden="true" tabindex="-1"></a><span class="in">    U2 -&gt; B2 [color=gray, style=dashed];</span></span>
<span id="cb1-601"><a href="#cb1-601" aria-hidden="true" tabindex="-1"></a><span class="in">    X2 -&gt; Y2;</span></span>
<span id="cb1-602"><a href="#cb1-602" aria-hidden="true" tabindex="-1"></a><span class="in">    X2 -&gt; B2;</span></span>
<span id="cb1-603"><a href="#cb1-603" aria-hidden="true" tabindex="-1"></a><span class="in">    B2 -&gt; Y2;</span></span>
<span id="cb1-604"><a href="#cb1-604" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb1-605"><a href="#cb1-605" aria-hidden="true" tabindex="-1"></a><span class="in">    U1 -&gt; U2 [color=gray, style=dashed];</span></span>
<span id="cb1-606"><a href="#cb1-606" aria-hidden="true" tabindex="-1"></a><span class="in">    X1 -&gt; X2;</span></span>
<span id="cb1-607"><a href="#cb1-607" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-608"><a href="#cb1-608" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-609"><a href="#cb1-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-610"><a href="#cb1-610" aria-hidden="true" tabindex="-1"></a>Für beobachtbare zeitabhängige Backdoor-Variablen $X_t$ kann durch Aufnahme dieser in die Regression \eqref{eq:femodel} kontrolliert werden. Analog zum Fixed-Effects-Ansatz mit einheiten-spezifischen Konstanten können Backdoors durch unbeobachtbare zeitabhängige Einflüsse $U_t$ durch Kontrolle für perioden-spezifische Dummies $D_t^{(t)}$ (Time Fixed Effects) vermieden werden. Das Modell lautet dann</span>
<span id="cb1-611"><a href="#cb1-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-612"><a href="#cb1-612" aria-hidden="true" tabindex="-1"></a><span class="in">```{=tex}</span></span>
<span id="cb1-613"><a href="#cb1-613" aria-hidden="true" tabindex="-1"></a><span class="in">\begin{align*}</span></span>
<span id="cb1-614"><a href="#cb1-614" aria-hidden="true" tabindex="-1"></a><span class="in">  Y_{it} = \beta_0 + \beta_1 B_{it} + \beta_2 X_t + \lambda_2 D_t^{(2)} + \cdots + \lambda_T D_t^{(T)} + \epsilon_{it}. </span></span>
<span id="cb1-615"><a href="#cb1-615" aria-hidden="true" tabindex="-1"></a><span class="in">\end{align*}</span></span>
<span id="cb1-616"><a href="#cb1-616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-617"><a href="#cb1-617" aria-hidden="true" tabindex="-1"></a>In empirischen Anwendung ist es häufig plausibel, für zeit- und einheiten-spezifische Effekte zu kontrollieren. Der entsprechende Regressionsansatz wird als *Two Way Fixed Effects* (TWFE) bezeichnet.</span>
<span id="cb1-618"><a href="#cb1-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-619"><a href="#cb1-619" aria-hidden="true" tabindex="-1"></a>Ein TWFE-Modell für <span class="in">`paneldata.csv`</span> kann mit <span class="in">`feols()`</span> leicht unter Angabe der Identifikationsvariable für die Zeitperioden (<span class="in">`time`</span>) innerhalb des <span class="in">`fml`</span>-Arguments geschätzt werden.</span>
<span id="cb1-620"><a href="#cb1-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-623"><a href="#cb1-623" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-624"><a href="#cb1-624" aria-hidden="true" tabindex="-1"></a><span class="in"># TWFE-Schätzung</span></span>
<span id="cb1-625"><a href="#cb1-625" aria-hidden="true" tabindex="-1"></a><span class="in">panel_TWFE &lt;- feols(</span></span>
<span id="cb1-626"><a href="#cb1-626" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = Y ~ X | ID + time,  </span></span>
<span id="cb1-627"><a href="#cb1-627" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata</span></span>
<span id="cb1-628"><a href="#cb1-628" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-629"><a href="#cb1-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-630"><a href="#cb1-630" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-631"><a href="#cb1-631" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_TWFE)</span></span>
<span id="cb1-632"><a href="#cb1-632" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-633"><a href="#cb1-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-636"><a href="#cb1-636" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-637"><a href="#cb1-637" aria-hidden="true" tabindex="-1"></a><span class="in"># Geschätzte Fixed Effects (Einheiten + Zeit) auslesen</span></span>
<span id="cb1-638"><a href="#cb1-638" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::fixef(panel_TWFE)</span></span>
<span id="cb1-639"><a href="#cb1-639" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-640"><a href="#cb1-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-641"><a href="#cb1-641" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb1-642"><a href="#cb1-642" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Key Facts zu Fixed-Effects-Regression</span></span>
<span id="cb1-643"><a href="#cb1-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-644"><a href="#cb1-644" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Ein Fixed-Effects-Designs betrachten *unbeobachtete*, mit den erklärenden Variablen korrelierte Heterogenitäten als *konstante* parameter. Korrigieren für diese Heterogenitäten ist Voraussetzung für eine verzerrungsfreie Schätzung kausaler Effekte.</span>
<span id="cb1-645"><a href="#cb1-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-646"><a href="#cb1-646" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Fixed-Effects-Schätzer schließen Backdoors aufgrund von Heterogenitäten zwischen Beobachtungseinheiten die über die Zeit konstant sind (einheiten-spezifische Effekte) und/oder für Heterogenitäten, die identisch für die Beobachtungseinheiten sind, jedoch über die Zeit variieren (Zeit-Effekte):</span>
<span id="cb1-647"><a href="#cb1-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-648"><a href="#cb1-648" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>KQ nach der Within-Transformation (Within-Schätzer) ist erwartungstreu und konsistent, solange die erklärenden Variablen zeitlich unkorreliert mit den Fehlertermen sind.</span>
<span id="cb1-649"><a href="#cb1-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-650"><a href="#cb1-650" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>LSDV-Regression ist eine Variante die Backdoors durch unbeobachtbare Heterogenitäten mit Dummy-Variablen schließt. In einer LSDV-Regression können die Koeffizienten zeitlich konstanter Variablen geschätzt werden.</span>
<span id="cb1-651"><a href="#cb1-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-652"><a href="#cb1-652" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Statistische Inferenz für Fixed-Effects-Schätzer erfolgt anhand einer Approximation der asymptotischen Normalverteilung. Da die Fehlerterme heteroskedastisch und/oder über die Zeit korreliert sein können, sollten cluster-robuste Standardfehler verwendet werden, vgl. @sec-crse.</span>
<span id="cb1-653"><a href="#cb1-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-654"><a href="#cb1-654" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Fixed-Effects-Modelle können in R mit dem Paketen <span class="in">`fixest`</span> oder <span class="in">`plm`</span> berechnet werden.</span>
<span id="cb1-655"><a href="#cb1-655" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-656"><a href="#cb1-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-657"><a href="#cb1-657" aria-hidden="true" tabindex="-1"></a><span class="fu">## Random Effects</span></span>
<span id="cb1-658"><a href="#cb1-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-659"><a href="#cb1-659" aria-hidden="true" tabindex="-1"></a>Der Fixed-Effects-Ansatz behandelt die einheiten-spezifischen Effekte $\alpha_i$ in Modell \eqref{eq:femodel} als konstante Parameter, für die korrigiert oder kontrolliert werden muss. Der Random-Effects-Ansatz betrachtet die $\alpha_i$ als **Zufallsvariablen** mit einer identischen Verteilung, unter der Annahme, dass die $\alpha_i$ *nicht* mit den erklärenden Variablen korrelieren.<span class="ot">[^fixedeffects-15]</span> Falls diese Annahmen erfüllt sind, ist der Random-Random-Effects-Schätzer effizienter als der Fixed-Effects-Schätzer: Der mittlere quadratische Fehler der Schätzung ist geringer.<span class="ot">[^fixedeffects-16]</span></span>
<span id="cb1-660"><a href="#cb1-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-661"><a href="#cb1-661" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-15]: </span>Erwartungstreue und Konsistenz und Effizienz erfordern $E(\alpha_i\vert B_{it})=0$ *und* $E(\epsilon_{it}\vert\alpha_i,B_{it})=0$.</span>
<span id="cb1-662"><a href="#cb1-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-663"><a href="#cb1-663" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-16]: </span>Die Schätzung erfolgt meist mit der Generalized Least Squares (GLS) oder mit <span class="co">[</span><span class="ot">Maximum-Likelihood</span><span class="co">](https://de.wikipedia.org/wiki/Maximum-Likelihood-Methode)</span> (ML).</span>
<span id="cb1-664"><a href="#cb1-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-665"><a href="#cb1-665" aria-hidden="true" tabindex="-1"></a>Das einfache Random-Effects-Modell notieren wir als \begin{align*}</span>
<span id="cb1-666"><a href="#cb1-666" aria-hidden="true" tabindex="-1"></a>  Y_{it} =&amp;\, \beta_0 + \beta_1 B_{it} + \varepsilon_{it},</span>
<span id="cb1-667"><a href="#cb1-667" aria-hidden="true" tabindex="-1"></a>\end{align*} wobei sich der Fehlerterm $\varepsilon_{it}$ aus dem zufälligen individuellen Effekt $\alpha_i$ und dem unabhängigen Fehler $\epsilon_{it}$ zusammensetzt, \begin{align*}</span>
<span id="cb1-668"><a href="#cb1-668" aria-hidden="true" tabindex="-1"></a>  \varepsilon_{it} = \alpha_i + \epsilon_{it}.</span>
<span id="cb1-669"><a href="#cb1-669" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb1-670"><a href="#cb1-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-671"><a href="#cb1-671" aria-hidden="true" tabindex="-1"></a>Für ein Beispiel simulieren wir Daten gemäß der Vorschrift \begin{align}</span>
<span id="cb1-672"><a href="#cb1-672" aria-hidden="true" tabindex="-1"></a>  Y_{it} = \alpha_i + \beta B_{it} + \epsilon_{it}\label{eq:resim}</span>
<span id="cb1-673"><a href="#cb1-673" aria-hidden="true" tabindex="-1"></a>\end{align} und wählen \begin{align*}</span>
<span id="cb1-674"><a href="#cb1-674" aria-hidden="true" tabindex="-1"></a>  &amp; \alpha_i \overset{u.i.v}{\sim} N(0,2.5^2), <span class="sc">\\</span></span>
<span id="cb1-675"><a href="#cb1-675" aria-hidden="true" tabindex="-1"></a>  &amp; \beta_1 = -1,<span class="sc">\\</span></span>
<span id="cb1-676"><a href="#cb1-676" aria-hidden="true" tabindex="-1"></a>  &amp; B_{it} \sim N(0,1),<span class="sc">\\</span></span>
<span id="cb1-677"><a href="#cb1-677" aria-hidden="true" tabindex="-1"></a>  &amp; \epsilon_{it} \overset{u.i.v}{\sim} N(0,0.75^2).</span>
<span id="cb1-678"><a href="#cb1-678" aria-hidden="true" tabindex="-1"></a>\end{align*} Wie in <span class="in">`paneldata.csv`</span> erzeugen wir Daten für $n=12$ Individuen, die zu $T=8$ Zeitperioden beobachtet werden. Mit diesen Komponenten wird die Outcome-Variable $Y_{it}$ wie in \eqref{eq:resim} generiert. Der nachstehende Code erzeugt die Daten als Matrizen <span class="in">`B`</span> und <span class="in">`Y`</span>, die anschließend in ein langes Datenformat (<span class="in">`tibble`</span>) umgewandelt werden.</span>
<span id="cb1-679"><a href="#cb1-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-682"><a href="#cb1-682" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-683"><a href="#cb1-683" aria-hidden="true" tabindex="-1"></a><span class="in">library(plm)</span></span>
<span id="cb1-684"><a href="#cb1-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-685"><a href="#cb1-685" aria-hidden="true" tabindex="-1"></a><span class="in">set.seed(1234)</span></span>
<span id="cb1-686"><a href="#cb1-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-687"><a href="#cb1-687" aria-hidden="true" tabindex="-1"></a><span class="in"># Parameter</span></span>
<span id="cb1-688"><a href="#cb1-688" aria-hidden="true" tabindex="-1"></a><span class="in">n &lt;- 12  # Individuen</span></span>
<span id="cb1-689"><a href="#cb1-689" aria-hidden="true" tabindex="-1"></a><span class="in">m &lt;- 8   # Perioden</span></span>
<span id="cb1-690"><a href="#cb1-690" aria-hidden="true" tabindex="-1"></a><span class="in">beta &lt;- -1 # Behandlungseffekt</span></span>
<span id="cb1-691"><a href="#cb1-691" aria-hidden="true" tabindex="-1"></a><span class="in">sigma_alpha &lt;- 2.5 # SD für RE</span></span>
<span id="cb1-692"><a href="#cb1-692" aria-hidden="true" tabindex="-1"></a><span class="in">sigma_epsilon &lt;- 0.75 # SD für Fehler</span></span>
<span id="cb1-693"><a href="#cb1-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-694"><a href="#cb1-694" aria-hidden="true" tabindex="-1"></a><span class="in"># Random Effects</span></span>
<span id="cb1-695"><a href="#cb1-695" aria-hidden="true" tabindex="-1"></a><span class="in">alpha &lt;- rnorm(n, mean = 0, sd = sigma_alpha)</span></span>
<span id="cb1-696"><a href="#cb1-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-697"><a href="#cb1-697" aria-hidden="true" tabindex="-1"></a><span class="in"># Matrizen</span></span>
<span id="cb1-698"><a href="#cb1-698" aria-hidden="true" tabindex="-1"></a><span class="in">B &lt;- matrix(NA, nrow = m, ncol = n)</span></span>
<span id="cb1-699"><a href="#cb1-699" aria-hidden="true" tabindex="-1"></a><span class="in">Y &lt;- matrix(NA, nrow = m, ncol = n)</span></span>
<span id="cb1-700"><a href="#cb1-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-701"><a href="#cb1-701" aria-hidden="true" tabindex="-1"></a><span class="in"># Simulation</span></span>
<span id="cb1-702"><a href="#cb1-702" aria-hidden="true" tabindex="-1"></a><span class="in">for (i in 1:n) {</span></span>
<span id="cb1-703"><a href="#cb1-703" aria-hidden="true" tabindex="-1"></a><span class="in">  for (t in 1:m) {</span></span>
<span id="cb1-704"><a href="#cb1-704" aria-hidden="true" tabindex="-1"></a><span class="in">    B[t, i] &lt;- rnorm(1, mean = 0, sd = 1)</span></span>
<span id="cb1-705"><a href="#cb1-705" aria-hidden="true" tabindex="-1"></a><span class="in">    epsilon_it &lt;- rnorm(1, mean = 0, sd = sigma_epsilon)</span></span>
<span id="cb1-706"><a href="#cb1-706" aria-hidden="true" tabindex="-1"></a><span class="in">    Y[t, i] &lt;- alpha[i] + beta * B[t, i] + epsilon_it</span></span>
<span id="cb1-707"><a href="#cb1-707" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb1-708"><a href="#cb1-708" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-709"><a href="#cb1-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-710"><a href="#cb1-710" aria-hidden="true" tabindex="-1"></a><span class="in"># tibble erzeugen</span></span>
<span id="cb1-711"><a href="#cb1-711" aria-hidden="true" tabindex="-1"></a><span class="in">RE_paneldata &lt;- tibble(</span></span>
<span id="cb1-712"><a href="#cb1-712" aria-hidden="true" tabindex="-1"></a><span class="in">  id = factor(rep(1:n, each = m)),</span></span>
<span id="cb1-713"><a href="#cb1-713" aria-hidden="true" tabindex="-1"></a><span class="in">  time = rep(1:m, times = n),</span></span>
<span id="cb1-714"><a href="#cb1-714" aria-hidden="true" tabindex="-1"></a><span class="in">  B = as.vector(B),</span></span>
<span id="cb1-715"><a href="#cb1-715" aria-hidden="true" tabindex="-1"></a><span class="in">  Y = as.vector(Y)</span></span>
<span id="cb1-716"><a href="#cb1-716" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-717"><a href="#cb1-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-718"><a href="#cb1-718" aria-hidden="true" tabindex="-1"></a><span class="in"># Überblick</span></span>
<span id="cb1-719"><a href="#cb1-719" aria-hidden="true" tabindex="-1"></a><span class="in">slice_head(</span></span>
<span id="cb1-720"><a href="#cb1-720" aria-hidden="true" tabindex="-1"></a><span class="in">  .data = RE_paneldata, </span></span>
<span id="cb1-721"><a href="#cb1-721" aria-hidden="true" tabindex="-1"></a><span class="in">  n = 10</span></span>
<span id="cb1-722"><a href="#cb1-722" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-723"><a href="#cb1-723" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-724"><a href="#cb1-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-725"><a href="#cb1-725" aria-hidden="true" tabindex="-1"></a>Für die Anpassung des Random-Effect-Schätzers an den simulierten Datensatz <span class="in">`RE_paneldata`</span> nutzen wir <span class="in">`plm::plm()`</span> mit <span class="in">`model = "random"`</span>. Mit <span class="in">`effect = "individual"`</span> legen wir einheiten-spezifische Random Effects fest.<span class="ot">[^fixedeffects-17]</span></span>
<span id="cb1-726"><a href="#cb1-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-727"><a href="#cb1-727" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-17]: </span>Analog zu Fixed-Effects-Modellen können mit <span class="in">`effect = "twoway"`</span> einheiten- *und* zeit-spezifische zufällige Effekte modelliert werden.</span>
<span id="cb1-728"><a href="#cb1-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-731"><a href="#cb1-731" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-732"><a href="#cb1-732" aria-hidden="true" tabindex="-1"></a><span class="in"># Random-Effects-Modell anpassen</span></span>
<span id="cb1-733"><a href="#cb1-733" aria-hidden="true" tabindex="-1"></a><span class="in">panel_RE &lt;- plm(</span></span>
<span id="cb1-734"><a href="#cb1-734" aria-hidden="true" tabindex="-1"></a><span class="in">  formula = Y ~ B, </span></span>
<span id="cb1-735"><a href="#cb1-735" aria-hidden="true" tabindex="-1"></a><span class="in">  data = RE_paneldata, </span></span>
<span id="cb1-736"><a href="#cb1-736" aria-hidden="true" tabindex="-1"></a><span class="in">  index = c("id", "time"),</span></span>
<span id="cb1-737"><a href="#cb1-737" aria-hidden="true" tabindex="-1"></a><span class="in">  effect = "individual",</span></span>
<span id="cb1-738"><a href="#cb1-738" aria-hidden="true" tabindex="-1"></a><span class="in">  model = "random"</span></span>
<span id="cb1-739"><a href="#cb1-739" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-740"><a href="#cb1-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-741"><a href="#cb1-741" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-742"><a href="#cb1-742" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_RE)</span></span>
<span id="cb1-743"><a href="#cb1-743" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-744"><a href="#cb1-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-745"><a href="#cb1-745" aria-hidden="true" tabindex="-1"></a>Die Schätzung zeigt eine gute Anpassung an die Daten und der geschätzte Behandlungseffekt liegt mit $-0.996$ nahe am wahren Koeffizienten $\beta_1 = -1$.</span>
<span id="cb1-746"><a href="#cb1-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-747"><a href="#cb1-747" aria-hidden="true" tabindex="-1"></a>Mit <span class="in">`plm::ranef()`</span> erhalten wir *Differenzen* der geschätzten einheiten-spezifischen Effekte vom geschätzten Erwartungswert <span class="in">`(Intercept)`</span>.</span>
<span id="cb1-748"><a href="#cb1-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-751"><a href="#cb1-751" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-752"><a href="#cb1-752" aria-hidden="true" tabindex="-1"></a><span class="in"># Gesch. Random Effects auslesen:</span></span>
<span id="cb1-753"><a href="#cb1-753" aria-hidden="true" tabindex="-1"></a><span class="in"># Differenzen zur Konstante (Intercept)</span></span>
<span id="cb1-754"><a href="#cb1-754" aria-hidden="true" tabindex="-1"></a><span class="in">ranef(panel_RE)</span></span>
<span id="cb1-755"><a href="#cb1-755" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-756"><a href="#cb1-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-757"><a href="#cb1-757" aria-hidden="true" tabindex="-1"></a>Für die grafische Darstellung der Schätzung berechnen wir zunächst mit <span class="in">`fitted()`</span> die angepassten Werte. Für ein mit <span class="in">`plm()`</span> geschätztes Random-Effects-Modell werden die individuellen Effekte von <span class="in">`fitted()`</span> nicht berücksichtigt und müssen daher manuell hinzugefügt werden. Hierfür lesen wir zunächst den geschätzten Erwartungswert der gemeinsamen Verteilung $\widehat{\beta}_0$ aus und addieren anschließend die von <span class="in">`ranef()`</span> ausgegebenen Differenzen der individuellen Effekte gruppenweise.</span>
<span id="cb1-758"><a href="#cb1-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-761"><a href="#cb1-761" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-762"><a href="#cb1-762" aria-hidden="true" tabindex="-1"></a><span class="in"># Intercept</span></span>
<span id="cb1-763"><a href="#cb1-763" aria-hidden="true" tabindex="-1"></a><span class="in">hat_beta_0 &lt;- panel_RE$coefficients[1]</span></span>
<span id="cb1-764"><a href="#cb1-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-765"><a href="#cb1-765" aria-hidden="true" tabindex="-1"></a><span class="in"># Gesch. Random Effects jeweils berücksichtigen</span></span>
<span id="cb1-766"><a href="#cb1-766" aria-hidden="true" tabindex="-1"></a><span class="in">RE_paneldata &lt;- RE_paneldata %&gt;%</span></span>
<span id="cb1-767"><a href="#cb1-767" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb1-768"><a href="#cb1-768" aria-hidden="true" tabindex="-1"></a><span class="in">    fitted_RE = </span></span>
<span id="cb1-769"><a href="#cb1-769" aria-hidden="true" tabindex="-1"></a><span class="in">      fitted(panel_RE) </span></span>
<span id="cb1-770"><a href="#cb1-770" aria-hidden="true" tabindex="-1"></a><span class="in">    + hat_beta_0 </span></span>
<span id="cb1-771"><a href="#cb1-771" aria-hidden="true" tabindex="-1"></a><span class="in">    + rep(ranef(panel_RE), each = m)</span></span>
<span id="cb1-772"><a href="#cb1-772" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb1-773"><a href="#cb1-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-774"><a href="#cb1-774" aria-hidden="true" tabindex="-1"></a><span class="in"># Überblick</span></span>
<span id="cb1-775"><a href="#cb1-775" aria-hidden="true" tabindex="-1"></a><span class="in">slice_head(</span></span>
<span id="cb1-776"><a href="#cb1-776" aria-hidden="true" tabindex="-1"></a><span class="in">  .data = RE_paneldata,</span></span>
<span id="cb1-777"><a href="#cb1-777" aria-hidden="true" tabindex="-1"></a><span class="in">  n = 10</span></span>
<span id="cb1-778"><a href="#cb1-778" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-779"><a href="#cb1-779" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-780"><a href="#cb1-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-783"><a href="#cb1-783" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-784"><a href="#cb1-784" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-repanelest</span></span>
<span id="cb1-785"><a href="#cb1-785" aria-hidden="true" tabindex="-1"></a><span class="in"># Daten und geschätztes RE-Modell plotten</span></span>
<span id="cb1-786"><a href="#cb1-786" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(</span></span>
<span id="cb1-787"><a href="#cb1-787" aria-hidden="true" tabindex="-1"></a><span class="in">  data = RE_paneldata, </span></span>
<span id="cb1-788"><a href="#cb1-788" aria-hidden="true" tabindex="-1"></a><span class="in">  mapping = </span></span>
<span id="cb1-789"><a href="#cb1-789" aria-hidden="true" tabindex="-1"></a><span class="in">    aes(</span></span>
<span id="cb1-790"><a href="#cb1-790" aria-hidden="true" tabindex="-1"></a><span class="in">      x = B, </span></span>
<span id="cb1-791"><a href="#cb1-791" aria-hidden="true" tabindex="-1"></a><span class="in">      y = Y, </span></span>
<span id="cb1-792"><a href="#cb1-792" aria-hidden="true" tabindex="-1"></a><span class="in">      col = id</span></span>
<span id="cb1-793"><a href="#cb1-793" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb1-794"><a href="#cb1-794" aria-hidden="true" tabindex="-1"></a><span class="in">) + </span></span>
<span id="cb1-795"><a href="#cb1-795" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(show.legend = F) +</span></span>
<span id="cb1-796"><a href="#cb1-796" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(</span></span>
<span id="cb1-797"><a href="#cb1-797" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(y = fitted_RE, group = id), </span></span>
<span id="cb1-798"><a href="#cb1-798" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-799"><a href="#cb1-799" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-800"><a href="#cb1-800" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-801"><a href="#cb1-801" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`RE_paneldata` -- Random-Effects-Schätzung für simulierte Daten"</span></span>
<span id="cb1-802"><a href="#cb1-802" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-803"><a href="#cb1-803" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot()</span></span>
<span id="cb1-804"><a href="#cb1-804" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-805"><a href="#cb1-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-806"><a href="#cb1-806" aria-hidden="true" tabindex="-1"></a><span class="fu">### Verzerrung bei Endogenität</span></span>
<span id="cb1-807"><a href="#cb1-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-808"><a href="#cb1-808" aria-hidden="true" tabindex="-1"></a>Die Random-Effects-Methode findet bei kausalen Analyse in empirischen Anwendungen selten Anwendung, weil die Annahme von Unkorreliertheit mit den erklärenden Regressoren oft unplausibel ist. Falls diese Annahme (wie in den DAGs @fig-FEDAG1 und @fig-FEDAG2) verletzt ist, kann Random Effects die ensprechenden Backdoors nicht schließen: Der Random-Effects-Schätzer ist dann verzerrt und inkonsistent, ähnlich wie der naive KQ-Schätzer in einer Pooled Regression. Im nächsten Abschnitt untersuchen wir Konsequenzen dieser Eigenschaft anhand simulierter Daten.</span>
<span id="cb1-809"><a href="#cb1-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-810"><a href="#cb1-810" aria-hidden="true" tabindex="-1"></a>Zur Illustration der Verzerrung des Random-Effects-Schätzers bei Endogenität von erklärenden Variablen verwenden wir erneut den anhand eines Fixed-Effects-DGPs simulierten Datensatz <span class="in">`paneldata.csv`</span>.</span>
<span id="cb1-811"><a href="#cb1-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-814"><a href="#cb1-814" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-815"><a href="#cb1-815" aria-hidden="true" tabindex="-1"></a><span class="in"># Random-Effects-Schätzung für `paneldata`</span></span>
<span id="cb1-816"><a href="#cb1-816" aria-hidden="true" tabindex="-1"></a><span class="in">panel_RE &lt;- plm(</span></span>
<span id="cb1-817"><a href="#cb1-817" aria-hidden="true" tabindex="-1"></a><span class="in">  formula = Y ~ X, </span></span>
<span id="cb1-818"><a href="#cb1-818" aria-hidden="true" tabindex="-1"></a><span class="in">  effect = "individual",</span></span>
<span id="cb1-819"><a href="#cb1-819" aria-hidden="true" tabindex="-1"></a><span class="in">  model = "random",</span></span>
<span id="cb1-820"><a href="#cb1-820" aria-hidden="true" tabindex="-1"></a><span class="in">  index = c("ID", "time"),  </span></span>
<span id="cb1-821"><a href="#cb1-821" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata</span></span>
<span id="cb1-822"><a href="#cb1-822" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-823"><a href="#cb1-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-824"><a href="#cb1-824" aria-hidden="true" tabindex="-1"></a><span class="in"># Statistische Zusammenfassung</span></span>
<span id="cb1-825"><a href="#cb1-825" aria-hidden="true" tabindex="-1"></a><span class="in">summary(panel_RE)</span></span>
<span id="cb1-826"><a href="#cb1-826" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-827"><a href="#cb1-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-828"><a href="#cb1-828" aria-hidden="true" tabindex="-1"></a>Offenbar weicht der Random-Effects-Schätzer des Effects von $X$ auf $Y$ deutlich vom wahren Parameter $\beta_1 = -1$ ab. Diese Abweichung ist auf die Endogenität von $X$ zurückzuführen.</span>
<span id="cb1-829"><a href="#cb1-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-830"><a href="#cb1-830" aria-hidden="true" tabindex="-1"></a>Die nächste Grafik vergleicht die Schätzungen des Behandlungseffekts für den Datensatz <span class="in">`paneldata.csv`</span> mit Pooling (schwarze Linie), Fixed Effects (farbige Linien) und Random Effects (gestrichelte schwarze Linie). Vorab erweitern wir <span class="in">`paneldata`</span> um die angepassten Werte für die Fixed- und die Random-Effects-Schätzung in <span class="in">`panel_FE`</span> und <span class="in">`panel_RE`</span>.<span class="ot">[^fixedeffects-18]</span></span>
<span id="cb1-831"><a href="#cb1-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-832"><a href="#cb1-832" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-18]: </span>Für bessere Lesbarkeit erzeugen wir hier mit <span class="in">`predict()`</span> *eine* Regressionsgerade, deren Achsenabschnitt dem geschätzten Erwartungswert der Random-Effects-Verteilung entspricht.</span>
<span id="cb1-833"><a href="#cb1-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-836"><a href="#cb1-836" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-837"><a href="#cb1-837" aria-hidden="true" tabindex="-1"></a><span class="in">paneldata &lt;- paneldata %&gt;% </span></span>
<span id="cb1-838"><a href="#cb1-838" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb1-839"><a href="#cb1-839" aria-hidden="true" tabindex="-1"></a><span class="in">    # Vorhergesagte Werte für FE-Schätzung</span></span>
<span id="cb1-840"><a href="#cb1-840" aria-hidden="true" tabindex="-1"></a><span class="in">    yhat_FE = fitted(panel_FE),</span></span>
<span id="cb1-841"><a href="#cb1-841" aria-hidden="true" tabindex="-1"></a><span class="in">    # Vorhergesagte Werte für RE-Schätzung</span></span>
<span id="cb1-842"><a href="#cb1-842" aria-hidden="true" tabindex="-1"></a><span class="in">    yhat_RE = predict(panel_RE)</span></span>
<span id="cb1-843"><a href="#cb1-843" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb1-844"><a href="#cb1-844" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-845"><a href="#cb1-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-848"><a href="#cb1-848" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-849"><a href="#cb1-849" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-panelcomparison</span></span>
<span id="cb1-850"><a href="#cb1-850" aria-hidden="true" tabindex="-1"></a><span class="in"># Grafik für Vergleich</span></span>
<span id="cb1-851"><a href="#cb1-851" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(</span></span>
<span id="cb1-852"><a href="#cb1-852" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata,</span></span>
<span id="cb1-853"><a href="#cb1-853" aria-hidden="true" tabindex="-1"></a><span class="in">  mapping = aes(x = X, y = Y)</span></span>
<span id="cb1-854"><a href="#cb1-854" aria-hidden="true" tabindex="-1"></a><span class="in">) +</span></span>
<span id="cb1-855"><a href="#cb1-855" aria-hidden="true" tabindex="-1"></a><span class="in">  # Beoachtungen</span></span>
<span id="cb1-856"><a href="#cb1-856" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(</span></span>
<span id="cb1-857"><a href="#cb1-857" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(color = col), </span></span>
<span id="cb1-858"><a href="#cb1-858" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-859"><a href="#cb1-859" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-860"><a href="#cb1-860" aria-hidden="true" tabindex="-1"></a><span class="in">  # Pooling</span></span>
<span id="cb1-861"><a href="#cb1-861" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_smooth(</span></span>
<span id="cb1-862"><a href="#cb1-862" aria-hidden="true" tabindex="-1"></a><span class="in">    method = "lm", </span></span>
<span id="cb1-863"><a href="#cb1-863" aria-hidden="true" tabindex="-1"></a><span class="in">    se = F,</span></span>
<span id="cb1-864"><a href="#cb1-864" aria-hidden="true" tabindex="-1"></a><span class="in">    col = "black"</span></span>
<span id="cb1-865"><a href="#cb1-865" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-866"><a href="#cb1-866" aria-hidden="true" tabindex="-1"></a><span class="in">  # Fixed Effects</span></span>
<span id="cb1-867"><a href="#cb1-867" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(</span></span>
<span id="cb1-868"><a href="#cb1-868" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(</span></span>
<span id="cb1-869"><a href="#cb1-869" aria-hidden="true" tabindex="-1"></a><span class="in">      y = yhat_FE,</span></span>
<span id="cb1-870"><a href="#cb1-870" aria-hidden="true" tabindex="-1"></a><span class="in">      group = ID,</span></span>
<span id="cb1-871"><a href="#cb1-871" aria-hidden="true" tabindex="-1"></a><span class="in">      col = col</span></span>
<span id="cb1-872"><a href="#cb1-872" aria-hidden="true" tabindex="-1"></a><span class="in">    ), </span></span>
<span id="cb1-873"><a href="#cb1-873" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-874"><a href="#cb1-874" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-875"><a href="#cb1-875" aria-hidden="true" tabindex="-1"></a><span class="in">  # Random Effects</span></span>
<span id="cb1-876"><a href="#cb1-876" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(</span></span>
<span id="cb1-877"><a href="#cb1-877" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(y = yhat_RE), </span></span>
<span id="cb1-878"><a href="#cb1-878" aria-hidden="true" tabindex="-1"></a><span class="in">    lty = "dashed", </span></span>
<span id="cb1-879"><a href="#cb1-879" aria-hidden="true" tabindex="-1"></a><span class="in">    show.legend = F</span></span>
<span id="cb1-880"><a href="#cb1-880" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-881"><a href="#cb1-881" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-882"><a href="#cb1-882" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`paneldaten.csv` -- Vergleich von Schätzern bei Einheiten mit endogeneen Effekten"</span></span>
<span id="cb1-883"><a href="#cb1-883" aria-hidden="true" tabindex="-1"></a><span class="in">  ) + </span></span>
<span id="cb1-884"><a href="#cb1-884" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot()</span></span>
<span id="cb1-885"><a href="#cb1-885" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-886"><a href="#cb1-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-887"><a href="#cb1-887" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb1-888"><a href="#cb1-888" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Key Facts zu Random-Effects-Regression</span></span>
<span id="cb1-889"><a href="#cb1-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-890"><a href="#cb1-890" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Random-Effects-Ansätze basieren auf der Annahme, dass (unbeobachtbare) Heterogenitäten *zufällig* sind. Wir nehmen an, dass die unbeobachteten Heterogenitäten *nicht* mit den erklärenden Variablen korreliert sind. Letzteres führt zu inkonsistenten Schätzern!</span>
<span id="cb1-891"><a href="#cb1-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-892"><a href="#cb1-892" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Iteratives GLS oder MLE ermöglichen eine effizientere Schätzung des Random-Effects-Modells als Pooling oder Fixed-Effects-Schätzer, da sowohl die Variation innerhalb als auch zwischen den Beoabchtungseinheiten Einheiten genutzt wird.</span>
<span id="cb1-893"><a href="#cb1-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-894"><a href="#cb1-894" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In Random-Effects-Modellen können die Effekte zeitlich konstanter Variablen geschätzt werden, da die einheiten-spezifischen Effekte als zufällig betrachtet werden.</span>
<span id="cb1-895"><a href="#cb1-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-896"><a href="#cb1-896" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Unter den skizzierten Annahmen sind Random-Effects-Schätzer asymptotisch normalverteilt. Für Inferenz-Statistiken sollten cluster-robuste Standardfehler verwendet werden, vgl. @sec-crse.</span>
<span id="cb1-897"><a href="#cb1-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-898"><a href="#cb1-898" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Random-Effects-Modelle können in R mit den Paketen <span class="in">`plm`</span> geschätzt werden.</span>
<span id="cb1-899"><a href="#cb1-899" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-900"><a href="#cb1-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-901"><a href="#cb1-901" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb1-902"><a href="#cb1-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-903"><a href="#cb1-903" aria-hidden="true" tabindex="-1"></a>**Interaktive Illustration von Panel-Schätzern**</span>
<span id="cb1-904"><a href="#cb1-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-905"><a href="#cb1-905" aria-hidden="true" tabindex="-1"></a>Die nachfolgende interaktive Illustration erlaubt einen Vergleich der bisher geschätzten und geplotteten Regressionsfunktionen für <span class="in">`paneldata.csv`</span> mit dem wahren DGP (*Show truth*).</span>
<span id="cb1-906"><a href="#cb1-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-909"><a href="#cb1-909" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-910"><a href="#cb1-910" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb1-911"><a href="#cb1-911" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb1-912"><a href="#cb1-912" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: 'center'</span></span>
<span id="cb1-913"><a href="#cb1-913" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsvg)</span>
<span id="cb1-914"><a href="#cb1-914" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qrcode)</span>
<span id="cb1-915"><a href="#cb1-915" aria-hidden="true" tabindex="-1"></a>code <span class="ot">&lt;-</span> <span class="fu">qr_code</span>(<span class="st">"https://observablehq.com/@mca91/panelcomp"</span>)</span>
<span id="cb1-916"><a href="#cb1-916" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"img/panelcomp_qr.svg"</span></span>
<span id="cb1-917"><a href="#cb1-917" aria-hidden="true" tabindex="-1"></a>qrcode<span class="sc">::</span><span class="fu">generate_svg</span>(</span>
<span id="cb1-918"><a href="#cb1-918" aria-hidden="true" tabindex="-1"></a>  <span class="at">qrcode =</span> code, </span>
<span id="cb1-919"><a href="#cb1-919" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span>  <span class="st">"img/panelcomp_qr.svg"</span></span>
<span id="cb1-920"><a href="#cb1-920" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-921"><a href="#cb1-921" aria-hidden="true" tabindex="-1"></a>rsvg<span class="sc">::</span><span class="fu">rsvg_png</span>(</span>
<span id="cb1-922"><a href="#cb1-922" aria-hidden="true" tabindex="-1"></a>  <span class="st">"img/panelcomp_qr.svg"</span>, <span class="st">"img/panelcomp_qr.png"</span>,</span>
<span id="cb1-923"><a href="#cb1-923" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">200</span>, <span class="at">height =</span> <span class="dv">200</span></span>
<span id="cb1-924"><a href="#cb1-924" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-925"><a href="#cb1-925" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="at">path =</span> <span class="st">"img/panelcomp_qr.png"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb1-926"><a href="#cb1-926" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-927"><a href="#cb1-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-928"><a href="#cb1-928" aria-hidden="true" tabindex="-1"></a>&lt;iframe width="100%" height="642" frameborder="0" class="obs-soft-box-shadow" src="https://observablehq.com/embed/@mca91/panelcomp?cells=viewof+showgroups%2Cviewof+showdgp%2Cviewof+regtype%2Ctheplot"&gt;</span>
<span id="cb1-929"><a href="#cb1-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-930"><a href="#cb1-930" aria-hidden="true" tabindex="-1"></a>&lt;/iframe&gt;</span>
<span id="cb1-931"><a href="#cb1-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-932"><a href="#cb1-932" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cluster-robuste Standardfehler {#sec-crse}</span></span>
<span id="cb1-933"><a href="#cb1-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-934"><a href="#cb1-934" aria-hidden="true" tabindex="-1"></a>Aufgrund der Zeit-Dimension bei Panel-Datensätzen ist es in vielen empirischen Anwendungen plausibel, dass die Fehlerterme der bisher betrachteten Modelle nicht unabhängig sind: Beobachtungen einer Einheit (auch Cluster genannt), wie z.B. Individuen, Firmen oder geografische Regionen sind oftmals über die Zeit oft korreliert. Solche Abhängigkeit zwischen dem Fehlern führen zu verzerrten Standardfehlern, wenn diese anhand von Formeln berechnet werden, die unter der Annahme von u.i.v. Fehlertermen hergeleitet wurden: Standardfehler für Schätzer, die u.i.v. Fehler annehmen, können die tatsächliche Varianz unterschätzen, was zu falsch-positiven<span class="ot">[^fixedeffects-19]</span> Ergebnissen bei Signifikanztests für die Modell-Koeffizienten und damit zu ungültiger Inferenz hinsichtlich kausaler Effekte führen kann.</span>
<span id="cb1-935"><a href="#cb1-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-936"><a href="#cb1-936" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-19]: </span>Ein falsch-positiver Test zeigt einen "positiven" Zustand (hier ein von null verschiedener Koeffizient) an, obwohl dieser tatsächlich nicht vorliegt.</span>
<span id="cb1-937"><a href="#cb1-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-938"><a href="#cb1-938" aria-hidden="true" tabindex="-1"></a>Sogenannte *cluster-robuste Standardfehler* korrigieren für zeitliche Korrelation und Heteroskedastizität und ermöglichen konservative Schätzungen hinsichtlich der Variabilität von Koeffizientenschätzern. <span class="in">`fixest::feols()`</span> berechnet standardmäßig cluster-robuste Standardfehler, wenn Einheiten- oder Perioden-Variablen innerhalb der Formel (bspw. <span class="in">`Y ~ X | ID + time`</span>) oder separat im Argument <span class="in">`index`</span> (etwa <span class="in">`panel.id = ~ ID + time`</span>) angegeben werden. Für die Identifikation der Cluster wird stets die zuerst genannte Variable (hier <span class="in">`ID`</span>) herangezogen. Details der zu verwendenen Standardfehler können über das Argument <span class="in">`vcov`</span> festgelegt werden, siehe <span class="in">`?feols`</span> für weitere Hinweise hierzu.</span>
<span id="cb1-939"><a href="#cb1-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-940"><a href="#cb1-940" aria-hidden="true" tabindex="-1"></a>Für den LSDV-Schätzer in @sec-withldsv erreichen wir clustering nach <span class="in">`ID`</span> mit <span class="in">`vcov = ~ ID`</span>.</span>
<span id="cb1-941"><a href="#cb1-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-944"><a href="#cb1-944" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-945"><a href="#cb1-945" aria-hidden="true" tabindex="-1"></a><span class="in"># LSDV mit cluster-robusten Standardfehlern</span></span>
<span id="cb1-946"><a href="#cb1-946" aria-hidden="true" tabindex="-1"></a><span class="in">panel_LSDV_clust &lt;- feols(</span></span>
<span id="cb1-947"><a href="#cb1-947" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = Y ~ X + factor(ID),  </span></span>
<span id="cb1-948"><a href="#cb1-948" aria-hidden="true" tabindex="-1"></a><span class="in">  data = paneldata,</span></span>
<span id="cb1-949"><a href="#cb1-949" aria-hidden="true" tabindex="-1"></a><span class="in">  vcov = ~ ID</span></span>
<span id="cb1-950"><a href="#cb1-950" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-951"><a href="#cb1-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-952"><a href="#cb1-952" aria-hidden="true" tabindex="-1"></a><span class="in">panel_LSDV_clust</span></span>
<span id="cb1-953"><a href="#cb1-953" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-954"><a href="#cb1-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-955"><a href="#cb1-955" aria-hidden="true" tabindex="-1"></a>Beachte, dass die Standradfehler der meisten Koeffizienten in <span class="in">`panel_LSDV_clust`</span> etwas größer sind, als für das in @sec-withldsv geschätzte Modell <span class="in">`panel_LSDV`</span>.</span>
<span id="cb1-956"><a href="#cb1-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-957"><a href="#cb1-957" aria-hidden="true" tabindex="-1"></a>Für Schätzungen mit<span class="in">`plm::plm()`</span> werden von <span class="in">`summary()`</span> grundsätzlich Standardfehler unter Annahme homoskedastischer u.i.v. Fehler berechnet. Für cluster-robuste Standardfehler muss ein entsprechender Schätzer im Argument <span class="in">`vcov = vcovHC()`</span> übergeben werden. Mit <span class="in">`cluster = "group"`</span> wird Korrelation innerhalb der Beobachtungseinheiten über die Zeit berücksichtigt.<span class="ot">[^fixedeffects-20]</span> Für die Random-Effects-Schätzung in <span class="in">`panel_RE`</span> erreichen wir dies wiefolgt.</span>
<span id="cb1-958"><a href="#cb1-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-959"><a href="#cb1-959" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-20]: </span>Clustering für Zeitperioden erfolgt mit <span class="in">`group = time`</span>.</span>
<span id="cb1-960"><a href="#cb1-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-963"><a href="#cb1-963" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-964"><a href="#cb1-964" aria-hidden="true" tabindex="-1"></a><span class="in"># Zusammenfassung RE-Schätzung mit clustered-SEs</span></span>
<span id="cb1-965"><a href="#cb1-965" aria-hidden="true" tabindex="-1"></a><span class="in">summary(</span></span>
<span id="cb1-966"><a href="#cb1-966" aria-hidden="true" tabindex="-1"></a><span class="in">  object = panel_RE, </span></span>
<span id="cb1-967"><a href="#cb1-967" aria-hidden="true" tabindex="-1"></a><span class="in">  vcov = vcovHC(</span></span>
<span id="cb1-968"><a href="#cb1-968" aria-hidden="true" tabindex="-1"></a><span class="in">    x = panel_RE, </span></span>
<span id="cb1-969"><a href="#cb1-969" aria-hidden="true" tabindex="-1"></a><span class="in">    type = "HC1", </span></span>
<span id="cb1-970"><a href="#cb1-970" aria-hidden="true" tabindex="-1"></a><span class="in">    cluster = "group"</span></span>
<span id="cb1-971"><a href="#cb1-971" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb1-972"><a href="#cb1-972" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-973"><a href="#cb1-973" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-974"><a href="#cb1-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-975"><a href="#cb1-975" aria-hidden="true" tabindex="-1"></a><span class="fu">## {{&lt; fa stairs &gt;}} Dynamische Modelle</span></span>
<span id="cb1-976"><a href="#cb1-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-977"><a href="#cb1-977" aria-hidden="true" tabindex="-1"></a>Viele ökonomische und soziale Prozesse sind autoregressiv: Der Zustand einer Variable in der Vergangenheit beeinflusst ihren aktuellen Zustand. Bei der Modellierung von Outcome-Variablen in Panel-Designs kann es notwendig sein, diese Abhängigkeit zu berücksichtigen, um die Identifizierbarkeit kausaler Effekte zu gewährleisten. Dynamische Panelmodelle verwenden hierzu vergangene Werte (lags) der Outcome-Variable, $Y_{it-j}$ mit $j&gt;0$ als (zusätzliche) Regressoren. Ein einfaches dynamisches Panelmodell ist \begin{align}</span>
<span id="cb1-978"><a href="#cb1-978" aria-hidden="true" tabindex="-1"></a>  Y_{it} = \rho Y_{it-1} + \beta_1 B_{it} + \epsilon_{it}, \label{eq:dynpanel}</span>
<span id="cb1-979"><a href="#cb1-979" aria-hidden="true" tabindex="-1"></a>\end{align} wobei $Y_{it-1}$ der Wert von $Y_{it}$ in der Periode $t-1$ ist, $0\neq\lvert\rho\rvert&lt;1$, und $\epsilon_{i,t}$ ein u.i.v. Fehlerterm ist. In diesem Modell ist $Y_{it-1}$ *kausal* für $Y_{it}$.</span>
<span id="cb1-980"><a href="#cb1-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-981"><a href="#cb1-981" aria-hidden="true" tabindex="-1"></a>Die Verwendung dynamischer Modelle hat folgende Motivationen:</span>
<span id="cb1-982"><a href="#cb1-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-983"><a href="#cb1-983" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Präzisere Schätzung**: Berücksichtigen von gelaggten abhängigen Variablen ermöglicht die Modellierung einer zeitabhängigen Dynamik von $Y_{it}$. Die Autokorrelation und damit die Varianz der Fehlerterme kann reduziert werden, da ein Teil dieser zeitlichen Abhängigkeiten direkt modelliert wird. Dies kann die Präzision der Schätzung des kausalen Effekts $\beta_1$ verbessern, vgl. @fig-LDVOKa.</span>
<span id="cb1-984"><a href="#cb1-984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-987"><a href="#cb1-987" aria-hidden="true" tabindex="-1"></a><span class="in">```{dot}</span></span>
<span id="cb1-988"><a href="#cb1-988" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-width: 3</span></span>
<span id="cb1-989"><a href="#cb1-989" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-height: 3</span></span>
<span id="cb1-990"><a href="#cb1-990" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-cap: "Kontrolle für vergangenen Wert verbessert Präzision"</span></span>
<span id="cb1-991"><a href="#cb1-991" aria-hidden="true" tabindex="-1"></a><span class="in">//| label: "fig-LDVOKa" </span></span>
<span id="cb1-992"><a href="#cb1-992" aria-hidden="true" tabindex="-1"></a><span class="in">digraph LDVOK2 {</span></span>
<span id="cb1-993"><a href="#cb1-993" aria-hidden="true" tabindex="-1"></a><span class="in">    layout=neato</span></span>
<span id="cb1-994"><a href="#cb1-994" aria-hidden="true" tabindex="-1"></a><span class="in">    fontname="Helvetica,Arial,sans-serif"</span></span>
<span id="cb1-995"><a href="#cb1-995" aria-hidden="true" tabindex="-1"></a><span class="in">    node [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-996"><a href="#cb1-996" aria-hidden="true" tabindex="-1"></a><span class="in">    edge [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-997"><a href="#cb1-997" aria-hidden="true" tabindex="-1"></a><span class="in">    splines=true</span></span>
<span id="cb1-998"><a href="#cb1-998" aria-hidden="true" tabindex="-1"></a><span class="in">    pad=.3</span></span>
<span id="cb1-999"><a href="#cb1-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1000"><a href="#cb1-1000" aria-hidden="true" tabindex="-1"></a><span class="in">    Bt [pos="0,6!", label=&lt;B&lt;SUB&gt;t&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1001"><a href="#cb1-1001" aria-hidden="true" tabindex="-1"></a><span class="in">    Yt [pos="2,6!", label=&lt;Y&lt;SUB&gt;t&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1002"><a href="#cb1-1002" aria-hidden="true" tabindex="-1"></a><span class="in">    Ytm1 [pos="1,7!", label=&lt;Y&lt;SUB&gt;t-1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1003"><a href="#cb1-1003" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb1-1004"><a href="#cb1-1004" aria-hidden="true" tabindex="-1"></a><span class="in">    Bt -&gt; Yt</span></span>
<span id="cb1-1005"><a href="#cb1-1005" aria-hidden="true" tabindex="-1"></a><span class="in">    Ytm1 -&gt; Yt</span></span>
<span id="cb1-1006"><a href="#cb1-1006" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-1007"><a href="#cb1-1007" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1008"><a href="#cb1-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1009"><a href="#cb1-1009" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Vermeidung von Endogenität**: Nichtberücksichtigen von *relevanten* gelaggten abhängigen Variablen führt zu verzerrten und inkonsistenten Schätzern, vgl. @fig-LDVOKb.</span>
<span id="cb1-1010"><a href="#cb1-1010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1013"><a href="#cb1-1013" aria-hidden="true" tabindex="-1"></a><span class="in">```{dot}</span></span>
<span id="cb1-1014"><a href="#cb1-1014" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-width: 3</span></span>
<span id="cb1-1015"><a href="#cb1-1015" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-height: 3</span></span>
<span id="cb1-1016"><a href="#cb1-1016" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-align: 'center'</span></span>
<span id="cb1-1017"><a href="#cb1-1017" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-cap: "Kontrolle für $y_{t-1}$ schließt Backdoor-Pfad"</span></span>
<span id="cb1-1018"><a href="#cb1-1018" aria-hidden="true" tabindex="-1"></a><span class="in">//| label: "fig-LDVOKb" </span></span>
<span id="cb1-1019"><a href="#cb1-1019" aria-hidden="true" tabindex="-1"></a><span class="in">digraph LDVOK1 {</span></span>
<span id="cb1-1020"><a href="#cb1-1020" aria-hidden="true" tabindex="-1"></a><span class="in">    layout=neato</span></span>
<span id="cb1-1021"><a href="#cb1-1021" aria-hidden="true" tabindex="-1"></a><span class="in">    fontname="Helvetica,Arial,sans-serif"</span></span>
<span id="cb1-1022"><a href="#cb1-1022" aria-hidden="true" tabindex="-1"></a><span class="in">    node [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-1023"><a href="#cb1-1023" aria-hidden="true" tabindex="-1"></a><span class="in">    edge [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-1024"><a href="#cb1-1024" aria-hidden="true" tabindex="-1"></a><span class="in">    splines=true</span></span>
<span id="cb1-1025"><a href="#cb1-1025" aria-hidden="true" tabindex="-1"></a><span class="in">    pad=.3</span></span>
<span id="cb1-1026"><a href="#cb1-1026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1027"><a href="#cb1-1027" aria-hidden="true" tabindex="-1"></a><span class="in">    Bt [pos="0,6!", label=&lt;B&lt;SUB&gt;t&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1028"><a href="#cb1-1028" aria-hidden="true" tabindex="-1"></a><span class="in">    V [pos="0,8!", label=V, color=gray, fontcolor=gray];</span></span>
<span id="cb1-1029"><a href="#cb1-1029" aria-hidden="true" tabindex="-1"></a><span class="in">    Yt [pos="2,6!", label=&lt;Y&lt;SUB&gt;t&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1030"><a href="#cb1-1030" aria-hidden="true" tabindex="-1"></a><span class="in">    Ytm1 [pos="1,7!", label=&lt;Y&lt;SUB&gt;t-1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1031"><a href="#cb1-1031" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb1-1032"><a href="#cb1-1032" aria-hidden="true" tabindex="-1"></a><span class="in">    V -&gt; Bt [color=gray, style=dashed]</span></span>
<span id="cb1-1033"><a href="#cb1-1033" aria-hidden="true" tabindex="-1"></a><span class="in">    V -&gt; Ytm1 [color=gray, style=dashed]</span></span>
<span id="cb1-1034"><a href="#cb1-1034" aria-hidden="true" tabindex="-1"></a><span class="in">    Bt -&gt; Yt</span></span>
<span id="cb1-1035"><a href="#cb1-1035" aria-hidden="true" tabindex="-1"></a><span class="in">    Ytm1 -&gt; Yt</span></span>
<span id="cb1-1036"><a href="#cb1-1036" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-1037"><a href="#cb1-1037" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1038"><a href="#cb1-1038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1039"><a href="#cb1-1039" aria-hidden="true" tabindex="-1"></a>Die Entscheidung, ob Lags der Outcome-Variable als Regressoren aufgenommen werden, sollte sorgfältig und, falls möglich, unter Berücksichtigung von ökonomischer Theorie hinsichtlich der zeitlichen Dynamik von $Y_{it}$ erfolgen. Beobachtete (Auto)Korrelation von $Y_{it}$ und $Y_{it-1}$ muss nicht ausschließlich durch einen (kausalen) autoregressiven Zusammenhang verursacht werden. Ein DGP bei dem unsere Regression *nicht* für $Y_{it-1}$ kontrollieren sollte, ist in @fig-LDVnotOK gezeigt.</span>
<span id="cb1-1040"><a href="#cb1-1040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1043"><a href="#cb1-1043" aria-hidden="true" tabindex="-1"></a><span class="in">```{dot}</span></span>
<span id="cb1-1044"><a href="#cb1-1044" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-width: 3</span></span>
<span id="cb1-1045"><a href="#cb1-1045" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-height: 3</span></span>
<span id="cb1-1046"><a href="#cb1-1046" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-align: 'center'</span></span>
<span id="cb1-1047"><a href="#cb1-1047" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-cap: "Kontrolle für $y_{t-1}$ *öffnet* Backdoor-Pfad"</span></span>
<span id="cb1-1048"><a href="#cb1-1048" aria-hidden="true" tabindex="-1"></a><span class="in">//| label: "fig-LDVnotOK" </span></span>
<span id="cb1-1049"><a href="#cb1-1049" aria-hidden="true" tabindex="-1"></a><span class="in">digraph LDVnotOK {</span></span>
<span id="cb1-1050"><a href="#cb1-1050" aria-hidden="true" tabindex="-1"></a><span class="in">    layout=neato</span></span>
<span id="cb1-1051"><a href="#cb1-1051" aria-hidden="true" tabindex="-1"></a><span class="in">    fontname="Helvetica,Arial,sans-serif"</span></span>
<span id="cb1-1052"><a href="#cb1-1052" aria-hidden="true" tabindex="-1"></a><span class="in">    node [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-1053"><a href="#cb1-1053" aria-hidden="true" tabindex="-1"></a><span class="in">    edge [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb1-1054"><a href="#cb1-1054" aria-hidden="true" tabindex="-1"></a><span class="in">    splines=true</span></span>
<span id="cb1-1055"><a href="#cb1-1055" aria-hidden="true" tabindex="-1"></a><span class="in">    pad=.3</span></span>
<span id="cb1-1056"><a href="#cb1-1056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1057"><a href="#cb1-1057" aria-hidden="true" tabindex="-1"></a><span class="in">    Bt [pos="0,6!", label=&lt;B&lt;SUB&gt;t&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1058"><a href="#cb1-1058" aria-hidden="true" tabindex="-1"></a><span class="in">    V [pos="0,8!", label=V, color=gray, fontcolor=gray];</span></span>
<span id="cb1-1059"><a href="#cb1-1059" aria-hidden="true" tabindex="-1"></a><span class="in">    U [pos="2,8!", label=U, color=gray, fontcolor=gray];</span></span>
<span id="cb1-1060"><a href="#cb1-1060" aria-hidden="true" tabindex="-1"></a><span class="in">    Yt [pos="2,6!", label=&lt;Y&lt;SUB&gt;t&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1061"><a href="#cb1-1061" aria-hidden="true" tabindex="-1"></a><span class="in">    Ytm1 [pos="1,7!", label=&lt;Y&lt;SUB&gt;t-1&lt;/SUB&gt;&gt;];</span></span>
<span id="cb1-1062"><a href="#cb1-1062" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb1-1063"><a href="#cb1-1063" aria-hidden="true" tabindex="-1"></a><span class="in">    V -&gt; Bt [color=gray, style=dashed]</span></span>
<span id="cb1-1064"><a href="#cb1-1064" aria-hidden="true" tabindex="-1"></a><span class="in">    V -&gt; Ytm1 [color=gray, style=dashed]</span></span>
<span id="cb1-1065"><a href="#cb1-1065" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; Ytm1 [color=gray, style=dashed]</span></span>
<span id="cb1-1066"><a href="#cb1-1066" aria-hidden="true" tabindex="-1"></a><span class="in">    U -&gt; Yt [color=gray, style=dashed]</span></span>
<span id="cb1-1067"><a href="#cb1-1067" aria-hidden="true" tabindex="-1"></a><span class="in">    Bt -&gt; Yt</span></span>
<span id="cb1-1068"><a href="#cb1-1068" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb1-1069"><a href="#cb1-1069" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb1-1070"><a href="#cb1-1070" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1071"><a href="#cb1-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1072"><a href="#cb1-1072" aria-hidden="true" tabindex="-1"></a>Hier ist $Y_{it-1}$ nicht kausal für $Y_{it}$ und ein *Collider*. Kontrollieren für $Y_{it-1}$ öffnet also den Backdoor-Pfad</span>
<span id="cb1-1073"><a href="#cb1-1073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1074"><a href="#cb1-1074" aria-hidden="true" tabindex="-1"></a><span class="in">```{=tex}</span></span>
<span id="cb1-1075"><a href="#cb1-1075" aria-hidden="true" tabindex="-1"></a><span class="in">\begin{align*}</span></span>
<span id="cb1-1076"><a href="#cb1-1076" aria-hidden="true" tabindex="-1"></a><span class="in">  B_{it} \leftarrow V \rightarrow Y_{it-1} \leftarrow U \rightarrow Y_{it}.</span></span>
<span id="cb1-1077"><a href="#cb1-1077" aria-hidden="true" tabindex="-1"></a><span class="in">\end{align*}</span></span>
<span id="cb1-1078"><a href="#cb1-1078" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1079"><a href="#cb1-1079" aria-hidden="true" tabindex="-1"></a>Eine ähnliche Problematik besteht bei der Schätzung dynamischer Panel-Modelle mit mit Fixed- oder Random-Effects-Ansätzen. Wir erläutern dies näher in @sec-vidp.</span>
<span id="cb1-1080"><a href="#cb1-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1081"><a href="#cb1-1081" aria-hidden="true" tabindex="-1"></a><span class="fu">### Verzerrung in dynamischen Modellen {#sec-vidp}</span></span>
<span id="cb1-1082"><a href="#cb1-1082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1083"><a href="#cb1-1083" aria-hidden="true" tabindex="-1"></a>Ein zentrales Problem bei der Schätzung dynamischer Panelmodelle ist der sogenannte *Nickell-Bias*. Dieser tritt auf, wenn die Within-Transformation in Anwesenheit von gelagten abhängigen Variablen verwendet wird. Die Mittelwert-Differenzen eliminieren zwar die zeit-invarianten Effekte, führt aber zu Korrelation zwischen den gelagten abhängigen Variablen und den transformierten Fehlertermen: Der Nickell-Bias entsteht bei der Within-Transformation, weil der Regressor ($Y_{i,t-1} - \overline{Y}_{i,-1}$)[^fixedeffects-21] mit dem transformierten Fehlerterm ($\epsilon_{it} - \overline{\epsilon}_i$) korreliert ist, was zu einer verzerrten Schätzung führt.</span>
<span id="cb1-1084"><a href="#cb1-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1085"><a href="#cb1-1085" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-21]: </span>Hier ist $\overline{Y}_{i,-1} = \frac{1}{T-1}\sum_{t=2}^T y_{it-1}$.</span>
<span id="cb1-1086"><a href="#cb1-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1087"><a href="#cb1-1087" aria-hidden="true" tabindex="-1"></a>@Nickell1981 zeigt, dass diese Verzerrung des Within-Schätzers $\widehat{\rho}^\textup{Within}$ nicht verschwindet, wenn die Anzahl der Beobachtungseinheiten ($n$) divergiert, solange die Zeitdimension ($T$) endlich ist.<span class="ot">[^fixedeffects-22]</span> Der Nickell-Bias ist besonders bei kurzen Panelen (kleines $T$) problematisch. Es ist \begin{align*}</span>
<span id="cb1-1088"><a href="#cb1-1088" aria-hidden="true" tabindex="-1"></a>  \widehat{\rho}^\textup{Within} \approx \rho - \frac{1 + \rho}{T-1},</span>
<span id="cb1-1089"><a href="#cb1-1089" aria-hidden="true" tabindex="-1"></a>\end{align*} d.h. die Verzerrung beträgt ungefähr $-\frac{1+\rho}{T-1}$.</span>
<span id="cb1-1090"><a href="#cb1-1090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1091"><a href="#cb1-1091" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-22]: </span>Dies ist problematisch für Mikro-Studien: Die Querschnittsdimension des Panels kann oft "hinreichend" groß gewählt werden. Die Zeit-Dimension ist aus natürlichen Gegebenheiten jedoch oft klein.</span>
<span id="cb1-1092"><a href="#cb1-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1093"><a href="#cb1-1093" aria-hidden="true" tabindex="-1"></a>Hinzufügen von $Y_{it-1}$ als Regressor in Fixed- und Random-Effects-Modellen ist jenseits der verzerrten Schätzung von $\rho$ problematisch, wenn $Y_{it-1}$ mit $B_{it}$ korreliert ist. Kontrollieren für $Y_{it-1}$ öffnet dann Backdoor-Pfade, die wir mit FE- oder RE-Ansätzen schließen wollen. In sämtlichen dynamischen Varianten der Fixed- und Random-Effects-Modelle sind die in diesem Kapitel behandelten Schätzer eines kausalen Effekts $\beta_1 \neq 0$ von $B_{it}$ auf $Y_{it}$ daher verzerrt.</span>
<span id="cb1-1094"><a href="#cb1-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1095"><a href="#cb1-1095" aria-hidden="true" tabindex="-1"></a>Der Arellano-Bond-Schätzer <span class="co">[</span><span class="ot">@ArellanoBond1991</span><span class="co">]</span> ist eine Methode, für diese Form von Endogenität in dynamischen Panel-Modellen korrigiert. Das Verfahren betrachtet die Regression in Differenzen zur Korrektur für Heterogenitäten zwischen den Einheiten und schätzt die Koeffizienten anhand der generalisierten Momentenmethode (<span class="co">[</span><span class="ot">GMM</span><span class="co">](https://en.wikipedia.org/wiki/Generalized_method_of_moments)</span>). Hierbei werden vergangene Werte von $Y_{it}$ als Instrumente für endogene Differenzen von $Y_{it}$ genutzt. Siehe @Wooldrige2010 für Beispiele.</span>
<span id="cb1-1096"><a href="#cb1-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1097"><a href="#cb1-1097" aria-hidden="true" tabindex="-1"></a>Analog zu Anwendungen mit Querschnittsdaten können die hier betrachteten Panel-Schätzer Endogenitäten aufgrund simultaner Kausalität nicht beheben. Zur Korrektur für simultante Kausalität können Panel-Methoden in Kombination mit einer Schätzstrategie basierend auf Instrument-Variablen hilfreich sein. Wir betrachten solche Schätzer in den empirischen Beispielen in @sec-IV.</span>
<span id="cb1-1098"><a href="#cb1-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1099"><a href="#cb1-1099" aria-hidden="true" tabindex="-1"></a><span class="fu">## Case Study: Einkommen und Demokratie</span></span>
<span id="cb1-1100"><a href="#cb1-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1101"><a href="#cb1-1101" aria-hidden="true" tabindex="-1"></a>Eine Vielzahl polit-ökonomischer Standardwerke und Studien <span class="co">[</span><span class="ot">bspw. @Dahl1971; @Huntington1991; @Rueschemeyer1992</span><span class="co">]</span> liefert vermeindliche Belege für einen zentralen Grundsatz der <span class="co">[</span><span class="ot">Modernisierungstheorie</span><span class="co">](https://de.wikipedia.org/wiki/Modernisierungstheorie)</span>: Ein höheres Pro-Kopf-Einkommen erhöht die Nachfrage der Bevölkerung nach politischer Freiheit und demokratischen Insitutionen. @Acemogluetal2008 argumentieren, dass der in derartigen länderübergreifenden Analysen mit Pooling häufig als positiv geschätzte Zusammenhang zwischen Einkommen und Demokratisierung nicht kausal interpetiert werden sollte. Ein Grund hierfür ist, dass (unbeobachtbare) ausgelassene länder-spezifische Faktoren, die sowohl die ökonomische Entwicklung als auch die Stärke demokratischer Institutionen beeinflussen, wahrscheinlich sind. Um diese mögliche Ursache für Endogenität des Einkommens im Modell \begin{align}</span>
<span id="cb1-1102"><a href="#cb1-1102" aria-hidden="true" tabindex="-1"></a>  \text{Demokratisierung}_{it} = \beta_0 + \beta_1\,\text{PK-Einkommen}_{it-1} + \epsilon_{it}</span>
<span id="cb1-1103"><a href="#cb1-1103" aria-hidden="true" tabindex="-1"></a>\end{align} zu adressieren, nutzen @Acemogluetal2008 Panel-Modelle und Schätzer, die insbesondere für länderspezifische zeit-invariante Einflüsse kontrollieren.</span>
<span id="cb1-1104"><a href="#cb1-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1105"><a href="#cb1-1105" aria-hidden="true" tabindex="-1"></a>Das Kernergebnis von @Acemogluetal2008 ist, dass es *keinen* kausalen Zusammenhang zwischen dem Einkommen (Wirtschaftswachstum) und der Demokratisierung gibt. Die Autoren zeigen, dass historische und geografische Faktoren, die sowohl das Einkommen als auch die politischen Institutionen beeinflussen, den vermeintlichen Zusammenhang erklären können.</span>
<span id="cb1-1106"><a href="#cb1-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1107"><a href="#cb1-1107" aria-hidden="true" tabindex="-1"></a>Für die nachfolgenden Code-Beispiele nutzen wir einen Auszug des Datensatzes aus dem Replikationspaket zu @Acemogluetal2008, siehe @Acemogluetal2008data.</span>
<span id="cb1-1108"><a href="#cb1-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1109"><a href="#cb1-1109" aria-hidden="true" tabindex="-1"></a>Wir lesen zunächst den Datensatz <span class="in">`acemogluetal2008.csv`</span> ein.</span>
<span id="cb1-1110"><a href="#cb1-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1113"><a href="#cb1-1113" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1114"><a href="#cb1-1114" aria-hidden="true" tabindex="-1"></a><span class="in">deminc &lt;- read_csv("datasets/acemogluetal2008.csv")</span></span>
<span id="cb1-1115"><a href="#cb1-1115" aria-hidden="true" tabindex="-1"></a><span class="in">glimpse(deminc)</span></span>
<span id="cb1-1116"><a href="#cb1-1116" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1117"><a href="#cb1-1117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1118"><a href="#cb1-1118" aria-hidden="true" tabindex="-1"></a>@tbl-deminc enthält Beschreibungen der in <span class="in">`deminc`</span> verfügbaren Variablen.</span>
<span id="cb1-1119"><a href="#cb1-1119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1120"><a href="#cb1-1120" aria-hidden="true" tabindex="-1"></a>|   **Variable**   |                   **Beschreibung**                   |</span>
<span id="cb1-1121"><a href="#cb1-1121" aria-hidden="true" tabindex="-1"></a>|:----------------:|:----------------------------------------------------:|</span>
<span id="cb1-1122"><a href="#cb1-1122" aria-hidden="true" tabindex="-1"></a>|   **country**    |                         Land                         |</span>
<span id="cb1-1123"><a href="#cb1-1123" aria-hidden="true" tabindex="-1"></a>|     **code**     |                     Länder-Code                      |</span>
<span id="cb1-1124"><a href="#cb1-1124" aria-hidden="true" tabindex="-1"></a>| **fhpolrigaug**  |     Freedom House Political Rights Index (FHPRI)     |</span>
<span id="cb1-1125"><a href="#cb1-1125" aria-hidden="true" tabindex="-1"></a>|   **lrgdpch**    |            Log(Reales-Pro-Kopf-Einkommen)            |</span>
<span id="cb1-1126"><a href="#cb1-1126" aria-hidden="true" tabindex="-1"></a>|   **polity4**    |           Polity Composite Democracy Index           |</span>
<span id="cb1-1127"><a href="#cb1-1127" aria-hidden="true" tabindex="-1"></a>|    **sample**    | Zugehörigkeit zur verwendeten Stichprobe (Indikator) |</span>
<span id="cb1-1128"><a href="#cb1-1128" aria-hidden="true" tabindex="-1"></a>|     **year**     |                         Jahr                         |</span>
<span id="cb1-1129"><a href="#cb1-1129" aria-hidden="true" tabindex="-1"></a>| **year_numeric** |                 ID-Variable f. Jahr                  |</span>
<span id="cb1-1130"><a href="#cb1-1130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1131"><a href="#cb1-1131" aria-hidden="true" tabindex="-1"></a>: <span class="in">`deminc`</span>: Demokratisierung und Einkommen <span class="co">[</span><span class="ot">@Acemogluetal2008</span><span class="co">]</span> {#tbl-deminc}</span>
<span id="cb1-1132"><a href="#cb1-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1133"><a href="#cb1-1133" aria-hidden="true" tabindex="-1"></a>Wie der output von <span class="in">`glimpse(deminc)`</span> zeigt, enthält der Datensatz in allen Modell-Variablen <span class="in">`NA`</span>-Einträge und ist damit nicht 'balanced', da die entsprechenden Beobachtungen nicht bei der Schätzung berücksichigt werden können.</span>
<span id="cb1-1134"><a href="#cb1-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1137"><a href="#cb1-1137" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1138"><a href="#cb1-1138" aria-hidden="true" tabindex="-1"></a><span class="in"># Bereinigter Datensatz ist nicht 'balanced'</span></span>
<span id="cb1-1139"><a href="#cb1-1139" aria-hidden="true" tabindex="-1"></a><span class="in">is.pbalanced(</span></span>
<span id="cb1-1140"><a href="#cb1-1140" aria-hidden="true" tabindex="-1"></a><span class="in">  x = deminc %&gt;% </span></span>
<span id="cb1-1141"><a href="#cb1-1141" aria-hidden="true" tabindex="-1"></a><span class="in">    drop_na(), </span></span>
<span id="cb1-1142"><a href="#cb1-1142" aria-hidden="true" tabindex="-1"></a><span class="in">  index = c("country", "year")   </span></span>
<span id="cb1-1143"><a href="#cb1-1143" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1144"><a href="#cb1-1144" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1145"><a href="#cb1-1145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1146"><a href="#cb1-1146" aria-hidden="true" tabindex="-1"></a>Wir vernachlässigen zunächst die Panel-Struktur der Daten und regressieren FHPRI auf das Pro-Kopf-Einkommen für die in @Acemogluetal2008 verwendete Stichprobe mit Beobachtungen in 5-Jahresschritten von 1955 bis 2000 (Beobachtungen mit <span class="in">`sample == 1`</span>).</span>
<span id="cb1-1147"><a href="#cb1-1147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1150"><a href="#cb1-1150" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1151"><a href="#cb1-1151" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-1152"><a href="#cb1-1152" aria-hidden="true" tabindex="-1"></a><span class="in">library(fixest)</span></span>
<span id="cb1-1153"><a href="#cb1-1153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1154"><a href="#cb1-1154" aria-hidden="true" tabindex="-1"></a><span class="in"># Pooled Regression</span></span>
<span id="cb1-1155"><a href="#cb1-1155" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_pooling1 &lt;- feols(</span></span>
<span id="cb1-1156"><a href="#cb1-1156" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = fhpolrigaug ~ lrgdpch,</span></span>
<span id="cb1-1157"><a href="#cb1-1157" aria-hidden="true" tabindex="-1"></a><span class="in">  data = deminc %&gt;% </span></span>
<span id="cb1-1158"><a href="#cb1-1158" aria-hidden="true" tabindex="-1"></a><span class="in">    filter(sample == 1), </span></span>
<span id="cb1-1159"><a href="#cb1-1159" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1160"><a href="#cb1-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1161"><a href="#cb1-1161" aria-hidden="true" tabindex="-1"></a><span class="in">summary(deminc_pooling1)</span></span>
<span id="cb1-1162"><a href="#cb1-1162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1163"><a href="#cb1-1163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1164"><a href="#cb1-1164" aria-hidden="true" tabindex="-1"></a>Dieser naive Ansatz ingoriert konstante Heterogenitäten zwischen den Ländern und einen (plausiblen) zeitlich verzögerten Einfluss ökonomisch günstiger Bedingung auf die Demokratisierung. Der geschätzte Koeffizient von <span class="in">`lrgdpch`</span> zeigt einen positiven Zusammenhang an und ist signifikant.</span>
<span id="cb1-1165"><a href="#cb1-1165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1166"><a href="#cb1-1166" aria-hidden="true" tabindex="-1"></a>Die Regression von FHPRI auf das Einkommen in $t-1$ (<span class="in">`l(lrgdpch)`</span>) führt zu ähnlichen Schätzungen der Koeffizienten.<span class="ot">[^fixedeffects-23]</span> Dies ist plausibel unter der Hypothese, dass es ausgelassende Faktoren gibt, welche die Demokratisierung und das Pro-Kopf-Einkommen in sämtlichen Perioden beeinflussion.</span>
<span id="cb1-1167"><a href="#cb1-1167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1168"><a href="#cb1-1168" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-23]: </span>Die Verwendung von Lags mit <span class="in">`l()`</span> in <span class="in">`fml`</span> erfordert die Angabe von <span class="in">`panel.id = ~ country + year`</span>, damit die Beobachtungen zugeordnet werden können.</span>
<span id="cb1-1169"><a href="#cb1-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1172"><a href="#cb1-1172" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1173"><a href="#cb1-1173" aria-hidden="true" tabindex="-1"></a><span class="in"># Pooling mit Einkommem_{t-1}</span></span>
<span id="cb1-1174"><a href="#cb1-1174" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_pooling_lag &lt;- feols(</span></span>
<span id="cb1-1175"><a href="#cb1-1175" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = fhpolrigaug ~ l(lrgdpch),</span></span>
<span id="cb1-1176"><a href="#cb1-1176" aria-hidden="true" tabindex="-1"></a><span class="in">  panel.id = ~ country + year,</span></span>
<span id="cb1-1177"><a href="#cb1-1177" aria-hidden="true" tabindex="-1"></a><span class="in">  data = deminc %&gt;% </span></span>
<span id="cb1-1178"><a href="#cb1-1178" aria-hidden="true" tabindex="-1"></a><span class="in">    filter(sample == 1), </span></span>
<span id="cb1-1179"><a href="#cb1-1179" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1180"><a href="#cb1-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1181"><a href="#cb1-1181" aria-hidden="true" tabindex="-1"></a><span class="in">summary(deminc_pooling_lag)</span></span>
<span id="cb1-1182"><a href="#cb1-1182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1183"><a href="#cb1-1183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1184"><a href="#cb1-1184" aria-hidden="true" tabindex="-1"></a>Ein simpler Ansatz zur Kontrolle für fixe länderspezifische Effekte ist die KQ-Schätzung des Regressionsmodells in ersten Differenzen. Analog zu Abbildung 2 in @Acemogluetal2008 schätzen wir hierfür zunächst ein Modell der Differenzen zwischen den Perioden 1995 und 1970. Zur Schätzung und anschließenden Reproduktion der Grafik berechnen wir die Differenzen anhand eines gruppierten Datensatzes.</span>
<span id="cb1-1185"><a href="#cb1-1185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1188"><a href="#cb1-1188" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1189"><a href="#cb1-1189" aria-hidden="true" tabindex="-1"></a><span class="in"># Zeit-Differenzen länderweise berechnen</span></span>
<span id="cb1-1190"><a href="#cb1-1190" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_f &lt;- deminc %&gt;%</span></span>
<span id="cb1-1191"><a href="#cb1-1191" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb1-1192"><a href="#cb1-1192" aria-hidden="true" tabindex="-1"></a><span class="in">    year %in% c(1970, 1995)</span></span>
<span id="cb1-1193"><a href="#cb1-1193" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb1-1194"><a href="#cb1-1194" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(code) %&gt;%</span></span>
<span id="cb1-1195"><a href="#cb1-1195" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(</span></span>
<span id="cb1-1196"><a href="#cb1-1196" aria-hidden="true" tabindex="-1"></a><span class="in">    dlrgdpch = diff(lrgdpch),</span></span>
<span id="cb1-1197"><a href="#cb1-1197" aria-hidden="true" tabindex="-1"></a><span class="in">    dfhpolrigaug = diff(fhpolrigaug)</span></span>
<span id="cb1-1198"><a href="#cb1-1198" aria-hidden="true" tabindex="-1"></a><span class="in">    ) %&gt;%</span></span>
<span id="cb1-1199"><a href="#cb1-1199" aria-hidden="true" tabindex="-1"></a><span class="in">  drop_na()</span></span>
<span id="cb1-1200"><a href="#cb1-1200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1201"><a href="#cb1-1201" aria-hidden="true" tabindex="-1"></a><span class="in"># Überblick</span></span>
<span id="cb1-1202"><a href="#cb1-1202" aria-hidden="true" tabindex="-1"></a><span class="in">glimpse(deminc_f)</span></span>
<span id="cb1-1203"><a href="#cb1-1203" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1204"><a href="#cb1-1204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1207"><a href="#cb1-1207" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1208"><a href="#cb1-1208" aria-hidden="true" tabindex="-1"></a><span class="in"># KQ-Schätzung für Differenzen 1995 - 1970</span></span>
<span id="cb1-1209"><a href="#cb1-1209" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_diff_7095 &lt;- feols(</span></span>
<span id="cb1-1210"><a href="#cb1-1210" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = dfhpolrigaug ~ dlrgdpch,</span></span>
<span id="cb1-1211"><a href="#cb1-1211" aria-hidden="true" tabindex="-1"></a><span class="in">  data = deminc_f</span></span>
<span id="cb1-1212"><a href="#cb1-1212" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb1-1213"><a href="#cb1-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1214"><a href="#cb1-1214" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_diff_7095 %&gt;% </span></span>
<span id="cb1-1215"><a href="#cb1-1215" aria-hidden="true" tabindex="-1"></a><span class="in">  summary()</span></span>
<span id="cb1-1216"><a href="#cb1-1216" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1217"><a href="#cb1-1217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1218"><a href="#cb1-1218" aria-hidden="true" tabindex="-1"></a>Die Ergebnisse in <span class="in">`deminc_diff_7095`</span> passen zu unserer Vermutung hinsichtlich ausgelassener länderspezifischer Heterogenitäten: Der geschätzte Koeffizient von <span class="in">`dlrgdpch`</span> ist positiv, jedoch klein und nicht signifikant von 0 verschieden.</span>
<span id="cb1-1219"><a href="#cb1-1219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1222"><a href="#cb1-1222" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1223"><a href="#cb1-1223" aria-hidden="true" tabindex="-1"></a><span class="in">#| fig-align: 'center'</span></span>
<span id="cb1-1224"><a href="#cb1-1224" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: "fig-acemfig2" </span></span>
<span id="cb1-1225"><a href="#cb1-1225" aria-hidden="true" tabindex="-1"></a><span class="in"># Grafik 2 aus Acemoglu (2008a)</span></span>
<span id="cb1-1226"><a href="#cb1-1226" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(</span></span>
<span id="cb1-1227"><a href="#cb1-1227" aria-hidden="true" tabindex="-1"></a><span class="in">  data = deminc_f,</span></span>
<span id="cb1-1228"><a href="#cb1-1228" aria-hidden="true" tabindex="-1"></a><span class="in">  mapping = aes(</span></span>
<span id="cb1-1229"><a href="#cb1-1229" aria-hidden="true" tabindex="-1"></a><span class="in">    x = dlrgdpch,</span></span>
<span id="cb1-1230"><a href="#cb1-1230" aria-hidden="true" tabindex="-1"></a><span class="in">    y = dfhpolrigaug</span></span>
<span id="cb1-1231"><a href="#cb1-1231" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb1-1232"><a href="#cb1-1232" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-1233"><a href="#cb1-1233" aria-hidden="true" tabindex="-1"></a><span class="in">  # Referenz-Linie (kein Effekt)</span></span>
<span id="cb1-1234"><a href="#cb1-1234" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_hline(yintercept = 0, lty = 2) +</span></span>
<span id="cb1-1235"><a href="#cb1-1235" aria-hidden="true" tabindex="-1"></a><span class="in">  # Datenpunkte</span></span>
<span id="cb1-1236"><a href="#cb1-1236" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_text(</span></span>
<span id="cb1-1237"><a href="#cb1-1237" aria-hidden="true" tabindex="-1"></a><span class="in">    mapping = aes(label = code),</span></span>
<span id="cb1-1238"><a href="#cb1-1238" aria-hidden="true" tabindex="-1"></a><span class="in">    position = position_jitter(</span></span>
<span id="cb1-1239"><a href="#cb1-1239" aria-hidden="true" tabindex="-1"></a><span class="in">      height = .05, </span></span>
<span id="cb1-1240"><a href="#cb1-1240" aria-hidden="true" tabindex="-1"></a><span class="in">      seed = 1234</span></span>
<span id="cb1-1241"><a href="#cb1-1241" aria-hidden="true" tabindex="-1"></a><span class="in">      )</span></span>
<span id="cb1-1242"><a href="#cb1-1242" aria-hidden="true" tabindex="-1"></a><span class="in">    ) +</span></span>
<span id="cb1-1243"><a href="#cb1-1243" aria-hidden="true" tabindex="-1"></a><span class="in">  # gesch. lineares Modell einzeichnen</span></span>
<span id="cb1-1244"><a href="#cb1-1244" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_smooth(</span></span>
<span id="cb1-1245"><a href="#cb1-1245" aria-hidden="true" tabindex="-1"></a><span class="in">    method = "lm", </span></span>
<span id="cb1-1246"><a href="#cb1-1246" aria-hidden="true" tabindex="-1"></a><span class="in">    se = F) +</span></span>
<span id="cb1-1247"><a href="#cb1-1247" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-1248"><a href="#cb1-1248" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Diff. Log(Pro-Kopf-BIP) (1970 - 1995)",</span></span>
<span id="cb1-1249"><a href="#cb1-1249" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Diff. Demokratie-Index (1970 - 1995)",</span></span>
<span id="cb1-1250"><a href="#cb1-1250" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`deminc` -- Regression der Zeit-Differenzen zwischen 1995 und 1970"</span></span>
<span id="cb1-1251"><a href="#cb1-1251" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-1252"><a href="#cb1-1252" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot()</span></span>
<span id="cb1-1253"><a href="#cb1-1253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1254"><a href="#cb1-1254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1255"><a href="#cb1-1255" aria-hidden="true" tabindex="-1"></a>Für die KQ-Schätzung in ersten Differenzen bei Verwendung des gesamten Datensatzes ist das Ergebis noch deutlicher: Die Schätzungen beider Koeffizienten sind klein und insignifikant.</span>
<span id="cb1-1256"><a href="#cb1-1256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1259"><a href="#cb1-1259" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1260"><a href="#cb1-1260" aria-hidden="true" tabindex="-1"></a><span class="in"># Panel-Schätzer: KQ-Regression in Differenzen</span></span>
<span id="cb1-1261"><a href="#cb1-1261" aria-hidden="true" tabindex="-1"></a><span class="in"># (Alle Perioden)</span></span>
<span id="cb1-1262"><a href="#cb1-1262" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_diff_mod &lt;- feols(</span></span>
<span id="cb1-1263"><a href="#cb1-1263" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = d(fhpolrigaug) ~ d(lrgdpch), </span></span>
<span id="cb1-1264"><a href="#cb1-1264" aria-hidden="true" tabindex="-1"></a><span class="in">  data = deminc,</span></span>
<span id="cb1-1265"><a href="#cb1-1265" aria-hidden="true" tabindex="-1"></a><span class="in">  panel.id = ~ country + year</span></span>
<span id="cb1-1266"><a href="#cb1-1266" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1267"><a href="#cb1-1267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1268"><a href="#cb1-1268" aria-hidden="true" tabindex="-1"></a><span class="in">summary(deminc_diff_mod)</span></span>
<span id="cb1-1269"><a href="#cb1-1269" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1270"><a href="#cb1-1270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1271"><a href="#cb1-1271" aria-hidden="true" tabindex="-1"></a>Tabelle 2 in @Acemogluetal2008 vergleicht verschiedene Schätzer des dynamischen Modells</span>
<span id="cb1-1272"><a href="#cb1-1272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1273"><a href="#cb1-1273" aria-hidden="true" tabindex="-1"></a><span class="in">```{=tex}</span></span>
<span id="cb1-1274"><a href="#cb1-1274" aria-hidden="true" tabindex="-1"></a><span class="in">\begin{align}</span></span>
<span id="cb1-1275"><a href="#cb1-1275" aria-hidden="true" tabindex="-1"></a><span class="in">  \text{FHPRI}_{it} = \beta_0 + \alpha_i + \lambda_t + \beta_1 \text{FHPRI}_{it-1} + \beta_2 \text{Einkommen}_{it-1}  + \varepsilon_{it}\label{eq:acemmod}</span></span>
<span id="cb1-1276"><a href="#cb1-1276" aria-hidden="true" tabindex="-1"></a><span class="in">\end{align}</span></span>
<span id="cb1-1277"><a href="#cb1-1277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1278"><a href="#cb1-1278" aria-hidden="true" tabindex="-1"></a>mit Länder- und Zeit-Effekten $\alpha_i + \lambda_t$. Der Regressor <span class="in">`\text{FHPRI}_{it-1}`</span> soll die "Beständigkeit" der Demokratie zu erfassen und möglicherweise kurz- bis mittelfristige Dynamiken zu berücksichtigen (d.h. die Tendenz des Demokratie-Scores, zu einem Gleichgewichtswert zurückzukehren). Wir betrachten zunächst die Fixed-Effects-Schätzung von \eqref{eq:acemmod}.</span>
<span id="cb1-1279"><a href="#cb1-1279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1282"><a href="#cb1-1282" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1283"><a href="#cb1-1283" aria-hidden="true" tabindex="-1"></a><span class="in"># Zeit + country Fixed Effects</span></span>
<span id="cb1-1284"><a href="#cb1-1284" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_FE_mod &lt;- feols(</span></span>
<span id="cb1-1285"><a href="#cb1-1285" aria-hidden="true" tabindex="-1"></a><span class="in">  fml = fhpolrigaug ~ </span></span>
<span id="cb1-1286"><a href="#cb1-1286" aria-hidden="true" tabindex="-1"></a><span class="in">    l(fhpolrigaug) </span></span>
<span id="cb1-1287"><a href="#cb1-1287" aria-hidden="true" tabindex="-1"></a><span class="in">  + l(lrgdpch) </span></span>
<span id="cb1-1288"><a href="#cb1-1288" aria-hidden="true" tabindex="-1"></a><span class="in">  | year + country,</span></span>
<span id="cb1-1289"><a href="#cb1-1289" aria-hidden="true" tabindex="-1"></a><span class="in">  panel.id = ~ country + year,</span></span>
<span id="cb1-1290"><a href="#cb1-1290" aria-hidden="true" tabindex="-1"></a><span class="in">  cluster = ~ country,</span></span>
<span id="cb1-1291"><a href="#cb1-1291" aria-hidden="true" tabindex="-1"></a><span class="in">  data = deminc, </span></span>
<span id="cb1-1292"><a href="#cb1-1292" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1293"><a href="#cb1-1293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1294"><a href="#cb1-1294" aria-hidden="true" tabindex="-1"></a><span class="in">summary(deminc_FE_mod)</span></span>
<span id="cb1-1295"><a href="#cb1-1295" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1296"><a href="#cb1-1296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1297"><a href="#cb1-1297" aria-hidden="true" tabindex="-1"></a>Ähnlich wie in der Differenzen-Regression <span class="in">`deminc_diff_mod`</span> finden wir bei Kontrolle für Länder- und Zeit-Effekte keine Evidenz für einen Zusammenhang des Pro-Kopf-Einkommens (der Vorperiode) und dem Demokratie-Score. Mit <span class="in">`fixef(deminc_FE_mod)`</span> lesen wir die gschätzten Effekte aus. Aufgrund der Vielzahl an Länder-Effekten empfiehlt sich eine grafische Zusammenfassung anhand eines Histogramms mit absoluten Häufigkeiten.</span>
<span id="cb1-1298"><a href="#cb1-1298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1301"><a href="#cb1-1301" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1302"><a href="#cb1-1302" aria-hidden="true" tabindex="-1"></a><span class="in">#| fig-align: 'center'</span></span>
<span id="cb1-1303"><a href="#cb1-1303" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: "fig-acemfig3" </span></span>
<span id="cb1-1304"><a href="#cb1-1304" aria-hidden="true" tabindex="-1"></a><span class="in"># Verteilung der gesch. Länder-Fixed-Effects</span></span>
<span id="cb1-1305"><a href="#cb1-1305" aria-hidden="true" tabindex="-1"></a><span class="in"># mit Histogramm visualisieren</span></span>
<span id="cb1-1306"><a href="#cb1-1306" aria-hidden="true" tabindex="-1"></a><span class="in">tibble(</span></span>
<span id="cb1-1307"><a href="#cb1-1307" aria-hidden="true" tabindex="-1"></a><span class="in">    FE = fixef(deminc_FE_mod)$country, </span></span>
<span id="cb1-1308"><a href="#cb1-1308" aria-hidden="true" tabindex="-1"></a><span class="in">    country = names(fixef(deminc_FE_mod)$country)</span></span>
<span id="cb1-1309"><a href="#cb1-1309" aria-hidden="true" tabindex="-1"></a><span class="in">    ) %&gt;%</span></span>
<span id="cb1-1310"><a href="#cb1-1310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1311"><a href="#cb1-1311" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(aes(x = FE)) +</span></span>
<span id="cb1-1312"><a href="#cb1-1312" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(</span></span>
<span id="cb1-1313"><a href="#cb1-1313" aria-hidden="true" tabindex="-1"></a><span class="in">    bins = 20,</span></span>
<span id="cb1-1314"><a href="#cb1-1314" aria-hidden="true" tabindex="-1"></a><span class="in">    fill = "steelblue",</span></span>
<span id="cb1-1315"><a href="#cb1-1315" aria-hidden="true" tabindex="-1"></a><span class="in">    color = "white"</span></span>
<span id="cb1-1316"><a href="#cb1-1316" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-1317"><a href="#cb1-1317" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-1318"><a href="#cb1-1318" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "`deminc` -- Verteilung von Länder-Fixed-Effects"</span></span>
<span id="cb1-1319"><a href="#cb1-1319" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-1320"><a href="#cb1-1320" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_cowplot() +</span></span>
<span id="cb1-1321"><a href="#cb1-1321" aria-hidden="true" tabindex="-1"></a><span class="in">  coord_cartesian(expand = F)</span></span>
<span id="cb1-1322"><a href="#cb1-1322" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1323"><a href="#cb1-1323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1324"><a href="#cb1-1324" aria-hidden="true" tabindex="-1"></a>Eine Random-Effects-Schätzung mit Länder- und Zeit-Effekten liefert ebenfalls keine Evidenz für einen kausalen Effekt des ökonomischen Wohlstands auf die Demokratisierung.</span>
<span id="cb1-1325"><a href="#cb1-1325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1328"><a href="#cb1-1328" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1329"><a href="#cb1-1329" aria-hidden="true" tabindex="-1"></a><span class="in"># Datensatz für plm() formatieren</span></span>
<span id="cb1-1330"><a href="#cb1-1330" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_pdf &lt;- pdata.frame(</span></span>
<span id="cb1-1331"><a href="#cb1-1331" aria-hidden="true" tabindex="-1"></a><span class="in">  deminc %&gt;% filter(sample == 1) %&gt;% </span></span>
<span id="cb1-1332"><a href="#cb1-1332" aria-hidden="true" tabindex="-1"></a><span class="in">    drop_na(), </span></span>
<span id="cb1-1333"><a href="#cb1-1333" aria-hidden="true" tabindex="-1"></a><span class="in">  index = c("country", "year_numeric")   </span></span>
<span id="cb1-1334"><a href="#cb1-1334" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1335"><a href="#cb1-1335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1336"><a href="#cb1-1336" aria-hidden="true" tabindex="-1"></a><span class="in"># Random-Effects-Modell</span></span>
<span id="cb1-1337"><a href="#cb1-1337" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_RE_mod &lt;- plm(</span></span>
<span id="cb1-1338"><a href="#cb1-1338" aria-hidden="true" tabindex="-1"></a><span class="in">  formula = fhpolrigaug ~ </span></span>
<span id="cb1-1339"><a href="#cb1-1339" aria-hidden="true" tabindex="-1"></a><span class="in">    lag(fhpolrigaug, 1) </span></span>
<span id="cb1-1340"><a href="#cb1-1340" aria-hidden="true" tabindex="-1"></a><span class="in">  + lag(lrgdpch, 1), </span></span>
<span id="cb1-1341"><a href="#cb1-1341" aria-hidden="true" tabindex="-1"></a><span class="in">  effect = "twoways",</span></span>
<span id="cb1-1342"><a href="#cb1-1342" aria-hidden="true" tabindex="-1"></a><span class="in">  model = "random",</span></span>
<span id="cb1-1343"><a href="#cb1-1343" aria-hidden="true" tabindex="-1"></a><span class="in">  data = deminc_pdf</span></span>
<span id="cb1-1344"><a href="#cb1-1344" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1345"><a href="#cb1-1345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1346"><a href="#cb1-1346" aria-hidden="true" tabindex="-1"></a><span class="in">summary(deminc_RE_mod)</span></span>
<span id="cb1-1347"><a href="#cb1-1347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1348"><a href="#cb1-1348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1349"><a href="#cb1-1349" aria-hidden="true" tabindex="-1"></a>Um für Endogenität der Regressoren aufgrund des dynamischen Modells zu korrigieren, verwenden @Acemogluetal2008 weiterhin den Arellano-Bond-Schätzer. Dieser wird auf die Differenz-Transformation</span>
<span id="cb1-1350"><a href="#cb1-1350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1351"><a href="#cb1-1351" aria-hidden="true" tabindex="-1"></a><span class="in">```{=tex}</span></span>
<span id="cb1-1352"><a href="#cb1-1352" aria-hidden="true" tabindex="-1"></a><span class="in">\begin{align}</span></span>
<span id="cb1-1353"><a href="#cb1-1353" aria-hidden="true" tabindex="-1"></a><span class="in">  \Delta\text{FHPRI}_{it} = \beta_1 \Delta\text{FHPRI}_{it-1} + \beta_2 \Delta\text{Einkommen}_{it-1} + \Delta\epsilon_{it}, \quad t\geq3,\label{eq:acemabmod}</span></span>
<span id="cb1-1354"><a href="#cb1-1354" aria-hidden="true" tabindex="-1"></a><span class="in">\end{align}</span></span>
<span id="cb1-1355"><a href="#cb1-1355" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1356"><a href="#cb1-1356" aria-hidden="true" tabindex="-1"></a>von Modell \eqref{eq:acemmod} angewendet und nutzt, dass $\text{FHPRI}_{it-j}$ und $\text{Einkommen}_{it-j}$ für $j\geq2$ nicht mit $\Delta\varepsilon_{it}$ korreliert sind und damit als Instrumente in einem GMM-Ansatz verwendet werden können.<span class="ot">[^fixedeffects-24]</span></span>
<span id="cb1-1357"><a href="#cb1-1357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1358"><a href="#cb1-1358" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-24]: </span>Damit die Lags gültige Instrumente sind, darf $\epsilon_{it}$ nicht seriell korreliert sein.</span>
<span id="cb1-1359"><a href="#cb1-1359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1360"><a href="#cb1-1360" aria-hidden="true" tabindex="-1"></a>Der Arellano-Bond-Schätzer ist in der Funktion <span class="in">`plm::pgmm()`</span> implementiert. Wir schätzen Modell \eqref{eq:acemabmod} mit den zweiten und dritten Lags von $\text{FHPRI}_{it}$ und $\text{Einkommen}_{it}$ als Instrumente. Die Spezifikation erfolgt durch den Zusatz <span class="in">`| lag(fhpolrigaug, 2:3) + lag(lrgdpch, 2:3)`</span> im Argument <span class="in">`formula`</span>.</span>
<span id="cb1-1361"><a href="#cb1-1361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1364"><a href="#cb1-1364" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1365"><a href="#cb1-1365" aria-hidden="true" tabindex="-1"></a><span class="in"># Arellano-Bond-Schätzer</span></span>
<span id="cb1-1366"><a href="#cb1-1366" aria-hidden="true" tabindex="-1"></a><span class="in">deminc_AB_mod &lt;- pgmm(</span></span>
<span id="cb1-1367"><a href="#cb1-1367" aria-hidden="true" tabindex="-1"></a><span class="in">  formula = </span></span>
<span id="cb1-1368"><a href="#cb1-1368" aria-hidden="true" tabindex="-1"></a><span class="in">    fhpolrigaug ~ </span></span>
<span id="cb1-1369"><a href="#cb1-1369" aria-hidden="true" tabindex="-1"></a><span class="in">    lag(fhpolrigaug, 1) </span></span>
<span id="cb1-1370"><a href="#cb1-1370" aria-hidden="true" tabindex="-1"></a><span class="in">  + lag(lrgdpch, 1) </span></span>
<span id="cb1-1371"><a href="#cb1-1371" aria-hidden="true" tabindex="-1"></a><span class="in">  # Instrumente:</span></span>
<span id="cb1-1372"><a href="#cb1-1372" aria-hidden="true" tabindex="-1"></a><span class="in">  | lag(fhpolrigaug, 2:3)</span></span>
<span id="cb1-1373"><a href="#cb1-1373" aria-hidden="true" tabindex="-1"></a><span class="in">  + lag(lrgdpch, 2:3),</span></span>
<span id="cb1-1374"><a href="#cb1-1374" aria-hidden="true" tabindex="-1"></a><span class="in">    effect = "twoways", </span></span>
<span id="cb1-1375"><a href="#cb1-1375" aria-hidden="true" tabindex="-1"></a><span class="in">    model = "twosteps",</span></span>
<span id="cb1-1376"><a href="#cb1-1376" aria-hidden="true" tabindex="-1"></a><span class="in">    data = deminc_pdf</span></span>
<span id="cb1-1377"><a href="#cb1-1377" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb1-1378"><a href="#cb1-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1379"><a href="#cb1-1379" aria-hidden="true" tabindex="-1"></a><span class="in">summary(deminc_AB_mod)</span></span>
<span id="cb1-1380"><a href="#cb1-1380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1381"><a href="#cb1-1381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1382"><a href="#cb1-1382" aria-hidden="true" tabindex="-1"></a>Auch der Arellano-Bond-Schätzer liefert keine Evidenz für die Theorie eines positiven kausalen Effekts des Einkommens fürdie Stärke demokratischer Institutionen: Der interessierende geschätzte Koeffizient ist negativ und insignifikant.</span>
<span id="cb1-1383"><a href="#cb1-1383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1384"><a href="#cb1-1384" aria-hidden="true" tabindex="-1"></a>Weiterhin bekräftigen zusätzliche Inferenzstatistiken im Output von <span class="in">`summary(deminc_AB_mod)`</span> die Adäquanz des GMM-Verfahrens:</span>
<span id="cb1-1385"><a href="#cb1-1385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1386"><a href="#cb1-1386" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Sargan test:`</span> Die Nullhypothese des Sargan-Tests<span class="ot">[^fixedeffects-25]</span> ist, dass die Instrumente gültig, d.h. unkorreliert mit den Fehlertermen, sind. Diese Hypothese können wir zu keinem in der Praxis relevanten Signifikanzniveau ablehnen.</span>
<span id="cb1-1387"><a href="#cb1-1387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1388"><a href="#cb1-1388" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Autocorrelation test (1):`</span> Test der Nullhypothese, dass die $\Delta\epsilon_{it}$ *keine* AR(1)-Korrelationsstruktur aufweisen. Für unkorrelierte $\epsilon_{it}$ sind die ersten Differenzen $\Delta\epsilon_{it}$ AR(1)-korreliert. Tatsächlich können wir diese Nullhypothese ablehnen.</span>
<span id="cb1-1389"><a href="#cb1-1389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1390"><a href="#cb1-1390" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Autocorrelation test (2):`</span> Test der Nullhypothese, dass die $\Delta\epsilon_{it}$ *keine* AR(2)-Korrelationsstruktur aufweisen. Dies ist relevant für die Gültigkeit des Arellano-Bond-Schätzers, da AR-Korrelation zweiter (oder höherer) Ordnung darauf hinweisen würde, dass die verwendeten Instrumente ungültig sind.</span>
<span id="cb1-1391"><a href="#cb1-1391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1392"><a href="#cb1-1392" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Wald test for coefficients:`</span> Wir lehnen die Nullhypothese, dass $\Delta\text{FHPRI}_{it-1}$ und $\Delta\text{Einkommen}_{it-1}$ keine Erklärtungskraft für $\Delta\text{FHPRI}_{it}$ haben, ab. Unter der Alternativ-Hypothese ist *mindestens ein* Koeffizient von null verschieden. Hierunter fällt das Szenario, dass $\Delta\text{FHPRI}_{it-1}$ zeitliche Dynamik in der Outcome-Variable erklärt, jedoch $\Delta\text{Einkommen}_{it-1}$ irrelevant ist (kein kausaler Effekt).</span>
<span id="cb1-1393"><a href="#cb1-1393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1394"><a href="#cb1-1394" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Wald test for time dummies:`</span> Die Nullhyothese, dass die Zeit-Fixed-Effects irrelevant sind, wird zum 5%-Niveau abgelehnt.</span>
<span id="cb1-1395"><a href="#cb1-1395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1396"><a href="#cb1-1396" aria-hidden="true" tabindex="-1"></a><span class="ot">[^fixedeffects-25]: </span>Auch Sargan-Hansen-Test genannt <span class="co">[</span><span class="ot">nach @Sargan1958; @Hansen1982</span><span class="co">]</span>.</span>
<span id="cb1-1397"><a href="#cb1-1397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1398"><a href="#cb1-1398" aria-hidden="true" tabindex="-1"></a>Mit <span class="in">`modelsummary::modelsummary()`</span> stellen wir die Koeffizientenschätzungen tabellarisch dar. Für eine bessere Lesbarkeit formatieren wir die (andernfalls aus dem jeweiligen <span class="in">`formula`</span>/<span class="in">`fml`</span>-Argument übernommenen) Bezeichnungen der Koeffizienten anhand eines bennanten Vektors <span class="in">`coef_map`</span>.</span>
<span id="cb1-1399"><a href="#cb1-1399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1402"><a href="#cb1-1402" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr}</span></span>
<span id="cb1-1403"><a href="#cb1-1403" aria-hidden="true" tabindex="-1"></a><span class="in">#| warning: false</span></span>
<span id="cb1-1404"><a href="#cb1-1404" aria-hidden="true" tabindex="-1"></a><span class="in">library(modelsummary)</span></span>
<span id="cb1-1405"><a href="#cb1-1405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1406"><a href="#cb1-1406" aria-hidden="true" tabindex="-1"></a><span class="in"># Mapping für Koeffizienten festlegen</span></span>
<span id="cb1-1407"><a href="#cb1-1407" aria-hidden="true" tabindex="-1"></a><span class="in">coef_map &lt;- c(</span></span>
<span id="cb1-1408"><a href="#cb1-1408" aria-hidden="true" tabindex="-1"></a><span class="in">  "l(lrgdpch, 1)" = "Einkommen_{t-1}",</span></span>
<span id="cb1-1409"><a href="#cb1-1409" aria-hidden="true" tabindex="-1"></a><span class="in">  "lag(lrgdpch, 1)" = "Einkommen_{t-1}",</span></span>
<span id="cb1-1410"><a href="#cb1-1410" aria-hidden="true" tabindex="-1"></a><span class="in">  "l(fhpolrigaug, 1)" = "FHPRI_{t-1}",</span></span>
<span id="cb1-1411"><a href="#cb1-1411" aria-hidden="true" tabindex="-1"></a><span class="in">  "lag(fhpolrigaug, 1)" = "FHPRI_{t-1}"</span></span>
<span id="cb1-1412"><a href="#cb1-1412" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb1-1413"><a href="#cb1-1413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1414"><a href="#cb1-1414" aria-hidden="true" tabindex="-1"></a><span class="in"># Tabellarische Übersicht erzeugen</span></span>
<span id="cb1-1415"><a href="#cb1-1415" aria-hidden="true" tabindex="-1"></a><span class="in">modelsummary(</span></span>
<span id="cb1-1416"><a href="#cb1-1416" aria-hidden="true" tabindex="-1"></a><span class="in">  models = list(</span></span>
<span id="cb1-1417"><a href="#cb1-1417" aria-hidden="true" tabindex="-1"></a><span class="in">    "Pool" = deminc_pooling_lag,</span></span>
<span id="cb1-1418"><a href="#cb1-1418" aria-hidden="true" tabindex="-1"></a><span class="in">    "FE" = deminc_FE_mod,</span></span>
<span id="cb1-1419"><a href="#cb1-1419" aria-hidden="true" tabindex="-1"></a><span class="in">    "RE" = deminc_RE_mod,</span></span>
<span id="cb1-1420"><a href="#cb1-1420" aria-hidden="true" tabindex="-1"></a><span class="in">    "AB" = deminc_AB_mod</span></span>
<span id="cb1-1421"><a href="#cb1-1421" aria-hidden="true" tabindex="-1"></a><span class="in">  ),</span></span>
<span id="cb1-1422"><a href="#cb1-1422" aria-hidden="true" tabindex="-1"></a><span class="in">  coef_omit = "Intercept",</span></span>
<span id="cb1-1423"><a href="#cb1-1423" aria-hidden="true" tabindex="-1"></a><span class="in">  coef_map = coef_map,</span></span>
<span id="cb1-1424"><a href="#cb1-1424" aria-hidden="true" tabindex="-1"></a><span class="in">  gof_omit = "^(?!$).*", </span></span>
<span id="cb1-1425"><a href="#cb1-1425" aria-hidden="true" tabindex="-1"></a><span class="in">  output = "gt",</span></span>
<span id="cb1-1426"><a href="#cb1-1426" aria-hidden="true" tabindex="-1"></a><span class="in">  stars = TRUE,</span></span>
<span id="cb1-1427"><a href="#cb1-1427" aria-hidden="true" tabindex="-1"></a><span class="in">) %&gt;%  </span></span>
<span id="cb1-1428"><a href="#cb1-1428" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_caption(</span></span>
<span id="cb1-1429"><a href="#cb1-1429" aria-hidden="true" tabindex="-1"></a><span class="in">    caption = "Regressionsergebnisse zu Acemoglu et al. (2008a)"</span></span>
<span id="cb1-1430"><a href="#cb1-1430" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb1-1431"><a href="#cb1-1431" aria-hidden="true" tabindex="-1"></a><span class="in">  tabopts()</span></span>
<span id="cb1-1432"><a href="#cb1-1432" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-1433"><a href="#cb1-1433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1434"><a href="#cb1-1434" aria-hidden="true" tabindex="-1"></a><span class="fu">## Zusammenfassung</span></span>
<span id="cb1-1435"><a href="#cb1-1435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1436"><a href="#cb1-1436" aria-hidden="true" tabindex="-1"></a>Bei entsprechender Datenverfügbarkeit sind Panel-Methoden alternative Ansätze für die Schätzung kausaler Effekte, die Probleme wie Confounding durch unbeobachtbare Heterogenitäten adressieren. Fixed-Effects-Schätzung eliminiert zeitlich-invariante unbeobachtete Heterogenitäten für eine konsistente Schätzung der Effekte zeitlich variierender Variablen. Zeit-Fixed-Effects kontrollieren für zeitabhängige Einflüsse, die alle Einheiten eines Panels in einem bestimmten Zeitpunkt betreffen. Mit Random Effects modellieren wir unbeobachtbare Heterogenitäten zwischen den Beobachtungseinheiten als zufällig. Wenn diese Heterogenitäten nicht mit den erklärenden Variablen korrelieren, können Random-Effects-Schätzer die Variation innerhalb und zwischen den Einheiten für eine unverzerrte und effizientere Schätzungen nutzen. </span>
<span id="cb1-1437"><a href="#cb1-1437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1438"><a href="#cb1-1438" aria-hidden="true" tabindex="-1"></a>Dynamische Panel-Modelle kontrollieren für vergangene Werte der Outcome-Variable zur Vermeidung von Confounding aufgrund zeitlicher Abhängigkeitstrukturen. Verfahren wie der Arellano-Bond-Schätzer adressieren inhärante Endogenitätsprobleme in dynamischen Panel-Modellen. Hierbei werden vergangene Werte der Outcome-Variable als Instrumente genutzt, um eine konsistente Schätzungen zu gewährleisten. </span>
<span id="cb1-1439"><a href="#cb1-1439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1440"><a href="#cb1-1440" aria-hidden="true" tabindex="-1"></a>Insbesondere wenn in empirischen Anwendungen heteroskedastische oder zeitlich korrelierte Fehler plausibel sind, sollten cluster-robuste Standardfehler für korrekte Inferenz zu kausalen Effekten mit Panel-Schätzungen verwendet werden.</span>
<span id="cb1-1441"><a href="#cb1-1441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-1442"><a href="#cb1-1442" aria-hidden="true" tabindex="-1"></a>Mit den Paketen <span class="in">`fixest`</span> und <span class="in">`plm`</span> stehen vielseitige Implementierungen zur Verfügung, um Fixed- und Random-Effects-Modelle sowie dynamische Panel-Modelle mit R zu schätzen. </span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mca91/kasa_book/edit/main/FixedEffects.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/mca91/kasa_book/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li></ul></div></div></div></footer></body></html>