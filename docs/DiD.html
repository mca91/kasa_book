<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Kausalanalyse und Machinelles Lernen mit R - 4&nbsp; Difference-in-Differences</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./RDD.html" rel="next">
<link href="./Matching.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><meta name="robots" content="noindex">
<script>
  MathJax = {
    tex: {
      tags: 'ams'  // should be 'ams', 'none', or 'all'
    }
  };
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.js" integrity="sha512-aoZChv+8imY/U1O7KIHXvO87EOzCuKO0GhFtpD6G2Cyjo/xPeTgdf3/bchB10iB+AojMTDkMHDPLKNxPJVqDcw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<style>
.qwebr-code-output-stdout {background-color: powderblue;}

.qwebr-button-run {
 width = 100%; 
}

.centered-caption {
   text-align: center;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/quizdown.js"></script><script>quizdown.init();</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./DiD.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Difference-in-Differences</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./"></a><a href="./index.html">Kausalanalyse mit R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Lesemodus umschalten">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Start</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_Einfuehrung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Statistische Programmierung mit R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Matching</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiD.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Difference-in-Differences</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RDD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Regression Discontiniuty Designs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RegReg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">  Regularisierte Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./SyntheticControl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Synthetic Control</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Literatur.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
    </ul>
</div>
    <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title"><a href="./index.html">Übersicht</a></h2>
   
  <ul>
<li><a href="#einordnung-im-potential-outcomes-framework" id="toc-einordnung-im-potential-outcomes-framework" class="nav-link active" data-scroll-target="#einordnung-im-potential-outcomes-framework"><span class="header-section-number">4.1</span> Einordnung im Potential Outcomes Framework</a></li>
  <li><a href="#sch%C3%A4tzung-des-att-mit-did" id="toc-schätzung-des-att-mit-did" class="nav-link" data-scroll-target="#sch%C3%A4tzung-des-att-mit-did"><span class="header-section-number">4.2</span> Schätzung des ATT mit DID</a></li>
  <li><a href="#beispiel-effekt-von-steuererleichterungen-auf-weibliche-besch%C3%A4ftigungsquote" id="toc-beispiel-effekt-von-steuererleichterungen-auf-weibliche-beschäftigungsquote" class="nav-link" data-scroll-target="#beispiel-effekt-von-steuererleichterungen-auf-weibliche-besch%C3%A4ftigungsquote"><span class="header-section-number">4.3</span> Beispiel: Effekt von Steuererleichterungen auf weibliche Beschäftigungsquote</a></li>
  <li><a href="#terrorism" id="toc-terrorism" class="nav-link" data-scroll-target="#terrorism"><span class="header-section-number">4.4</span> Terrorism</a></li>
  <li><a href="#means-and-sds" id="toc-means-and-sds" class="nav-link" data-scroll-target="#means-and-sds"><span class="header-section-number">5</span> means and SDs</a></li>
  <li><a href="#table-3" id="toc-table-3" class="nav-link" data-scroll-target="#table-3"><span class="header-section-number">6</span> Table 3</a></li>
  <li><a href="#a" id="toc-a" class="nav-link" data-scroll-target="#a"><span class="header-section-number">7</span> (A)</a></li>
  <li><a href="#fixest" id="toc-fixest" class="nav-link" data-scroll-target="#fixest"><span class="header-section-number">8</span> fixest</a></li>
  <li><a href="#plm" id="toc-plm" class="nav-link" data-scroll-target="#plm"><span class="header-section-number">9</span> plm</a></li>
  <li><a href="#b" id="toc-b" class="nav-link" data-scroll-target="#b"><span class="header-section-number">10</span> (B)</a></li>
  <li><a href="#fixest-1" id="toc-fixest-1" class="nav-link" data-scroll-target="#fixest-1"><span class="header-section-number">11</span> fixest</a></li>
  <li><a href="#plm-1" id="toc-plm-1" class="nav-link" data-scroll-target="#plm-1"><span class="header-section-number">12</span> plm</a></li>
  <li><a href="#c" id="toc-c" class="nav-link" data-scroll-target="#c"><span class="header-section-number">13</span> (C)</a></li>
  <li><a href="#fixest-2" id="toc-fixest-2" class="nav-link" data-scroll-target="#fixest-2"><span class="header-section-number">14</span> fixest</a></li>
  <li><a href="#d" id="toc-d" class="nav-link" data-scroll-target="#d"><span class="header-section-number">15</span> (D)</a></li>
  <li><a href="#e" id="toc-e" class="nav-link" data-scroll-target="#e"><span class="header-section-number">16</span> (E)</a></li>
  <li><a href="#doesnt-match-for-some-reason" id="toc-doesnt-match-for-some-reason" class="nav-link" data-scroll-target="#doesnt-match-for-some-reason"><span class="header-section-number">17</span> (doesnt match for some reason)</a></li>
  <li><a href="#fixest-3" id="toc-fixest-3" class="nav-link" data-scroll-target="#fixest-3"><span class="header-section-number">18</span> fixest</a></li>
  <li><a href="#a-1" id="toc-a-1" class="nav-link" data-scroll-target="#a-1"><span class="header-section-number">19</span> (A)</a></li>
  <li><a href="#fixest-4" id="toc-fixest-4" class="nav-link" data-scroll-target="#fixest-4"><span class="header-section-number">20</span> fixest</a></li>
  <li><a href="#b-1" id="toc-b-1" class="nav-link" data-scroll-target="#b-1"><span class="header-section-number">21</span> (B)</a></li>
  <li><a href="#fixest-5" id="toc-fixest-5" class="nav-link" data-scroll-target="#fixest-5"><span class="header-section-number">22</span> fixest</a></li>
  <li><a href="#c-1" id="toc-c-1" class="nav-link" data-scroll-target="#c-1"><span class="header-section-number">23</span> (C)</a></li>
  <li><a href="#fixest-6" id="toc-fixest-6" class="nav-link" data-scroll-target="#fixest-6"><span class="header-section-number">24</span> fixest</a></li>
  <li><a href="#a-2" id="toc-a-2" class="nav-link" data-scroll-target="#a-2"><span class="header-section-number">25</span> (A)</a></li>
  <li><a href="#fixest-7" id="toc-fixest-7" class="nav-link" data-scroll-target="#fixest-7"><span class="header-section-number">26</span> fixest</a></li>
  <li><a href="#b-2" id="toc-b-2" class="nav-link" data-scroll-target="#b-2"><span class="header-section-number">27</span> (B)</a></li>
  <li><a href="#fixest-8" id="toc-fixest-8" class="nav-link" data-scroll-target="#fixest-8"><span class="header-section-number">28</span> fixest</a></li>
  <li><a href="#c-2" id="toc-c-2" class="nav-link" data-scroll-target="#c-2"><span class="header-section-number">29</span> (C)</a></li>
  <li><a href="#fixest-9" id="toc-fixest-9" class="nav-link" data-scroll-target="#fixest-9"><span class="header-section-number">30</span> fixest</a></li>
  <li><a href="#e-1" id="toc-e-1" class="nav-link" data-scroll-target="#e-1"><span class="header-section-number">31</span> (E)</a></li>
  <li><a href="#fixest-10" id="toc-fixest-10" class="nav-link" data-scroll-target="#fixest-10"><span class="header-section-number">32</span> fixest</a></li>
  <li><a href="#f" id="toc-f" class="nav-link" data-scroll-target="#f"><span class="header-section-number">33</span> (F)</a></li>
  <li>
<a href="#fixest-11" id="toc-fixest-11" class="nav-link" data-scroll-target="#fixest-11"><span class="header-section-number">34</span> fixest</a>
  <ul class="collapse">
<li><a href="#zusammenfassung" id="toc-zusammenfassung" class="nav-link" data-scroll-target="#zusammenfassung"><span class="header-section-number">34.1</span> Zusammenfassung</a></li>
  </ul>
</li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">
<span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Difference-in-Differences</span>
</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><style>
.qwebr-code-output-stdout {background-color: powderblue;}

.qwebr-button-run, .qwebr-button-reset, .qwebr-button-copy {
  background-color:  rgba(0, 0, 0, 0);
  border-style: none;
  font-weight: 400;
  color: white; 
  transition: none;
}

.qwebr-editor-toolbar {
  width: 100%;
  display: flex;
  justify-content: space-between;
  box-sizing: border-box;
  border-radius: 0 0 6px 6px;
  background-color: darkgreen;
  border-color: darkgreen;
  border-width: 1px;
  border-style: solid;
  padding: 0 0; 
  transition: color .1s ease-in-out, background-color .1s ease-in-out,border-color .1s ease-in-out,box-shadow .1s ease-in-out;
}

.qwebr-editor-toolbar:hover {
  background-color: white;
  border-color: darkgreen;
  border-width: 1px;
}

.qwebr-editor-toolbar:hover * {
  color: darkgreen;
}

.overflow-guard, .qwebr-editor, .monaco-editor {
  border-radius: 6px 6px 0 0;
  border-width: 1px 1px 0 1px;
  border-color: darkgreen;
}

</style>
<div class="cell">

</div>
<p>Der Difference-in-Differences (DID) Ansatz erlaubt die Schätzung kausaler Effekte in quasi-experimentellen Forschungsdesigns, in denen Boebachtungen für Kontroll- und Behandlungsgruppe zu mindestens zwei Zeitpunkten vorliegen und die Behandlung zwischen diesen Zeitpunkten stattfindet: Wir beobachten sowohl die Kontroll- als auch die Behandlungsgruppe vor und nachdem die Behandlung erfolgt ist. Die Motivation für die Anwendung des DID-Ansatzes liegt in der Fähigkeit, typische Risiken einer Verzerrungen zu umgehen, die bei einfachen Vorher-Nachher-Vergleichen oder reinen Querschnittsvergleichen auftreten können. Die Kernidee ist eine Schätzung des ATT durch einen Vergleich durchschnittlicher Differenzen der Outcome-Variable beider Gruppen zwischen den Perdioden vor und nach der Intervention. <a href="#fig-CDDID" class="quarto-xref">Abbildung&nbsp;<span>4.1</span></a> zeigt ein kausales Diagramm für ein Forschungsdesign, in dem DID den ATT identifizieren kann.</p>
<div class="cell page-columns page-full" data-fig-width="5" data-fig-height="3" data-layout-align="center">
<div class="cell-output-display page-columns page-full">
<div id="fig-CDDID" class="quarto-figure quarto-figure-center quarto-float anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-CDDID-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<svg width="480" height="288" viewbox="0.00 0.00 384.71 260.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 256)"><title>Causal Diagramm RDD</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-256 380.71,-256 380.71,4 -4,4"></polygon><!-- Behandlung B --><g id="node1" class="node"><title>Behandlung B</title>
<text text-anchor="middle" x="48.25" y="-121.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Behandlung B</text></g><!-- Outcome Y --><g id="node2" class="node"><title>Outcome Y</title>
<text text-anchor="middle" x="336.25" y="-121.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Outcome Y</text></g><!-- Behandlung B&#45;&gt;Outcome Y --><g id="edge1" class="edge"><title>Behandlung B-&gt;Outcome Y</title>
<path fill="none" stroke="green" d="M96.78,-126C149.08,-126 231.96,-126 285.21,-126"></path><polygon fill="green" stroke="green" points="285.45,-129.5 295.45,-126 285.45,-122.5 285.45,-129.5"></polygon></g><!-- Gruppenzugehörigkeit --><g id="node3" class="node"><title>Gruppenzugehörigkeit</title>
<text text-anchor="middle" x="192.25" y="-13.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Gruppenzugehörigkeit</text></g><!-- Gruppenzugehörigkeit&#45;&gt;Behandlung B --><g id="edge5" class="edge"><title>Gruppenzugehörigkeit-&gt;Behandlung B</title>
<path fill="none" stroke="purple" d="M168.14,-36.08C144.16,-54.07 107.19,-81.79 80.65,-101.7"></path><polygon fill="purple" stroke="purple" points="78.33,-99.06 72.43,-107.86 82.53,-104.66 78.33,-99.06"></polygon></g><!-- Gruppenzugehörigkeit&#45;&gt;Outcome Y --><g id="edge4" class="edge"><title>Gruppenzugehörigkeit-&gt;Outcome Y</title>
<path fill="none" stroke="purple" d="M216.35,-36.08C240.33,-54.07 277.3,-81.79 303.84,-101.7"></path><polygon fill="purple" stroke="purple" points="301.97,-104.66 312.07,-107.86 306.17,-99.06 301.97,-104.66"></polygon></g><!-- Zeit t --><g id="node4" class="node"><title>Zeit t</title>
<text text-anchor="middle" x="192.25" y="-229.8" font-family="Helvetica,Arial,sans-serif" font-size="14.00">Zeit t</text></g><!-- Zeit t&#45;&gt;Behandlung B --><g id="edge3" class="edge"><title>Zeit t-&gt;Behandlung B</title>
<path fill="none" stroke="purple" d="M168.14,-215.92C144.16,-197.93 107.19,-170.21 80.65,-150.3"></path><polygon fill="purple" stroke="purple" points="82.53,-147.34 72.43,-144.14 78.33,-152.94 82.53,-147.34"></polygon></g><!-- Zeit t&#45;&gt;Outcome Y --><g id="edge2" class="edge"><title>Zeit t-&gt;Outcome Y</title>
<path fill="none" stroke="purple" d="M216.35,-215.92C240.33,-197.93 277.3,-170.21 303.84,-150.3"></path><polygon fill="purple" stroke="purple" points="306.17,-152.94 312.07,-144.14 301.97,-147.34 306.17,-152.94"></polygon></g></g></svg>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-CDDID-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.1: Kausales Diagramm für DID
</figcaption></figure>
</div>
</div>
</div>
<p><a href="#fig-CDDID" class="quarto-xref">Abbildung&nbsp;<span>4.1</span></a> illustriert Confounding bei der Bestimmung des Behandlungseffekts durch Backdoors in der Zeit <span class="math inline">\(t\)</span> und der Gruppenzugehörigkeit:</p>
<ul>
<li><p><strong>Zeit</strong>: Der Behandlungszustand der behandelten Gruppe ändert sich durch die Intervention zwischen der Vor- und der Nachbehandlungsperiode. Die Outcome-Variable <span class="math inline">\(Y\)</span> ändert sich für beide Gruppen über die Zeit hinweg.</p></li>
<li><p><strong>Gruppenzugehörigkeit</strong>: Die Gruppenzugehörigkeit legt fest, ob eine Behandlung erfolgt. Systematische Unterschiede zwischen Behandlungs- und Kontrollgruppe wirken sich auf die Outcome-Variable <span class="math inline">\(Y\)</span> aus.</p></li>
</ul>
<p>In einem DID-Ansatz ermöglicht die Beobachtung von Kontroll- und Behandlungsgruppen vor und nach einer Intervention das herausrechnen systematischer Unterschiede zwischen Behandlungs- und Kontrollgruppe und von Zeiteffekten, sodass die Backdoors durch Gruppenzugehörigkeit und Zeit geschlossen. Die Schätzung eines durchschnittlichen Behandlungseffekts erfolgt hierbei unter der Annahme, dass die Outcome-Variable beider Gruppen <em>ohne die Intervention</em> einen hinreichend ähnlichen Verlauf aufweisen würde.</p>
<section id="einordnung-im-potential-outcomes-framework" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="einordnung-im-potential-outcomes-framework">
<span class="header-section-number">4.1</span> Einordnung im Potential Outcomes Framework</h2>
<p>Im Potential Outcomes Framework nehmen wir an, dass jede Einheit <span class="math inline">\(i\)</span> in Abhänigkeit ihres Behandlungsstatus zwei potentielle Ergebnisse hat. Wir unterscheiden zwischen Beobachtungen in Behandlungs- und Kontrollgruppe:</p>
<ul>
<li>
<span class="math inline">\(Y_{i,B}(1)\)</span>: <span class="math inline">\(Y\)</span> für Einheit <span class="math inline">\(i\)</span> in der Behandlungsgruppe, wenn diese behandelt wird.</li>
<li>
<span class="math inline">\(Y_{i,B}(0)\)</span>: <span class="math inline">\(Y\)</span> für Einheit <span class="math inline">\(i\)</span> in der Behandlungsgruppe, wenn diese <em>nicht</em> behandelt wird.</li>
<li>
<span class="math inline">\(Y_{i,K}(1)\)</span>: <span class="math inline">\(Y\)</span> für Einheit <span class="math inline">\(i\)</span> in der Kontrollgruppe, wenn diese behandelt wird.</li>
<li>
<span class="math inline">\(Y_{i,K}(0)\)</span>: <span class="math inline">\(Y\)</span> für Einheit <span class="math inline">\(i\)</span> in der Kontrollgruppe, wenn diese <em>nicht</em> behandelt wird.</li>
</ul>
<p>In einem DID-Forschungsdesign hängen tatsächliche und potentielle Outcomes von der Zeit <span class="math inline">\(t\)</span> ab: Die Behandlungsgruppe wird zwischen den Zeitpunkten <span class="math inline">\(t = 0\)</span> und <span class="math inline">\(t = 1\)</span> behandelt, während die Kontrollgruppe unbehandelt bleibt. Für die Identifizierung des Behandlungseffekts wird unterstellt, dass <span class="math inline">\(Y\)</span> sich zwischen <span class="math inline">\(t=0\)</span> und <span class="math inline">\(t=1\)</span> in der Behandlungsgruppe <em>ohne eine Behandlung</em> (im Erwartungswert) mit demselben Trend entwickelt hätte, mit dem sich die Kontrollgruppe tatsächlich entwickelt hat (parallele Trends). Die Gültigkeit paralleler Trends ist entscheidend für die Validität der DID-Methode, da so sicherstellt ist, dass die beobachteten Unterschiede in den Ergebnissen auf die Behandlung zurückzuführen sind und nicht auf andere zeitgleich auftretende Faktoren. Der Behandlungseffekt kann dann als eine <em>Differenz von Differenzen</em> geschrieben werden:</p>
<p><span class="math display">\[\begin{align}
  \begin{split}
    \beta_\textup{DID} =&amp; \, \bigg({\color{red}\textup{E}\big[Y_B(1)\vert t=1\big] - \textup{E}\big[Y_B(0)\vert t=0\big]} \bigg)\\
  -&amp;\, \bigg({\color{blue}\textup{E}\big[Y_K(0)\vert t=1\big] -  \textup{E}\big[Y_K(0)\vert t=0\big]} \bigg)
  \end{split}\label{eq:DID-ATT1}
\end{align}\]</span></p>
<p>Der Effekt <span class="math inline">\(\beta_\textup{DID}\)</span> ist ein ATT, der über das Schließen der Backdoor in der Zeit (rote und blaue Differenzen der Erwartungswerte zwischen <span class="math inline">\(t=0\)</span> und <span class="math inline">\(t=1\)</span>) sowie der Backdoor in der Gruppenzugehörigkeit (Differenz der Erwartungswert-Differenzen) identifiziert wird.</p>
<p>Eine Null-Ergänzung von <span class="math inline">\(\eqref{eq:DID-ATT1}\)</span> mit <span class="math inline">\({\color{blue}\textup{E}\big[Y_K(0)\vert t=1\big] -  \textup{E}\big[Y_K(0)\vert t=1\big]}\)</span> zeigt die Wichtigkeit der Gültigkeit paralleler Trends:</p>
<p><span class="math display">\[\begin{align*}
    \beta_\textup{DID} =&amp; \, \bigg({\color{red}\textup{E}\big[Y_B(1)\vert t=1\big] - \textup{E}\big[Y_B(0)\vert t=0\big]} \bigg)
  - \bigg({\color{blue}\textup{E}\big[Y_K(0)\vert t=1\big] -  \textup{E}\big[Y_K(0)\vert t=0\big]} \bigg)\\ + &amp;\,
{\color{blue}\textup{E}\big[Y_K(0)\vert t=1\big] -  \textup{E}\big[Y_K(0)\vert t=1\big]}\\
    \\
    =&amp;\, \underbrace{{\color{red}\textup{E}\big[Y_B(1)\vert t=1\big]} - {\color{blue}\textup{E}\big[Y_B(1)\vert t=1\big]}}_{=\textup{ATT}}\\
    +&amp;\, \underbrace{\bigg({\color{red}\textup{E}\big[Y_B(0)\vert t=1\big] - \textup{E}\big[Y_B(0)\vert t=0\big]} \bigg) - \bigg({\color{blue}\textup{E}\big[Y_K(0)\vert t=1\big] -  \textup{E}\big[Y_K(0)\vert t=0\big]} \bigg)}_{ = \textup{Verzerrung durch nicht-parallele Trends}}
\end{align*}\]</span></p>
<p>Diese Zerlegung zeigt, dass der ATT nur bei parallelen Trends identifziert werden kann, d.h. wir benötigen</p>
<p><span class="math display">\[\begin{align*}
{\color{red}\textup{E}\big[Y_B(0)\vert t=1\big] - \textup{E}\big[Y_B(0)\vert t=0\big]} = {\color{blue}\textup{E}\big[Y_K(0)\vert t=1\big] -  \textup{E}\big[Y_K(0)\vert t=0\big]}.
\end{align*}\]</span></p>
<p>Beachte, dass <span class="math inline">\({\color{red}\textup{E}\big[Y_B(0)\vert t=1\big]}\)</span> der Erwartungswert des potentiellen Outcomes einer unbehandelten Behandlungsgruppe in <span class="math inline">\(t=1\)</span> ist. Somit kann die Verzerrung durch nicht-parallele Trends nicht empirisch überprüft werden und muss ausschließlich durch das Forschungsdesign gewährleistet sein. In Anwendungen kann die Plausibilität der Annahme graphisch anhand geschätzter Trends in der Outcome-Variable oder durch Placebo-Tests untersucht werden.</p>
<p><strong>Annahmen für DID</strong></p>
<ol type="1">
<li><p><strong>Parallele Trends</strong>: Die Trends in der Outcome Variable <span class="math inline">\(Y\)</span> in Behandlungs- und Kontrollgruppe würden bis einschließlich <span class="math inline">\(t=1\)</span> parallel verlaufen, wenn es keine Behandlung gäbe. Diese Annahme ist Voraussetzung dafür, dass Veränderungen im Outcome <span class="math inline">\(Y\)</span> für die Behandlungsgruppe, die sich von <span class="math inline">\(Y\)</span> für die Kontrollgruppe unterscheidet, auschließlich dem Effekt der Behandlung zugeschrieben werden kann.</p></li>
<li><p><strong>Keine Interferenz zwischen Gruppen (SUTVA)</strong>: Die Behandlung einer Gruppe sollte keinen Einfluss auf die andere Gruppe haben.</p></li>
<li><p><strong>Konsistete Behandlungseffekte</strong>: Der Effekt der Intervention ist konstant über Individuen und Zeit hinweg.</p></li>
</ol></section><section id="schätzung-des-att-mit-did" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="schätzung-des-att-mit-did">
<span class="header-section-number">4.2</span> Schätzung des ATT mit DID</h2>
<p>Für die Schätzung von <span class="math inline">\(\beta_\text{DID}\)</span> ersetzen wir die Erwartungswerte in <span class="math inline">\(\eqref{eq:DID-ATT1}\)</span> durch ihre Stichprobenmomente:</p>
<p><span class="math display">\[\begin{align}
  \widehat{\beta}_\textup{DID} = \bigg({\color{red}\overline{Y_B(1)\vert t=1} - \overline{Y_B(0)\vert t=0}} \bigg) -  \bigg({\color{blue}\overline{Y_K(0)\vert t=1} - \overline{Y_K(0)\vert t=0}}\bigg) \label{eq:DIDMOMENTS}
\end{align}\]</span></p>
<p>Die nachfolgende interaktive Grafik illustriert die Schätzung des ATT mit DID für simulierte Daten.</p>
<p><strong>Interaktive Elemente der Visualisierung</strong></p>
<ul>
<li><p>Die Beobachtungen der Individuen zu 6 verschiedenen Zeitpunkten werden als Punkte dargestellt. Die Datenpunkte könn mit <em>Zeige Daten</em> ein- und ausgeblendet werden.</p></li>
<li><p>Die geschätzten Trends beider Gruppen für den gesamten Beobachtungszeitraum und die Gruppenzugehörigkeit können mit <em>Zeige Trends</em> ein- und ausgeblendet werden. Die Auswahl <em>Parallele Trends</em> stellt sicher, dass beide Gruppen (mit Ausnahme des Behandlungseffekts in der Behandlungsgruppe) dem selben zeitlichen Trend folgen. Bei nicht-parallelen Trends folgt die Behandlungsgruppe einem positiven Trend mit größerer positiver Steigung als in der Kontrollgruppe.</p></li>
<li><p>Die Behandlung erfolgt zwischen der mit dem Slider <em>Zeitpunkt</em> ausgewählten und der darauf folgenden Periode. Der tatsächliche Behandlungseffekt kann über den Slider <em>Effekt</em> festgelegt werden.</p></li>
</ul>
<p><strong>Anatomie der Schätzung des ATT bei <em>parallelen</em> Trends</strong></p>
<ul>
<li><p>Wir illustrieren die Schätzen des ATT mit Formel <span class="math inline">\(\eqref{eq:DIDMOMENTS}\)</span>. Kreise zeigen Mittelwerte für Kontroll- und Behandlungsgruppe <em>vor</em> der Intervention. Dreiecke zeigen Mittelwerte <em>nach</em> der Intervention.</p></li>
<li><p>Die gestrichelte rote Linie zeigt den (kontrafaktischen) Verlauf der Behandlungsgruppe <em>ohne</em> Behandlung. Hierbei wird unterstellt, dass sich die Behandlungsgruppe mit demselben Trend <em>wie die Kontrollgruppe entwickelt hätte</em> (blaue Linie).</p></li>
<li><p>Der geschätzte Behandlungseffekt wird als orangene vertikale Linie dargestellt. Dies ist die Differenz zwischen dem tatsächlichen post-Behandlungs-Mittelwert und dem kontrafaktischen Mittelwert der Behandlungsgruppe.</p></li>
</ul>
<p><strong>Anatomie der Schätzung des ATT bei <em>nicht-parallelen</em> Trends</strong></p>
<ul>
<li><p>Für nicht-parallele Trends zeigt die Grafik den unterstellten kontrafaktischen Trend der Behandlungsgruppe als gestrichelte blaue linie. Der” “tatsächliche” kontrafaktische Verlauf der Behandlungsgruppe wird als gestrichelte rote Linie dargestellt.</p></li>
<li>
<p>Aufgrund des steileren (positiven) Trends in der Behandlungsgruppe ergibt sich eine <em>positive</em> Verzerrung von <span class="math inline">\(\color{orange}\widehat{\beta}_\text{DID}\)</span>. Diese Verzerrung wird durch die gestrichelte vertikale schwarze Linie kenntlich gemacht.</p>
<ul>
<li><p>Für <em>positive</em> Behandlungseffekte wird der ATT <em>überschätzt</em>: die Verzerrung entspricht der Überlagerung der gestrichelten schwarzen linie mit der orangenen Linie des geschätzten Effekts.</p></li>
<li><p>Für <em>negative</em> Behandlungseffekte wird der ATT unterschätzt: die Verzerrung entspricht der gestrichelten schwarzen linie oberhalb der orangenen Linie des geschätzten Effekts.</p></li>
</ul>
</li>
</ul>
<iframe width="100%" height="813" frameborder="0" src="https://observablehq.com/embed/@mca91/did?cells=didformula%2Cchart%2Cviewof+ptrends%2Cviewof+showTrends%2Cviewof+showData%2Cviewof+treatPeriod%2Cviewof+effect">
</iframe>
<p>Die Implementierung von DID-Schätzern erfolgt meist anhand linearer Regression. Das Modell für zwei Zeitperioden ist</p>
<p><span class="math display">\[\begin{align}
  Y_{i,\,t} = \alpha + \beta_1 B_i + \beta_2 Z_t + \beta_3 (B_i \times Z_t) + \epsilon_{i,\,t}, \quad t\in\{0,1\}, \label{eq:DIDREG}
\end{align}\]</span></p>
<p>wobei <span class="math inline">\(\beta_3\)</span> der interessierende Behandlungseffekt ist. Der Regressor <span class="math inline">\(B_i \times Z_t\)</span> ergibt sich als die Interaktion zwischen der Behandlungsgruppenzugehörigkeit <span class="math inline">\(B_i\)</span> und einem Indikator für den Zeitpunkt <em>nach</em> der Intervention, <span class="math inline">\(Z_i = \mathbb{I}_{\{t=1\}}\)</span>. Es ist <span class="math inline">\(\widehat\beta_3 = \widehat{\beta}_\text{DID}\)</span>, d.h. der KQ-Schätzer von <span class="math inline">\(\beta_3\)</span> ist der DID-Schätzer des ATT und numerisch äquivalent zu <span class="math inline">\(\eqref{eq:DIDMOMENTS}\)</span>.</p>
<p>Die Berechnung von <span class="math inline">\(\widehat\beta_\text{DID}\)</span> anhand von Modell <span class="math inline">\(\eqref{eq:DIDREG}\)</span> ist praktisch, da wir so Inferenzstatistiken mit etablierten R-Funktionen wie gewohnt berechnen können.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Facts zum einfachen DID-Schätzer
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>DID benötigt Beobachtungen einer Behandlungs- und einer Kontrollgruppe zu mindestens zwei verschiedenen Zeitpunkten.</p></li>
<li><p>Im DID-Forschungsdesign kann der ATT durch einen Vergleich von Differenzen in den Ergebnissen vor und nach einer Behandlung zwischen Behandlungs- und Kontrollgruppen identifiziert werden.</p></li>
<li><p>DID ist empfindlich gegenüber Verletzungen der Annahme, dass die zeitlichen Trends in den Ergebnissen für beide Gruppen vor der Intervention parallel verlaufen.</p></li>
<li><p>Der DID-Schätzer kann in einem Regressionsmodell mit Interaktionsterm zwischen Zeit- und Gruppenvariablen implementiert werden.</p></li>
</ul>
</div>
</div>
</section><section id="beispiel-effekt-von-steuererleichterungen-auf-weibliche-beschäftigungsquote" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="beispiel-effekt-von-steuererleichterungen-auf-weibliche-beschäftigungsquote">
<span class="header-section-number">4.3</span> Beispiel: Effekt von Steuererleichterungen auf weibliche Beschäftigungsquote</h2>
<p>Der Earned Income Tax Credit (EITC) ist ein Steuerguthaben für US-Amerkanische Familien die unterhalb einer gesetztlich festgelegten Einkoemmnsgrenze liegen. Der genaue Betrag des EITC hängt gestaffelt vom Einkommen ab und, ähnlich zum Kindergeld in Deutschland, steigt mit der Anzahl der zu versorgenden Kinder. Ein wichtiger Unterschied zum Kindergeld ist, dass der EITC nicht beantragt werden muss: Qualifizierten Familien wird der Betrag automatisch durch die Behörden im Steuerausgleich gutgeschrieben. Somit kann Selbstselektion in die Behandlungsgruppe ausgeschlossen werden, da sich die Behandlung ausschließlich durch die im Rahmen der EITC-Ausweitung geänderten Anspruchsgrundlagen ergibt.</p>
<p><span class="citation" data-cites="EissaLiebman1996">Eissa und Liebman (<a href="Literatur.html#ref-EissaLiebman1996" role="doc-biblioref">1996</a>)</span> betrachten Veränderungen in der EITC-Gesetzgebung als Intervention, deren Auswirkungen mit sozio-ökonimischen Paneldaten in einem DID-Ansatz untersucht werden können. Die Studie analysiert die Auswirkungen der ersten Ausweitung des EITC im Jahr 1986 auf die Beschäftigung und Löhne von Frauen. Diese Erweiterung erhöhte die gewährten Steuererleichterungen und die für eine Qualifikation für das Programm zu unterschreitende Einkommensgrenze.</p>
<p>Ein zentraler Befund der Studie ist, dass die EITC-Ausweitung von 1986 einen statistisch signifikanten Anstieg der Arbeitsbeteiligung alleinerziehender Frauen von geschätzten 3% bewirkt hat. Weiterhin gab es signifikante positive Effekte auf die geleisteten Arbeitsstunden und Nachweise für Einkommensverbesserungen in dieser Gruppe. Diese Ergebnisse sind starke Evidenz, dass Maßnahmen wie der EITC effektiv dazu beitragen können, die Erwerbssituation in der Zielgruppe zu steigern und somit die wirtsschafts- und sozialpolitische Ziele derartiger Programme realisierbar sind.</p>
<p>Im Jahr 1993 wurde das Programm erneut ausgweitet: Vor 1993 gab es lediglich eine Einkommensstufe für Familien mit Kindern. 1993 wurde eine zusätzliche Stufe für Familien mit zwei oder mehr Kindern eigeführt, die damit einen höheren maximalen Kreditbetrag erhalten konnten als Familien mit nur einem Kind. Dies führte zu einer größeren finanziellen Unterstützung einkommensschwacher Familien.</p>
<p><span class="citation" data-cites="Adireksombat2010">Adireksombat (<a href="Literatur.html#ref-Adireksombat2010" role="doc-biblioref">2010</a>)</span> untersucht die Effekte der zweiten EITC-Ausweitung ebenfalls mit einem DID Ansatz und findet Evidenz für einen Anstieg der Arbeitbeteiligung von etwa 5% in der Zielgruppe alleinerziehender Frauen mit mindestens 2 Kindern.</p>
<p>Zur Illustration der empirischen Anwendung von DID mit R untersuchen wir Effekte der EITC-Ausweitung von 1993 nachfolgend anhand eines ähnlichen Datensatzes wie in der Studie von <span class="citation" data-cites="Adireksombat2010">Adireksombat (<a href="Literatur.html#ref-Adireksombat2010" role="doc-biblioref">2010</a>)</span>. Diese Daten sind im Datensatz XYZ verfügbar und erfassen jährliche sozio-ökonomische Merkmale für Familien im Zeitraum von 1991 bis 1996.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">eitc_data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"datasets/eitc_data.csv"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eine Zusammenfassung des Datensatzes ist in Tabelle XYZ dargestellt.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Kategorische Variable für Anz. Kinder hinzufügen</span></span>
<span><span class="va">eitc_data</span> <span class="op">&lt;-</span> <span class="va">eitc_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    nchildren <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>      <span class="va">children</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"0"</span>,</span>
<span>      <span class="va">children</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"1"</span>,</span>
<span>      <span class="va">children</span> <span class="op">&gt;=</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"2+"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="terrorism" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="terrorism">
<span class="header-section-number">4.4</span> Terrorism</h2>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">polizeipraesenz</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"datasets/polizeipraesenz.csv"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Table 2</span></span>
<span><span class="va">dat_listcol</span> <span class="op">&lt;-</span> <span class="va">polizeipraesenz</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">observ</span>, <span class="va">monat</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>totrob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">totrob</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">transmute</span><span class="op">(</span></span>
<span>    d2more <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">totrob</span><span class="op">[</span><span class="va">distanz</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    d2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">totrob</span><span class="op">[</span><span class="va">distanz</span> <span class="op">==</span> <span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    d1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">totrob</span><span class="op">[</span><span class="va">distanz</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    same <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">totrob</span><span class="op">[</span><span class="va">institut</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="means-and-sds" class="level1" data-number="5"><h1 data-number="5">
<span class="header-section-number">5</span> means and SDs</h1>
<p>dat_listcol %&gt;% group_by(monat) %&gt;% summarise( across(d2more:same, list(mean = ~ mean(unlist(.)), sd = ~ sd(unlist(.))) ), )</p>
<p>the_diffs &lt;- dat_listcol %&gt;% group_by(monat) %&gt;% summarise( diff1 = list( t.test(x = unlist(same), y = unlist(d2more)) ), diff2 = list( t.test(x = unlist(d1), y = unlist(same)) ), diff3 = list( t.test(x = unlist(d2), y = unlist(d2more)) ), .groups = “keep” ) %&gt;% transmute( across(diff1:diff3, list( m = ~ map_dbl(., (x) diff(x<span class="math inline">\(estimate)),
             sd = ~ map_dbl(., \(x) x\)</span>stderr) ) ) )</p>
<p>form &lt;- the_diffs %&gt;% transmute(across(contains(“_m”), ~sprintf(“%.4f (%.4f)”, ., get(sub(“.m$”, “_sd”, cur_column()))), .names = “{.col}_formatted”))</p>
<p>form %&gt;% gt::gt()</p>
</section><section id="table-3" class="level1" data-number="6"><h1 data-number="6">
<span class="header-section-number">6</span> Table 3</h1>
<p>library(AER)</p>
</section><section id="a" class="level1" data-number="7"><h1 data-number="7">
<span class="header-section-number">7</span> (A)</h1>
<p>dat_DID &lt;- dat %&gt;% mutate( treated = institut == 1, group = monat &gt; “Juli (1 - 17)”, oneblock = distanz == 1, twoblocks = distanz == 2 ) %&gt;% filter(monat != “Juli (18 - 31)”)</p>
</section><section id="fixest" class="level1" data-number="8"><h1 data-number="8">
<span class="header-section-number">8</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) | observ + monat, data = dat_DID, vcov = “HC1”)</p>
</section><section id="plm" class="level1" data-number="9"><h1 data-number="9">
<span class="header-section-number">9</span> plm</h1>
<p>pdata &lt;- pdata.frame(dat_DID, index = c(“observ”, “monat”))</p>
<p>model &lt;- plm(formula = totrob ~ I(treated * group) , data = pdata, model = “within”, effect = “twoway”) summary(model, vcov = vcovHC(model, method = “white1”))</p>
</section><section id="b" class="level1" data-number="10"><h1 data-number="10">
<span class="header-section-number">10</span> (B)</h1>
</section><section id="fixest-1" class="level1" data-number="11"><h1 data-number="11">
<span class="header-section-number">11</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) | observ + monat, data = dat_DID, vcov = “HC1”)</p>
</section><section id="plm-1" class="level1" data-number="12"><h1 data-number="12">
<span class="header-section-number">12</span> plm</h1>
<p>model &lt;- plm(formula = totrob ~ (treated + oneblock) * group, data = pdata, model = “within”, effect = “twoway”) summary(model, vcov = vcovHC(model, method = “white1”))</p>
</section><section id="c" class="level1" data-number="13"><h1 data-number="13">
<span class="header-section-number">13</span> (C)</h1>
</section><section id="fixest-2" class="level1" data-number="14"><h1 data-number="14">
<span class="header-section-number">14</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID, vcov = “HC1”)</p>
<p>model &lt;- plm(formula = totrob ~ (treated + oneblock + twoblocks) * group, data = pdata, model = “within”, effect = “twoway”) summary(model, vcov = vcovHC(model, method = “white1”))</p>
</section><section id="d" class="level1" data-number="15"><h1 data-number="15">
<span class="header-section-number">15</span> (D)</h1>
<p>pdata &lt;- pdata.frame(dat_DID %&gt;% filter(monat &gt;= “August”), index = c(“observ”, “monat”)) model &lt;- plm(formula = totrob ~ (treated + oneblock + twoblocks) * group, data = pdata, model = “within”, effect = “time”) summary(model, vcov = vcovHC(model, method = “white1”))</p>
</section><section id="e" class="level1" data-number="16"><h1 data-number="16">
<span class="header-section-number">16</span> (E)</h1>
</section><section id="doesnt-match-for-some-reason" class="level1" data-number="17"><h1 data-number="17">
<span class="header-section-number">17</span> (doesnt match for some reason)</h1>
</section><section id="fixest-3" class="level1" data-number="18"><h1 data-number="18">
<span class="header-section-number">18</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group), data = dat_DID %&gt;% filter(distanz &lt;= 2), vcov = “HC1”)</p>
<p>pdata &lt;- pdata.frame(dat_DID %&gt;% filter(distanz &lt;= 2), index = c(“observ”, “monat”)) model &lt;- plm(formula = totrob ~ (treated + oneblock + twoblocks) : group, data = pdata, model = “within”, effect = “individual”) summary(model, vcov = vcovHC(model, method = “white1”))</p>
<section id="table-4" class="level4" data-number="18.0.0.1"><h4 data-number="18.0.0.1" class="anchored" data-anchor-id="table-4">
<span class="header-section-number">18.0.0.1</span> Table 4</h4>
</section></section><section id="a-1" class="level1" data-number="19"><h1 data-number="19">
<span class="header-section-number">19</span> (A)</h1>
<p>dat_DID &lt;- dat %&gt;% mutate( treated = institut == 1, group = dplyr::between(mes, 5, 7), oneblock = distanz == 1, twoblocks = distanz == 2 ) %&gt;% filter(mes &lt;= 7)</p>
</section><section id="fixest-4" class="level1" data-number="20"><h1 data-number="20">
<span class="header-section-number">20</span> fixest</h1>
<p>mod4_A &lt;- feols( fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID, vcov = “HC1” )</p>
</section><section id="b-1" class="level1" data-number="21"><h1 data-number="21">
<span class="header-section-number">21</span> (B)</h1>
<p>dat_DID &lt;- dat_DID %&gt;% mutate( group = dplyr::between(mes, 6, 7) )</p>
</section><section id="fixest-5" class="level1" data-number="22"><h1 data-number="22">
<span class="header-section-number">22</span> fixest</h1>
<p>mod4_B &lt;- feols( fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID, vcov = “HC1” )</p>
</section><section id="c-1" class="level1" data-number="23"><h1 data-number="23">
<span class="header-section-number">23</span> (C)</h1>
<p>dat_DID &lt;- dat_DID %&gt;% mutate( group = mes == 7, )</p>
</section><section id="fixest-6" class="level1" data-number="24"><h1 data-number="24">
<span class="header-section-number">24</span> fixest</h1>
<p>mod4_C &lt;- feols( fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID, vcov = “HC1” )</p>
<p>modelsummary( models = list( A = mod4_A, B = mod4_B, C = mod4_C ), stars = T, gof_omit = “^(?!(R2|Num.Obs.)$).*” )</p>
<section id="table-5" class="level4" data-number="24.0.0.1"><h4 data-number="24.0.0.1" class="anchored" data-anchor-id="table-5">
<span class="header-section-number">24.0.0.1</span> Table 5</h4>
<p>dat_DID_T5 &lt;- dat_DID %&gt;% mutate( mbc = paste0(barrio, “_“, monat) )</p>
</section></section><section id="a-2" class="level1" data-number="25"><h1 data-number="25">
<span class="header-section-number">25</span> (A)</h1>
</section><section id="fixest-7" class="level1" data-number="26"><h1 data-number="26">
<span class="header-section-number">26</span> fixest</h1>
<p>feols( fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID_T5, vcov = “HC1” )</p>
</section><section id="b-2" class="level1" data-number="27"><h1 data-number="27">
<span class="header-section-number">27</span> (B)</h1>
</section><section id="fixest-8" class="level1" data-number="28"><h1 data-number="28">
<span class="header-section-number">28</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID_T5, vcov = vcov_cluster(“observ”) )</p>
</section><section id="c-2" class="level1" data-number="29"><h1 data-number="29">
<span class="header-section-number">29</span> (C)</h1>
</section><section id="fixest-9" class="level1" data-number="30"><h1 data-number="30">
<span class="header-section-number">30</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID_T5, vcov = vcov_cluster(“mbc”) )</p>
</section><section id="e-1" class="level1" data-number="31"><h1 data-number="31">
<span class="header-section-number">31</span> (E)</h1>
</section><section id="fixest-10" class="level1" data-number="32"><h1 data-number="32">
<span class="header-section-number">32</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + mbc, data = dat_DID_T5, vcov = “HC1” )</p>
</section><section id="f" class="level1" data-number="33"><h1 data-number="33">
<span class="header-section-number">33</span> (F)</h1>
</section><section id="fixest-11" class="level1" data-number="34"><h1 data-number="34">
<span class="header-section-number">34</span> fixest</h1>
<p>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID_T5 %&gt;% group_by(observ) %&gt;% filter( sum(totrob) &gt; 0 ), vcov = “HC1” )</p>
<section id="zusammenfassung" class="level2" data-number="34.1"><h2 data-number="34.1" class="anchored" data-anchor-id="zusammenfassung">
<span class="header-section-number">34.1</span> Zusammenfassung</h2>
<p>Der DID-Schätzer liefert uns eine Schätzung des ATT, indem er die Veränderung der Ergebnisse in der Behandlungsgruppe vor und nach der Intervention mit der entsprechenden Veränderung in der Kontrollgruppe vergleicht. Die Annahme paralleler Trends ist entscheidend: Nur wenn diese Annahme gilt, können wir sicher sein, dass die Differenz in den Differenzen tatsächlich den kausalen Effekt der Behandlung widerspiegelt und nicht durch andere zeitgleiche Faktoren beeinflusst wird.</p>
<p>Zusammenfassend bietet der DID-Ansatz im Potential Outcomes Framework eine robuste Methode zur Schätzung kausaler Effekte, insbesondere wenn randomisierte Experimente nicht durchführbar sind. Durch den Vergleich von Zeitverläufen in Behandlungs- und Kontrollgruppen unter der Annahme paralleler Trends können wir verlässliche Schätzungen des ATT gewinnen.</p>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Adireksombat2010" class="csl-entry" role="listitem">
Adireksombat, Kampon. 2010. <span>„The Effects of the 1993 Earned Income Tax Credit Expansion on the Labor Supply of Unmarried Women“</span>. <em>Public Finance Review</em> 38 (1): 11–40. https://doi.org/<a href="https://doi.org/10.1177/1091142109358626">https://doi.org/10.1177/1091142109358626</a>.
</div>
<div id="ref-EissaLiebman1996" class="csl-entry" role="listitem">
Eissa, N., und J. B. Liebman. 1996. <span>„Labor Supply Response to the Earned Income Tax Credit“</span>. <em>The Quarterly Journal of Economics</em> 111 (2): 605–37. <a href="https://doi.org/10.2307/2946689">https://doi.org/10.2307/2946689</a>.
</div>
</div>
</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./Matching.html" class="pagination-link" aria-label="Matching">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Matching</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./RDD.html" class="pagination-link" aria-label="Regression Discontiniuty Designs">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Regression Discontiniuty Designs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb5" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="an">webr:</span><span class="co"> </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">  show-startup-message: true</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">  packages: [</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">            'dplyr',</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">            'ggplot2',</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">            'purrr',</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">            'fixest',</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">            'tidyr',</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">            'readr'</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">            ]</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;style&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="in">.qwebr-code-output-stdout {background-color: powderblue;}</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="in">.qwebr-button-run, .qwebr-button-reset, .qwebr-button-copy {</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color:  rgba(0, 0, 0, 0);</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="in">  border-style: none;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="in">  font-weight: 400;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="in">  color: white; </span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="in">  transition: none;</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="in">.qwebr-editor-toolbar {</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="in">  width: 100%;</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="in">  display: flex;</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="in">  justify-content: space-between;</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="in">  box-sizing: border-box;</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="in">  border-radius: 0 0 6px 6px;</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: darkgreen;</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="in">  border-color: darkgreen;</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="in">  border-width: 1px;</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="in">  border-style: solid;</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 0 0; </span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="in">  transition: color .1s ease-in-out, background-color .1s ease-in-out,border-color .1s ease-in-out,box-shadow .1s ease-in-out;</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a><span class="in">.qwebr-editor-toolbar:hover {</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: white;</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="in">  border-color: darkgreen;</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="in">  border-width: 1px;</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a><span class="in">.qwebr-editor-toolbar:hover * {</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="in">  color: darkgreen;</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span class="in">.overflow-guard, .qwebr-editor, .monaco-editor {</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a><span class="in">  border-radius: 6px 6px 0 0;</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a><span class="in">  border-width: 1px 1px 0 1px;</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a><span class="in">  border-color: darkgreen;</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;</span></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a><span class="fu"># Difference-in-Differences</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=F,message=F,warning=F}</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a><span class="in"># Formatierung von gt-Tabellen</span></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a><span class="in">library(gt)</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a><span class="in">tabopts &lt;- function(x) {</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a><span class="in">    fmt_number(x, decimals = 3, drop_trailing_zeros = T) %&gt;%</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a><span class="in">    tab_options(table_body.hlines.color = "white",</span></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a><span class="in">              column_labels.border.bottom.color = "black", </span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a><span class="in">             column_labels.border.top.color = "black",</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a><span class="in">             table_body.border.bottom.color = "black", </span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a><span class="in">             table.border.bottom.color = "black",</span></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a><span class="in">             column_labels.font.weight = "bold", </span></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a><span class="in">             table.font.color = "black", </span></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a><span class="in">             table.font.size = 16)</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a><span class="in"># load the brexit data</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a><span class="in">download.file(</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a><span class="in">    "https://raw.githubusercontent.com/mca91/kausal_data/main/brexit.csv",</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a><span class="in">    'datasets/brexit.csv',</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a><span class="in">brexit &lt;- read_csv("datasets/brexit.csv") %&gt;% as.data.frame</span></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a><span class="in"># load the Synth package</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a><span class="in">library(Synth)</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a><span class="in">options(pillar.sigfig = 2)</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>Der Difference-in-Differences (DID) Ansatz erlaubt die Schätzung kausaler Effekte in quasi-experimentellen Forschungsdesigns, in denen Boebachtungen für Kontroll- und Behandlungsgruppe zu mindestens zwei Zeitpunkten vorliegen und die Behandlung zwischen diesen Zeitpunkten stattfindet: Wir beobachten sowohl die Kontroll- als auch die Behandlungsgruppe vor und nachdem die Behandlung erfolgt ist. Die Motivation für die Anwendung des DID-Ansatzes liegt in der Fähigkeit, typische Risiken einer Verzerrungen zu umgehen, die bei einfachen Vorher-Nachher-Vergleichen oder reinen Querschnittsvergleichen auftreten können. Die Kernidee ist eine Schätzung des ATT durch einen Vergleich durchschnittlicher Differenzen der Outcome-Variable beider Gruppen zwischen den Perdioden vor und nach der Intervention. @fig-CDDID zeigt ein kausales Diagramm für ein Forschungsdesign, in dem DID den ATT identifizieren kann.</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a><span class="in">```{dot}</span></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-width: 5</span></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-height: 3</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-align: 'center'</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a><span class="in">//| fig-cap: "Kausales Diagramm für DID"</span></span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a><span class="in">//| label: "fig-CDDID" </span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a><span class="in">digraph "Causal Diagramm RDD" {</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a><span class="in">  layout=neato</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a><span class="in">  fontname="Helvetica,Arial,sans-serif"</span></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a><span class="in">  node [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a><span class="in">  edge [fontname="Helvetica,Arial,sans-serif"]</span></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a><span class="in">  node [shape=none];</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a><span class="in">  "Behandlung B" [pos="0,0!"]</span></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a><span class="in">  "Outcome Y" [pos="4,0!"]</span></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a><span class="in">  "Gruppenzugehörigkeit" [pos="2,-1.5!"]</span></span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a><span class="in">  "Zeit t" [pos="2,1.5!"]</span></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a><span class="in">  "Behandlung B" -&gt; "Outcome Y" [color="green"]</span></span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a><span class="in">  "Zeit t" -&gt; "Outcome Y" [color="purple"]</span></span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a><span class="in">  "Zeit t" -&gt; "Behandlung B" [color="purple"]</span></span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a><span class="in">  "Gruppenzugehörigkeit" -&gt; "Outcome Y" [color="purple"]</span></span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a><span class="in">  "Gruppenzugehörigkeit" -&gt; "Behandlung B" [color="purple"]</span></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a> @fig-CDDID illustriert Confounding bei der Bestimmung des Behandlungseffekts durch Backdoors in der Zeit $t$ und der Gruppenzugehörigkeit: </span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Zeit**: Der Behandlungszustand der behandelten Gruppe ändert sich durch die Intervention zwischen der Vor- und der Nachbehandlungsperiode. Die Outcome-Variable $Y$ ändert sich für beide Gruppen über die Zeit hinweg.</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>**Gruppenzugehörigkeit**: Die Gruppenzugehörigkeit legt fest, ob eine Behandlung erfolgt. Systematische Unterschiede zwischen Behandlungs- und Kontrollgruppe wirken sich auf die Outcome-Variable $Y$ aus.</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>In einem DID-Ansatz ermöglicht die Beobachtung von Kontroll- und Behandlungsgruppen vor und nach einer Intervention das herausrechnen systematischer Unterschiede zwischen Behandlungs- und Kontrollgruppe und von Zeiteffekten, sodass die Backdoors durch Gruppenzugehörigkeit und Zeit geschlossen. Die Schätzung eines durchschnittlichen Behandlungseffekts erfolgt hierbei unter der Annahme, dass die Outcome-Variable beider Gruppen *ohne die Intervention* einen hinreichend ähnlichen Verlauf aufweisen würde.</span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a><span class="fu">## Einordnung im Potential Outcomes Framework</span></span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a>Im Potential Outcomes Framework nehmen wir an, dass jede Einheit $i$ in Abhänigkeit ihres Behandlungsstatus zwei potentielle Ergebnisse hat. Wir unterscheiden zwischen Beobachtungen in Behandlungs- und Kontrollgruppe:</span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$Y_{i,B}(1)$: $Y$ für Einheit $i$ in der Behandlungsgruppe, wenn diese behandelt wird.</span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$Y_{i,B}(0)$: $Y$ für Einheit $i$ in der Behandlungsgruppe, wenn diese *nicht* behandelt wird.</span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$Y_{i,K}(1)$: $Y$ für Einheit $i$ in der Kontrollgruppe, wenn diese behandelt wird.</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$Y_{i,K}(0)$: $Y$ für Einheit $i$ in der Kontrollgruppe, wenn diese *nicht* behandelt wird.</span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>In einem DID-Forschungsdesign hängen tatsächliche und potentielle Outcomes von der Zeit $t$ ab: Die Behandlungsgruppe wird zwischen den Zeitpunkten $t = 0$ und $t = 1$ behandelt, während die Kontrollgruppe unbehandelt bleibt. Für die Identifizierung des Behandlungseffekts wird unterstellt, dass $Y$ sich zwischen $t=0$ und $t=1$ in der Behandlungsgruppe *ohne eine Behandlung* (im Erwartungswert) mit demselben Trend entwickelt hätte, mit dem sich die Kontrollgruppe tatsächlich entwickelt hat (parallele Trends). Die Gültigkeit paralleler Trends ist entscheidend für die Validität der DID-Methode, da so sicherstellt ist, dass die beobachteten Unterschiede in den Ergebnissen auf die Behandlung zurückzuführen sind und nicht auf andere zeitgleich auftretende Faktoren. Der Behandlungseffekt kann dann als eine *Differenz von Differenzen* geschrieben werden: </span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>  \begin{split}</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>    \beta_\textup{DID} =&amp; \, \bigg({\color{red}\textup{E}\big<span class="co">[</span><span class="ot">Y_B(1)\vert t=1\big</span><span class="co">]</span> - \textup{E}\big<span class="co">[</span><span class="ot">Y_B(0)\vert t=0\big</span><span class="co">]</span>} \bigg)<span class="sc">\\</span></span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>  -&amp;\, \bigg({\color{blue}\textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span> -  \textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=0\big</span><span class="co">]</span>} \bigg)</span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>  \end{split}\label{eq:DID-ATT1}</span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>Der Effekt $\beta_\textup{DID}$ ist ein ATT, der über das Schließen der Backdoor in der Zeit (rote und blaue Differenzen der Erwartungswerte zwischen $t=0$ und $t=1$) sowie der Backdoor in der Gruppenzugehörigkeit (Differenz der Erwartungswert-Differenzen) identifiziert wird.</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a>Eine Null-Ergänzung von \eqref{eq:DID-ATT1} mit ${\color{blue}\textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span> -  \textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span>}$ zeigt die Wichtigkeit der Gültigkeit paralleler Trends:</span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>\begin{align*}</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a>    \beta_\textup{DID} =&amp; \, \bigg({\color{red}\textup{E}\big<span class="co">[</span><span class="ot">Y_B(1)\vert t=1\big</span><span class="co">]</span> - \textup{E}\big<span class="co">[</span><span class="ot">Y_B(0)\vert t=0\big</span><span class="co">]</span>} \bigg)</span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>\bigg({\color{blue}\textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span> -  \textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=0\big</span><span class="co">]</span>} \bigg)<span class="sc">\\</span> + &amp;\,</span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a>{\color{blue}\textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span> -  \textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span>}<span class="sc">\\</span></span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a>    <span class="sc">\\</span></span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a>    =&amp;\, \underbrace{{\color{red}\textup{E}\big<span class="co">[</span><span class="ot">Y_B(1)\vert t=1\big</span><span class="co">]</span>} - {\color{blue}\textup{E}\big<span class="co">[</span><span class="ot">Y_B(1)\vert t=1\big</span><span class="co">]</span>}}_{=\textup{ATT}}<span class="sc">\\</span></span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a>    +&amp;\, \underbrace{\bigg({\color{red}\textup{E}\big<span class="co">[</span><span class="ot">Y_B(0)\vert t=1\big</span><span class="co">]</span> - \textup{E}\big<span class="co">[</span><span class="ot">Y_B(0)\vert t=0\big</span><span class="co">]</span>} \bigg) - \bigg({\color{blue}\textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span> -  \textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=0\big</span><span class="co">]</span>} \bigg)}_{ = \textup{Verzerrung durch nicht-parallele Trends}}</span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a>Diese Zerlegung zeigt, dass der ATT nur bei parallelen Trends identifziert werden kann, d.h. wir benötigen</span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a>\begin{align*}</span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a>{\color{red}\textup{E}\big<span class="co">[</span><span class="ot">Y_B(0)\vert t=1\big</span><span class="co">]</span> - \textup{E}\big<span class="co">[</span><span class="ot">Y_B(0)\vert t=0\big</span><span class="co">]</span>} = {\color{blue}\textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=1\big</span><span class="co">]</span> -  \textup{E}\big<span class="co">[</span><span class="ot">Y_K(0)\vert t=0\big</span><span class="co">]</span>}.</span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a>Beachte, dass ${\color{red}\textup{E}\big<span class="co">[</span><span class="ot">Y_B(0)\vert t=1\big</span><span class="co">]</span>}$ der Erwartungswert des potentiellen Outcomes einer unbehandelten Behandlungsgruppe in $t=1$ ist. Somit kann die Verzerrung durch nicht-parallele Trends nicht empirisch überprüft werden und muss ausschließlich durch das Forschungsdesign gewährleistet sein. In Anwendungen kann die Plausibilität der Annahme graphisch anhand geschätzter Trends in der Outcome-Variable oder durch Placebo-Tests untersucht werden.</span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-165"><a href="#cb5-165" aria-hidden="true" tabindex="-1"></a>**Annahmen für DID**</span>
<span id="cb5-166"><a href="#cb5-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-167"><a href="#cb5-167" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Parallele Trends**: Die Trends in der Outcome Variable $Y$ in Behandlungs- und Kontrollgruppe würden bis einschließlich $t=1$ parallel verlaufen, wenn es keine Behandlung gäbe. Diese Annahme ist Voraussetzung dafür, dass Veränderungen im Outcome $Y$ für die Behandlungsgruppe, die sich von $Y$ für die Kontrollgruppe unterscheidet, auschließlich dem Effekt der Behandlung zugeschrieben werden kann.</span>
<span id="cb5-168"><a href="#cb5-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-169"><a href="#cb5-169" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Keine Interferenz zwischen Gruppen (SUTVA)**: Die Behandlung einer Gruppe sollte keinen Einfluss auf die andere Gruppe haben.</span>
<span id="cb5-170"><a href="#cb5-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-171"><a href="#cb5-171" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Konsistete Behandlungseffekte**: Der Effekt der Intervention ist konstant über Individuen und Zeit hinweg.</span>
<span id="cb5-172"><a href="#cb5-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-173"><a href="#cb5-173" aria-hidden="true" tabindex="-1"></a><span class="fu">## Schätzung des ATT mit DID</span></span>
<span id="cb5-174"><a href="#cb5-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-175"><a href="#cb5-175" aria-hidden="true" tabindex="-1"></a>Für die Schätzung von $\beta_\text{DID}$ ersetzen wir die Erwartungswerte in \eqref{eq:DID-ATT1} durch ihre Stichprobenmomente:</span>
<span id="cb5-176"><a href="#cb5-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-177"><a href="#cb5-177" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb5-178"><a href="#cb5-178" aria-hidden="true" tabindex="-1"></a>  \widehat{\beta}_\textup{DID} = \bigg({\color{red}\overline{Y_B(1)\vert t=1} - \overline{Y_B(0)\vert t=0}} \bigg) -  \bigg({\color{blue}\overline{Y_K(0)\vert t=1} - \overline{Y_K(0)\vert t=0}}\bigg) \label{eq:DIDMOMENTS}</span>
<span id="cb5-179"><a href="#cb5-179" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb5-180"><a href="#cb5-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-181"><a href="#cb5-181" aria-hidden="true" tabindex="-1"></a>Die nachfolgende interaktive Grafik illustriert die Schätzung des ATT mit DID für simulierte Daten. </span>
<span id="cb5-182"><a href="#cb5-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-183"><a href="#cb5-183" aria-hidden="true" tabindex="-1"></a>**Interaktive Elemente der Visualisierung**</span>
<span id="cb5-184"><a href="#cb5-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-185"><a href="#cb5-185" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Die Beobachtungen der Individuen zu 6 verschiedenen Zeitpunkten werden als Punkte dargestellt. Die Datenpunkte könn mit *Zeige Daten* ein- und ausgeblendet werden.</span>
<span id="cb5-186"><a href="#cb5-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-187"><a href="#cb5-187" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Die geschätzten Trends beider Gruppen für den gesamten Beobachtungszeitraum und die Gruppenzugehörigkeit können mit *Zeige Trends* ein- und ausgeblendet werden. Die Auswahl *Parallele Trends* stellt sicher, dass beide Gruppen (mit Ausnahme des Behandlungseffekts in der Behandlungsgruppe) dem selben zeitlichen Trend folgen. Bei nicht-parallelen Trends folgt die Behandlungsgruppe einem positiven Trend mit größerer positiver Steigung als in der Kontrollgruppe.</span>
<span id="cb5-188"><a href="#cb5-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-189"><a href="#cb5-189" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Die Behandlung erfolgt zwischen der mit dem Slider *Zeitpunkt* ausgewählten und der darauf folgenden Periode. Der tatsächliche Behandlungseffekt kann über den Slider *Effekt* festgelegt werden.</span>
<span id="cb5-190"><a href="#cb5-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-191"><a href="#cb5-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a>**Anatomie der Schätzung des ATT bei *parallelen* Trends**</span>
<span id="cb5-193"><a href="#cb5-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-194"><a href="#cb5-194" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Wir illustrieren die Schätzen des ATT mit Formel \eqref{eq:DIDMOMENTS}. Kreise zeigen Mittelwerte für Kontroll- und Behandlungsgruppe *vor* der Intervention. Dreiecke zeigen Mittelwerte *nach* der Intervention.</span>
<span id="cb5-195"><a href="#cb5-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Die gestrichelte rote Linie zeigt den (kontrafaktischen) Verlauf der Behandlungsgruppe *ohne* Behandlung. Hierbei wird unterstellt, dass sich die Behandlungsgruppe mit demselben Trend *wie die Kontrollgruppe entwickelt hätte* (blaue Linie).</span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Der geschätzte Behandlungseffekt wird als orangene vertikale Linie dargestellt. Dies ist die Differenz zwischen dem tatsächlichen post-Behandlungs-Mittelwert und dem kontrafaktischen Mittelwert der Behandlungsgruppe.</span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a>**Anatomie der Schätzung des ATT bei *nicht-parallelen* Trends**</span>
<span id="cb5-201"><a href="#cb5-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-202"><a href="#cb5-202" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Für nicht-parallele Trends zeigt die Grafik den unterstellten kontrafaktischen Trend der Behandlungsgruppe als gestrichelte blaue linie. Der" "tatsächliche" kontrafaktische Verlauf der Behandlungsgruppe wird als gestrichelte rote Linie dargestellt.</span>
<span id="cb5-203"><a href="#cb5-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-204"><a href="#cb5-204" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Aufgrund des steileren (positiven) Trends in der Behandlungsgruppe ergibt sich eine *positive* Verzerrung von $\color{orange}\widehat{\beta}_\text{DID}$. Diese Verzerrung wird durch die gestrichelte vertikale schwarze Linie kenntlich gemacht. </span>
<span id="cb5-205"><a href="#cb5-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-206"><a href="#cb5-206" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Für *positive* Behandlungseffekte wird der ATT *überschätzt*: die Verzerrung entspricht der Überlagerung der gestrichelten schwarzen linie mit der orangenen Linie des geschätzten Effekts. </span>
<span id="cb5-207"><a href="#cb5-207" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-208"><a href="#cb5-208" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Für *negative* Behandlungseffekte wird der ATT unterschätzt: die Verzerrung entspricht der gestrichelten schwarzen linie oberhalb der orangenen Linie des geschätzten Effekts.</span>
<span id="cb5-209"><a href="#cb5-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-210"><a href="#cb5-210" aria-hidden="true" tabindex="-1"></a>&lt;iframe width="100%" height="813" frameborder="0"</span>
<span id="cb5-211"><a href="#cb5-211" aria-hidden="true" tabindex="-1"></a>  src="https://observablehq.com/embed/@mca91/did?cells=didformula%2Cchart%2Cviewof+ptrends%2Cviewof+showTrends%2Cviewof+showData%2Cviewof+treatPeriod%2Cviewof+effect"&gt;&lt;/iframe&gt;</span>
<span id="cb5-212"><a href="#cb5-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-213"><a href="#cb5-213" aria-hidden="true" tabindex="-1"></a>Die Implementierung von DID-Schätzern erfolgt meist anhand linearer Regression. Das Modell für zwei Zeitperioden ist</span>
<span id="cb5-214"><a href="#cb5-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-215"><a href="#cb5-215" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb5-216"><a href="#cb5-216" aria-hidden="true" tabindex="-1"></a>  Y_{i,\,t} = \alpha + \beta_1 B_i + \beta_2 Z_t + \beta_3 (B_i \times Z_t) + \epsilon_{i,\,t}, \quad t\in<span class="sc">\{</span>0,1<span class="sc">\}</span>, \label{eq:DIDREG}</span>
<span id="cb5-217"><a href="#cb5-217" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb5-218"><a href="#cb5-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-219"><a href="#cb5-219" aria-hidden="true" tabindex="-1"></a>wobei $\beta_3$ der interessierende Behandlungseffekt ist. Der Regressor $B_i \times Z_t$ ergibt sich als die Interaktion zwischen der Behandlungsgruppenzugehörigkeit $B_i$ und einem Indikator für den Zeitpunkt *nach* der Intervention, $Z_i = \mathbb{I}_{\{t=1\}}$. Es ist $\widehat\beta_3 = \widehat{\beta}_\text{DID}$, d.h. der KQ-Schätzer von $\beta_3$ ist der DID-Schätzer des ATT und numerisch äquivalent zu \eqref{eq:DIDMOMENTS}.</span>
<span id="cb5-220"><a href="#cb5-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-221"><a href="#cb5-221" aria-hidden="true" tabindex="-1"></a>Die Berechnung von $\widehat\beta_\text{DID}$ anhand von Modell \eqref{eq:DIDREG} ist praktisch, da wir so Inferenzstatistiken mit etablierten R-Funktionen wie gewohnt berechnen können.</span>
<span id="cb5-222"><a href="#cb5-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-223"><a href="#cb5-223" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb5-224"><a href="#cb5-224" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Key Facts zum einfachen DID-Schätzer</span></span>
<span id="cb5-225"><a href="#cb5-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-226"><a href="#cb5-226" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>DID benötigt Beobachtungen einer Behandlungs- und einer Kontrollgruppe zu mindestens zwei verschiedenen Zeitpunkten.  </span>
<span id="cb5-227"><a href="#cb5-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-228"><a href="#cb5-228" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Im DID-Forschungsdesign kann der ATT durch einen Vergleich von Differenzen in den Ergebnissen vor und nach einer Behandlung zwischen Behandlungs- und Kontrollgruppen identifiziert werden. </span>
<span id="cb5-229"><a href="#cb5-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-230"><a href="#cb5-230" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>DID ist empfindlich gegenüber Verletzungen der Annahme, dass die zeitlichen Trends in den Ergebnissen für beide Gruppen vor der Intervention parallel verlaufen.</span>
<span id="cb5-231"><a href="#cb5-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-232"><a href="#cb5-232" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Der DID-Schätzer kann in einem Regressionsmodell mit Interaktionsterm zwischen Zeit- und Gruppenvariablen implementiert werden.</span>
<span id="cb5-233"><a href="#cb5-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-234"><a href="#cb5-234" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb5-235"><a href="#cb5-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-236"><a href="#cb5-236" aria-hidden="true" tabindex="-1"></a><span class="fu">## Beispiel: Effekt von Steuererleichterungen auf weibliche Beschäftigungsquote </span></span>
<span id="cb5-237"><a href="#cb5-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-238"><a href="#cb5-238" aria-hidden="true" tabindex="-1"></a>Der Earned Income Tax Credit (EITC) ist ein Steuerguthaben für US-Amerkanische Familien die unterhalb einer gesetztlich festgelegten Einkoemmnsgrenze liegen. Der genaue Betrag des EITC hängt gestaffelt vom Einkommen ab und, ähnlich zum Kindergeld in Deutschland, steigt mit der Anzahl der zu versorgenden Kinder. Ein wichtiger Unterschied zum Kindergeld ist, dass der EITC nicht beantragt werden muss: Qualifizierten Familien wird der Betrag automatisch durch die Behörden im Steuerausgleich gutgeschrieben. Somit kann Selbstselektion in die Behandlungsgruppe ausgeschlossen werden, da sich die Behandlung ausschließlich durch die im Rahmen der EITC-Ausweitung geänderten Anspruchsgrundlagen ergibt.</span>
<span id="cb5-239"><a href="#cb5-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-240"><a href="#cb5-240" aria-hidden="true" tabindex="-1"></a>@EissaLiebman1996 betrachten Veränderungen in der EITC-Gesetzgebung als Intervention, deren Auswirkungen mit sozio-ökonimischen Paneldaten in einem DID-Ansatz untersucht werden können. Die Studie analysiert die Auswirkungen der ersten Ausweitung des EITC im Jahr 1986 auf die Beschäftigung und Löhne von Frauen. Diese Erweiterung erhöhte die gewährten Steuererleichterungen und die für eine Qualifikation für das Programm zu unterschreitende Einkommensgrenze. </span>
<span id="cb5-241"><a href="#cb5-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-242"><a href="#cb5-242" aria-hidden="true" tabindex="-1"></a>Ein zentraler Befund der Studie ist, dass die EITC-Ausweitung von 1986 einen statistisch signifikanten Anstieg der Arbeitsbeteiligung alleinerziehender Frauen von geschätzten 3\% bewirkt hat. Weiterhin gab es signifikante positive Effekte auf die geleisteten Arbeitsstunden und Nachweise für Einkommensverbesserungen in dieser Gruppe. Diese Ergebnisse sind starke Evidenz, dass Maßnahmen wie der EITC effektiv dazu beitragen können, die Erwerbssituation in der Zielgruppe zu steigern und somit die wirtsschafts- und sozialpolitische Ziele derartiger Programme realisierbar sind.</span>
<span id="cb5-243"><a href="#cb5-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-244"><a href="#cb5-244" aria-hidden="true" tabindex="-1"></a>Im Jahr 1993 wurde das Programm erneut ausgweitet: Vor 1993 gab es lediglich eine Einkommensstufe für Familien mit Kindern. 1993 wurde eine zusätzliche Stufe für Familien mit zwei oder mehr Kindern eigeführt, die damit einen höheren maximalen Kreditbetrag erhalten konnten als Familien mit nur einem Kind. Dies führte zu einer größeren finanziellen Unterstützung einkommensschwacher Familien.</span>
<span id="cb5-245"><a href="#cb5-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-246"><a href="#cb5-246" aria-hidden="true" tabindex="-1"></a>@Adireksombat2010 untersucht die Effekte der zweiten EITC-Ausweitung ebenfalls mit einem DID Ansatz und findet Evidenz für einen Anstieg der Arbeitbeteiligung von etwa 5\% in der Zielgruppe alleinerziehender Frauen mit mindestens 2 Kindern.</span>
<span id="cb5-247"><a href="#cb5-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-248"><a href="#cb5-248" aria-hidden="true" tabindex="-1"></a>Zur Illustration der empirischen Anwendung von DID mit R untersuchen wir Effekte der EITC-Ausweitung von 1993 nachfolgend anhand eines ähnlichen Datensatzes wie in der Studie von @Adireksombat2010. Diese Daten sind im Datensatz XYZ verfügbar und erfassen jährliche sozio-ökonomische Merkmale für Familien im Zeitraum von 1991 bis 1996.</span>
<span id="cb5-249"><a href="#cb5-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-250"><a href="#cb5-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-253"><a href="#cb5-253" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-254"><a href="#cb5-254" aria-hidden="true" tabindex="-1"></a>eitc_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"datasets/eitc_data.csv"</span>)</span>
<span id="cb5-255"><a href="#cb5-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-256"><a href="#cb5-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-257"><a href="#cb5-257" aria-hidden="true" tabindex="-1"></a>Eine Zusammenfassung des Datensatzes ist in Tabelle XYZ dargestellt.</span>
<span id="cb5-258"><a href="#cb5-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-261"><a href="#cb5-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-262"><a href="#cb5-262" aria-hidden="true" tabindex="-1"></a><span class="co"># Kategorische Variable für Anz. Kinder hinzufügen</span></span>
<span id="cb5-263"><a href="#cb5-263" aria-hidden="true" tabindex="-1"></a>eitc_data <span class="ot">&lt;-</span> eitc_data <span class="sc">%&gt;%</span></span>
<span id="cb5-264"><a href="#cb5-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-265"><a href="#cb5-265" aria-hidden="true" tabindex="-1"></a>    <span class="at">nchildren =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-266"><a href="#cb5-266" aria-hidden="true" tabindex="-1"></a>      children <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"0"</span>,</span>
<span id="cb5-267"><a href="#cb5-267" aria-hidden="true" tabindex="-1"></a>      children <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"1"</span>,</span>
<span id="cb5-268"><a href="#cb5-268" aria-hidden="true" tabindex="-1"></a>      children <span class="sc">&gt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"2+"</span></span>
<span id="cb5-269"><a href="#cb5-269" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-270"><a href="#cb5-270" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-271"><a href="#cb5-271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-272"><a href="#cb5-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-273"><a href="#cb5-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-274"><a href="#cb5-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-275"><a href="#cb5-275" aria-hidden="true" tabindex="-1"></a><span class="fu">## Terrorism</span></span>
<span id="cb5-276"><a href="#cb5-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-279"><a href="#cb5-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-280"><a href="#cb5-280" aria-hidden="true" tabindex="-1"></a>polizeipraesenz <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"datasets/polizeipraesenz.csv"</span>)</span>
<span id="cb5-281"><a href="#cb5-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-282"><a href="#cb5-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-285"><a href="#cb5-285" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-286"><a href="#cb5-286" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 2</span></span>
<span id="cb5-287"><a href="#cb5-287" aria-hidden="true" tabindex="-1"></a>dat_listcol <span class="ot">&lt;-</span> polizeipraesenz <span class="sc">%&gt;%</span> </span>
<span id="cb5-288"><a href="#cb5-288" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(observ, monat) <span class="sc">%&gt;%</span></span>
<span id="cb5-289"><a href="#cb5-289" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">totrob =</span> <span class="fu">sum</span>(totrob)) <span class="sc">%&gt;%</span></span>
<span id="cb5-290"><a href="#cb5-290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb5-291"><a href="#cb5-291" aria-hidden="true" tabindex="-1"></a>    <span class="at">d2more =</span> <span class="fu">list</span>(totrob[distanz <span class="sc">&gt;</span> <span class="dv">2</span>]),</span>
<span id="cb5-292"><a href="#cb5-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">d2 =</span> <span class="fu">list</span>(totrob[distanz <span class="sc">==</span> <span class="dv">2</span>]),</span>
<span id="cb5-293"><a href="#cb5-293" aria-hidden="true" tabindex="-1"></a>    <span class="at">d1 =</span> <span class="fu">list</span>(totrob[distanz <span class="sc">==</span> <span class="dv">1</span>]),</span>
<span id="cb5-294"><a href="#cb5-294" aria-hidden="true" tabindex="-1"></a>    <span class="at">same =</span> <span class="fu">list</span>(totrob[institut <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb5-295"><a href="#cb5-295" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb5-296"><a href="#cb5-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-297"><a href="#cb5-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-298"><a href="#cb5-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-299"><a href="#cb5-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-300"><a href="#cb5-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-301"><a href="#cb5-301" aria-hidden="true" tabindex="-1"></a><span class="fu"># means and SDs</span></span>
<span id="cb5-302"><a href="#cb5-302" aria-hidden="true" tabindex="-1"></a>dat_listcol %&gt;%</span>
<span id="cb5-303"><a href="#cb5-303" aria-hidden="true" tabindex="-1"></a>  group_by(monat) %&gt;%</span>
<span id="cb5-304"><a href="#cb5-304" aria-hidden="true" tabindex="-1"></a>  summarise(</span>
<span id="cb5-305"><a href="#cb5-305" aria-hidden="true" tabindex="-1"></a>    across(d2more:same,</span>
<span id="cb5-306"><a href="#cb5-306" aria-hidden="true" tabindex="-1"></a>           list(mean = ~ mean(unlist(.)), sd = ~ sd(unlist(.)))</span>
<span id="cb5-307"><a href="#cb5-307" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb5-308"><a href="#cb5-308" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-309"><a href="#cb5-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-310"><a href="#cb5-310" aria-hidden="true" tabindex="-1"></a>the_diffs &lt;- dat_listcol %&gt;%</span>
<span id="cb5-311"><a href="#cb5-311" aria-hidden="true" tabindex="-1"></a>  group_by(monat) %&gt;%</span>
<span id="cb5-312"><a href="#cb5-312" aria-hidden="true" tabindex="-1"></a>  summarise(</span>
<span id="cb5-313"><a href="#cb5-313" aria-hidden="true" tabindex="-1"></a>    diff1 = list( t.test(x = unlist(same), y = unlist(d2more)) ),</span>
<span id="cb5-314"><a href="#cb5-314" aria-hidden="true" tabindex="-1"></a>    diff2 = list( t.test(x = unlist(d1), y = unlist(same)) ),</span>
<span id="cb5-315"><a href="#cb5-315" aria-hidden="true" tabindex="-1"></a>    diff3 = list( t.test(x = unlist(d2), y = unlist(d2more)) ), </span>
<span id="cb5-316"><a href="#cb5-316" aria-hidden="true" tabindex="-1"></a>    .groups = "keep"</span>
<span id="cb5-317"><a href="#cb5-317" aria-hidden="true" tabindex="-1"></a>  ) %&gt;%</span>
<span id="cb5-318"><a href="#cb5-318" aria-hidden="true" tabindex="-1"></a>  transmute(</span>
<span id="cb5-319"><a href="#cb5-319" aria-hidden="true" tabindex="-1"></a>    across(diff1:diff3, </span>
<span id="cb5-320"><a href="#cb5-320" aria-hidden="true" tabindex="-1"></a>           list(</span>
<span id="cb5-321"><a href="#cb5-321" aria-hidden="true" tabindex="-1"></a>             m = ~ map_dbl(., <span class="sc">\(</span>x) diff(x$estimate)), </span>
<span id="cb5-322"><a href="#cb5-322" aria-hidden="true" tabindex="-1"></a>             sd = ~ map_dbl(., <span class="sc">\(</span>x) x$stderr)</span>
<span id="cb5-323"><a href="#cb5-323" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb5-324"><a href="#cb5-324" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-325"><a href="#cb5-325" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-326"><a href="#cb5-326" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-327"><a href="#cb5-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-328"><a href="#cb5-328" aria-hidden="true" tabindex="-1"></a>form &lt;- the_diffs %&gt;%</span>
<span id="cb5-329"><a href="#cb5-329" aria-hidden="true" tabindex="-1"></a>  transmute(across(contains("_m"), ~sprintf("%.4f (%.4f)", ., get(sub(".m$", "_sd", cur_column()))), .names = "{.col}_formatted"))</span>
<span id="cb5-330"><a href="#cb5-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-331"><a href="#cb5-331" aria-hidden="true" tabindex="-1"></a>form %&gt;% gt::gt()</span>
<span id="cb5-332"><a href="#cb5-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-333"><a href="#cb5-333" aria-hidden="true" tabindex="-1"></a><span class="fu"># Table 3</span></span>
<span id="cb5-334"><a href="#cb5-334" aria-hidden="true" tabindex="-1"></a>library(AER)</span>
<span id="cb5-335"><a href="#cb5-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-336"><a href="#cb5-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-337"><a href="#cb5-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-338"><a href="#cb5-338" aria-hidden="true" tabindex="-1"></a><span class="fu"># (A)</span></span>
<span id="cb5-339"><a href="#cb5-339" aria-hidden="true" tabindex="-1"></a>dat_DID &lt;- dat %&gt;%</span>
<span id="cb5-340"><a href="#cb5-340" aria-hidden="true" tabindex="-1"></a>  mutate(</span>
<span id="cb5-341"><a href="#cb5-341" aria-hidden="true" tabindex="-1"></a>    treated = institut == 1,</span>
<span id="cb5-342"><a href="#cb5-342" aria-hidden="true" tabindex="-1"></a>    group = monat &gt; "Juli (1 - 17)",</span>
<span id="cb5-343"><a href="#cb5-343" aria-hidden="true" tabindex="-1"></a>    oneblock = distanz == 1,</span>
<span id="cb5-344"><a href="#cb5-344" aria-hidden="true" tabindex="-1"></a>    twoblocks = distanz == 2</span>
<span id="cb5-345"><a href="#cb5-345" aria-hidden="true" tabindex="-1"></a>  ) %&gt;% </span>
<span id="cb5-346"><a href="#cb5-346" aria-hidden="true" tabindex="-1"></a>  filter(monat != "Juli (18 - 31)")</span>
<span id="cb5-347"><a href="#cb5-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-348"><a href="#cb5-348" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-349"><a href="#cb5-349" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ I(treated * group) | observ + monat, data = dat_DID, vcov = "HC1")</span>
<span id="cb5-350"><a href="#cb5-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-351"><a href="#cb5-351" aria-hidden="true" tabindex="-1"></a><span class="fu"># plm</span></span>
<span id="cb5-352"><a href="#cb5-352" aria-hidden="true" tabindex="-1"></a>pdata &lt;- pdata.frame(dat_DID, index = c("observ", "monat"))</span>
<span id="cb5-353"><a href="#cb5-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-354"><a href="#cb5-354" aria-hidden="true" tabindex="-1"></a>model &lt;- plm(formula = totrob ~ I(treated * group) , data = pdata, model = "within", effect = "twoway")</span>
<span id="cb5-355"><a href="#cb5-355" aria-hidden="true" tabindex="-1"></a>summary(model, vcov = vcovHC(model, method = "white1"))</span>
<span id="cb5-356"><a href="#cb5-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-357"><a href="#cb5-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-358"><a href="#cb5-358" aria-hidden="true" tabindex="-1"></a><span class="fu"># (B)</span></span>
<span id="cb5-359"><a href="#cb5-359" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-360"><a href="#cb5-360" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) | observ + monat, data = dat_DID, vcov = "HC1")</span>
<span id="cb5-361"><a href="#cb5-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-362"><a href="#cb5-362" aria-hidden="true" tabindex="-1"></a><span class="fu"># plm</span></span>
<span id="cb5-363"><a href="#cb5-363" aria-hidden="true" tabindex="-1"></a>model &lt;- plm(formula = totrob ~ (treated + oneblock) * group, data = pdata, model = "within", effect = "twoway")</span>
<span id="cb5-364"><a href="#cb5-364" aria-hidden="true" tabindex="-1"></a>summary(model, vcov = vcovHC(model, method = "white1"))</span>
<span id="cb5-365"><a href="#cb5-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-366"><a href="#cb5-366" aria-hidden="true" tabindex="-1"></a><span class="fu"># (C)</span></span>
<span id="cb5-367"><a href="#cb5-367" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-368"><a href="#cb5-368" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group) | observ + monat, data = dat_DID, vcov = "HC1")</span>
<span id="cb5-369"><a href="#cb5-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-370"><a href="#cb5-370" aria-hidden="true" tabindex="-1"></a>model &lt;- plm(formula = totrob ~ (treated + oneblock + twoblocks) * group, data = pdata, model = "within", effect = "twoway")</span>
<span id="cb5-371"><a href="#cb5-371" aria-hidden="true" tabindex="-1"></a>summary(model, vcov = vcovHC(model, method = "white1"))</span>
<span id="cb5-372"><a href="#cb5-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-373"><a href="#cb5-373" aria-hidden="true" tabindex="-1"></a><span class="fu"># (D)</span></span>
<span id="cb5-374"><a href="#cb5-374" aria-hidden="true" tabindex="-1"></a>pdata &lt;- pdata.frame(dat_DID %&gt;% filter(monat &gt;= "August"), index = c("observ", "monat"))</span>
<span id="cb5-375"><a href="#cb5-375" aria-hidden="true" tabindex="-1"></a>model &lt;- plm(formula = totrob ~ (treated + oneblock + twoblocks) * group, data = pdata, model = "within", effect = "time")</span>
<span id="cb5-376"><a href="#cb5-376" aria-hidden="true" tabindex="-1"></a>summary(model, vcov = vcovHC(model, method = "white1"))</span>
<span id="cb5-377"><a href="#cb5-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-378"><a href="#cb5-378" aria-hidden="true" tabindex="-1"></a><span class="fu"># (E)</span></span>
<span id="cb5-379"><a href="#cb5-379" aria-hidden="true" tabindex="-1"></a><span class="fu"># (doesnt match for some reason)</span></span>
<span id="cb5-380"><a href="#cb5-380" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-381"><a href="#cb5-381" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ I(treated * group) + I(oneblock * group) + I(twoblocks * group), </span>
<span id="cb5-382"><a href="#cb5-382" aria-hidden="true" tabindex="-1"></a>      data = dat_DID %&gt;% filter(distanz &lt;= 2), </span>
<span id="cb5-383"><a href="#cb5-383" aria-hidden="true" tabindex="-1"></a>      vcov = "HC1")</span>
<span id="cb5-384"><a href="#cb5-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-385"><a href="#cb5-385" aria-hidden="true" tabindex="-1"></a>pdata &lt;- pdata.frame(dat_DID %&gt;% filter(distanz &lt;= 2), index = c("observ", "monat"))</span>
<span id="cb5-386"><a href="#cb5-386" aria-hidden="true" tabindex="-1"></a>model &lt;- plm(formula = totrob ~ (treated + oneblock + twoblocks) : group, data = pdata, model = "within", effect = "individual")</span>
<span id="cb5-387"><a href="#cb5-387" aria-hidden="true" tabindex="-1"></a>summary(model, vcov = vcovHC(model, method = "white1"))</span>
<span id="cb5-388"><a href="#cb5-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-389"><a href="#cb5-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-390"><a href="#cb5-390" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 4 ####</span></span>
<span id="cb5-391"><a href="#cb5-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-392"><a href="#cb5-392" aria-hidden="true" tabindex="-1"></a><span class="fu"># (A)</span></span>
<span id="cb5-393"><a href="#cb5-393" aria-hidden="true" tabindex="-1"></a>dat_DID &lt;- dat %&gt;%</span>
<span id="cb5-394"><a href="#cb5-394" aria-hidden="true" tabindex="-1"></a>  mutate(</span>
<span id="cb5-395"><a href="#cb5-395" aria-hidden="true" tabindex="-1"></a>    treated = institut == 1,</span>
<span id="cb5-396"><a href="#cb5-396" aria-hidden="true" tabindex="-1"></a>    group = dplyr::between(mes, 5, 7),</span>
<span id="cb5-397"><a href="#cb5-397" aria-hidden="true" tabindex="-1"></a>    oneblock = distanz == 1,</span>
<span id="cb5-398"><a href="#cb5-398" aria-hidden="true" tabindex="-1"></a>    twoblocks = distanz == 2</span>
<span id="cb5-399"><a href="#cb5-399" aria-hidden="true" tabindex="-1"></a>  ) %&gt;% </span>
<span id="cb5-400"><a href="#cb5-400" aria-hidden="true" tabindex="-1"></a>  filter(mes &lt;= 7)</span>
<span id="cb5-401"><a href="#cb5-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-402"><a href="#cb5-402" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-403"><a href="#cb5-403" aria-hidden="true" tabindex="-1"></a>mod4_A &lt;- feols(</span>
<span id="cb5-404"><a href="#cb5-404" aria-hidden="true" tabindex="-1"></a>  fml = totrob ~ </span>
<span id="cb5-405"><a href="#cb5-405" aria-hidden="true" tabindex="-1"></a>    I(treated * group) </span>
<span id="cb5-406"><a href="#cb5-406" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(oneblock * group) </span>
<span id="cb5-407"><a href="#cb5-407" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(twoblocks * group) </span>
<span id="cb5-408"><a href="#cb5-408" aria-hidden="true" tabindex="-1"></a>  | observ + monat, </span>
<span id="cb5-409"><a href="#cb5-409" aria-hidden="true" tabindex="-1"></a>  data = dat_DID, </span>
<span id="cb5-410"><a href="#cb5-410" aria-hidden="true" tabindex="-1"></a>  vcov = "HC1"</span>
<span id="cb5-411"><a href="#cb5-411" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-412"><a href="#cb5-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-413"><a href="#cb5-413" aria-hidden="true" tabindex="-1"></a><span class="fu"># (B)</span></span>
<span id="cb5-414"><a href="#cb5-414" aria-hidden="true" tabindex="-1"></a>dat_DID &lt;- dat_DID %&gt;%</span>
<span id="cb5-415"><a href="#cb5-415" aria-hidden="true" tabindex="-1"></a>  mutate(</span>
<span id="cb5-416"><a href="#cb5-416" aria-hidden="true" tabindex="-1"></a>    group = dplyr::between(mes, 6, 7)</span>
<span id="cb5-417"><a href="#cb5-417" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb5-418"><a href="#cb5-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-419"><a href="#cb5-419" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-420"><a href="#cb5-420" aria-hidden="true" tabindex="-1"></a>mod4_B &lt;- feols(</span>
<span id="cb5-421"><a href="#cb5-421" aria-hidden="true" tabindex="-1"></a>  fml = totrob ~ </span>
<span id="cb5-422"><a href="#cb5-422" aria-hidden="true" tabindex="-1"></a>    I(treated * group) </span>
<span id="cb5-423"><a href="#cb5-423" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(oneblock * group) </span>
<span id="cb5-424"><a href="#cb5-424" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(twoblocks * group) </span>
<span id="cb5-425"><a href="#cb5-425" aria-hidden="true" tabindex="-1"></a>  | observ + monat, </span>
<span id="cb5-426"><a href="#cb5-426" aria-hidden="true" tabindex="-1"></a>  data = dat_DID, </span>
<span id="cb5-427"><a href="#cb5-427" aria-hidden="true" tabindex="-1"></a>  vcov = "HC1"</span>
<span id="cb5-428"><a href="#cb5-428" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-429"><a href="#cb5-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-430"><a href="#cb5-430" aria-hidden="true" tabindex="-1"></a><span class="fu"># (C)</span></span>
<span id="cb5-431"><a href="#cb5-431" aria-hidden="true" tabindex="-1"></a>dat_DID &lt;- dat_DID %&gt;%</span>
<span id="cb5-432"><a href="#cb5-432" aria-hidden="true" tabindex="-1"></a>  mutate(</span>
<span id="cb5-433"><a href="#cb5-433" aria-hidden="true" tabindex="-1"></a>    group = mes == 7,</span>
<span id="cb5-434"><a href="#cb5-434" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-435"><a href="#cb5-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-436"><a href="#cb5-436" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-437"><a href="#cb5-437" aria-hidden="true" tabindex="-1"></a>mod4_C &lt;- feols(</span>
<span id="cb5-438"><a href="#cb5-438" aria-hidden="true" tabindex="-1"></a>  fml = totrob ~ </span>
<span id="cb5-439"><a href="#cb5-439" aria-hidden="true" tabindex="-1"></a>    I(treated * group) </span>
<span id="cb5-440"><a href="#cb5-440" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(oneblock * group) </span>
<span id="cb5-441"><a href="#cb5-441" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(twoblocks * group) </span>
<span id="cb5-442"><a href="#cb5-442" aria-hidden="true" tabindex="-1"></a>  | observ + monat, </span>
<span id="cb5-443"><a href="#cb5-443" aria-hidden="true" tabindex="-1"></a>  data = dat_DID, </span>
<span id="cb5-444"><a href="#cb5-444" aria-hidden="true" tabindex="-1"></a>  vcov = "HC1"</span>
<span id="cb5-445"><a href="#cb5-445" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-446"><a href="#cb5-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-447"><a href="#cb5-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-448"><a href="#cb5-448" aria-hidden="true" tabindex="-1"></a>modelsummary(</span>
<span id="cb5-449"><a href="#cb5-449" aria-hidden="true" tabindex="-1"></a>  models = list(</span>
<span id="cb5-450"><a href="#cb5-450" aria-hidden="true" tabindex="-1"></a>    A = mod4_A,</span>
<span id="cb5-451"><a href="#cb5-451" aria-hidden="true" tabindex="-1"></a>    B = mod4_B,</span>
<span id="cb5-452"><a href="#cb5-452" aria-hidden="true" tabindex="-1"></a>    C = mod4_C</span>
<span id="cb5-453"><a href="#cb5-453" aria-hidden="true" tabindex="-1"></a>  ), </span>
<span id="cb5-454"><a href="#cb5-454" aria-hidden="true" tabindex="-1"></a>  stars = T,</span>
<span id="cb5-455"><a href="#cb5-455" aria-hidden="true" tabindex="-1"></a>  gof_omit   = "^(?!(R2|Num.Obs.)$).*"</span>
<span id="cb5-456"><a href="#cb5-456" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-457"><a href="#cb5-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-458"><a href="#cb5-458" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 5 ####</span></span>
<span id="cb5-459"><a href="#cb5-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-460"><a href="#cb5-460" aria-hidden="true" tabindex="-1"></a>dat_DID_T5 &lt;- dat_DID %&gt;%</span>
<span id="cb5-461"><a href="#cb5-461" aria-hidden="true" tabindex="-1"></a>  mutate(</span>
<span id="cb5-462"><a href="#cb5-462" aria-hidden="true" tabindex="-1"></a>    mbc = paste0(barrio, "_", monat)</span>
<span id="cb5-463"><a href="#cb5-463" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-464"><a href="#cb5-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-465"><a href="#cb5-465" aria-hidden="true" tabindex="-1"></a><span class="fu"># (A)</span></span>
<span id="cb5-466"><a href="#cb5-466" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-467"><a href="#cb5-467" aria-hidden="true" tabindex="-1"></a>feols(</span>
<span id="cb5-468"><a href="#cb5-468" aria-hidden="true" tabindex="-1"></a>  fml = totrob ~ </span>
<span id="cb5-469"><a href="#cb5-469" aria-hidden="true" tabindex="-1"></a>    I(treated * group) </span>
<span id="cb5-470"><a href="#cb5-470" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(oneblock * group) </span>
<span id="cb5-471"><a href="#cb5-471" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(twoblocks * group) </span>
<span id="cb5-472"><a href="#cb5-472" aria-hidden="true" tabindex="-1"></a>  | observ + monat,</span>
<span id="cb5-473"><a href="#cb5-473" aria-hidden="true" tabindex="-1"></a>  data = dat_DID_T5,</span>
<span id="cb5-474"><a href="#cb5-474" aria-hidden="true" tabindex="-1"></a>  vcov = "HC1"</span>
<span id="cb5-475"><a href="#cb5-475" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-476"><a href="#cb5-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-477"><a href="#cb5-477" aria-hidden="true" tabindex="-1"></a><span class="fu"># (B)</span></span>
<span id="cb5-478"><a href="#cb5-478" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-479"><a href="#cb5-479" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ </span>
<span id="cb5-480"><a href="#cb5-480" aria-hidden="true" tabindex="-1"></a>    I(treated * group) </span>
<span id="cb5-481"><a href="#cb5-481" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(oneblock * group) </span>
<span id="cb5-482"><a href="#cb5-482" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>I(twoblocks * group) </span>
<span id="cb5-483"><a href="#cb5-483" aria-hidden="true" tabindex="-1"></a>  | observ + monat,</span>
<span id="cb5-484"><a href="#cb5-484" aria-hidden="true" tabindex="-1"></a>  data = dat_DID_T5, </span>
<span id="cb5-485"><a href="#cb5-485" aria-hidden="true" tabindex="-1"></a>  vcov = vcov_cluster("observ")</span>
<span id="cb5-486"><a href="#cb5-486" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-487"><a href="#cb5-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-488"><a href="#cb5-488" aria-hidden="true" tabindex="-1"></a><span class="fu"># (C)</span></span>
<span id="cb5-489"><a href="#cb5-489" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-490"><a href="#cb5-490" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ </span>
<span id="cb5-491"><a href="#cb5-491" aria-hidden="true" tabindex="-1"></a>        I(treated * group) </span>
<span id="cb5-492"><a href="#cb5-492" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>I(oneblock * group) </span>
<span id="cb5-493"><a href="#cb5-493" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>I(twoblocks * group) </span>
<span id="cb5-494"><a href="#cb5-494" aria-hidden="true" tabindex="-1"></a>      | observ + monat,</span>
<span id="cb5-495"><a href="#cb5-495" aria-hidden="true" tabindex="-1"></a>      data = dat_DID_T5, </span>
<span id="cb5-496"><a href="#cb5-496" aria-hidden="true" tabindex="-1"></a>      vcov = vcov_cluster("mbc")</span>
<span id="cb5-497"><a href="#cb5-497" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-498"><a href="#cb5-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-499"><a href="#cb5-499" aria-hidden="true" tabindex="-1"></a><span class="fu"># (E)</span></span>
<span id="cb5-500"><a href="#cb5-500" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-501"><a href="#cb5-501" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ </span>
<span id="cb5-502"><a href="#cb5-502" aria-hidden="true" tabindex="-1"></a>        I(treated * group) </span>
<span id="cb5-503"><a href="#cb5-503" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>I(oneblock * group) </span>
<span id="cb5-504"><a href="#cb5-504" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>I(twoblocks * group) </span>
<span id="cb5-505"><a href="#cb5-505" aria-hidden="true" tabindex="-1"></a>      | observ + mbc,</span>
<span id="cb5-506"><a href="#cb5-506" aria-hidden="true" tabindex="-1"></a>      data = dat_DID_T5,</span>
<span id="cb5-507"><a href="#cb5-507" aria-hidden="true" tabindex="-1"></a>      vcov = "HC1"</span>
<span id="cb5-508"><a href="#cb5-508" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-509"><a href="#cb5-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-510"><a href="#cb5-510" aria-hidden="true" tabindex="-1"></a><span class="fu"># (F)</span></span>
<span id="cb5-511"><a href="#cb5-511" aria-hidden="true" tabindex="-1"></a><span class="fu"># fixest</span></span>
<span id="cb5-512"><a href="#cb5-512" aria-hidden="true" tabindex="-1"></a>feols(fml = totrob ~ </span>
<span id="cb5-513"><a href="#cb5-513" aria-hidden="true" tabindex="-1"></a>        I(treated * group) </span>
<span id="cb5-514"><a href="#cb5-514" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>I(oneblock * group) </span>
<span id="cb5-515"><a href="#cb5-515" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>I(twoblocks * group) </span>
<span id="cb5-516"><a href="#cb5-516" aria-hidden="true" tabindex="-1"></a>      | observ + monat,</span>
<span id="cb5-517"><a href="#cb5-517" aria-hidden="true" tabindex="-1"></a>      data = dat_DID_T5 %&gt;% </span>
<span id="cb5-518"><a href="#cb5-518" aria-hidden="true" tabindex="-1"></a>        group_by(observ) %&gt;% </span>
<span id="cb5-519"><a href="#cb5-519" aria-hidden="true" tabindex="-1"></a>        filter(</span>
<span id="cb5-520"><a href="#cb5-520" aria-hidden="true" tabindex="-1"></a>          sum(totrob) &gt; 0</span>
<span id="cb5-521"><a href="#cb5-521" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb5-522"><a href="#cb5-522" aria-hidden="true" tabindex="-1"></a>      vcov = "HC1"</span>
<span id="cb5-523"><a href="#cb5-523" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-524"><a href="#cb5-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-525"><a href="#cb5-525" aria-hidden="true" tabindex="-1"></a><span class="fu">## Zusammenfassung</span></span>
<span id="cb5-526"><a href="#cb5-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-527"><a href="#cb5-527" aria-hidden="true" tabindex="-1"></a>Der DID-Schätzer liefert uns eine Schätzung des ATT, indem er die Veränderung der Ergebnisse in der Behandlungsgruppe vor und nach der Intervention mit der entsprechenden Veränderung in der Kontrollgruppe vergleicht. Die Annahme paralleler Trends ist entscheidend: Nur wenn diese Annahme gilt, können wir sicher sein, dass die Differenz in den Differenzen tatsächlich den kausalen Effekt der Behandlung widerspiegelt und nicht durch andere zeitgleiche Faktoren beeinflusst wird.</span>
<span id="cb5-528"><a href="#cb5-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-529"><a href="#cb5-529" aria-hidden="true" tabindex="-1"></a>Zusammenfassend bietet der DID-Ansatz im Potential Outcomes Framework eine robuste Methode zur Schätzung kausaler Effekte, insbesondere wenn randomisierte Experimente nicht durchführbar sind. Durch den Vergleich von Zeitverläufen in Behandlungs- und Kontrollgruppen unter der Annahme paralleler Trends können wir verlässliche Schätzungen des ATT gewinnen.</span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>