<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>9&nbsp; Event Studies â€“ Kausalanalyse mit R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./RDD.html" rel="next">
<link href="./DiD.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "ZusÃ¤tzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "ZurÃ¼cksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><meta name="robots" content="noindex">
<script>
  MathJax = {
    tex: {
      tags: 'ams'  // should be 'ams', 'none', or 'all'
    }
  };
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.js" integrity="sha512-aoZChv+8imY/U1O7KIHXvO87EOzCuKO0GhFtpD6G2Cyjo/xPeTgdf3/bchB10iB+AojMTDkMHDPLKNxPJVqDcw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<style>
  .panel-tabset .tab-content {
    border: 0;
    padding: 1em 0 0 0;
  }
  
  .panel-tabset .nav-item a {
    border-radius: 5px 5px 0 0;
  }
  
  .scientific_borders {
    border: 0;
    border-top: 2px solid black !important; 
    border-bottom: 2px solid black !important;
  }
  .table:not(.gt_table) > :not(caption)>*>* {
    border-bottom-width: 0;
  }
  .table:not(.gt_table) > thead {
    border-bottom: 1px solid black;
  }
  .soft-box-shadow {
    border: 1px solid rgba(233,236,239,.9) !important;
    border-radius: .5rem !important;
    background-color: rgba(250,250,250,.9) !important;
    box-shadow: 0px 1px 2px rgba(0,0,0,.1),
                0px 3px 7px rgba(0,0,0,.1),
                0px 12px 30px rgba(0,0,0,.08);
    margin-top: 2rem !important;
    margin-bottom: 2.5rem !important;
    padding: .25rem !important;
  }
  .obs-soft-box-shadow {
    border: 1px solid rgba(233,236,239,.9) !important;
    border-radius: .5rem !important;
    background-color: white !important;
    box-shadow: 0px 1px 2px rgba(0,0,0,.1),
                0px 3px 7px rgba(0,0,0,.1),
                0px 12px 30px rgba(0,0,0,.08);
    margin-top: 2rem !important;
    margin-bottom: 2.5rem !important;
    padding: .25rem !important;
  }
  
</style>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    
    var gt_tables = document.querySelectorAll(".gt_table");
    gt_tables.forEach(function(table) {
      table.classList.remove("table-striped");
    });
    
    var tables = document.querySelectorAll("table.table:not(.gt_table)");
    tables.forEach(function(table) {
      table.classList.remove("table-striped");
      table.classList.add("scientific_borders");
    });
    
    document.querySelectorAll("div.sourceCode").forEach(function(block) {
      block.classList.add("soft-box-shadow");
    });
    
    document.querySelectorAll("div.bg-white").forEach(function(block) {
      block.classList.remove("bg-white");
    });
    
  });
</script><style>
.qwebr-code-output-stdout {background-color: powderblue;}

.qwebr-button-run {
 width = 100%; 
}

.centered-caption {
   text-align: center;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/quizdown.js"></script><script>quizdown.init();</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/editor/editor.main.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style type="text/css">
.monaco-editor pre {
  background-color: unset !important;
}

.qwebr-editor-toolbar {
  width: 100%;
  display: flex;
  justify-content: space-between;
  box-sizing: border-box;
}

.qwebr-editor-toolbar-left-buttons, .qwebr-editor-toolbar-right-buttons {
  display: flex;
}

.qwebr-non-interactive-loading-container.qwebr-cell-needs-evaluation, .qwebr-non-interactive-loading-container.qwebr-cell-evaluated {
  justify-content: center;
  display: flex;
  background-color: rgba(250, 250, 250, 0.65);
  border: 1px solid rgba(233, 236, 239, 0.65);
  border-radius: 0.5rem;
  margin-top: 15px;
  margin-bottom: 15px;
}

.qwebr-r-project-logo {
  color: #2767B0; /* R Project's blue color */
}

.qwebr-icon-status-spinner {
  color: #7894c4;
}

.qwebr-icon-run-code {
  color: #0d9c29
}

body.quarto-light .qwebr-output-code-stdout {
  color: #111;
}

body.quarto-dark .qwebr-output-code-stdout {
  color: #EEE;
}

.qwebr-output-code-stderr {
  color: #db4133;
}

body.quarto-light .qwebr-editor {
  border: 1px solid #EEEEEE;
}

body.quarto-light .qwebr-editor-toolbar {
  background-color: #EEEEEE;
  padding: 0.2rem 0.5rem;
}

body.quarto-dark .qwebr-editor {
  border: 1px solid #111;
}

body.quarto-dark .qwebr-editor-toolbar {
  background-color: #111;
  padding: 0.2rem 0.5rem;
}

.qwebr-button {
  display: inline-block;
  font-weight: 400;
  line-height: 1;
  text-decoration: none;
  text-align: center;
  padding: 0.375rem 0.75rem;
  font-size: .9rem;
  border-radius: 0.25rem;
  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

body.quarto-light .qwebr-button {
  background-color: #EEEEEE;
  color: #000;
  border-color: #dee2e6;
  border: 1px solid rgba(0,0,0,0);
}

body.quarto-dark .qwebr-button {
  background-color: #111;
  color: #EEE;
  border-color: #dee2e6;
  border: 1px solid rgba(0,0,0,0);
}

body.quarto-light .qwebr-button:hover {
  color: #000;
  background-color: #d9dce0;
  border-color: #c8ccd0;
}

body.quarto-dark .qwebr-button:hover {
  color: #d9dce0;
  background-color: #323232;
  border-color: #d9dce0;
}

.qwebr-button:disabled,.qwebr-button.disabled,fieldset:disabled .qwebr-button {
  pointer-events: none;
  opacity: .65
}

.qwebr-button-reset {
  color: #696969; /*#4682b4;*/
}

.qwebr-button-copy {
  color: #696969;
}

/* Style the code highlight lines */
body.quarto-light .qwebr-editor-highlight-line {
  background-color: lightblue;
}

body.quarto-dark .qwebr-editor-highlight-line {
  background-color: darkblue;
}

/* Style the modal pop-up */

/* The Modal (background) */
.qwebr-modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  padding-top: 60px;
}

/* Modal Content */
.qwebr-modal-content {
  background-color: #fefefe;
  margin: 5% auto; /* 15% from the top and centered */
  padding: 20px;
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
}

.qwebr-modal-content-code {
  max-height: 50vh;
  min-height: 5vh;
  overflow: scroll;
  border: 1px solid #888;
}

/* The Close Button */
.qwebr-modal-close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.qwebr-modal-close:hover,
.qwebr-modal-close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

.qwebr-download-btn {
  margin-top: 10px;
  text-decoration: none !important;
}

/* Styling to download image that is created */

.qwebr-canvas-image {
  position: relative;
  display: inline-block;
  margin: 10px;
}

.qwebr-canvas-image-download-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 5px 10px;
  background-color: #007BFF;
  color: white;
  border: none;
  cursor: pointer;
  display: none;
}

figure:hover .qwebr-canvas-image-download-btn {
  display: block;
}

/* Custom styling for RevealJS Presentations*/

/* Reset the style of the interactive area */
.reveal div.qwebr-interactive-area {
  display: block;
  box-shadow: none;
  max-width: 100%;
  max-height: 100%;
  margin: 0;
  padding: 0;
} 

/* Provide space to entries */
.reveal div.qwebr-output-code-area pre div {
  margin: 1px 2px 1px 10px;
}

/* Collapse the inside code tags to avoid extra space between line outputs */
.reveal pre div code.qwebr-output-code-stdout, .reveal pre div code.qwebr-output-code-stderr {
  padding: 0;
  display: contents;
}

body.reveal.quarto-light pre div code.qwebr-output-code-stdout {
  color: #111;
}

body.reveal.quarto-dark pre div code.qwebr-output-code-stdout {
  color: #EEEEEE;
}

.reveal pre div code.qwebr-output-code-stderr {
  color: #db4133;
}


/* Create a border around console and output (does not effect graphs) */
body.reveal.quarto-light div.qwebr-console-area {
  border: 1px solid #EEEEEE;
  box-shadow: 2px 2px 10px #EEEEEE;
}

body.reveal.quarto-dark div.qwebr-console-area {
  border: 1px solid #111;
  box-shadow: 2px 2px 10px #111;
}


/* Cap output height and allow text to scroll */
/* TODO: Is there a better way to fit contents/max it parallel to the monaco editor size? */
.reveal div.qwebr-output-code-area pre {
  max-height: 400px;
  overflow: scroll;
}

</style>
<script type="module">
// Document level settings ----

// Determine if we need to install R packages
globalThis.qwebrInstallRPackagesList = ['cowplot', 'dplyr', 'fixest', 'ggplot2', 'haven', 'tidyr', 'readr'];

// Specify possible locations to search for the repository
globalThis.qwebrPackageRepoURLS = ['https://repo.r-wasm.org/'];

// Check to see if we have an empty array, if we do set to skip the installation.
globalThis.qwebrSetupRPackages = !(qwebrInstallRPackagesList.indexOf("") !== -1);
globalThis.qwebrAutoloadRPackages = true;

// Display a startup message?
globalThis.qwebrShowStartupMessage = true;
globalThis.qwebrShowHeaderMessage = false;

// Describe the webR settings that should be used
globalThis.qwebrCustomizedWebROptions = {
  "baseURL": "https://webr.r-wasm.org/v0.4.0/",
  "serviceWorkerUrl": "",
  "homedir": "/home/web_user", 
  "channelType": "ChannelType.Automatic"
};

// Store cell data
globalThis.qwebrCellDetails = [{"options":{"results":"markup","fig-height":5,"context":"setup","editor-font-scale":"1","read-only":"false","fig-width":7,"message":"true","out-height":"","output":"true","autorun":"true","label":"unnamed-chunk-1","editor-max-height":"","fig-cap":"","classes":"","dpi":72,"warning":"true","editor-quick-suggestions":"false","editor-word-wrap":"true","comment":"","out-width":"700px"},"code":"# create dataset directory\ndir.create(\"datasets\")\n# download the dataset\ndownload.file(\n    \"https://raw.githubusercontent.com/mca91/kausal_data/main/Abrams2012.dta\",\n    'datasets/Abrams2012.dta',\n)","id":1},{"options":{"results":"markup","fig-height":5,"context":"interactive","editor-font-scale":"1","read-only":"false","fig-width":7,"message":"true","out-height":"","output":"true","autorun":"true","label":"unnamed-chunk-2","editor-max-height":"","fig-cap":"","classes":"","dpi":72,"warning":"true","editor-quick-suggestions":"false","editor-word-wrap":"true","comment":"","out-width":"700px"},"code":"library(haven)\nlibrary(dplyr)\n\n# Datensatz einlesen\nabrams <- read_dta(file = \"datasets/Abrams2012.dta\")\n\n# Ãœberblick\nglimpse(abrams)","id":2}];

</script><script type="module">
// Declare startupMessageQWebR globally
globalThis.qwebrStartupMessage = document.createElement("p");

// Verify if OffScreenCanvas is supported
globalThis.qwebrOffScreenCanvasSupport = function() {
  return typeof OffscreenCanvas !== 'undefined'
}

// Function to set the button text
globalThis.qwebrSetInteractiveButtonState = function(buttonText, enableCodeButton = true) {
  document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
    btn.innerHTML = buttonText;
    btn.disabled = !enableCodeButton;
  });
}

// Function to update the status message in non-interactive cells
globalThis.qwebrUpdateStatusMessage = function(message) {
  document.querySelectorAll(".qwebr-status-text.qwebr-cell-needs-evaluation").forEach((elem) => {
    elem.innerText = message;
  });
}

// Function to update the status message
globalThis.qwebrUpdateStatusHeader = function(message) {
  qwebrStartupMessage.innerHTML = `
    <i class="fa-solid fa-spinner fa-spin qwebr-icon-status-spinner"></i>
    <span>${message}</span>`;
}

// Function to return true if element is found, false if not
globalThis.qwebrCheckHTMLElementExists = function(selector) {
  const element = document.querySelector(selector);
  return !!element;
}

// Function that detects whether reveal.js slides are present
globalThis.qwebrIsRevealJS = function() {
  // If the '.reveal .slides' selector exists, RevealJS is likely present
  return qwebrCheckHTMLElementExists('.reveal .slides');
}

// Initialize the Quarto sidebar element
function qwebrSetupQuartoSidebar() {
  var newSideBarDiv = document.createElement('div');
  newSideBarDiv.id = 'quarto-margin-sidebar';
  newSideBarDiv.className = 'sidebar margin-sidebar';
  newSideBarDiv.style.top = '0px';
  newSideBarDiv.style.maxHeight = 'calc(0px + 100vh)';

  return newSideBarDiv;
}

// Position the sidebar in the document
function qwebrPlaceQuartoSidebar() {
  // Get the reference to the element with id 'quarto-document-content'
  var referenceNode = document.getElementById('quarto-document-content');

  // Create the new div element
  var newSideBarDiv = qwebrSetupQuartoSidebar();

  // Insert the new div before the 'quarto-document-content' element
  referenceNode.parentNode.insertBefore(newSideBarDiv, referenceNode);
}

function qwebrPlaceMessageContents(content, html_location = "title-block-header", revealjs_location = "title-slide") {

  // Get references to header elements
  const headerHTML = document.getElementById(html_location);
  const headerRevealJS = document.getElementById(revealjs_location);

  // Determine where to insert the quartoTitleMeta element
  if (headerHTML || headerRevealJS) {
    // Append to the existing "title-block-header" element or "title-slide" div
    (headerHTML || headerRevealJS).appendChild(content);
  } else {
    // If neither headerHTML nor headerRevealJS is found, insert after "webr-monaco-editor-init" script
    const monacoScript = document.getElementById("qwebr-monaco-editor-init");
    const header = document.createElement("header");
    header.setAttribute("id", "title-block-header");
    header.appendChild(content);
    monacoScript.after(header);
  }
}



function qwebrOffScreenCanvasSupportWarningMessage() {
  
  // Verify canvas is supported.
  if(qwebrOffScreenCanvasSupport()) return;

  // Create the main container div
  var calloutContainer = document.createElement('div');
  calloutContainer.classList.add('callout', 'callout-style-default', 'callout-warning', 'callout-titled');

  // Create the header div
  var headerDiv = document.createElement('div');
  headerDiv.classList.add('callout-header', 'd-flex', 'align-content-center');

  // Create the icon container div
  var iconContainer = document.createElement('div');
  iconContainer.classList.add('callout-icon-container');

  // Create the icon element
  var iconElement = document.createElement('i');
  iconElement.classList.add('callout-icon');

  // Append the icon element to the icon container
  iconContainer.appendChild(iconElement);

  // Create the title container div
  var titleContainer = document.createElement('div');
  titleContainer.classList.add('callout-title-container', 'flex-fill');
  titleContainer.innerText = 'Warning: Web Browser Does Not Support Graphing!';

  // Append the icon container and title container to the header div
  headerDiv.appendChild(iconContainer);
  headerDiv.appendChild(titleContainer);

  // Create the body container div
  var bodyContainer = document.createElement('div');
  bodyContainer.classList.add('callout-body-container', 'callout-body');

  // Create the paragraph element for the body content
  var paragraphElement = document.createElement('p');
  paragraphElement.innerHTML = 'This web browser does not have support for displaying graphs through the <code>quarto-webr</code> extension since it lacks an <code>OffScreenCanvas</code>. Please upgrade your web browser to one that supports <code>OffScreenCanvas</code>.';

  // Append the paragraph element to the body container
  bodyContainer.appendChild(paragraphElement);

  // Append the header div and body container to the main container div
  calloutContainer.appendChild(headerDiv);
  calloutContainer.appendChild(bodyContainer);

  // Append the main container div to the document depending on format
  qwebrPlaceMessageContents(calloutContainer, "title-block-header"); 

}


// Function that attaches the document status message and diagnostics
function displayStartupMessage(showStartupMessage, showHeaderMessage) {
  if (!showStartupMessage) {
    return;
  }

  // Create the outermost div element for metadata
  const quartoTitleMeta = document.createElement("div");
  quartoTitleMeta.classList.add("quarto-title-meta");

  // Create the first inner div element
  const firstInnerDiv = document.createElement("div");
  firstInnerDiv.setAttribute("id", "qwebr-status-message-area");

  // Create the second inner div element for "WebR Status" heading and contents
  const secondInnerDiv = document.createElement("div");
  secondInnerDiv.setAttribute("id", "qwebr-status-message-title");
  secondInnerDiv.classList.add("quarto-title-meta-heading");
  secondInnerDiv.innerText = "WebR Status";

  // Create another inner div for contents
  const secondInnerDivContents = document.createElement("div");
  secondInnerDivContents.setAttribute("id", "qwebr-status-message-body");
  secondInnerDivContents.classList.add("quarto-title-meta-contents");

  // Describe the WebR state
  qwebrStartupMessage.innerText = "ðŸŸ¡ Loading...";
  qwebrStartupMessage.setAttribute("id", "qwebr-status-message-text");
  // Add `aria-live` to auto-announce the startup status to screen readers
  qwebrStartupMessage.setAttribute("aria-live", "assertive");

  // Append the startup message to the contents
  secondInnerDivContents.appendChild(qwebrStartupMessage);

  // Add a status indicator for COOP and COEP Headers if needed
  if (showHeaderMessage) {
    const crossOriginMessage = document.createElement("p");
    crossOriginMessage.innerText = `${crossOriginIsolated ? 'ðŸŸ¢' : 'ðŸŸ¡'} COOP & COEP Headers`;
    crossOriginMessage.setAttribute("id", "qwebr-coop-coep-header");
    secondInnerDivContents.appendChild(crossOriginMessage);
  }

  // Combine the inner divs and contents
  firstInnerDiv.appendChild(secondInnerDiv);
  firstInnerDiv.appendChild(secondInnerDivContents);
  quartoTitleMeta.appendChild(firstInnerDiv);

  // Place message on webpage
  qwebrPlaceMessageContents(quartoTitleMeta); 
}

function qwebrAddCommandHistoryModal() {
  // Create the modal div
  var modalDiv = document.createElement('div');
  modalDiv.id = 'qwebr-history-modal';
  modalDiv.className = 'qwebr-modal';

  // Create the modal content div
  var modalContentDiv = document.createElement('div');
  modalContentDiv.className = 'qwebr-modal-content';

  // Create the span for closing the modal
  var closeSpan = document.createElement('span');
  closeSpan.id = 'qwebr-command-history-close-btn';
  closeSpan.className = 'qwebr-modal-close';
  closeSpan.innerHTML = '&times;';

  // Create the h1 element for the modal
  var modalH1 = document.createElement('h1');
  modalH1.textContent = 'R History Command Contents';

  // Create an anchor element for downloading the Rhistory file 
  var downloadLink = document.createElement('a');
  downloadLink.href = '#';
  downloadLink.id = 'qwebr-download-history-btn';
  downloadLink.className = 'qwebr-download-btn';

  // Create an 'i' element for the icon
  var icon = document.createElement('i');
  icon.className = 'bi bi-file-code';

  // Append the icon to the anchor element
  downloadLink.appendChild(icon);

  // Add the text 'Download R History' to the anchor element
  downloadLink.appendChild(document.createTextNode(' Download R History File'));

  // Create the pre for command history contents
  var commandContentsPre = document.createElement('pre');
  commandContentsPre.id = 'qwebr-command-history-contents';
  commandContentsPre.className = 'qwebr-modal-content-code';

  // Append the close span, h1, and history contents pre to the modal content div
  modalContentDiv.appendChild(closeSpan);
  modalContentDiv.appendChild(modalH1);
  modalContentDiv.appendChild(downloadLink);
  modalContentDiv.appendChild(commandContentsPre);

  // Append the modal content div to the modal div
  modalDiv.appendChild(modalContentDiv);

  // Append the modal div to the body
  document.body.appendChild(modalDiv);
}

function qwebrRegisterRevealJSCommandHistoryModal() {
  // Select the <ul> element inside the <div> with data-panel="Custom0"
  let ulElement = document.querySelector('div[data-panel="Custom0"] > ul.slide-menu-items');

  // Find the last <li> element with class slide-tool-item
  let lastItem = ulElement.querySelector('li.slide-tool-item:last-child');

  // Calculate the next data-item value
  let nextItemValue = 0;
  if (lastItem) {
      nextItemValue = parseInt(lastItem.dataset.item) + 1;
  }

  // Create a new <li> element
  let newListItem = document.createElement('li');
  newListItem.className = 'slide-tool-item';
  newListItem.dataset.item = nextItemValue.toString(); // Set the next available data-item value

  // Create the <a> element inside the <li>
  let newLink = document.createElement('a');
  newLink.href = '#';
  newLink.id = 'qwebrRHistoryButton'; // Set the ID for the new link
  
  // Create the <kbd> element inside the <a>
  let newKbd = document.createElement('kbd');
  newKbd.textContent = ' '; // Set to empty as we are not registering a keyboard shortcut

  // Create text node for the link text
  let newText = document.createTextNode(' View R History');

  // Append <kbd> and text node to <a>
  newLink.appendChild(newKbd);
  newLink.appendChild(newText);

  // Append <a> to <li>
  newListItem.appendChild(newLink);

  // Append <li> to <ul>
  ulElement.appendChild(newListItem);
}

// Handle setting up the R history modal
function qwebrCodeLinks() {

  if (qwebrIsRevealJS()) {
    qwebrRegisterRevealJSCommandHistoryModal();
    return;
  }

  // Create the container div
  var containerDiv = document.createElement('div');
  containerDiv.className = 'quarto-code-links';

  // Create the h2 element
  var h2 = document.createElement('h2');
  h2.textContent = 'webR Code Links';

  // Create the ul element
  var ul = document.createElement('ul');

  // Create the li element
  var li = document.createElement('li');

  // Create the a_history_btn element
  var a_history_btn = document.createElement('a');
  a_history_btn.href = 'javascript:void(0)';
  a_history_btn.setAttribute('id', 'qwebrRHistoryButton');

  // Create the i_history_btn element
  var i_history_btn = document.createElement('i');
  i_history_btn.className = 'bi bi-file-code';

  // Create the text node for the link text
  var text_history_btn = document.createTextNode('View R History');

  // Append the icon element and link text to the a element
  a_history_btn.appendChild(i_history_btn);
  a_history_btn.appendChild(text_history_btn);

  // Append the a element to the li element
  li.appendChild(a_history_btn);

  // Append the li element to the ul element
  ul.appendChild(li);

  // Append the h2 and ul elements to the container div
  containerDiv.appendChild(h2);
  containerDiv.appendChild(ul);

  // Append the container div to the element with the ID 'quarto-margin-sidebar'
  var sidebar = document.getElementById('quarto-margin-sidebar');
    
  // If the sidebar element is not found, create it
  if(!sidebar) {
    qwebrPlaceQuartoSidebar();
  }
  
  // Re-select the sidebar element (if it was just created)
  sidebar = document.getElementById('quarto-margin-sidebar');   


  // If the sidebar element exists, append the container div to it
  if(sidebar) {
    // Append the container div to the sidebar
    sidebar.appendChild(containerDiv);
    // Force the sidebar to be clickable by removing the 'zindex-bottom' class
    // added in pre-release: https://github.com/quarto-dev/quarto-cli/commit/f0c53a1ffcaa1de4eccbf07803b096898248adcc
    sidebar.className = 'sidebar margin-sidebar';
  } else {
    // Get a debugger ...
    console.warn('Element with ID "quarto-margin-sidebar" not found.');
  }
}

// Call the function to append the code links for qwebR into the right sidebar
qwebrCodeLinks();

// Add the command history modal
qwebrAddCommandHistoryModal();

displayStartupMessage(qwebrShowStartupMessage, qwebrShowHeaderMessage);
qwebrOffScreenCanvasSupportWarningMessage();
</script><script type="module">
// Define a global storage and retrieval solution ----

// Store commands executed in R
globalThis.qwebrRCommandHistory = [];

// Function to retrieve the command history
globalThis.qwebrFormatRHistory = function() {
   return qwebrRCommandHistory.join("\n\n");
}

// Retrieve HTML Elements ----

// Get the command modal
const command_history_modal = document.getElementById("qwebr-history-modal");

// Get the button that opens the command modal
const command_history_btn = document.getElementById("qwebrRHistoryButton");

// Get the <span> element that closes the command modal
const command_history_close_span = document.getElementById("qwebr-command-history-close-btn");

// Get the download button for r history information
const command_history_download_btn = document.getElementById("qwebr-download-history-btn");

// Plug in command history into modal/download button ----

// Function to populate the modal with command history
function populateCommandHistoryModal() {
    document.getElementById("qwebr-command-history-contents").innerHTML = qwebrFormatRHistory() || "No commands have been executed yet.";
}

// Function to format the current date and time to
// a string with the format YYYY-MM-DD-HH-MM-SS
function formatDateTime() {
    const now = new Date();

    const year = now.getFullYear();
    const day = String(now.getDate()).padStart(2, '0');
    const month = String(now.getMonth() + 1).padStart(2, '0'); // Months are zero-based
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    const seconds = String(now.getSeconds()).padStart(2, '0');

    return `${year}-${month}-${day}-${hours}-${minutes}-${seconds}`;
}


// Function to convert document title with datetime to a safe filename
function safeFileName() {
    // Get the current page title
    let pageTitle = document.title;

    // Combine the current page title with the current date and time
    let pageNameWithDateTime = `Rhistory-${pageTitle}-${formatDateTime()}`;

    // Replace unsafe characters with safe alternatives
    let safeFilename = pageNameWithDateTime.replace(/[\\/:\*\?! "<>\|]/g, '-');

    return safeFilename;
}


// Function to download list contents as text file
function downloadRHistory() {
    // Get the current page title + datetime and use it as the filename
    const filename = `${safeFileName()}.R`;

    // Get the text contents of the R History list
    const text = qwebrFormatRHistory();

    // Create a new Blob object with the text contents
    const blob = new Blob([text], { type: 'text/plain' });
  
    // Create a new anchor element for the download
    const a = document.createElement('a');
    a.style.display = 'none';
    a.href = URL.createObjectURL(blob);
    a.download = filename;

    // Append the anchor to the body, click it, and remove it
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
}

// Register event handlers ----

// When the user clicks the View R History button, open the command modal
command_history_btn.onclick = function() {
    populateCommandHistoryModal();
    command_history_modal.style.display = "block";
}

// When the user clicks on <span> (x), close the command modal
command_history_close_span.onclick = function() {
    command_history_modal.style.display = "none";
}

// When the user clicks anywhere outside of the command modal, close it
window.onclick = function(event) {
    if (event.target == command_history_modal) {
        command_history_modal.style.display = "none";
    }
}

// Add an onclick event listener to the download button so that
// the user can download the R history as a text file
command_history_download_btn.onclick = function() {
    downloadRHistory();
};
</script><script type="module">
// Supported Evaluation Types for Context
globalThis.EvalTypes = Object.freeze({
  Interactive: 'interactive',
  Setup: 'setup',
  Output: 'output',
});

// Function that obtains the font size for a given element 
globalThis.qwebrCurrentFontSizeOnElement = function(element, cssProperty = 'font-size') {

  const currentFontSize = parseFloat(
    window
    .getComputedStyle(element)
    .getPropertyValue(cssProperty)
  );
  
  return currentFontSize;
}

// Function to determine font scaling
globalThis.qwebrScaledFontSize = function(div, qwebrOptions) {
  // Determine if we should compute font-size using RevealJS's `--r-main-font-size` 
  // or if we can directly use the document's `font-size`.
  const cssProperty = document.body.classList.contains('reveal') ? 
    "--r-main-font-size" : "font-size";
  
  // Get the current font size on the div element
  const elementFontSize = qwebrCurrentFontSizeOnElement(div, cssProperty);

  // Determine the scaled font size value
  const scaledFontSize = ((qwebrOptions['editor-font-scale'] ?? 1) * elementFontSize) ?? 17.5;

  return scaledFontSize;
}


// Function that dispatches the creation request
globalThis.qwebrCreateHTMLElement = function (
  cellData
) {

  // Extract key components
  const evalType = cellData.options.context;
  const qwebrCounter = cellData.id;

  // We make an assumption that insertion points are defined by the Lua filter as:
  // qwebr-insertion-location-{qwebrCounter} 
  const elementLocator = document.getElementById(`qwebr-insertion-location-${qwebrCounter}`);

  // Figure out the routine to use to insert the element.
  let qwebrElement;
  switch ( evalType ) {
    case EvalTypes.Interactive:
      qwebrElement = qwebrCreateInteractiveElement(qwebrCounter, cellData.options);
      break;
    case EvalTypes.Output: 
      qwebrElement = qwebrCreateNonInteractiveOutputElement(qwebrCounter, cellData.options);
      break;
    case EvalTypes.Setup: 
      qwebrElement = qwebrCreateNonInteractiveSetupElement(qwebrCounter, cellData.options);
      break;
    default: 
      qwebrElement = document.createElement('div');
      qwebrElement.textContent = 'Error creating `quarto-webr` element';
  }

  // Insert the dynamically generated object at the document location.
  elementLocator.appendChild(qwebrElement);
};

// Function that setups the interactive element creation
globalThis.qwebrCreateInteractiveElement = function (qwebrCounter, qwebrOptions) {

  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = 'qwebr-interactive-area-' + qwebrCounter;
  mainDiv.className = `qwebr-interactive-area`;
  if (qwebrOptions.classes) {
    mainDiv.className += " " + qwebrOptions.classes
  }

  // Add a unique cell identifier that users can customize
  if (qwebrOptions.label) {
    mainDiv.setAttribute('data-id', qwebrOptions.label);
  }

  // Create toolbar div
  var toolbarDiv = document.createElement('div');
  toolbarDiv.className = 'qwebr-editor-toolbar';
  toolbarDiv.id = 'qwebr-editor-toolbar-' + qwebrCounter;

  // Create a div to hold the left buttons
  var leftButtonsDiv = document.createElement('div');
  leftButtonsDiv.className = 'qwebr-editor-toolbar-left-buttons';

  // Create a div to hold the right buttons
  var rightButtonsDiv = document.createElement('div');
  rightButtonsDiv.className = 'qwebr-editor-toolbar-right-buttons';

  // Create Run Code button
  var runCodeButton = document.createElement('button');
  runCodeButton.className = 'btn btn-default qwebr-button qwebr-button-run';
  runCodeButton.disabled = true;
  runCodeButton.type = 'button';
  runCodeButton.id = 'qwebr-button-run-' + qwebrCounter;
  runCodeButton.textContent = 'ðŸŸ¡ Loading webR...';
  runCodeButton.title = `Run code (Shift + Enter)`;

  // Append buttons to the leftButtonsDiv
  leftButtonsDiv.appendChild(runCodeButton);

  // Create Reset button
  var resetButton = document.createElement('button');
  resetButton.className = 'btn btn-light btn-xs qwebr-button qwebr-button-reset';
  resetButton.type = 'button';
  resetButton.id = 'qwebr-button-reset-' + qwebrCounter;
  resetButton.title = 'Start over';
  resetButton.innerHTML = '<i class="fa-solid fa-arrows-rotate"></i>';

  // Create Copy button
  var copyButton = document.createElement('button');
  copyButton.className = 'btn btn-light btn-xs qwebr-button qwebr-button-copy';
  copyButton.type = 'button';
  copyButton.id = 'qwebr-button-copy-' + qwebrCounter;
  copyButton.title = 'Copy code';
  copyButton.innerHTML = '<i class="fa-regular fa-copy"></i>';

  // Append buttons to the rightButtonsDiv
  rightButtonsDiv.appendChild(resetButton);
  rightButtonsDiv.appendChild(copyButton);

  // Create console area div
  var consoleAreaDiv = document.createElement('div');
  consoleAreaDiv.id = 'qwebr-console-area-' + qwebrCounter;
  consoleAreaDiv.className = 'qwebr-console-area';

  // Create editor div
  var editorDiv = document.createElement('div');
  editorDiv.id = 'qwebr-editor-' + qwebrCounter;
  editorDiv.className = 'qwebr-editor';

  // Create output code area div
  var outputCodeAreaDiv = document.createElement('div');
  outputCodeAreaDiv.id = 'qwebr-output-code-area-' + qwebrCounter;
  outputCodeAreaDiv.className = 'qwebr-output-code-area';
  outputCodeAreaDiv.setAttribute('aria-live', 'assertive');

  // Create pre element inside output code area
  var preElement = document.createElement('pre');
  preElement.style.visibility = 'hidden';
  outputCodeAreaDiv.appendChild(preElement);

  // Create output graph area div
  var outputGraphAreaDiv = document.createElement('div');
  outputGraphAreaDiv.id = 'qwebr-output-graph-area-' + qwebrCounter;
  outputGraphAreaDiv.className = 'qwebr-output-graph-area';

  // Append buttons to the toolbar
  toolbarDiv.appendChild(leftButtonsDiv);
  toolbarDiv.appendChild(rightButtonsDiv);

  // Append all elements to the main div
  mainDiv.appendChild(toolbarDiv);
  consoleAreaDiv.appendChild(editorDiv);
  consoleAreaDiv.appendChild(outputCodeAreaDiv);
  mainDiv.appendChild(consoleAreaDiv);
  mainDiv.appendChild(outputGraphAreaDiv);

  return mainDiv;
}

// Function that adds output structure for non-interactive output
globalThis.qwebrCreateNonInteractiveOutputElement = function(qwebrCounter, qwebrOptions) {
  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = 'qwebr-noninteractive-area-' + qwebrCounter;
  mainDiv.className = `qwebr-noninteractive-area`;
  if (qwebrOptions.classes) {
    mainDiv.className += " " + qwebrOptions.classes
  }
  
  // Add a unique cell identifier that users can customize
  if (qwebrOptions.label) {
    mainDiv.setAttribute('data-id', qwebrOptions.label);
  }
  
  // Create a status container div
  var statusContainer = createLoadingContainer(qwebrCounter);

  // Create output code area div
  var outputCodeAreaDiv = document.createElement('div');
  outputCodeAreaDiv.id = 'qwebr-output-code-area-' + qwebrCounter;
  outputCodeAreaDiv.className = 'qwebr-output-code-area';
  outputCodeAreaDiv.setAttribute('aria-live', 'assertive');

  // Create pre element inside output code area
  var preElement = document.createElement('pre');
  preElement.style.visibility = 'hidden';
  outputCodeAreaDiv.appendChild(preElement);

  // Create output graph area div
  var outputGraphAreaDiv = document.createElement('div');
  outputGraphAreaDiv.id = 'qwebr-output-graph-area-' + qwebrCounter;
  outputGraphAreaDiv.className = 'qwebr-output-graph-area';

  // Append all elements to the main div
  mainDiv.appendChild(statusContainer);
  mainDiv.appendChild(outputCodeAreaDiv);
  mainDiv.appendChild(outputGraphAreaDiv);

  return mainDiv;
};

// Function that adds a stub in the page to indicate a setup cell was used.
globalThis.qwebrCreateNonInteractiveSetupElement = function(qwebrCounter, qwebrOptions) {
  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = `qwebr-noninteractive-setup-area-${qwebrCounter}`;
  mainDiv.className = `qwebr-noninteractive-setup-area`;
  if (qwebrOptions.classes) {
    mainDiv.className += " " + qwebrOptions.classes
  }


  // Add a unique cell identifier that users can customize
  if (qwebrOptions.label) {
    mainDiv.setAttribute('data-id', qwebrOptions.label);
  }

  // Create a status container div
  var statusContainer = createLoadingContainer(qwebrCounter);

  // Append status onto the main div
  mainDiv.appendChild(statusContainer);

  return mainDiv;
}


// Function to create loading container with specified ID
globalThis.createLoadingContainer = function(qwebrCounter) {

  // Create a status container
  const container = document.createElement('div');
  container.id = `qwebr-non-interactive-loading-container-${qwebrCounter}`;
  container.className = 'qwebr-non-interactive-loading-container qwebr-cell-needs-evaluation';

  // Create an R project logo to indicate its a code space
  const rProjectIcon = document.createElement('i');
  rProjectIcon.className = 'fa-brands fa-r-project fa-3x qwebr-r-project-logo';

  // Setup a loading icon from font awesome
  const spinnerIcon = document.createElement('i');
  spinnerIcon.className = 'fa-solid fa-spinner fa-spin fa-1x qwebr-icon-status-spinner';

  // Add a section for status text
  const statusText = document.createElement('p');
  statusText.id = `qwebr-status-text-${qwebrCounter}`;
  statusText.className = `qwebr-status-text qwebr-cell-needs-evaluation`;
  statusText.innerText = 'Loading webR...';

  // Incorporate an inner container
  const innerContainer = document.createElement('div');

  // Append elements to the inner container
  innerContainer.appendChild(spinnerIcon);
  innerContainer.appendChild(statusText);

  // Append elements to the main container
  container.appendChild(rProjectIcon);
  container.appendChild(innerContainer);

  return container;
}
</script><script type="module">
// Function to install a single package
async function qwebrInstallRPackage(packageName) {
  await mainWebR.evalRVoid(`webr::install('${packageName}');`);
}

// Function to load a single package
async function qwebrLoadRPackage(packageName) {
  await mainWebR.evalRVoid(`require('${packageName}', quietly = TRUE)`);
}

// Generic function to process R packages
async function qwebrProcessRPackagesWithStatus(packages, processType, displayStatusMessageUpdate = true) {
  // Switch between contexts
  const messagePrefix = processType === 'install' ? 'Installing' : 'Loading';

  // Modify button state
  qwebrSetInteractiveButtonState(`ðŸŸ¡ ${messagePrefix} package ...`, false);

  // Iterate over packages
  for (let i = 0; i < packages.length; i++) {
    const activePackage = packages[i];
    const formattedMessage = `${messagePrefix} package ${i + 1} out of ${packages.length}: ${activePackage}`;

    // Display the update in header
    if (displayStatusMessageUpdate) {
      qwebrUpdateStatusHeader(formattedMessage);
    }

    // Display the update in non-active areas
    qwebrUpdateStatusMessage(formattedMessage);

    // Run package installation
    if (processType === 'install') {
      await qwebrInstallRPackage(activePackage);
    } else {
      await qwebrLoadRPackage(activePackage);
    }
  }

  // Clean slate
  if (processType === 'load') {
    await mainWebR.flush();
  }
}

// Start a timer
const initializeWebRTimerStart = performance.now();

// Encase with a dynamic import statement
globalThis.qwebrInstance = import(qwebrCustomizedWebROptions.baseURL + "webr.mjs").then(
  async ({ WebR, ChannelType }) => {
    // Populate WebR options with defaults or new values based on `webr` meta
    globalThis.mainWebR = new WebR(qwebrCustomizedWebROptions);

    // Initialization WebR
    await mainWebR.init();

    // Setup a shelter
    globalThis.mainWebRCodeShelter = await new mainWebR.Shelter();

    // Setup a pager to allow processing help documentation 
    await mainWebR.evalRVoid('webr::pager_install()'); 

    // Override the existing install.packages() to use webr::install()
    await mainWebR.evalRVoid('webr::shim_install()'); 

    // Specify the repositories to pull from
    // Note: webR does not use the `repos` option, but instead uses `webr_pkg_repos`
    // inside of `install()`. However, other R functions still pull from `repos`.
    await mainWebR.evalRVoid(`
      options(
        webr_pkg_repos = c(${qwebrPackageRepoURLS.map(repoURL => `'${repoURL}'`).join(',')}),
        repos = c(${qwebrPackageRepoURLS.map(repoURL => `'${repoURL}'`).join(',')})
      )
    `);

    // Check to see if any packages need to be installed
    if (qwebrSetupRPackages) {
      // Obtain only a unique list of packages
      const uniqueRPackageList = Array.from(new Set(qwebrInstallRPackagesList));

      // Install R packages one at a time (either silently or with a status update)
      await qwebrProcessRPackagesWithStatus(uniqueRPackageList, 'install', qwebrShowStartupMessage);

      if (qwebrAutoloadRPackages) {
        // Load R packages one at a time (either silently or with a status update)
        await qwebrProcessRPackagesWithStatus(uniqueRPackageList, 'load', qwebrShowStartupMessage);
      }
    }
  }
);

// Stop timer
const initializeWebRTimerEnd = performance.now();

</script><script type="module">
// Function to verify a given JavaScript Object is empty
globalThis.qwebrIsObjectEmpty = function (arr) {
    return Object.keys(arr).length === 0;
}

// Global version of the Escape HTML function that converts HTML 
// characters to their HTML entities.
globalThis.qwebrEscapeHTMLCharacters = function(unsafe) {
    return unsafe
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  };

// Passthrough results
globalThis.qwebrIdentity = function(x) {
    return x;
};

// Append a comment
globalThis.qwebrPrefixComment = function(x, comment) {
    return `${comment}${x}`;
};

// Function to store the code in the history
globalThis.qwebrLogCodeToHistory = function(codeToRun, options) {
    qwebrRCommandHistory.push(
        `# Ran code in ${options.label} at ${new Date().toLocaleString()} ----\n${codeToRun}`
    );
}

// Function to attach a download button onto the canvas
// allowing the user to download the image.
function qwebrImageCanvasDownloadButton(canvas, canvasContainer) {

    // Create the download button
    const downloadButton = document.createElement('button');
    downloadButton.className = 'qwebr-canvas-image-download-btn';
    downloadButton.textContent = 'Download Image';
    canvasContainer.appendChild(downloadButton);

    // Trigger a download of the image when the button is clicked
    downloadButton.addEventListener('click', function() {
        const image = canvas.toDataURL('image/png');
        const link = document.createElement('a');
        link.href = image;
        link.download = 'qwebr-canvas-image.png';
        link.click();
    });
  }
  

// Function to parse the pager results
globalThis.qwebrParseTypePager = async function (msg) { 

    // Split out the event data
    const { path, title, deleteFile } = msg.data; 

    // Process the pager data by reading the information from disk
    const paged_data = await mainWebR.FS.readFile(path).then((data) => {
        // Obtain the file content
        let content = new TextDecoder().decode(data);

        // Remove excessive backspace characters until none remain
        while(content.match(/.[\b]/)){
        content = content.replace(/.[\b]/g, '');
        }

        // Returned cleaned data
        return content;
    });

    // Unlink file if needed
    if (deleteFile) { 
        await mainWebR.FS.unlink(path); 
    } 

    // Return extracted data with spaces
    return paged_data;
} 

// Function to run the code using webR and parse the output
globalThis.qwebrComputeEngine = async function(
    codeToRun, 
    elements, 
    options) {

    // Call into the R compute engine that persists within the document scope.
    // To be prepared for all scenarios, the following happens: 
    // 1. We setup a canvas device to write to by making a namespace call into the {webr} package
    // 2. We use values inside of the options array to set the figure size.
    // 3. We capture the output stream information (STDOUT and STERR)
    // 4. We disable the current device's image creation.
    // 5. Piece-wise parse the results into the different output areas

    // Create a pager variable for help/file contents
    let pager = [];

    // Handle how output is processed
    let showMarkup = options.results === "markup" && options.output !== "asis";
    let processOutput;

    if (showMarkup) {
        processOutput = qwebrEscapeHTMLCharacters;
    } else {
        processOutput = qwebrIdentity;
    }

    // ---- 
    // Convert from Inches to Pixels by using DPI (dots per inch)
    // for bitmap devices (dpi * inches = pixels)
    let fig_width = options["fig-width"] * options["dpi"]
    let fig_height = options["fig-height"] * options["dpi"]

    // Initialize webR
    await mainWebR.init();

    // Configure capture output
    let captureOutputOptions = {
        withAutoprint: true,
        captureStreams: true,
        captureConditions: false,
        // env: webR.objs.emptyEnv, // maintain a global environment for webR v0.2.0
    };
    
    // Determine if the browser supports OffScreen
    if (qwebrOffScreenCanvasSupport()) {
        // Mirror default options of webr::canvas()
        // with changes to figure height and width.
        captureOutputOptions.captureGraphics = {
            width: fig_width,
            height: fig_height,
            bg: "white", // default: transparent
            pointsize: 12,
            capture: true
        };
    }  else {
        // Disable generating graphics
        captureOutputOptions.captureGraphics = false;
    }

    // Store the code to run in history
    qwebrLogCodeToHistory(codeToRun, options);

    // Setup a webR canvas by making a namespace call into the {webr} package
    // Evaluate the R code
    // Remove the active canvas silently
    const result = await mainWebRCodeShelter.captureR(
        `${codeToRun}`,
        captureOutputOptions
    );

    // -----

    // Start attempting to parse the result data
    processResultOutput:try {
        
        // Avoid running through output processing
        if (options.results === "hide" || options.output === "false") { 
            break processResultOutput; 
        }

        // Merge output streams of STDOUT and STDErr (messages and errors are combined.)
        // Require both `warning` and `message` to be true to display `STDErr`. 
        const out = result.output
        .filter(
            evt => evt.type === "stdout" || 
            ( evt.type === "stderr" && (options.warning === "true" && options.message === "true")) 
        )
        .map((evt, index) => {
            const className = `qwebr-output-code-${evt.type}`;
            const outputResult = qwebrPrefixComment(processOutput(evt.data), options.comment);
            return `<code id="${className}-editor-${elements.id}-result-${index + 1}" class="${className}">${outputResult}</code>`;
        })
        .join("\n");


        // Clean the state
        // We're now able to process pager events.
        // As a result, we cannot maintain a true 1-to-1 output order 
        // without individually feeding each line
        const msgs = await mainWebR.flush();

        // Use `map` to process the filtered "pager" events asynchronously
        const pager = await Promise.all(
            msgs.filter(msg => msg.type === 'pager').map(
                async (msg) => {
                    return await qwebrParseTypePager(msg);
                }
            )
        );

        // Nullify the output area of content
        elements.outputCodeDiv.innerHTML = "";
        elements.outputGraphDiv.innerHTML = "";

        // Design an output object for messages
        const pre = document.createElement("pre");
        if (/\S/.test(out)) {
            // Display results as HTML elements to retain output styling
            const div = document.createElement("div");
            div.innerHTML = out;

            // Calculate a scaled font-size value
            const scaledFontSize = qwebrScaledFontSize(
                elements.outputCodeDiv, options);

            // Override output code cell size
            pre.style.fontSize = `${scaledFontSize}px`;
            pre.appendChild(div);
        } else {
            // If nothing is present, hide the element.
            pre.style.visibility = "hidden";
        }

        elements.outputCodeDiv.appendChild(pre);

        // Determine if we have graphs to display
        if (result.images.length > 0) {

            // Create figure element
            const figureElement = document.createElement("figure");
            figureElement.className = "qwebr-canvas-image";

            // Place each rendered graphic onto a canvas element
            result.images.forEach((img) => {

                // Construct canvas for object
                const canvas = document.createElement("canvas");

                // Add an image download button
                qwebrImageCanvasDownloadButton(canvas, figureElement);

                // Set canvas size to image
                canvas.width = img.width;
                canvas.height = img.height;

                // Apply output truncations
                canvas.style.width = options["out-width"] ? options["out-width"] : `${fig_width}px`;
                if (options["out-height"]) {
                    canvas.style.height = options["out-height"];
                }

                // Apply styling
                canvas.style.display = "block";
                canvas.style.margin = "auto";

                // Draw image onto Canvas
                const ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, img.width, img.height);
          
                // Append canvas to figure output area
                figureElement.appendChild(canvas);

            });
            
            if (options['fig-cap']) {
                // Create figcaption element
                const figcaptionElement = document.createElement('figcaption');
                figcaptionElement.innerText = options['fig-cap'];
                // Append figcaption to figure
                figureElement.appendChild(figcaptionElement);    
            }
        
            elements.outputGraphDiv.appendChild(figureElement);

        }

        // Display the pager data
        if (pager) {
        // Use the `pre` element to preserve whitespace.
        pager.forEach((paged_data, index) => {
            let pre_pager = document.createElement("pre");
            pre_pager.innerText = paged_data;
            pre_pager.classList.add("qwebr-output-code-pager");
            pre_pager.setAttribute("id", `qwebr-output-code-pager-editor-${elements.id}-result-${index + 1}`);
            elements.outputCodeDiv.appendChild(pre_pager);
        });
        }
    } finally {
        // Clean up the remaining code
        mainWebRCodeShelter.purge();
    }
}

// Function to execute the code (accepts code as an argument)
globalThis.qwebrExecuteCode = async function (
    codeToRun,
    id,
    options = {}) {

    // If options are not passed, we fall back on the bare minimum to handle the computation
    if (qwebrIsObjectEmpty(options)) {
        options = { 
            "context": "interactive", 
            "fig-width": 7, "fig-height": 5, 
            "out-width": "700px", "out-height": "", 
            "dpi": 72,
            "results": "markup", 
            "warning": "true", "message": "true",
        };
    }

    // Next, we access the compute areas values
    const elements = {
        runButton: document.getElementById(`qwebr-button-run-${id}`),
        outputCodeDiv: document.getElementById(`qwebr-output-code-area-${id}`),
        outputGraphDiv: document.getElementById(`qwebr-output-graph-area-${id}`),
        id: id,
    }

    // Disallowing execution of other code cells
    document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
        btn.disabled = true;
    });

    if (options.context == EvalTypes.Interactive) {
        // Emphasize the active code cell
        elements.runButton.innerHTML = '<i class="fa-solid fa-spinner fa-spin qwebr-icon-status-spinner"></i> <span>Run Code</span>';
    }

    // Evaluate the code and parse the output into the document
    await qwebrComputeEngine(codeToRun, elements, options);

    // Switch to allowing execution of code
    document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
        btn.disabled = false;
    });

    if (options.context == EvalTypes.Interactive) {
        // Revert to the initial code cell state
        elements.runButton.innerHTML = '<i class="fa-solid fa-play qwebr-icon-run-code"></i> <span>Run Code</span>';
    }
}

</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./EventStudies.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Event Studies</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./"></a><a href="./index.html">Kausalanalyse mit R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Lesemodus umschalten">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Start</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_Einfuehrung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Statistische Programmierung mit R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Simulation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Matching</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FixedEffects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Panel-Daten</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">IV-Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Difference-in-Differences</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./EventStudies.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Event Studies</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RDD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Regression Discontiniuty Designs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RegReg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Regularisierte Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Machine Learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Machine Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./SyntheticControl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Synthetic Control</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Literatur.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
    </ul>
</div>
    <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title"><a href="./index.html">Ãœbersicht</a></h2>
   
  <ul>
<li><a href="#counterfactuals-und-regression" id="toc-counterfactuals-und-regression" class="nav-link active" data-scroll-target="#counterfactuals-und-regression"><span class="header-section-number">9.1</span> Counterfactuals und Regression</a></li>
  <li>
<a href="#beispiel-strukturbruch-in-zeitreihe" id="toc-beispiel-strukturbruch-in-zeitreihe" class="nav-link" data-scroll-target="#beispiel-strukturbruch-in-zeitreihe"><span class="header-section-number">9.2</span> Beispiel: Strukturbruch in Zeitreihe</a>
  <ul>
<li><a href="#event-study-sch%C3%A4tzung-kausaler-effekt-f%C3%BCr-x_t" id="toc-event-study-schÃ¤tzung-kausaler-effekt-fÃ¼r-x_t" class="nav-link" data-scroll-target="#event-study-sch%C3%A4tzung-kausaler-effekt-f%C3%BCr-x_t"><span class="header-section-number">9.2.1</span> Event-Study-SchÃ¤tzung: Kausaler Effekt fÃ¼r <span class="math inline">\(X_t\)</span></a></li>
  <li><a href="#event-study-sch%C3%A4tzung-kausaler-effekt-f%C3%BCr-y_t" id="toc-event-study-schÃ¤tzung-kausaler-effekt-fÃ¼r-y_t" class="nav-link" data-scroll-target="#event-study-sch%C3%A4tzung-kausaler-effekt-f%C3%BCr-y_t"><span class="header-section-number">9.2.2</span> Event-Study-SchÃ¤tzung: Kausaler Effekt fÃ¼r <span class="math inline">\(Y_t\)</span></a></li>
  </ul>
</li>
  <li>
<a href="#sec-deterrance" id="toc-sec-deterrance" class="nav-link" data-scroll-target="#sec-deterrance"><span class="header-section-number">9.3</span> Case Study: Abschreckungseffekte durch Strafgesetzgebung</a>
  <ul>
<li><a href="#identifikationsstrategie" id="toc-identifikationsstrategie" class="nav-link" data-scroll-target="#identifikationsstrategie"><span class="header-section-number">9.3.1</span> Identifikationsstrategie</a></li>
  <li>
<a href="#replikation-mit-r" id="toc-replikation-mit-r" class="nav-link" data-scroll-target="#replikation-mit-r"><span class="header-section-number">9.3.2</span> Replikation mit R</a>
  <ul class="collapse">
<li><a href="#basis-spezifikation" id="toc-basis-spezifikation" class="nav-link" data-scroll-target="#basis-spezifikation"><span class="header-section-number">9.3.2.1</span> Basis-Spezifikation</a></li>
  <li><a href="#event-study-regression" id="toc-event-study-regression" class="nav-link" data-scroll-target="#event-study-regression"><span class="header-section-number">9.3.2.2</span> Event-Study-Regression</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#zusammenfassung" id="toc-zusammenfassung" class="nav-link" data-scroll-target="#zusammenfassung"><span class="header-section-number">9.4</span> Zusammenfassung</a></li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/loader.js"></script><script type="module" id="qwebr-monaco-editor-init">

  // Configure the Monaco Editor's loader
  require.config({
    paths: {
      'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs'
    }
  });
</script><script type="module">
// Function to update Monaco Editors when body class changes
function updateMonacoEditorsOnBodyClassChange() {
    // Select the body element
    const body = document.querySelector('body');

    // Options for the observer (which mutations to observe)
    const observerOptions = {
        attributes: true,  // Observe changes to attributes
        attributeFilter: ['class'] // Only observe changes to the 'class' attribute
    };

    // Callback function to execute when mutations are observed
    const bodyClassChangeCallback = function(mutationsList, observer) {
        for(let mutation of mutationsList) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                // Class attribute has changed
                // Update all Monaco Editors on the page
                updateMonacoEditorTheme();
            }
        }
    };

    // Create an observer instance linked to the callback function
    const observer = new MutationObserver(bodyClassChangeCallback);

    // Start observing the target node for configured mutations
    observer.observe(body, observerOptions);
}

// Function to update all instances of Monaco Editors on the page
function updateMonacoEditorTheme() {
    // Determine what VS Theme to use
    const vsThemeToUse = document.body.classList.contains("quarto-dark") ? 'vs-dark' : 'vs' ;

    // Iterate through all initialized Monaco Editors
    qwebrEditorInstances.forEach( function(editorInstance) { 
        editorInstance.updateOptions({ theme: vsThemeToUse }); 
    });
}

// Call the function to start observing changes to body class
updateMonacoEditorsOnBodyClassChange();
</script><script type="module">
// Global array to store Monaco Editor instances
globalThis.qwebrEditorInstances = [];

function isValidCodeLineNumbers(stringCodeLineNumbers) {
  // Regular expression to match valid input strings
  const regex = /^(\d+(-\d+)?)(,\d+(-\d+)?)*$/;
  return regex.test(stringCodeLineNumbers);
}

// Function that builds and registers a Monaco Editor instance    
globalThis.qwebrCreateMonacoEditorInstance = function (cellData) {

  const initialCode = cellData.code;
  const qwebrCounter = cellData.id;
  const qwebrOptions = cellData.options;

  // Retrieve the previously created document elements
  let runButton = document.getElementById(`qwebr-button-run-${qwebrCounter}`);
  let resetButton = document.getElementById(`qwebr-button-reset-${qwebrCounter}`);
  let copyButton = document.getElementById(`qwebr-button-copy-${qwebrCounter}`);
  let editorDiv = document.getElementById(`qwebr-editor-${qwebrCounter}`);

  // Load the Monaco Editor and create an instance
  let editor;
  require(['vs/editor/editor.main'], function () {
    editor = monaco.editor.create(editorDiv, {
      value: initialCode,
      language: 'r',
      theme: 'vs-light',
      automaticLayout: true,           // Works wonderfully with RevealJS
      scrollBeyondLastLine: false,
      minimap: {
        enabled: false
      },
      fontSize: qwebrScaledFontSize(editorDiv, qwebrOptions),         
      renderLineHighlight: "none",      // Disable current line highlighting
      hideCursorInOverviewRuler: true,  // Remove cursor indictor in right hand side scroll bar
      readOnly: qwebrOptions['read-only'] ?? false,
      quickSuggestions: qwebrOptions['editor-quick-suggestions'] ?? false,
      wordWrap: (qwebrOptions['editor-word-wrap'] == 'true' ? "on" : "off")
    });

    // Store the official counter ID to be used in keyboard shortcuts
    editor.__qwebrCounter = qwebrCounter;

    // Store the official div container ID
    editor.__qwebrEditorId = `qwebr-editor-${qwebrCounter}`;

    // Store the initial code value and options
    editor.__qwebrinitialCode = initialCode;
    editor.__qwebrOptions = qwebrOptions;

    // Set at the model level the preferred end of line (EOL) character to LF.
    // This prevent `\r\n` from being given to the webR engine if the user is on Windows.
    // See details in: https://github.com/coatless/quarto-webr/issues/94
    // Associated error text: 
    // Error: <text>:1:7 unexpected input

    // Retrieve the underlying model
    const model = editor.getModel();
    // Set EOL for the model
    model.setEOL(monaco.editor.EndOfLineSequence.LF);
    
    // Dynamically modify the height of the editor window if new lines are added.
    let ignoreEvent = false;
    const updateHeight = () => {
      // Increment editor height by 2 to prevent vertical scroll bar from appearing
      const contentHeight = editor.getContentHeight() + 2;

      // Retrieve editor-max-height option
      const maxEditorHeight = qwebrOptions['editor-max-height'];

      // If editor-max-height is missing, allow infinite growth. Otherwise, threshold.
      const editorHeight = !maxEditorHeight ?  contentHeight : Math.min(contentHeight, maxEditorHeight);

      // We're avoiding a width change
      //editorDiv.style.width = `${width}px`;
      editorDiv.style.height = `${editorHeight}px`;
      try {
        ignoreEvent = true;

        // The key to resizing is this call
        editor.layout();
      } finally {
        ignoreEvent = false;
      }
    };

    // Function to generate decorations to highlight lines
    // in the editor based on input string.
    function decoratorHighlightLines(codeLineNumbers) {
      // Store the lines to be lighlight
      let linesToHighlight = [];
      
      // Parse the codeLineNumbers string to get the line numbers to highlight
      // First, split the string by commas
      codeLineNumbers.split(',').forEach(part => {
        // Check if we have a range of lines
        if (part.includes('-')) {
            // Handle range of lines (e.g., "6-8")
            const [start, end] = part.split('-').map(Number);
            for (let i = start; i <= end; i++) {
                linesToHighlight.push(i);
            }
        } else {
            // Handle single line (e.g., "7")
            linesToHighlight.push(Number(part));
        }
      });
  
      // Create monaco decorations for the lines to highlight
      const decorations = linesToHighlight.map(lineNumber => ({
          range: new monaco.Range(lineNumber, 1, lineNumber, 1),
          options: {
              isWholeLine: true,
              className: 'qwebr-editor-highlight-line'
          }
      }));
  
      // Return decorations to be applied to the editor
      return decorations;
    }

    // Ensure that the editor-code-line-numbers option is set and valid
    // then apply styling
    if (qwebrOptions['editor-code-line-numbers']) {
      // Remove all whitespace from the string
      const codeLineNumbers = qwebrOptions['editor-code-line-numbers'].replace(/\s/g,'');
      // Check if the string is valid for line numbers, e.g., "1,3-5,7"
      if (isValidCodeLineNumbers(codeLineNumbers)) {
        // Apply the decorations to the editor
        editor.createDecorationsCollection(decoratorHighlightLines(codeLineNumbers));
      } else {
        // Warn the user that the input is invalid
        console.warn(`Invalid "editor-code-line-numbers" value in code cell ${qwebrOptions['label']}: ${codeLineNumbers}`);
      }
    }

    // Helper function to check if selected text is empty
    function isEmptyCodeText(selectedCodeText) {
      return (selectedCodeText === null || selectedCodeText === undefined || selectedCodeText === "");
    }

    // Registry of keyboard shortcuts that should be re-added to each editor window
    // when focus changes.
    const addWebRKeyboardShortCutCommands = () => {
      // Add a keydown event listener for Shift+Enter to run all code in cell
      editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {

        // Retrieve all text inside the editor
        qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter, editor.__qwebrOptions);
      });

      // Add a keydown event listener for CMD/Ctrl+Enter to run selected code
      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Enter, () => {

        // Get the selected text from the editor
        const selectedText = editor.getModel().getValueInRange(editor.getSelection());
        // Check if no code is selected
        if (isEmptyCodeText(selectedText)) {
          // Obtain the current cursor position
          let currentPosition = editor.getPosition();
          // Retrieve the current line content
          let currentLine = editor.getModel().getLineContent(currentPosition.lineNumber);

          // Propose a new position to move the cursor to
          let newPosition = new monaco.Position(currentPosition.lineNumber + 1, 1);

          // Check if the new position is beyond the last line of the editor
          if (newPosition.lineNumber > editor.getModel().getLineCount()) {
            // Add a new line at the end of the editor
            editor.executeEdits("addNewLine", [{
            range: new monaco.Range(newPosition.lineNumber, 1, newPosition.lineNumber, 1),
            text: "\n", 
            forceMoveMarkers: true,
            }]);
          }
          
          // Run the entire line of code.
          qwebrExecuteCode(currentLine, editor.__qwebrCounter, editor.__qwebrOptions);

          // Move cursor to new position
          editor.setPosition(newPosition);
        } else {
          // Code to run when Ctrl+Enter is pressed with selected code
          qwebrExecuteCode(selectedText, editor.__qwebrCounter, editor.__qwebrOptions);
        }
      });
    }

    // Register an on focus event handler for when a code cell is selected to update
    // what keyboard shortcut commands should work.
    // This is a workaround to fix a regression that happened with multiple
    // editor windows since Monaco 0.32.0 
    // https://github.com/microsoft/monaco-editor/issues/2947
    editor.onDidFocusEditorText(addWebRKeyboardShortCutCommands);

    // Register an on change event for when new code is added to the editor window
    editor.onDidContentSizeChange(updateHeight);

    // Manually re-update height to account for the content we inserted into the call
    updateHeight();

    // Store the editor instance in the global dictionary
    qwebrEditorInstances[editor.__qwebrCounter] = editor;

  });

  // Add a click event listener to the run button
  runButton.onclick = function () {
    qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter, editor.__qwebrOptions);
  };

  // Add a click event listener to the reset button
  copyButton.onclick = function () {
    // Retrieve current code data
    const data = editor.getValue();
    
    // Write code data onto the clipboard.
    navigator.clipboard.writeText(data || "");
  };
  
  // Add a click event listener to the copy button
  resetButton.onclick = function () {
    editor.setValue(editor.__qwebrinitialCode);
  };
  
}
</script><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">
<span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Event Studies</span>
</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div id="qwebr-insertion-location-1"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Eine <em>Event Study</em> ist ein empirischer Ansatz, um die Auswirkungen von zufÃ¤lligen Ereignissen oder bestimmen Interventionen auf eine Outcome-Variable zu messen. Die zentrale Annahme hierbei ist, dass das untersuchte Ereignis exogen ist, also als ein â€˜natÃ¼rlicherâ€™ Schock wirkt: Die Intervention lÃ¶st eine Reaktion in der Outcome-Variable aus, ist jedoch unabhÃ¤ngig von anderen unbeobachtbaren Determinanten der Outcome-Variable, sodass Backdoors vermieden werden. Ist diese Annahme gegeben, so kann eine Event Study den kausalen Effekt einer Intervention vergleichsweise einfach ermitteln, indem Ã¼berprÃ¼ft wird, ob und wie stark die Outcome-Variable im Zeitraum nahe des Ereignis reagiert. Letzteres erfolgt hÃ¤ufig durch eine Analyse der durch das Event verursachten Variation in der Outcome-Variable mit einem Ã¶konometrischen Modell.</p>
<section id="counterfactuals-und-regression" class="level2 page-columns page-full" data-number="9.1"><h2 data-number="9.1" class="anchored" data-anchor-id="counterfactuals-und-regression">
<span class="header-section-number">9.1</span> Counterfactuals und Regression</h2>
<p>Event Studies sind hilfreich, weil sie die Identifizierung kausaler ZusammenhÃ¤nge in komplexen Situationen mit vielen potentiellen (unbeobachtbaren) Backdoor-Variablen ermÃ¶glichen kÃ¶nnen. Durch die Fokussierung auf einen klar definierten Zeitraum um das Ereignis und die Anwendung zusÃ¤tzlicher Kontrollmechanismen (Regression) kann der interessierende Effekt oftmals plausibel identifiziert werden.</p>
<p>FÃ¼r die SchÃ¤tzug des Behandlungseffekts ist es nÃ¶tig, einen plausiblen (kontrafaktischen) Vergleichswert fÃ¼r die nach der Intervention beobachteten Werte der Outcome-Variable zu finden. Hierbei gibt es drei wesentliche Vorgehensweisen:</p>
<ol type="1">
<li><p><strong>Durschnittlichen Entwicklung als Counterfactual</strong>: Hierbei werden Mittelwerte der Outcome Variable vor und nach der Intervention vergleichen. Diese Methode ignoriert mÃ¶gliche Zeiteffekte in der Outcome-Variable und sollte nur fÃ¼r kleine ZeitrÃ¤ume vor und nach der Intervention angewendet werden.</p></li>
<li><p><strong>Vorhersage mit Vor-Event-Daten</strong>: Modelliere die Outcome-Variable basierend auf Daten <em>vor</em> dem Event und erhalte Vorhersagen fÃ¼r Perioden (unmittelbar) <em>nach</em> dem Event.</p></li>
<li><p><strong>Vorhersage mit Nach-Event-Daten</strong>: Modelliere die Outcome basierend auf Daten <em>vor</em> dem Event unter BerÃ¼cksichtigung weiterer Regressoren. Erhalte Vorhersagen fÃ¼r Perioden (unmittelbar) <em>nach</em> dem Event unter Einbezug der <em>nach</em> dem Event beobachteten Regressor-Werte.</p></li>
</ol>
<p>In vielem polit-Ã¶konomischen Anwendungen ist es plausibel, dass eine Intervention einen lÃ¤ngerfristigen (konstanten) Effekt hat. In solchen FÃ¤llen kann ein Interkationsmodell<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> geschÃ¤tzt werden: <span class="math display">\[\begin{align}
  Y_t = \beta_0 + \beta_1 t + \beta_2 \textup{post}_t + \beta_3 \cdot t \cdot \textup{post}_t + \epsilon_t.\label{eq:eslinint}
\end{align}\]</span> Hier ist <span class="math inline">\(t\)</span> die Zeit-Variable und <span class="math inline">\(\textup{post}_t\)</span> ein Dummy-Regressor fÃ¼r Perioden <em>nach</em> dem Event. Die Regression <span class="math inline">\(\eqref{eq:eslinint}\)</span> modelliert also einen linearen Trend in der Outcome-Variable <span class="math inline">\(Y\)</span>, der sich vor und nach dem Event unterscheiden kann. Eine SchÃ¤tzung mit Regressions ist auÃŸerdem hilfreich, weil fÃ¼r beobachtbare Determinanten von <span class="math inline">\(Y\)</span>, die mÃ¶glicherweise durch das Event beeinflusst werden, kontrolliert werden kann. Solche â€œrobustenâ€ Spezifikationen erhÃ¶hen die plausibilitÃ¤t der Identifikationsstrategie und kÃ¶nnen eine prÃ¤zisere SchÃ¤tzung des Behandlungseffekts gewÃ¤hrleisten.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Der Ansatz <span class="math inline">\(\eqref{eq:eslinint}\)</span> wird auch als <em>segmentierte Regression</em> bezeichnet.</p></div></div><p>Modell <span class="math inline">\(\eqref{eq:eslinint}\)</span> kann leicht auf Panel-Daten erweitert werden, wobei die zusÃ¤tzliche Information aus der Querschnittsdimension die SchÃ¤tzung eines zeitlichen Verlaufs des Interventionseffekts ermÃ¶glicht. Bei VerfÃ¼gbarkeit kÃ¶nnen Beobachtungseinheiten, die nicht von der Intervention betroffen sind als Counterfactuals herangezogen werden. Wir betrachten die Anwendung einer Event-Study-Methodik mit Panel-Daten-Modellen in der Case Study in <a href="#sec-deterrance" class="quarto-xref"><span>Kapitel 9.3</span></a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Facts zu Event Studies
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Eine Event Study misst Auswirkungen eines Ereignisses oder Interventionen auf eine Ã¼ber mehrere Perioden beobachtete Outcome-Variable.</p></li>
<li><p>Ziel ist die SchÃ¤tzung des kausalen Effekt der Intervention durch die Analyse der beobachteten Variation in der Outcome-Variable Ã¼ber die Zeit, meist fÃ¼r Zeitpunkte nahe des Events.</p></li>
<li><p>Annahme: Das Event ist exogen. In empirischen Studien werden hÃ¤ufig quasi-experimentelle Forschungsdesigns verwendet (Events sind natÃ¼rliche Schocks).</p></li>
<li><p>Regressionsmodelle kÃ¶nnen genutzt werden, um den Effekt der Intervention Ã¼ber die Zeit zu schÃ¤tzen. Hierbei gewÃ¤hrleistet die Kontrolle fÃ¼r potentielle Confounder die Robustheit und PrÃ¤zision der SchÃ¤tzung des interessierenden Effekts.</p></li>
</ul>
</div>
</div>
</section><section id="beispiel-strukturbruch-in-zeitreihe" class="level2" data-number="9.2"><h2 data-number="9.2" class="anchored" data-anchor-id="beispiel-strukturbruch-in-zeitreihe">
<span class="header-section-number">9.2</span> Beispiel: Strukturbruch in Zeitreihe</h2>
<p>Zur Illustration der Methodik simulieren wir Zeitreihendaten mit einem durch ein Ereignis in der Mitte des Beobachtungszeitraums ausgelÃ¶sten Strukturbruch im Erwartungswert (der kausale Effekt des Events). Wir interessieren uns fÃ¼r den Effekt des Events auf die Variablen <span class="math inline">\(X_t\)</span> und <span class="math inline">\(Y_t\)</span>.</p>
<p>Der hierfÃ¼r verwendete DGP lautet <span class="math display">\[\begin{align*}
  X_t = &amp;\, \alpha_1 \textup{post}_t + \epsilon_t,\\
  \\
  Y_t = &amp;\, \beta_1 X_t + \beta_2 \textup{post}_t + \varepsilon_t,
\end{align*}\]</span> fÃ¼r <span class="math inline">\(t=1,\dots,n\)</span> mit <span class="math inline">\(\epsilon_t,\ \varepsilon_t \sim\,u.i.v. N(0,1)\)</span>. Der Dummy-Regressor <span class="math inline">\(\textup{post}_t\)</span> ist definiert als <span class="math display">\[\begin{align*}
  \textup{post}_t =
  \begin{cases}
     1 \ \ \textup{fÃ¼r}  &amp;t &gt; t_\textup{Event},\\
     0 \ \ &amp;\textup{sonst}
  \end{cases}
\end{align*}\]</span> wobei <span class="math inline">\(t_\textup{Event} = \lfloor n/2 \rfloor\)</span>. FÃ¼r den Effekt des Events auf <span class="math inline">\(X_t\)</span> und <span class="math inline">\(Y_t\)</span> wÃ¤hlen wir <span class="math inline">\(\alpha_1 = 2\)</span> und <span class="math inline">\(\beta_2 = 2\)</span>. Weiterhin ist <span class="math inline">\(\beta_1 = .75\)</span>. Wir generieren beide Zeitreihen fÃ¼r <span class="math inline">\(n=200\)</span> Perioden.</p>
<p>Beachte das <span class="math inline">\(X_t\)</span> ein <em>Confounder</em> bei der Ermittlung des Effekts auf <span class="math inline">\(Y_t\)</span> ist: Das Event zum Zeitpunkt <span class="math inline">\(t=100\)</span> hat einen kausalen Effekt von <span class="math inline">\(\alpha_1 = \beta_2 = 2\)</span> auf <em>beide</em> Variablen. Da <span class="math inline">\(X_t\)</span> einen Einfluss von <span class="math inline">\(\beta_1\cdot X_t = .75\cdot X_t\)</span> auf <span class="math inline">\(Y_t\)</span> hat, mÃ¼ssen wir fÃ¼r <span class="math inline">\(X_t\)</span> kontrollieren, um die back door durch <span class="math inline">\(X_t\)</span> zu schlieÃŸen. FÃ¼r <span class="math inline">\(X_t\)</span> hingegen ist der Event-Regressor <span class="math inline">\(\textup{post}_t\)</span> exogen.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/">cowplot</a></span><span class="op">)</span></span>
<span><span class="co"># Daten simulieren</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Parameter der Simulation</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">200</span>  <span class="co"># Anzahl der Beobachtungen</span></span>
<span><span class="va">t_event</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">n</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span>  <span class="co"># Zeitpunkt des Ereignisses</span></span>
<span><span class="va">effect_size</span> <span class="op">&lt;-</span> <span class="fl">2</span>  <span class="co"># GrÃ¶ÃŸe des Effekts nach dem Ereignis</span></span>
<span></span>
<span><span class="co"># Zeitindex</span></span>
<span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span></span>
<span></span>
<span><span class="co"># X generieren </span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>  test <span class="op">=</span> <span class="va">time</span> <span class="op">&lt;=</span> <span class="va">t_event</span>, </span>
<span>  yes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, </span>
<span>  no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="va">effect_size</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Y generieren</span></span>
<span><span class="va">pre_event_mean</span> <span class="op">&lt;-</span> <span class="fl">.75</span> <span class="op">*</span> <span class="va">x</span></span>
<span><span class="va">post_event_mean</span> <span class="op">&lt;-</span> <span class="va">pre_event_mean</span> <span class="op">+</span> <span class="va">effect_size</span></span>
<span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>  test <span class="op">=</span> <span class="va">time</span> <span class="op">&lt;=</span> <span class="va">t_event</span>, </span>
<span>  yes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="va">pre_event_mean</span><span class="op">)</span>, </span>
<span>  no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="va">post_event_mean</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ZusammenfÃ¼hren der Daten</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  time <span class="op">=</span> <span class="va">time</span>, </span>
<span>  x <span class="op">=</span> <span class="va">x</span>,</span>
<span>  y <span class="op">=</span> <span class="va">y</span>, </span>
<span>  <span class="co"># Event bei t_event</span></span>
<span>  post <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>    test <span class="op">=</span> <span class="va">time</span> <span class="op">&gt;</span> <span class="va">t_event</span>, </span>
<span>    yes <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>    no <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ãœberblick</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 Ã— 4
   time       x       y post 
  &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt;
1     1 -0.560  -0.494  FALSE
2     2 -0.230  -1.34   FALSE
3     3  1.56    0.534  FALSE
4     4  0.0705  0.0240 FALSE
5     5  0.129   0.768  FALSE
6     6  1.72   -0.364  FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Plotten der Zielvariable und Regressor</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">y</span>, linetype <span class="op">=</span> <span class="st">"Outcome-Variable"</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">t_event</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">x</span>, linetype <span class="op">=</span> <span class="st">"Regressor"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Zeit"</span>, y <span class="op">=</span> <span class="st">"Wert"</span>, color <span class="op">=</span> <span class="st">"Legende"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_linetype.html">scale_linetype_discrete</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/theme_cowplot.html">theme_cowplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="EventStudies_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="event-study-schÃ¤tzung-kausaler-effekt-fÃ¼r-x_t" class="level3" data-number="9.2.1"><h3 data-number="9.2.1" class="anchored" data-anchor-id="event-study-schÃ¤tzung-kausaler-effekt-fÃ¼r-x_t">
<span class="header-section-number">9.2.1</span> Event-Study-SchÃ¤tzung: Kausaler Effekt fÃ¼r <span class="math inline">\(X_t\)</span>
</h3>
<p>Wir schÃ¤tzen zunÃ¤chst den Effekt des Events auf <span class="math inline">\(X_t\)</span>. Die Differenz der Mittelwerte nach und vor des Events ist ein erwartungstreuer und konistenter SchÃ¤tzer fÃ¼r <span class="math inline">\(\alpha_1\)</span>. Dieser SchÃ¤tzer ist Ã¤quivalent zum KQ-SchÃ¤tzer von <span class="math inline">\(\alpha_1\)</span> im Modell <span class="math display">\[\begin{align}
  X_t = \alpha_1 \textup{post}_t + u.
\end{align}\]</span></p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Effekt-SchÃ¤tzung fÃ¼r X</span></span>
<span></span>
<span><span class="co"># Post-mean vs. Pre-Mean</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">post</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>x_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">x_mean</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.873371</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># ...ist Ã¤quivalent zum KQ-SchÃ¤tzer</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">x</span> <span class="op">~</span> <span class="va">post</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = x ~ post, data = data)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.42968 -0.64741  0.01173  0.69143  2.60768 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.09041    0.09778   0.925    0.356    
postTRUE     1.87337    0.13829  13.547   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.9778 on 198 degrees of freedom
Multiple R-squared:  0.481, Adjusted R-squared:  0.4784 
F-statistic: 183.5 on 1 and 198 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section><section id="event-study-schÃ¤tzung-kausaler-effekt-fÃ¼r-y_t" class="level3" data-number="9.2.2"><h3 data-number="9.2.2" class="anchored" data-anchor-id="event-study-schÃ¤tzung-kausaler-effekt-fÃ¼r-y_t">
<span class="header-section-number">9.2.2</span> Event-Study-SchÃ¤tzung: Kausaler Effekt fÃ¼r <span class="math inline">\(Y_t\)</span>
</h3>
<p>FÃ¼r die SchÃ¤tzung von <span class="math inline">\(\beta_2\)</span> liefert diese Vorgehensweise einen verzerrten SchÃ¤tzer des kausalen Effekts des Events auf <span class="math inline">\(Y_t\)</span>.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Verzerrte Effekt-SchÃ¤tzung fÃ¼r Y</span></span>
<span><span class="co"># Post-mean vs. Pre-Mean</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">post</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>y_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">y_mean</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.405051</code></pre>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># ...ist Ã¤quivalent zum KQ-SchÃ¤tzer</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">post</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ post, data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-3.9658 -0.8354  0.0923  0.8565  3.5575 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   0.1737     0.1241    1.40    0.163    
postTRUE      3.4051     0.1754   19.41   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.241 on 198 degrees of freedom
Multiple R-squared:  0.6555,    Adjusted R-squared:  0.6537 
F-statistic: 376.7 on 1 and 198 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>Eine bessere Alternative ist die SchÃ¤tzung des Effekts anhand der Vorhersage von <span class="math inline">\(Y_t\)</span> durch <span class="math inline">\(X_t\)</span> fÃ¼r Beobachtungen von <span class="math inline">\(X_t\)</span> <em>nach</em> dem Event. HierfÃ¼r schÃ¤tzen wir das Modell <span class="math display">\[\begin{align}
  Y_t = \beta_0 + \beta_1 X_t + e_t\label{eq:xpredy}
\end{align}\]</span> mit Beobachtungen <em>vor</em> dem Event und berechnen vorhergesagte Werte <span class="math inline">\(\widehat{Y}_t\)</span> mit Beobachtungen <span class="math inline">\(X_t\)</span> <em>nach</em> dem Event.</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Modell zur Vorhersage von Y mit X</span></span>
<span><span class="va">model_pre_event</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, </span>
<span>  <span class="co"># Beobachtungen vor dem Ereignis</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">post</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Vorhersage von Y mit X</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    predicted <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span></span>
<span>      object <span class="op">=</span> <span class="va">model_pre_event</span>, </span>
<span>      newdata <span class="op">=</span> <span class="va">data</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die nachfolgende Grafik zeigt die mit <span class="math inline">\(X_t\)</span> vorhergesagte Entwicklung von <span class="math inline">\(Y_t\)</span> nach dem Event.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Vorhersage von Y und X plotten</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">y</span>, color <span class="op">=</span> <span class="st">"Outcome Y"</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">t_event</span>, color <span class="op">=</span> <span class="st">"red"</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">post</span><span class="op">)</span>, </span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">predicted</span>, color <span class="op">=</span> <span class="st">"Counterfactual Y"</span><span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Zeit"</span>, y <span class="op">=</span> <span class="st">"Zielvariable"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span></span>
<span>    <span class="st">""</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Outcome Y"</span> <span class="op">=</span> <span class="st">"black"</span>, </span>
<span>      <span class="st">"Counterfactual Y"</span> <span class="op">=</span> <span class="st">"steelblue"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/theme_cowplot.html">theme_cowplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="EventStudies_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ein SchÃ¤tzer des Effekts basierend auf dieser Vorhersage ist die Differenz zwischen dem mittleren beobachteten und vorhersagten Werten von <span class="math inline">\(Y_t\)</span> (counterfactual).</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># mean(Y) - mean(gesch. counterfactual)</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">post</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">predicted</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 Ã— 1
  effect
   &lt;dbl&gt;
1   2.39</code></pre>
</div>
</div>
<p>Unter der Annahme, dass der kausale Effekt des Events langfristig (fÃ¼r sÃ¤mtliche Beobachtungen mit <span class="math inline">\(t&gt;t_\textup{Event}\)</span>) auf <span class="math inline">\(Y_t\)</span> wirkt, kÃ¶nnen wir <span class="math inline">\(\beta_2\)</span> effizienter mit einem Interaktionsmodell schÃ¤tzen. Hierbei vermeiden wir die Unsicherheit in den vorhergesagten Werten <span class="math inline">\(\widehat{Y}_t\)</span>, die aus der SchÃ¤tzung des Modells <span class="math inline">\(\eqref{eq:xpredy}\)</span> resultiert.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">post</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ x + post, data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.7683 -0.5012  0.1047  0.6146  2.5857 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.10575    0.10044   1.053    0.294    
x            0.75111    0.07284  10.311   &lt;2e-16 ***
postTRUE     1.99795    0.19675  10.155   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.002 on 197 degrees of freedom
Multiple R-squared:  0.7762,    Adjusted R-squared:  0.774 
F-statistic: 341.7 on 2 and 197 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section></section><section id="sec-deterrance" class="level2 page-columns page-full" data-number="9.3"><h2 data-number="9.3" class="anchored" data-anchor-id="sec-deterrance">
<span class="header-section-number">9.3</span> Case Study: Abschreckungseffekte durch Strafgesetzgebung</h2>
<p><span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> untersucht den Abschreckungseffekt drohender Inhaftierung fÃ¼r Straftaten anhand von Daten zu verschÃ¤rfter Strafgesetzgebung (â€œAdd-on lawsâ€) in den USA. Solche Gesetze erhÃ¶hen in der Regel die Strafen fÃ¼r Delikte, insbesondere wenn nachweiÃŸlich Schusswaffen verwendet werden. Die Studie nutzt eine Event-Study-Methodik, um die Auswirkungen dieser GesetzesÃ¤nderung auf die KriminalitÃ¤tsraten fÃ¼r verschiedene Straftaten zu analysieren. Dabei wird der Zeitpunkt der tatsÃ¤chlichen GesetzeseinfÃ¼hrung in verschiedenen US-Bundesstaaten herangezogen, um den kausalen Abschreckungseffekt einer drohenden GefÃ¤ngnisstrafe anhand von Statistiken in den unmittelbaren Folgeperioden zu isolieren.</p>
<section id="identifikationsstrategie" class="level3" data-number="9.3.1"><h3 data-number="9.3.1" class="anchored" data-anchor-id="identifikationsstrategie">
<span class="header-section-number">9.3.1</span> Identifikationsstrategie</h3>
<p>Der Fokus des Forschungsdesigns liegt auf der Unterscheidung zwischen zwei wesentlichen WirkungskanÃ¤len von verschÃ¤rften Strafgesetzen auf die KriminalitÃ¤tsrate:</p>
<ol type="1">
<li><p><strong>Abschreckungseffekt</strong>: Die Aussicht auf eine lÃ¤ngere Inhaftierung erzielt einen Abschreckungseffekt, der sich â€˜positivâ€™ auf die KriminalitÃ¤tsrate auswirkt (im Sinne einer verringerten KriminalitÃ¤t). Dies ist der vermutete (kausale) Effekt.</p></li>
<li><p><strong>Inhaftierungseffekt</strong>: Inhaftierte Individuen kÃ¶nnen keine Straftaten begehen und verringern daher die KriminalitÃ¤tsrate. Dieser Effekt ist insbesondere fÃ¼r Straftaten mit groÃŸer RÃ¼ckfÃ¤lligkeit plausibel (etwa BeschaffungskriminalitÃ¤t). FÃ¼r lÃ¤ngere Haftstrafen erwarten wir daher einen RÃ¼ckgang dieser KriminalitÃ¤tsraten nach der VerschÃ¤rfung der Gesetze.</p></li>
</ol>
<p>Der in 2. beschriebene Effekt der GesetzesverschÃ¤rfung kann sich erst <em>nach</em> der im Rahmen der alten Gesetzgebung verhÃ¤ngten durchschnitlichen Mindesthaftstrafe einstellen: Der verringernde Effekt auf die KriminalitÃ¤tsrate zeigt sich erst in den Daten, nachdem StraftÃ¤ter lÃ¤nger als gemÃ¤ÃŸ der alten Gesetzgebung Ã¼blich inhaftiert sind. RÃ¼ckgÃ¤nge der KriminalitÃ¤trate die in diesem Zeitraum unmittelbar nach der GesetztesverschÃ¤rfung gemessen werden, kÃ¶nnen also auf den Abschreckungseffekt zurÃ¼ckgefÃ¼hrt werden. Anhand von Statistiken zu verhÃ¤ngten Strafen fÃ¼r ÃœberfÃ¤lle mit Schusswaffen ermittelt <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> ein mittleres Mindest-StrafmaÃŸ von drei Jahren.</p>
<p>Die ExogenitÃ¤t der Verabschiedung von Add-On-Gesetzen wird in <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> wiefolgt begrÃ¼ndet: Obwohl die meisten Zusatzgesetze zu Schusswaffen in den 1970er Jahren erlassen wurden und es gemeinsame Trends in den KriminalitÃ¤sraten der Bundesstaaten gibt, sind <em>die genauen Zeitpunkte</em> der EinfÃ¼hrung solcher Gesetze aufgrund einer Vielzahl von Eigenheiten des politischen Prozesses in den Bundesstaaten weitgehend zufÃ¤llig. Die ExogenitÃ¤t ist plausibel, wenn wir (durch Regression) Backdoors aufgrund Bundesstaat-spezifischer (konstanter und zeit-variierender) Faktoren schlieÃŸen.</p>
</section><section id="replikation-mit-r" class="level3 page-columns page-full" data-number="9.3.2"><h3 data-number="9.3.2" class="anchored" data-anchor-id="replikation-mit-r">
<span class="header-section-number">9.3.2</span> Replikation mit R</h3>
<p>Der Datensatz <code>Abrams2012.dta</code> ist ein Auszug der Daten aus dem Replikationspaket <span class="citation" data-cites="Abrams2012data">(<a href="Literatur.html#ref-Abrams2012data" role="doc-biblioref">David S. Abrams 2012b</a>)</span>, welches <a href="https://www.openicpsr.org/openicpsr/project/113838/version/V1/view">hier</a> eingesehen werden kann. Die Daten liegen im STATA-Format <code>.dta</code> vor und kÃ¶nnen mit <code><a href="https://haven.tidyverse.org/reference/read_dta.html">haven::read_dta()</a></code> eingelesen werden.</p>
<div id="qwebr-insertion-location-2"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Die Beobachtungen (Zeilen) in <code>abrams</code> sind Kriminalstatistiken von staatlichen Rechtsberichterstattungsagenturen, die im Rahmen der <a href="https://www.fbi.gov/how-we-can-help-you/more-fbi-services-and-information/ucr">Uniform Crime Reports</a> des FBI landesweit fÃ¼r den Zeitraum 1965 bis 2002 zusammengetragen wurden. Eine ErlÃ¤uterung der verfÃ¼gbaren (ausschlieÃŸlich numerischen) Variablen erfolgt in <a href="#tbl-abrams2012vars" class="quarto-xref">Tabelle&nbsp;<span>9.1</span></a>.</p>
<div class="cell page-columns page-full">
<div id="tbl-abrams2012vars" class="cell quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><div aria-describedby="tbl-abrams2012vars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="buzrecfvki" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#buzrecfvki table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#buzrecfvki thead, #buzrecfvki tbody, #buzrecfvki tfoot, #buzrecfvki tr, #buzrecfvki td, #buzrecfvki th {
  border-style: none;
}

#buzrecfvki p {
  margin: 0;
  padding: 0;
}

#buzrecfvki .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #000000;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 80%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#buzrecfvki .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#buzrecfvki .gt_title {
  color: #000000;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#buzrecfvki .gt_subtitle {
  color: #000000;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#buzrecfvki .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#buzrecfvki .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#buzrecfvki .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#buzrecfvki .gt_col_heading {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 15px;
  padding-bottom: 16px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#buzrecfvki .gt_column_spanner_outer {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#buzrecfvki .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#buzrecfvki .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#buzrecfvki .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 15px;
  padding-bottom: 15px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#buzrecfvki .gt_spanner_row {
  border-bottom-style: hidden;
}

#buzrecfvki .gt_group_heading {
  padding-top: 20px;
  padding-bottom: 20px;
  padding-left: 5px;
  padding-right: 5px;
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#buzrecfvki .gt_empty_group_heading {
  padding: 0.5px;
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#buzrecfvki .gt_from_md > :first-child {
  margin-top: 0;
}

#buzrecfvki .gt_from_md > :last-child {
  margin-bottom: 0;
}

#buzrecfvki .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#buzrecfvki .gt_stub {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#buzrecfvki .gt_stub_row_group {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#buzrecfvki .gt_row_group_first td {
  border-top-width: 0px;
}

#buzrecfvki .gt_row_group_first th {
  border-top-width: 0px;
}

#buzrecfvki .gt_summary_row {
  color: #000000;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#buzrecfvki .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#buzrecfvki .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#buzrecfvki .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#buzrecfvki .gt_grand_summary_row {
  color: #000000;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#buzrecfvki .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#buzrecfvki .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#buzrecfvki .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#buzrecfvki .gt_table_body {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
}

#buzrecfvki .gt_footnotes {
  color: #000000;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#buzrecfvki .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#buzrecfvki .gt_sourcenotes {
  color: #000000;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#buzrecfvki .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#buzrecfvki .gt_left {
  text-align: left;
}

#buzrecfvki .gt_center {
  text-align: center;
}

#buzrecfvki .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#buzrecfvki .gt_font_normal {
  font-weight: normal;
}

#buzrecfvki .gt_font_bold {
  font-weight: bold;
}

#buzrecfvki .gt_font_italic {
  font-style: italic;
}

#buzrecfvki .gt_super {
  font-size: 65%;
}

#buzrecfvki .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#buzrecfvki .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#buzrecfvki .gt_indent_1 {
  text-indent: 5px;
}

#buzrecfvki .gt_indent_2 {
  text-indent: 10px;
}

#buzrecfvki .gt_indent_3 {
  text-indent: 15px;
}

#buzrecfvki .gt_indent_4 {
  text-indent: 20px;
}

#buzrecfvki .gt_indent_5 {
  text-indent: 25px;
}

#buzrecfvki .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#buzrecfvki div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="Variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Variable</th>
<th id="Beschreibung" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Beschreibung</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">pcralloffense</td>
<td class="gt_row gt_left" headers="Beschreibung">Pro-Kopf-KriminalitÃ¤tsrate</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">pcrrobgun</td>
<td class="gt_row gt_left" headers="Beschreibung">Pro-Kopf-Rate RaubÃ¼berfÃ¤lle mit Schusswaffen</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">pcrasltgun</td>
<td class="gt_row gt_left" headers="Beschreibung">Pro-Kopf-Rate Angriff mit Schusswaffen</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">pcrburgtot</td>
<td class="gt_row gt_left" headers="Beschreibung">Einbruch</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">pcrmurder</td>
<td class="gt_row gt_left" headers="Beschreibung">Mord</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">lnpcrrobgun</td>
<td class="gt_row gt_left" headers="Beschreibung">Log Pro-Kopf-Rate RaubÃ¼berfÃ¤lle mit Schusswaffen</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">FSTATE</td>
<td class="gt_row gt_left" headers="Beschreibung">Bundesstaat</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">year</td>
<td class="gt_row gt_left" headers="Beschreibung">Jahr</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">ymm</td>
<td class="gt_row gt_left" headers="Beschreibung">Gesetzliche Mindeststrafe in Kraft</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">relyr</td>
<td class="gt_row gt_left" headers="Beschreibung">Perioden rel. zur EinfÃ¼hrung von Add-On-Law</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">everaddon</td>
<td class="gt_row gt_left" headers="Beschreibung">Dummy: Jemals Add-on-Law?</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">yaddon</td>
<td class="gt_row gt_left" headers="Beschreibung">Dummy: 1 Jahr nach EinfÃ¼hrung Add-On-Law</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">twoyears_add</td>
<td class="gt_row gt_left" headers="Beschreibung">Dummy: 2 Jahre nach EinfÃ¼hrung Add-On-Law</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">threeyears_add</td>
<td class="gt_row gt_left" headers="Beschreibung">Dummy: 3 Jahre nach EinfÃ¼hrung Add-On-Law</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">dcpoverty</td>
<td class="gt_row gt_left" headers="Beschreibung">Armutsquote</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">dcunemp</td>
<td class="gt_row gt_left" headers="Beschreibung">Arbeitlosenquote</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">dcblack_per</td>
<td class="gt_row gt_left" headers="Beschreibung">BevÃ¶lkerungsstruktur</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">dcp15t17</td>
<td class="gt_row gt_left" headers="Beschreibung">Anteil 15 bis 17 JÃ¤hrige</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">dcp18t24</td>
<td class="gt_row gt_left" headers="Beschreibung">Anteil 18 bis 24 JÃ¤hrige</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">dcp25t34</td>
<td class="gt_row gt_left" headers="Beschreibung">Anteil 25 bis 34 JÃ¤hrige</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">dcpolice_per1</td>
<td class="gt_row gt_left" headers="Beschreibung">Anteil PolizeikrÃ¤fte an BevÃ¶lkerung</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">dcprison_per1</td>
<td class="gt_row gt_left" headers="Beschreibung">Anteil Inhaftierte an der BevÃ¶lkerung</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">post74</td>
<td class="gt_row gt_left" headers="Beschreibung">Dummy: Beobachtung nach 1974</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">statepop</td>
<td class="gt_row gt_left" headers="Beschreibung">BevÃ¶lkerung</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-tbl margin-caption" id="tbl-abrams2012vars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;9.1: <code>Abrams2012.dta</code> â€“ KriminalitÃ¤t in US-Bundesstaaten.
</figcaption></figure>
</div>
</div>
<p>Wir replizieren nachfolgend Kernergebnisse aus <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> hinsichtlich des Abschreckungseffekts von drohenden GefÃ¤ngnisstrafen auf die Begehung von RaubÃ¼berfÃ¤llen mit Schusswaffen.</p>
<p>FÃ¼r einen ersten Eindruck der Entwicklung von KriminalitÃ¤tsraten in US-Bundesstaaten, die Ã¼ber den Beobachutungszeitraum Add-On-Gesetze erlassen haben, berechnen wir zunÃ¤chst mit der Population (<code>statepop</code>) gewichtete Mittelwerte vor und nach der EinfÃ¼hrung dieser Gesetzte.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Hierzu verwenden wir eine Teilmenge des Panel-Datensatzes <code>abrams</code> mit Beobachtungen zu 7 Zeitpunkten vor sowie 6 Zeitpunkten nach dem Inkraftreten der GesetzesverschÃ¤rfung.</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;Die Mittelwerte hier und sÃ¤mtliche PunktschÃ¤tzer in den nachfolgenden Regressionen sind bevÃ¶lkerungsgewichtet, sodass Statistiken von BehÃ¶rden, die grÃ¶ÃŸere BevÃ¶lkerungsteile abdecken, einen grÃ¶ÃŸeren Einfluss auf die SchÃ¤tzung haben als BehÃ¶rden in Regionen mit kleinerer Population.</p></div></div><div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Datensatz fÃ¼r Vergleich mittlerer KriminalitÃ¤t vorbereiten</span></span>
<span><span class="va">abrams_t1</span> <span class="op">&lt;-</span> <span class="va">abrams</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    before <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>      <span class="va">relyr</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Danach"</span>,</span>
<span>      <span class="cn">T</span> <span class="op">~</span> <span class="st">"Bevor"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span></span>
<span>    `Angriff mit Schusswaffen` <span class="op">=</span> <span class="va">pcrasltgun</span>,</span>
<span>    `Einbruch` <span class="op">=</span> <span class="va">pcrburgtot</span>,</span>
<span>    `RaubÃ¼berfall mit Schusswaffe` <span class="op">=</span> <span class="va">pcrrobgun</span>,</span>
<span>    `Mord` <span class="op">=</span> <span class="va">pcrmurder</span></span>
<span>  <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>FÃ¼r die tabellarische Zusammenfassung nutzen wir <code><a href="https://modelsummary.com/man/datasummary.html">modelsummary::datasummary()</a></code>. Ãœber das Argument <code>formula</code> definieren wir die zu berechnenden Statistiken <code><a href="https://rdrr.io/pkg/diagis/man/weighted_mean.html">diagis::weighted_mean</a></code> und <code><a href="https://rdrr.io/pkg/diagis/man/weighted_se.html">diagis::weighted_se</a></code> fÃ¼r vier Kategorien von Delikten. Der Operator <code>*</code> bewirkt eine gruppierte Berechnung dieser Statistiken (gemÃ¤ÃŸ <code>before</code>).</p>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://modelsummary.com">modelsummary</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Tabellarische Zusammenfassung</span></span>
<span><span class="fu"><a href="https://modelsummary.com/man/datasummary.html">datasummary</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span></span>
<span>    <span class="va">`Angriff mit Schusswaffen`</span></span>
<span>  <span class="op">+</span> <span class="va">`Einbruch`</span></span>
<span>  <span class="op">+</span> <span class="va">`Mord`</span></span>
<span>  <span class="op">+</span> <span class="va">`RaubÃ¼berfall mit Schusswaffe`</span></span>
<span>  </span>
<span>  <span class="op">~</span> <span class="op">(</span><span class="fu"><a href="https://dmurdoch.github.io/tables/reference/RowFactor.html">Factor</a></span><span class="op">(</span><span class="va">before</span><span class="op">)</span> </span>
<span>     <span class="op">*</span> <span class="op">(</span></span>
<span>        <span class="op">(</span></span>
<span>          <span class="op">(</span><span class="va">mean</span> <span class="op">=</span> <span class="fu">diagis</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/diagis/man/weighted_mean.html">weighted_mean</a></span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">SE</span> <span class="op">=</span> <span class="fu">diagis</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/diagis/man/weighted_se.html">weighted_se</a></span><span class="op">)</span> </span>
<span>        <span class="op">)</span></span>
<span>        <span class="op">*</span> <span class="fu"><a href="https://dmurdoch.github.io/tables/reference/Arguments.html">Arguments</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span>, w <span class="op">=</span> <span class="va">statepop</span><span class="op">)</span></span>
<span>       <span class="op">)</span></span>
<span>     <span class="op">)</span>, </span>
<span>  </span>
<span>  data <span class="op">=</span> <span class="va">abrams_t1</span></span>
<span>  <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-abramssmmry" class="cell quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><div aria-describedby="tbl-abramssmmry-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
 

  
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>tinytable_mot3g5pvqakw7gtdn62w</title>
<style>
.table td.tinytable_css_neqnmqb7wlx4ciupjs8f, .table th.tinytable_css_neqnmqb7wlx4ciupjs8f {    border-bottom: solid 0.1em #d3d8dc; }
.table td.tinytable_css_kw8a0xaodudjns96lvah, .table th.tinytable_css_kw8a0xaodudjns96lvah {    text-align: center; }
.table td.tinytable_css_b62h5t5zssv0xe944g1q, .table th.tinytable_css_b62h5t5zssv0xe944g1q {    border-bottom: solid 0.05em #d3d8dc; }
.table td.tinytable_css_7qqorrceucalnbpjzrf1, .table th.tinytable_css_7qqorrceucalnbpjzrf1 {    text-align: left; }
.table td.tinytable_css_ict46fip99qstmk1miic, .table th.tinytable_css_ict46fip99qstmk1miic {    text-align: right; }
.table td.tinytable_css_w6pgvwz3rkmzhrubanta, .table th.tinytable_css_w6pgvwz3rkmzhrubanta {    text-align: right; }
.table td.tinytable_css_ngmx9359ir86nhn7fhso, .table th.tinytable_css_ngmx9359ir86nhn7fhso {    text-align: right; }
.table td.tinytable_css_f4m25oiabw76ey6cj8bd, .table th.tinytable_css_f4m25oiabw76ey6cj8bd {    text-align: right; }
.table td.tinytable_css_r8vzixbd9fx91k7wwenh, .table th.tinytable_css_r8vzixbd9fx91k7wwenh {    text-align: center; }
    </style>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script><div class="container">
      <table class="table table-borderless" id="tinytable_mot3g5pvqakw7gtdn62w" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
<thead>
<tr>
<th scope="col" align="center" colspan="1"> </th>
<th scope="col" align="center" colspan="2">Bevor</th>
<th scope="col" align="center" colspan="2">Danach</th>
</tr>
<tr>
<th scope="col"> </th>
                <th scope="col">mean</th>
                <th scope="col">SE</th>
                <th scope="col">mean</th>
                <th scope="col">SE</th>
              </tr>
</thead>
<tbody>
<tr>
<td>Angriff mit Schusswaffen    </td>
                  <td>108.50 </td>
                  <td>6.15 </td>
                  <td>98.13  </td>
                  <td>5.13 </td>
                </tr>
<tr>
<td>Einbruch                    </td>
                  <td>1760.60</td>
                  <td>44.36</td>
                  <td>1692.76</td>
                  <td>96.91</td>
                </tr>
<tr>
<td>Mord                        </td>
                  <td>15.77  </td>
                  <td>0.80 </td>
                  <td>13.21  </td>
                  <td>1.12 </td>
                </tr>
<tr>
<td>RaubÃ¼berfall mit Schusswaffe</td>
                  <td>218.59 </td>
                  <td>15.91</td>
                  <td>130.72 </td>
                  <td>7.93 </td>
                </tr>
</tbody>
</table>
</div>

    <script>
      function styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(i, j, css_id) {
        var table = document.getElementById("tinytable_mot3g5pvqakw7gtdn62w");
        table.rows[i].cells[j].classList.add(css_id);
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_mot3g5pvqakw7gtdn62w');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_tinytable_3p0ogkzg4s8u5uy8yhgc(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_mot3g5pvqakw7gtdn62w");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }

window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 0, 'tinytable_css_neqnmqb7wlx4ciupjs8f') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 1, 'tinytable_css_neqnmqb7wlx4ciupjs8f') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 2, 'tinytable_css_neqnmqb7wlx4ciupjs8f') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 3, 'tinytable_css_neqnmqb7wlx4ciupjs8f') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 4, 'tinytable_css_neqnmqb7wlx4ciupjs8f') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 0, 'tinytable_css_kw8a0xaodudjns96lvah') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 1, 'tinytable_css_kw8a0xaodudjns96lvah') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 2, 'tinytable_css_kw8a0xaodudjns96lvah') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 3, 'tinytable_css_kw8a0xaodudjns96lvah') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 4, 'tinytable_css_kw8a0xaodudjns96lvah') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 1, 'tinytable_css_b62h5t5zssv0xe944g1q') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 2, 'tinytable_css_b62h5t5zssv0xe944g1q') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 0, 'tinytable_css_7qqorrceucalnbpjzrf1') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 0, 'tinytable_css_7qqorrceucalnbpjzrf1') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(2, 0, 'tinytable_css_7qqorrceucalnbpjzrf1') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(3, 0, 'tinytable_css_7qqorrceucalnbpjzrf1') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(4, 0, 'tinytable_css_7qqorrceucalnbpjzrf1') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(5, 0, 'tinytable_css_7qqorrceucalnbpjzrf1') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 1, 'tinytable_css_ict46fip99qstmk1miic') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 1, 'tinytable_css_ict46fip99qstmk1miic') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(2, 1, 'tinytable_css_ict46fip99qstmk1miic') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(3, 1, 'tinytable_css_ict46fip99qstmk1miic') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(4, 1, 'tinytable_css_ict46fip99qstmk1miic') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(5, 1, 'tinytable_css_ict46fip99qstmk1miic') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 2, 'tinytable_css_w6pgvwz3rkmzhrubanta') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 2, 'tinytable_css_w6pgvwz3rkmzhrubanta') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(2, 2, 'tinytable_css_w6pgvwz3rkmzhrubanta') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(3, 2, 'tinytable_css_w6pgvwz3rkmzhrubanta') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(4, 2, 'tinytable_css_w6pgvwz3rkmzhrubanta') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(5, 2, 'tinytable_css_w6pgvwz3rkmzhrubanta') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 3, 'tinytable_css_ngmx9359ir86nhn7fhso') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 3, 'tinytable_css_ngmx9359ir86nhn7fhso') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(2, 3, 'tinytable_css_ngmx9359ir86nhn7fhso') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(3, 3, 'tinytable_css_ngmx9359ir86nhn7fhso') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(4, 3, 'tinytable_css_ngmx9359ir86nhn7fhso') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(5, 3, 'tinytable_css_ngmx9359ir86nhn7fhso') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 4, 'tinytable_css_f4m25oiabw76ey6cj8bd') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(1, 4, 'tinytable_css_f4m25oiabw76ey6cj8bd') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(2, 4, 'tinytable_css_f4m25oiabw76ey6cj8bd') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(3, 4, 'tinytable_css_f4m25oiabw76ey6cj8bd') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(4, 4, 'tinytable_css_f4m25oiabw76ey6cj8bd') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(5, 4, 'tinytable_css_f4m25oiabw76ey6cj8bd') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 0, 'tinytable_css_r8vzixbd9fx91k7wwenh') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 1, 'tinytable_css_r8vzixbd9fx91k7wwenh') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 2, 'tinytable_css_r8vzixbd9fx91k7wwenh') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 3, 'tinytable_css_r8vzixbd9fx91k7wwenh') })
window.addEventListener('load', function () { styleCell_tinytable_3p0ogkzg4s8u5uy8yhgc(0, 4, 'tinytable_css_r8vzixbd9fx91k7wwenh') })
    </script>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-tbl margin-caption" id="tbl-abramssmmry-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;9.2: Mittlere KriminalitÃ¤tsraten je 100k Einwohner vor und nach EinfÃ¼hrung strafverschÃ¤rfender Gesetze
</figcaption></figure>
</div>
</div>
<p><a href="#tbl-abramssmmry" class="quarto-xref">Tabelle&nbsp;<span>9.2</span></a> zeigt, dass es in den ZeitrÃ¤umen nach GesetzesverschÃ¤rfungen im Mittel zu einer Verringerung der betrachteten Pro-Kopf-KriminalitÃ¤tsraten kommt.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Da <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> sich auf die Analyse des Effekts auf Delikte unter Gebrauch von Schusswaffen fokussiert, berechnen wir weiterhin Trends in der allgemeinen Pro-Kopf-KriminalitÃ¤t (<code>pcralloffense</code>) und RaubÃ¼berfÃ¤lle mit Schusswaffen, (<code>pcrrobgun</code>). Wir unterscheiden hierbei zusÃ¤tzlich zwischen Bundesstaaten, die im Beobachtungszeitraum Add-On-Gesetzte verabschiedet haben (<code>everaddon</code>) und solchen ohne.</p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;<a href="#tbl-abramssmmry" class="quarto-xref">Tabelle&nbsp;<span>9.2</span></a> reproduziert Teilergebnisse von Tabelle 1 in <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span>.</p></div></div><div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Populationsgewichtete Trends berechnen</span></span>
<span><span class="va">plot_dat</span> <span class="op">&lt;-</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">select</span><span class="op">(</span></span>
<span>    <span class="va">year</span>, </span>
<span>    <span class="va">everaddon</span>, </span>
<span>    <span class="va">pcralloffense</span>, </span>
<span>    <span class="va">pcrrobgun</span>, </span>
<span>    <span class="va">statepop</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="co"># Skalierung fÃ¼r 2. Y-Achse</span></span>
<span>    pcrrobgun <span class="op">=</span> <span class="va">pcrrobgun</span> <span class="op">*</span> <span class="fl">33.3</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">rename</span><span class="op">(</span></span>
<span>    Schusswaffen <span class="op">=</span> <span class="va">pcrrobgun</span>, </span>
<span>    Gesamt <span class="op">=</span> <span class="va">pcralloffense</span>,</span>
<span>    AddOnGesetze <span class="op">=</span> <span class="va">everaddon</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="va">Schusswaffen</span><span class="op">:</span><span class="va">Gesamt</span>, </span>
<span>    names_to <span class="op">=</span> <span class="st">"Verbrechen"</span>, </span>
<span>    values_to <span class="op">=</span> <span class="st">"Wert"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span>, <span class="va">AddOnGesetze</span>, <span class="va">Verbrechen</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    AddOnGesetze <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">AddOnGesetze</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Gewichtete Mittelwerte</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    Wert <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html">weighted.mean</a></span><span class="op">(</span></span>
<span>      <span class="va">Wert</span>, </span>
<span>      w <span class="op">=</span> <span class="va">statepop</span>, </span>
<span>      na.rm <span class="op">=</span> <span class="cn">T</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wir plotten die berechneten Trends in <code>plot_dat</code> mit entsprechender Farbgebung mit <code>ggplot2()</code>. Das Ergebnis (<a href="#fig-abramstrends" class="quarto-xref">Abbildung&nbsp;<span>9.1</span></a>) ist eine Reproduktion von Abbildung 2 in <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span>.</p>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/">cowplot</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Trendverlauf plotten</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">plot_dat</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">year</span>, </span>
<span>    y <span class="op">=</span> <span class="va">Wert</span>, </span>
<span>    color <span class="op">=</span> <span class="va">Verbrechen</span>, </span>
<span>    lty <span class="op">=</span> <span class="va">AddOnGesetze</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Gesamte Anzeigen / 100k Einw."</span>,</span>
<span>    sec.axis <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html">sec_axis</a></span><span class="op">(</span></span>
<span>      transform <span class="op">=</span> <span class="op">~</span> <span class="va">.</span> <span class="op">/</span> <span class="fl">33.3</span>, </span>
<span>      name <span class="op">=</span> <span class="st">"RaubÃ¼berfÃ¤lle Schusswaffen / 100k Einw."</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/theme_cowplot.html">theme_cowplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>, </span>
<span>    axis.title.y.left <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#F8766D"</span><span class="op">)</span>,</span>
<span>    axis.title.y.right <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#00BFC4"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-abramstrends" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-abramstrends-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="EventStudies_files/figure-html/fig-abramstrends-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-abramstrends-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;9.1: Populations-gewichtete mittlere Pro-Kopf-KriminalitÃ¤tsraten fÃ¼r US-Bundesstaaten (1965â€“2002)
</figcaption></figure>
</div>
</div>
</div>
<p><a href="#fig-abramstrends" class="quarto-xref">Abbildung&nbsp;<span>9.1</span></a> zeigt einen starken Anstieg der KriminalitÃ¤t in den 1960er und 1970er Jahren, insbesondere fÃ¼r RabÃ¼berfÃ¤lle mit Schusswaffen. Weiterhin sind die Trends in Staaten mit und ohne Zusatzstrafen deutlich korreliert. Die Entwicklung der Pro-Kopf-KriminalitÃ¤t insgesamt schwÃ¤cht sich anschlieÃŸend ab und folgt ab den 1990er Jahren einem rÃ¼cklÃ¤ufigen Trend. Es ist auffÃ¤llig, dass sowohl die bewaffneten RaubÃ¼berfÃ¤lle als auch die allgemeine KriminalitÃ¤t zu Beginn des Beobachtungszeitraums fÃ¼r Staaten mit Add-on-Gesetzen hÃ¶her sind, sich dies aber im letzten Jahrzehnt ebenfalls umkehrt. Wie in <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> erlÃ¤utert, kÃ¶nnte dies sowohl auf verschÃ¤fte Gesetze als auch auf Variation zwischen den Bundesstaaten zurÃ¼ckzufÃ¼hren sein. Statistische Verfahren zur SchÃ¤tzung des Effekts also sollten zwischen diesen MÃ¶glichkeiten unterscheiden kÃ¶nnen, bspw. durch die Kontrolle fÃ¼r Fixed Effects und Zeit-Trends.</p>
<section id="basis-spezifikation" class="level4 page-columns page-full" data-number="9.3.2.1"><h4 data-number="9.3.2.1" class="anchored" data-anchor-id="basis-spezifikation">
<span class="header-section-number">9.3.2.1</span> Basis-Spezifikation</h4>
<p>Wir folgen <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> und schÃ¤tzen zunÃ¤chst eine Basis-Spezifikation fÃ¼r eine balancierte Teilstichprobe aus <code>abrams</code>. Hierbei werden lediglich Bundesstaaten mit Datenpunkten mindestens 7 Jahre vor und maximal 6 Jahre nach der EinfÃ¼hung eines Add-On-Gesetzes berÃ¼cksichtigt. Das Regressionsmodell ist <span class="math display">\[\begin{align}
  \log\textup{Rob}_{at} = \beta \textup{AddOn}^i_{st} + \lambda_s + \gamma_t + x_{st} + \epsilon_{at},\label{eq:abramsbase}
\end{align}\]</span> wobei <span class="math inline">\(\log\textup{Rob}_{at}\)</span> die logarithmierte Pro-Kopf-Rate fÃ¼r ÃœberfÃ¤lle mit Schusswaffe (<code>lnpcrrobgun</code>). <span class="math inline">\(\textup{AddOn}^i_{st}\)</span> ist eine Dummy-Variable die 1 ist fÃ¼r Beobachtungen des Bundesstaats <span class="math inline">\(s\)</span> in Jahr <span class="math inline">\(t\)</span>, wenn die EinfÃ¼hrung des Add-On-Gesetzes <span class="math inline">\(i\)</span> Jahre zurÃ¼ckliegt. Wir folgen <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> und betrachten Modelle mit <span class="math inline">\(i\in\{1,2,3\}\)</span>, d.h. wir unterscheiden zwischen Effekten bis zu drei Jahren (durchschnittliche Mindeststrafe nach alter Gesetzgebung) nach EinfÃ¼hrung eines Add-On-Gesetzes.</p>
<p><span class="math inline">\(\lambda_s\)</span> und <span class="math inline">\(\gamma_t\)</span> sind Fixed Effects fÃ¼r Bundesstaaten und Perioden. <span class="math inline">\(x_{st}\)</span> reprÃ¤sentiert alle Kontrollvariablen auf Bundesstaatenebene. Hierbei werden stets sÃ¤mtliche Variablen mit einer Bezeichnung beginnend mit <code>dc</code> berÃ¼cksichtigt, vgl. <a href="#tbl-abrams2012vars" class="quarto-xref">Tabelle&nbsp;<span>9.1</span></a>. Weiterhin wird mit <code>ymm</code> fÃ¼r den Effekt eines aktiven Gesetzes fÃ¼r eine Mindeststrafe kontrolliert.</p>
<p>Eine Erweiterung von <span class="math inline">\(\eqref{eq:abramsbase}\)</span> kontrolliert fÃ¼r Bundesstaat-spezifische Zeit-Trends<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> <span class="math inline">\(\omega_s\cdot t\)</span>, <span class="math display">\[\begin{align}
  \log\textup{Rob}_{at} = \beta \textup{AddOn}^i_{st} + \lambda_s + \gamma_t + \omega_s\cdot t + x_{st} + \epsilon_{at}.\label{eq:abramstrend}
\end{align}\]</span></p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;FÃ¼r die Implementierung in R wÃ¤hlen wir <span class="math inline">\(\omega_s = \beta_s \cdot D_s\)</span>, wobei <span class="math inline">\(\beta_s\)</span> der Trend-Koeffizient fÃ¼r Bundesstaat <span class="math inline">\(s\)</span> und <span class="math inline">\(D_s\)</span> ein Indikator fÃ¼r den Staat <span class="math inline">\(s\)</span> ist.</p></div></div><p>Anhand von <span class="math inline">\(\eqref{eq:abramstrend}\)</span> kontrollieren wir zusÃ¤tzlich fÃ¼r Ã¼ber die Zeit variierende Faktoren in <span class="math inline">\(\log\textup{Rob}_{at}\)</span> welche die Wahrscheinlichkeit einer Verabschiedung von Add-On in den jeweiligen Bundesstaaten beeinflussen. Diese Spezifikation ist also etwas konservativer als Modell <span class="math inline">\(\eqref{eq:abramsbase}\)</span>, da hier lediglich der Zeitpunkt der EinfÃ¼hrung der Gesetze exogen sein muss, siehe die Diskussion in Abschnitt II in <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span>.</p>
<p>FÃ¼r die komfortable SchÃ¤tzung von Modellen mit Fixed Effects und die Berechnung von cluster-robusten Standardfehlern (Clustering auf Bundesstaaten-Ebene) verwenden wir <code><a href="https://lrberge.github.io/fixest/reference/feols.html">fixest::feols()</a></code>, siehe <a href="FixedEffects.html" class="quarto-xref"><span>Kapitel 6</span></a> fÃ¼r Details zur SchÃ¤tzung von Panel-Daten-Modellen.</p>
<p>Aufgrund eine DiskontinuitÃ¤t in Daten fÃ¼r die Beobachtungen mehrerer Variablen im Jahr 1974 SchÃ¤tzen wir <span class="math inline">\(\eqref{eq:abramsbase}\)</span> und <span class="math inline">\(\eqref{eq:abramstrend}\)</span> jeweils zusÃ¤tzlich fÃ¼r Daten nach 1974. Insgesamt schÃ¤tzen wir also neun Modelle:</p>
<ul>
<li>Spezifikation <span class="math inline">\(\eqref{eq:abramsbase}\)</span>, jeweils einmal fÃ¼r <span class="math inline">\(i\in\{1,2,3\}\)</span>
</li>
<li>Spezifikation <span class="math inline">\(\eqref{eq:abramstrend}\)</span>, jeweils einmal fÃ¼r <span class="math inline">\(i\in\{1,2,3\}\)</span>
</li>
<li>Spezifikation <span class="math inline">\(\eqref{eq:abramstrend}\)</span>, jeweils einmal fÃ¼r <span class="math inline">\(i\in\{1,2,3\}\)</span> und fÃ¼r Beobachtungen mit <span class="math inline">\(t&gt;1974\)</span>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lrberge.github.io/fixest/">fixest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Basis-Spezifikation (1): 1 Jahr</span></span>
<span><span class="va">mod_basis_1J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>   <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span>   <span class="va">yaddon</span></span>
<span>   <span class="co"># Ges. Mindeststrafe?</span></span>
<span>   <span class="op">+</span> <span class="va">ymm</span></span>
<span>   <span class="co"># Kontrollvariablen</span></span>
<span>   <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>   <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>   <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>   <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>   <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>   <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>   <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>   <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>   <span class="co"># Fixed Effects</span></span>
<span>   <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>   data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>     <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span><span class="op">)</span>, </span>
<span>   weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>,</span>
<span>   vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_basis_1J</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,975
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 30
Standard-errors: Clustered (FSTATE) 
               Estimate Std. Error   t value  Pr(&gt;|t|)    
yaddon        -0.047700   0.030857 -1.545837 0.1357937    
ymm           -0.119297   0.098727 -1.208357 0.2391873    
dcpoverty     -0.038550   0.032352 -1.191557 0.2455858    
dcunemp       -0.031828   0.018550 -1.715780 0.0996445 .  
dcblack_per   -0.286705   0.080383 -3.566730 0.0016382 ** 
dcp15t17       0.117641   0.180309  0.652440 0.5205854    
dcp18t24      -0.132965   0.088240 -1.506851 0.1454617    
dcp25t34       0.104971   0.091479  1.147480 0.2629797    
dcpolice_per1 -0.003242   0.001738 -1.865732 0.0748846 .  
dcprison_per1 -0.000759   0.001088 -0.697450 0.4925122    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 480.2     Adj. R2: 0.164734
              Within R2: 0.014269</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Basis-Spezifikation (1): 2 Jahre</span></span>
<span><span class="va">mod_basis_2J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>   <span class="co"># Effekt 2 Jahre nach Add-on law              </span></span>
<span>   <span class="va">twoyears_add</span></span>
<span>   <span class="co"># Ges. Mindeststrafe?</span></span>
<span>   <span class="op">+</span> <span class="va">ymm</span></span>
<span>   <span class="co"># Kontrollvariablen</span></span>
<span>   <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>   <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>   <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>   <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>   <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>   <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>   <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>   <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>   <span class="co"># Fixed Effects</span></span>
<span>   <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>   data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>     <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span><span class="op">)</span>, </span>
<span>   weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>,</span>
<span>   vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_basis_2J</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,975
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 30
Standard-errors: Clustered (FSTATE) 
               Estimate Std. Error   t value  Pr(&gt;|t|)    
twoyears_add  -0.109812   0.033449 -3.282986 0.0032610 ** 
ymm           -0.098116   0.095971 -1.022343 0.3172519    
dcpoverty     -0.039720   0.031852 -1.247004 0.2249458    
dcunemp       -0.027034   0.018671 -1.447940 0.1611292    
dcblack_per   -0.287151   0.077470 -3.706630 0.0011622 ** 
dcp15t17       0.104298   0.177361  0.588054 0.5622266    
dcp18t24      -0.131530   0.085887 -1.531434 0.1393021    
dcp25t34       0.107675   0.092675  1.161865 0.2572057    
dcpolice_per1 -0.003150   0.001688 -1.865982 0.0748482 .  
dcprison_per1 -0.000812   0.001090 -0.745006 0.4638138    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 480.0     Adj. R2: 0.165212
              Within R2: 0.014833</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Basis-Spezifikation (1): 3 Jahre</span></span>
<span><span class="va">mod_basis_3J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>   <span class="co"># Effekt 2 Jahre nach Add-on law              </span></span>
<span>   <span class="va">threeyears_add</span></span>
<span>   <span class="co"># Ges. Mindeststrafe?</span></span>
<span>   <span class="op">+</span> <span class="va">ymm</span></span>
<span>   <span class="co"># Kontrollvariablen</span></span>
<span>   <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>   <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>   <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>   <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>   <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>   <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>   <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>   <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>   <span class="co"># Fixed Effects</span></span>
<span>   <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>   data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>     <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span><span class="op">)</span>, </span>
<span>   weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>,</span>
<span>   vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_basis_3J</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,975
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 30
Standard-errors: Clustered (FSTATE) 
                Estimate Std. Error   t value  Pr(&gt;|t|)    
threeyears_add -0.127331   0.040448 -3.148030 0.0045036 ** 
ymm            -0.095616   0.095467 -1.001551 0.3269818    
dcpoverty      -0.045294   0.031315 -1.446383 0.1615611    
dcunemp        -0.016640   0.018875 -0.881588 0.3871200    
dcblack_per    -0.285791   0.076026 -3.759110 0.0010212 ** 
dcp15t17        0.090905   0.172412  0.527256 0.6030654    
dcp18t24       -0.125009   0.083438 -1.498217 0.1476771    
dcp25t34        0.111274   0.094319  1.179770 0.2501510    
dcpolice_per1  -0.003071   0.001621 -1.894852 0.0707516 .  
dcprison_per1  -0.000955   0.001085 -0.879803 0.3880665    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 480.0     Adj. R2: 0.165456
              Within R2: 0.015121</code></pre>
</div>
</div>
<p>Vor der SchÃ¤tzung der Spezifikationen mit Trends transformieren wir <code>FSTATE</code> zu einer Variable des kategorischen Typs <code>factor</code>, damit Bundesstaat-spezifische Trends mit <code>FSTATE:year</code> Ã¼ber das Argument <code>fml</code> in <code><a href="https://lrberge.github.io/fixest/reference/feols.html">feols()</a></code> definiert werden kÃ¶nnen.</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># 'FSTATE' zu factor transformieren</span></span>
<span><span class="va">abrams</span> <span class="op">&lt;-</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    FSTATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">FSTATE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Spezifikation (2): 1 Jahr</span></span>
<span><span class="va">mod_trends_1J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>    fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>        <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span>        <span class="va">yaddon</span></span>
<span>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span>      <span class="op">+</span> <span class="va">ymm</span></span>
<span>        <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Trends: Bundesstaat</span></span>
<span>      <span class="op">+</span> <span class="va">FSTATE</span><span class="op">:</span><span class="va">year</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>      data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span><span class="op">)</span>, </span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>,</span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_trends_1J</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,975
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 30
Standard-errors: Clustered (FSTATE) 
               Estimate Std. Error   t value   Pr(&gt;|t|)    
yaddon        -0.022295   0.019188 -1.161916 2.5719e-01    
ymm           -0.127650   0.091537 -1.394509 1.7649e-01    
dcpoverty      0.021620   0.019026  1.136332 2.6752e-01    
dcunemp       -0.028313   0.012685 -2.232041 3.5641e-02 *  
dcblack_per   -0.093720   0.109882 -0.852918 4.0250e-01    
dcp15t17       0.046466   0.112684  0.412356 6.8390e-01    
dcp18t24      -0.070860   0.075561 -0.937793 3.5810e-01    
dcp25t34       0.382635   0.080705  4.741160 8.8739e-05 ***
dcpolice_per1 -0.001901   0.001714 -1.109019 2.7888e-01    
dcprison_per1 -0.002372   0.001363 -1.740044 9.5217e-02 .  
... 24 coefficients remaining
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 477.7     Adj. R2: 0.166344
              Within R2: 0.024278</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Spezifikation (2): 2 Jahre</span></span>
<span><span class="va">mod_trends_2J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>    fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>        <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span>        <span class="va">twoyears_add</span></span>
<span>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span>      <span class="op">+</span> <span class="va">ymm</span></span>
<span>        <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Trends: Bundesstaat</span></span>
<span>      <span class="op">+</span> <span class="va">FSTATE</span><span class="op">:</span><span class="va">year</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>      data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span><span class="op">)</span>, </span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>,</span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_trends_2J</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,975
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 30
Standard-errors: Clustered (FSTATE) 
               Estimate Std. Error   t value   Pr(&gt;|t|)    
twoyears_add  -0.078236   0.019048 -4.107316 4.3082e-04 ***
ymm           -0.105409   0.090612 -1.163301 2.5663e-01    
dcpoverty      0.019495   0.018733  1.040651 3.0885e-01    
dcunemp       -0.025263   0.013386 -1.887274 7.1808e-02 .  
dcblack_per   -0.110638   0.104057 -1.063240 2.9871e-01    
dcp15t17       0.053882   0.113732  0.473759 6.4014e-01    
dcp18t24      -0.064687   0.074996 -0.862542 3.9729e-01    
dcp25t34       0.388108   0.081850  4.741677 8.8625e-05 ***
dcpolice_per1 -0.001887   0.001611 -1.171315 2.5346e-01    
dcprison_per1 -0.002287   0.001365 -1.675131 1.0745e-01    
... 24 coefficients remaining
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 477.7     Adj. R2: 0.166579
              Within R2: 0.024552</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Spezifikation (2): 3 Jahre</span></span>
<span><span class="va">mod_trends_3J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>    fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>        <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span>        <span class="va">threeyears_add</span></span>
<span>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span>      <span class="op">+</span> <span class="va">ymm</span></span>
<span>        <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Trends: Bundesstaat</span></span>
<span>      <span class="op">+</span> <span class="va">FSTATE</span><span class="op">:</span><span class="va">year</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>      data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span><span class="op">)</span>, </span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>,</span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_trends_3J</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,975
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 30
Standard-errors: Clustered (FSTATE) 
                Estimate Std. Error   t value   Pr(&gt;|t|)    
threeyears_add -0.090290   0.024423 -3.696920 1.1903e-03 ** 
ymm            -0.102912   0.090398 -1.138435 2.6666e-01    
dcpoverty       0.009749   0.016776  0.581161 5.6678e-01    
dcunemp        -0.016103   0.013425 -1.199424 2.4257e-01    
dcblack_per    -0.125781   0.093385 -1.346908 1.9113e-01    
dcp15t17        0.058783   0.107066  0.549033 5.8827e-01    
dcp18t24       -0.057551   0.074109 -0.776579 4.4532e-01    
dcp25t34        0.395196   0.082790  4.773470 8.1882e-05 ***
dcpolice_per1  -0.001767   0.001525 -1.158920 2.5838e-01    
dcprison_per1  -0.002324   0.001380 -1.683925 1.0572e-01    
... 24 coefficients remaining
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 477.6     Adj. R2: 0.166659
              Within R2: 0.024646</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Spezifikation (2): 1 Jahr</span></span>
<span><span class="co"># Post 1974</span></span>
<span><span class="va">mod_trends_1J_post</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>        <span class="co"># Effekt 1 Jahr nach Add-on law</span></span>
<span>        <span class="va">yaddon</span></span>
<span>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span>      <span class="op">+</span> <span class="va">ymm</span></span>
<span>        <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Trends: Bundesstaat</span></span>
<span>      <span class="op">+</span> <span class="va">FSTATE</span><span class="op">:</span><span class="va">year</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>      data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span></span>
<span>          <span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span>, </span>
<span>          <span class="va">post74</span> <span class="op">==</span> <span class="fl">1</span></span>
<span>        <span class="op">)</span>, </span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>, </span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_trends_1J_post</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,234
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 25
Standard-errors: Clustered (FSTATE) 
               Estimate Std. Error   t value   Pr(&gt;|t|)    
yaddon        -0.012520   0.021549 -0.581025 5.6687e-01    
ymm           -0.099381   0.102139 -0.972996 3.4068e-01    
dcpoverty      0.026379   0.018485  1.427072 1.6700e-01    
dcunemp       -0.023182   0.019778 -1.172133 2.5314e-01    
dcblack_per    0.009251   0.141698  0.065288 9.4851e-01    
dcp15t17       0.695952   0.300633  2.314960 2.9889e-02 *  
dcp18t24      -0.038216   0.114322 -0.334287 7.4119e-01    
dcp25t34       0.425447   0.081624  5.212300 2.7592e-05 ***
dcpolice_per1 -0.001801   0.001954 -0.921672 3.6627e-01    
dcprison_per1 -0.002203   0.001437 -1.532561 1.3903e-01    
... 24 coefficients remaining
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 498.0     Adj. R2: 0.1559  
              Within R2: 0.020362</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Spezifikation (2): 2 Jahre</span></span>
<span><span class="co"># Post 1974</span></span>
<span><span class="va">mod_trends_2J_post</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>        <span class="co"># Effekt 1 Jahr nach Add-on law</span></span>
<span>        <span class="va">twoyears_add</span></span>
<span>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span>      <span class="op">+</span> <span class="va">ymm</span></span>
<span>        <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Trends: Bundesstaat</span></span>
<span>      <span class="op">+</span> <span class="va">FSTATE</span><span class="op">:</span><span class="va">year</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>      data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span></span>
<span>          <span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span>, </span>
<span>          <span class="va">post74</span> <span class="op">==</span> <span class="fl">1</span></span>
<span>        <span class="op">)</span>, </span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>, </span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_trends_2J_post</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,234
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 25
Standard-errors: Clustered (FSTATE) 
               Estimate Std. Error   t value   Pr(&gt;|t|)    
twoyears_add  -0.057761   0.021975 -2.628446 1.5020e-02 *  
ymm           -0.092985   0.103750 -0.896241 3.7941e-01    
dcpoverty      0.025632   0.018109  1.415400 1.7035e-01    
dcunemp       -0.022002   0.020771 -1.059252 3.0048e-01    
dcblack_per   -0.004794   0.137603 -0.034839 9.7251e-01    
dcp15t17       0.724109   0.299988  2.413794 2.4150e-02 *  
dcp18t24      -0.007445   0.118881 -0.062626 9.5061e-01    
dcp25t34       0.436252   0.086625  5.036094 4.2653e-05 ***
dcpolice_per1 -0.001837   0.001635 -1.123379 2.7287e-01    
dcprison_per1 -0.002027   0.001460 -1.388716 1.7822e-01    
... 24 coefficients remaining
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 498.0     Adj. R2: 0.156042
              Within R2: 0.020527</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Spezifikation (2): 3 Jahre</span></span>
<span><span class="co"># Post 1974</span></span>
<span><span class="va">mod_trends_3J_post</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>        <span class="co"># Effekt 1 Jahr nach Add-on law</span></span>
<span>        <span class="va">threeyears_add</span></span>
<span>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span>      <span class="op">+</span> <span class="va">ymm</span></span>
<span>        <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Trends: Bundesstaat</span></span>
<span>      <span class="op">+</span> <span class="va">FSTATE</span><span class="op">:</span><span class="va">year</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>      data <span class="op">=</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span></span>
<span>          <span class="va">relyr</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">relyr</span> <span class="op">&lt;=</span> <span class="fl">6</span>, </span>
<span>          <span class="va">post74</span> <span class="op">==</span> <span class="fl">1</span></span>
<span>        <span class="op">)</span>, </span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>, </span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod_trends_3J_post</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 2,234
Weights: statepop
Fixed-effects: FSTATE: 24,  year: 25
Standard-errors: Clustered (FSTATE) 
                Estimate Std. Error   t value   Pr(&gt;|t|)    
threeyears_add -0.054133   0.024312 -2.226590 3.6052e-02 *  
ymm            -0.096420   0.104109 -0.926147 3.6399e-01    
dcpoverty       0.019571   0.016847  1.161689 2.5728e-01    
dcunemp        -0.014320   0.018187 -0.787381 4.3910e-01    
dcblack_per    -0.017284   0.132031 -0.130910 8.9699e-01    
dcp15t17        0.695999   0.288290  2.414235 2.4127e-02 *  
dcp18t24       -0.003553   0.118611 -0.029952 9.7636e-01    
dcp25t34        0.445096   0.089471  4.974763 4.9655e-05 ***
dcpolice_per1  -0.001663   0.001610 -1.033066 3.1231e-01    
dcprison_per1  -0.002079   0.001462 -1.422004 1.6845e-01    
... 24 coefficients remaining
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 498.0     Adj. R2: 0.15601
              Within R2: 0.02049</code></pre>
</div>
</div>
<p>Wir fassen die Ergebnisse mit tabellarisch mit <code><a href="https://modelsummary.com/man/modelsummary.html">modelsummary::modelsummary()</a></code> zusammen. Hierzu sammeln wir die Modell-Objekte gemÃ¤ÃŸ der Struktur der zugrundeliegenden Spezifikation in benannten Listen und erzeugen eine nach dem Zeithorizont nach der EinfÃ¼hrung eines Add-On-Gesetzes gruppierte Tabelle. FÃ¼r eine bessere Ãœbersicht berÃ¼cksichtigen wir hierbei jeweils nur die Koeffizienten fÃ¼r den Zeitpunkt der GesetzesverschÃ¤rfung und die Dummyvariable fÃ¼r gesetzliche Mindeststrafen (<code>ymm</code>). Ãœber das Argument <code>coef_map</code> definieren wir entsprechende Labels fÃ¼r diese geschÃ¤tzten Koeffizienten.</p>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://modelsummary.com">modelsummary</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Modelle in benannten Listen sammeln</span></span>
<span><span class="va">panels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"1 Jahr nach Add-On"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"(1) Basis"</span> <span class="op">=</span> <span class="va">mod_basis_1J</span>,</span>
<span>    <span class="st">"(2) Trends"</span> <span class="op">=</span> <span class="va">mod_trends_1J</span>,</span>
<span>    <span class="st">"(2) Nach 74"</span> <span class="op">=</span> <span class="va">mod_trends_1J_post</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="st">"2 Jahre nach Add-On"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"(1) Basis"</span> <span class="op">=</span> <span class="va">mod_basis_2J</span>,</span>
<span>    <span class="st">"(2) Trends"</span> <span class="op">=</span> <span class="va">mod_trends_2J</span>,</span>
<span>    <span class="st">"(2) Nach 74"</span> <span class="op">=</span> <span class="va">mod_trends_2J_post</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="st">"3 Jahre nach Add-On"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"(1) Basis"</span> <span class="op">=</span> <span class="va">mod_basis_3J</span>,</span>
<span>    <span class="st">"(2) Trends"</span> <span class="op">=</span> <span class="va">mod_trends_3J</span>,</span>
<span>    <span class="st">"(2) Nach 74"</span> <span class="op">=</span> <span class="va">mod_trends_3J_post</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Tabellarische Zusammenfassung</span></span>
<span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="va">panels</span>,</span>
<span>  shape <span class="op">=</span> <span class="st">"rbind"</span>,</span>
<span>  coef_omit <span class="op">=</span> <span class="st">"^(?!.*(add|ymm)).*$"</span>,</span>
<span>  stars <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  gof_omit <span class="op">=</span> <span class="st">"^(?!(R2*)$).*"</span>,</span>
<span>  coef_map <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"yaddon"</span> <span class="op">=</span> <span class="st">"Add-On"</span>,</span>
<span>    <span class="st">"twoyears_add"</span> <span class="op">=</span> <span class="st">"Add-On"</span>,</span>
<span>    <span class="st">"threeyears_add"</span> <span class="op">=</span> <span class="st">"Add-On"</span>,</span>
<span>    <span class="st">"ymm"</span> <span class="op">=</span> <span class="st">"Mindeststrafe"</span></span>
<span>    <span class="op">)</span>,</span>
<span>  notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Abh. Var.: Log KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Schusswaffen"</span>, </span>
<span>    <span class="st">"Cluster-robuste Standardfehler: Bundesstaat"</span>,</span>
<span>    <span class="st">"Fixed Effects: Bundesstaat + Jahr"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"gt"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tabopts</span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-abramsbase" class="cell quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><div aria-describedby="tbl-abramsbase-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="xcpdgbndqs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xcpdgbndqs table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xcpdgbndqs thead, #xcpdgbndqs tbody, #xcpdgbndqs tfoot, #xcpdgbndqs tr, #xcpdgbndqs td, #xcpdgbndqs th {
  border-style: none;
}

#xcpdgbndqs p {
  margin: 0;
  padding: 0;
}

#xcpdgbndqs .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #000000;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 80%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xcpdgbndqs .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xcpdgbndqs .gt_title {
  color: #000000;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xcpdgbndqs .gt_subtitle {
  color: #000000;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xcpdgbndqs .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xcpdgbndqs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xcpdgbndqs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xcpdgbndqs .gt_col_heading {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 15px;
  padding-bottom: 16px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xcpdgbndqs .gt_column_spanner_outer {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xcpdgbndqs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xcpdgbndqs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xcpdgbndqs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 15px;
  padding-bottom: 15px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xcpdgbndqs .gt_spanner_row {
  border-bottom-style: hidden;
}

#xcpdgbndqs .gt_group_heading {
  padding-top: 20px;
  padding-bottom: 20px;
  padding-left: 5px;
  padding-right: 5px;
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xcpdgbndqs .gt_empty_group_heading {
  padding: 0.5px;
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xcpdgbndqs .gt_from_md > :first-child {
  margin-top: 0;
}

#xcpdgbndqs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xcpdgbndqs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xcpdgbndqs .gt_stub {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xcpdgbndqs .gt_stub_row_group {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xcpdgbndqs .gt_row_group_first td {
  border-top-width: 0px;
}

#xcpdgbndqs .gt_row_group_first th {
  border-top-width: 0px;
}

#xcpdgbndqs .gt_summary_row {
  color: #000000;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xcpdgbndqs .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xcpdgbndqs .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xcpdgbndqs .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xcpdgbndqs .gt_grand_summary_row {
  color: #000000;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xcpdgbndqs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xcpdgbndqs .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xcpdgbndqs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xcpdgbndqs .gt_table_body {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
}

#xcpdgbndqs .gt_footnotes {
  color: #000000;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xcpdgbndqs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xcpdgbndqs .gt_sourcenotes {
  color: #000000;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xcpdgbndqs .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xcpdgbndqs .gt_left {
  text-align: left;
}

#xcpdgbndqs .gt_center {
  text-align: center;
}

#xcpdgbndqs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xcpdgbndqs .gt_font_normal {
  font-weight: normal;
}

#xcpdgbndqs .gt_font_bold {
  font-weight: bold;
}

#xcpdgbndqs .gt_font_italic {
  font-style: italic;
}

#xcpdgbndqs .gt_super {
  font-size: 65%;
}

#xcpdgbndqs .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xcpdgbndqs .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xcpdgbndqs .gt_indent_1 {
  text-indent: 5px;
}

#xcpdgbndqs .gt_indent_2 {
  text-indent: 10px;
}

#xcpdgbndqs .gt_indent_3 {
  text-indent: 15px;
}

#xcpdgbndqs .gt_indent_4 {
  text-indent: 20px;
}

#xcpdgbndqs .gt_indent_5 {
  text-indent: 25px;
}

#xcpdgbndqs .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xcpdgbndqs div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id=" " class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="(1) Basis" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">(1) Basis</th>
<th id="(2) Trends" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">(2) Trends</th>
<th id="(2) Nach 74" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">(2) Nach 74</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1 Jahr nach Add-On" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1 Jahr nach Add-On</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1 Jahr nach Add-On   ">Add-On</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (1) Basis">-0.048</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Trends">-0.022</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Nach 74">-0.013</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="1 Jahr nach Add-On   "></td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (1) Basis">(0.031)</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Trends">(0.019)</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Nach 74">(0.022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="1 Jahr nach Add-On   ">Mindeststrafe</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (1) Basis">-0.119</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Trends">-0.128</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Nach 74">-0.099</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="1 Jahr nach Add-On   "></td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (1) Basis">(0.099)</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Trends">(0.092)</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Nach 74">(0.102)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="1 Jahr nach Add-On   ">R2</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (1) Basis">0.182</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Trends">0.190</td>
<td class="gt_row gt_center" headers="1 Jahr nach Add-On  (2) Nach 74">0.187</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2 Jahre nach Add-On" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2 Jahre nach Add-On</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2 Jahre nach Add-On   ">Add-On</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (1) Basis">-0.110**</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Trends">-0.078***</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Nach 74">-0.058*</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="2 Jahre nach Add-On   "></td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (1) Basis">(0.033)</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Trends">(0.019)</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Nach 74">(0.022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="2 Jahre nach Add-On   ">Mindeststrafe</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (1) Basis">-0.098</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Trends">-0.105</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Nach 74">-0.093</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="2 Jahre nach Add-On   "></td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (1) Basis">(0.096)</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Trends">(0.091)</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Nach 74">(0.104)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="2 Jahre nach Add-On   ">R2</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (1) Basis">0.183</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Trends">0.191</td>
<td class="gt_row gt_center" headers="2 Jahre nach Add-On  (2) Nach 74">0.187</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="3 Jahre nach Add-On" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">3 Jahre nach Add-On</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="3 Jahre nach Add-On   ">Add-On</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (1) Basis">-0.127**</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Trends">-0.090**</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Nach 74">-0.054*</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="3 Jahre nach Add-On   "></td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (1) Basis">(0.040)</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Trends">(0.024)</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Nach 74">(0.024)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="3 Jahre nach Add-On   ">Mindeststrafe</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (1) Basis">-0.096</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Trends">-0.103</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Nach 74">-0.096</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="3 Jahre nach Add-On   "></td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (1) Basis">(0.095)</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Trends">(0.090)</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Nach 74">(0.104)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="3 Jahre nach Add-On   ">R2</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (1) Basis">0.183</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Trends">0.191</td>
<td class="gt_row gt_center" headers="3 Jahre nach Add-On  (2) Nach 74">0.187</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr class="odd">
<td colspan="4" class="gt_sourcenote">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td>
</tr>
<tr class="even">
<td colspan="4" class="gt_sourcenote">Abh. Var.: Log KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Schusswaffen</td>
</tr>
<tr class="odd">
<td colspan="4" class="gt_sourcenote">Cluster-robuste Standardfehler: Bundesstaat</td>
</tr>
<tr class="even">
<td colspan="4" class="gt_sourcenote">Fixed Effects: Bundesstaat + Jahr</td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-tbl margin-caption" id="tbl-abramsbase-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;9.3: <code>abrams</code> â€“ Einfluss von Add-on-Gesetzen auf KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Waffen <span class="citation" data-cites="Abrams2012">(<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">David S. Abrams 2012a</a>)</span>
</figcaption></figure>
</div>
</div>
<p>Die in <a href="#tbl-abramsbase" class="quarto-xref">Tabelle&nbsp;<span>9.3</span></a> zusammengefassten Ergebnisse deuten darauf, dass es im ersten Jahr nach der EinfÃ¼hrung eines Add-On-Gesetzes keinen Signifikanten Effekt auf die KriminalitÃ¤tsrate fÃ¼r RaubÃ¼berfÃ¤lle mit Schusswaffen gibt, wenngleich der geschÃ¤tzte Koeffizient in sÃ¤mtlichen Modellen negativ ist und damit konsistent mit dem vermuteten Abschreckungseffekt ist.In den Folgeperioden finden wir signifikante negative Effekte verschÃ¤rfter Gesetze auf die KriminalitÃ¤tsrate von bis zu 12.7% (Effekt in Modell <span class="math inline">\(\eqref{eq:abramsbase}\)</span> nach drei Jahren). Die konservativste Spezifikation (Modell <span class="math inline">\(\eqref{eq:abramstrend}\)</span> mit Beobachtungen nach 1974) liefert Evidenz eines RÃ¼ckgangs der KriminalitÃ¤t durch Abschreckungseffekte in HÃ¶he von etwa 5% innerhalb der ersten drei Jahre nach der GesetzesÃ¤nderung. Weiterhin ist der geschÃ¤tzte Effekt von gesetzlichen Vorschriften zu Mindeststrafen zwar durchweg negativ, jedoch insignifikant.</p>
</section><section id="event-study-regression" class="level4 page-columns page-full" data-number="9.3.2.2"><h4 data-number="9.3.2.2" class="anchored" data-anchor-id="event-study-regression">
<span class="header-section-number">9.3.2.2</span> Event-Study-Regression</h4>
<p>FÃ¼r eine detalliertere EinschÃ¤tzung des zeitlichen Verlaufs des Effekts verschÃ¤rfender Gesetze betrachtet <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> eine Spezifikation Ã¤hnlich zu <span class="citation" data-cites="Jacobsonetal1993">Jacobson, LaLonde, und Sullivan (<a href="Literatur.html#ref-Jacobsonetal1993" role="doc-biblioref">1993</a>)</span>, <span class="math display">\[\begin{align}
  \log\textup{Rob}_{at} = \sum_{i\in[-6,6]} \beta_i\cdot\textup{AddOn}^i_{st} + \lambda_s + \gamma_t + \omega_s\cdot t + x_{st} + \epsilon_{at},\label{eq:abramsesreg}
\end{align}\]</span> mit perioden-spezifischen Effekten <span class="math inline">\(\beta_i\)</span> in einem Zeitfenster von sechs Jahren vor und nach GesetzesÃ¤nderungen, wobei die <span class="math inline">\(\textup{AddOn}^i_{st}\)</span> definiert sind wie in <span class="math inline">\(\eqref{eq:abramsbase}\)</span> FÃ¼r die SchÃ¤tzung von Modell <span class="math inline">\(\eqref{eq:abramsesreg}\)</span> mit R zeigen wir zunÃ¤chst, wie diese Dummies anhand der Variable <code>relyr</code> effizient erzeugt werden kÃ¶nnen.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># AusprÃ¤gungen von 'relyr'</span></span>
<span><span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">relyr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.
-31 -30 -29 -28 -27 -26 -25 -24 -23 -22 -21 -20 -19 -18 -17 -16 -15 -14 -13 -12 
 23  23  36  43  43  43  43  43  43  43  43  46  61  81  81  84  84  87  90 119 
-11 -10  -9  -8  -7  -6  -5  -4  -3  -2  -1   0   1   2   3   4   5   6   7   8 
160 215 226 233 236 236 236 236 236 236 236 236 236 236 236 236 236 236 213 213 
  9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24  25  26  27  28 
200 193 193 193 193 193 193 193 193 190 175 155 155 152 152 149 146 117  76  21 
 29  30 
 10   3 </code></pre>
</div>
</div>
<p>HierfÃ¼r generieren wir mit <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">tidyr::pivot_wider()</a></code> eine Variante des Datensatzes, <code>abrams_es</code>, in der Beobachtungen von <code>relyr</code> spaltenweise in binÃ¤rer Kodierung abgetragen sind. Diese Variablen erhalten das PrÃ¤fix <code>D</code>. FÃ¼r leichtere Handhabung der Variablennamen innerhalb von <code><a href="https://lrberge.github.io/fixest/reference/feols.html">feols()</a></code> wird das negative Vorzeichen wird druch <code><a href="https://dplyr.tidyverse.org/reference/rename.html">dplyr::rename_with()</a></code> in einen Underscore umgewandelt.</p>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Dummy-Variablen fÃ¼r Event-Study-Regression erzeugen</span></span>
<span><span class="va">abrams_es</span> <span class="op">&lt;-</span> <span class="va">abrams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span></span>
<span>        names_from <span class="op">=</span> <span class="va">relyr</span>, </span>
<span>        values_from <span class="op">=</span> <span class="va">relyr</span>, </span>
<span>        names_prefix <span class="op">=</span> <span class="st">"D"</span>, </span>
<span>        values_fn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>relyr <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span><span class="op">)</span>, </span>
<span>        values_fill <span class="op">=</span> <span class="fl">0</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">rename_with</span><span class="op">(</span></span>
<span>        .fn <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"-"</span>, <span class="st">"_"</span>, <span class="va">.</span><span class="op">)</span>, </span>
<span>        .cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"D"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wir schÃ¤tzen nun die Regression <span class="math inline">\(\eqref{eq:abramsesreg}\)</span>, sowohl mit als auch ohne Bundesstaat-spezifische Zeit-Trends und fassen die Ergebnisse anschlieÃŸend mit <code><a href="https://modelsummary.com/man/modelsummary.html">modelsummary()</a></code> zusammen.</p>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Event-Study-Regression ohne Zeit-Trends</span></span>
<span><span class="va">abrams_mod_es</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>      <span class="co"># Rel. Zeitpunkt-Dummies</span></span>
<span>      <span class="op">+</span> <span class="va">D_6</span></span>
<span>      <span class="op">+</span> <span class="va">D_5</span></span>
<span>      <span class="op">+</span> <span class="va">D_4</span></span>
<span>      <span class="op">+</span> <span class="va">D_3</span></span>
<span>      <span class="op">+</span> <span class="va">D_2</span></span>
<span>      <span class="op">+</span> <span class="va">D_1</span></span>
<span>      <span class="op">+</span> <span class="va">D0</span>      </span>
<span>      <span class="op">+</span> <span class="va">D1</span></span>
<span>      <span class="op">+</span> <span class="va">D2</span></span>
<span>      <span class="op">+</span> <span class="va">D3</span></span>
<span>      <span class="op">+</span> <span class="va">D4</span></span>
<span>      <span class="op">+</span> <span class="va">D5</span></span>
<span>      <span class="op">+</span> <span class="va">D6</span></span>
<span>      <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>       data <span class="op">=</span> <span class="va">abrams_es</span>,</span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>, </span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">abrams_mod_es</span>, n <span class="op">=</span> <span class="fl">13</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 15,516
Weights: statepop
Fixed-effects: FSTATE: 50,  year: 30
Standard-errors: Clustered (FSTATE) 
     Estimate Std. Error   t value  Pr(&gt;|t|)    
D_6  0.253235   0.080335  3.152231 0.0027641 ** 
D_5  0.179108   0.074765  2.395614 0.0204573 *  
D_4  0.192102   0.068453  2.806330 0.0071697 ** 
D_3  0.194081   0.065261  2.973925 0.0045520 ** 
D_2  0.215373   0.072131  2.985876 0.0044045 ** 
D_1  0.175359   0.086515  2.026920 0.0481297 *  
D0   0.092910   0.078156  1.188769 0.2402598    
D1  -0.019041   0.077510 -0.245663 0.8069694    
D2  -0.134279   0.081576 -1.646061 0.1061512    
D3  -0.119129   0.095480 -1.247685 0.2180765    
D4  -0.014835   0.097611 -0.151980 0.8798269    
D5   0.026076   0.087216  0.298984 0.7662169    
D6   0.026764   0.065641  0.407732 0.6852466    
... 8 coefficients remaining
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 508.6     Adj. R2: 0.163961
              Within R2: 0.008215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Event-Study-Regression mit Zeit-Trends</span></span>
<span><span class="va">abrams_mod_es_trends</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">lnpcrrobgun</span> <span class="op">~</span></span>
<span>      <span class="co"># Rel. Zeitpunkt-Dummies</span></span>
<span>      <span class="op">+</span> <span class="va">D_6</span></span>
<span>      <span class="op">+</span> <span class="va">D_5</span></span>
<span>      <span class="op">+</span> <span class="va">D_4</span></span>
<span>      <span class="op">+</span> <span class="va">D_3</span></span>
<span>      <span class="op">+</span> <span class="va">D_2</span></span>
<span>      <span class="op">+</span> <span class="va">D_1</span></span>
<span>      <span class="op">+</span> <span class="va">D0</span>      </span>
<span>      <span class="op">+</span> <span class="va">D1</span></span>
<span>      <span class="op">+</span> <span class="va">D2</span></span>
<span>      <span class="op">+</span> <span class="va">D3</span></span>
<span>      <span class="op">+</span> <span class="va">D4</span></span>
<span>      <span class="op">+</span> <span class="va">D5</span></span>
<span>      <span class="op">+</span> <span class="va">D6</span></span>
<span>      <span class="co"># Kontrollvariablen</span></span>
<span>      <span class="op">+</span> <span class="va">dcpoverty</span></span>
<span>      <span class="op">+</span> <span class="va">dcunemp</span></span>
<span>      <span class="op">+</span> <span class="va">dcblack_per</span></span>
<span>      <span class="op">+</span> <span class="va">dcp15t17</span></span>
<span>      <span class="op">+</span> <span class="va">dcp18t24</span> </span>
<span>      <span class="op">+</span> <span class="va">dcp25t34</span></span>
<span>      <span class="op">+</span> <span class="va">dcpolice_per1</span></span>
<span>      <span class="op">+</span> <span class="va">dcprison_per1</span></span>
<span>      <span class="co"># Trends: Bundesstaaten</span></span>
<span>      <span class="op">+</span> <span class="va">FSTATE</span><span class="op">:</span><span class="va">year</span></span>
<span>      <span class="co"># Fixed Effects</span></span>
<span>      <span class="op">|</span> <span class="va">FSTATE</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>       data <span class="op">=</span> <span class="va">abrams_es</span>,</span>
<span>      weights <span class="op">=</span> <span class="op">~</span> <span class="va">statepop</span>, </span>
<span>      vcov <span class="op">=</span> <span class="op">~</span> <span class="va">FSTATE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">abrams_mod_es_trends</span>, n <span class="op">=</span> <span class="fl">13</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: lnpcrrobgun
Observations: 15,516
Weights: statepop
Fixed-effects: FSTATE: 50,  year: 30
Standard-errors: Clustered (FSTATE) 
     Estimate Std. Error   t value   Pr(&gt;|t|)    
D_6  0.178623   0.061206  2.918420 0.00529961 ** 
D_5  0.117266   0.071136  1.648468 0.10565467    
D_4  0.140018   0.070565  1.984236 0.05284502 .  
D_3  0.173958   0.080586  2.158664 0.03580156 *  
D_2  0.194643   0.054801  3.551842 0.00085685 ***
D_1  0.168404   0.048365  3.481958 0.00105685 ** 
D0   0.088229   0.058647  1.504399 0.13889772    
D1  -0.019122   0.060257 -0.317339 0.75233449    
D2  -0.133242   0.062953 -2.116535 0.03940246 *  
D3  -0.100628   0.074838 -1.344623 0.18493860    
D4  -0.048074   0.090217 -0.532869 0.59653275    
D5  -0.018161   0.066668 -0.272405 0.78645555    
D6   0.030971   0.045143  0.686059 0.49590930    
... 57 coefficients remaining
... 1 variable was removed because of collinearity (FSTATE50:year)
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 505.3     Adj. R2: 0.171869
              Within R2: 0.020719</code></pre>
</div>
</div>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Modelle in benannten Listen sammeln</span></span>
<span><span class="va">modelle</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Ohne Trends"</span> <span class="op">=</span> <span class="va">abrams_mod_es</span>,</span>
<span>  <span class="st">"Zeit-Trends"</span> <span class="op">=</span> <span class="va">abrams_mod_es_trends</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Tabellarische Zusammenfassung</span></span>
<span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="va">modelle</span>,</span>
<span>  coef_omit <span class="op">=</span> <span class="st">"^(?!.*(D|D\\_)).*$"</span>,</span>
<span>  stars <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  gof_omit <span class="op">=</span> <span class="st">"^(?!(R2*)$).*"</span>,</span>
<span>  notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Abh. Var.: Log KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Schusswaffen"</span>, </span>
<span>    <span class="st">"Cluster-robuste Standardfehler: Bundesstaat"</span>,</span>
<span>    <span class="st">"Fixed Effects: Bundesstaat + Jahr"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"gt"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tabopts</span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-abramsesreg" class="cell quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><div aria-describedby="tbl-abramsesreg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="whsglbrypz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#whsglbrypz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#whsglbrypz thead, #whsglbrypz tbody, #whsglbrypz tfoot, #whsglbrypz tr, #whsglbrypz td, #whsglbrypz th {
  border-style: none;
}

#whsglbrypz p {
  margin: 0;
  padding: 0;
}

#whsglbrypz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #000000;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 80%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#whsglbrypz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#whsglbrypz .gt_title {
  color: #000000;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#whsglbrypz .gt_subtitle {
  color: #000000;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#whsglbrypz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#whsglbrypz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#whsglbrypz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#whsglbrypz .gt_col_heading {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 15px;
  padding-bottom: 16px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#whsglbrypz .gt_column_spanner_outer {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#whsglbrypz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#whsglbrypz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#whsglbrypz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 15px;
  padding-bottom: 15px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#whsglbrypz .gt_spanner_row {
  border-bottom-style: hidden;
}

#whsglbrypz .gt_group_heading {
  padding-top: 20px;
  padding-bottom: 20px;
  padding-left: 5px;
  padding-right: 5px;
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#whsglbrypz .gt_empty_group_heading {
  padding: 0.5px;
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#whsglbrypz .gt_from_md > :first-child {
  margin-top: 0;
}

#whsglbrypz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#whsglbrypz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#whsglbrypz .gt_stub {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#whsglbrypz .gt_stub_row_group {
  color: #000000;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#whsglbrypz .gt_row_group_first td {
  border-top-width: 0px;
}

#whsglbrypz .gt_row_group_first th {
  border-top-width: 0px;
}

#whsglbrypz .gt_summary_row {
  color: #000000;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#whsglbrypz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#whsglbrypz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#whsglbrypz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#whsglbrypz .gt_grand_summary_row {
  color: #000000;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#whsglbrypz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#whsglbrypz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#whsglbrypz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#whsglbrypz .gt_table_body {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
}

#whsglbrypz .gt_footnotes {
  color: #000000;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#whsglbrypz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#whsglbrypz .gt_sourcenotes {
  color: #000000;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#whsglbrypz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#whsglbrypz .gt_left {
  text-align: left;
}

#whsglbrypz .gt_center {
  text-align: center;
}

#whsglbrypz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#whsglbrypz .gt_font_normal {
  font-weight: normal;
}

#whsglbrypz .gt_font_bold {
  font-weight: bold;
}

#whsglbrypz .gt_font_italic {
  font-style: italic;
}

#whsglbrypz .gt_super {
  font-size: 65%;
}

#whsglbrypz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#whsglbrypz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#whsglbrypz .gt_indent_1 {
  text-indent: 5px;
}

#whsglbrypz .gt_indent_2 {
  text-indent: 10px;
}

#whsglbrypz .gt_indent_3 {
  text-indent: 15px;
}

#whsglbrypz .gt_indent_4 {
  text-indent: 20px;
}

#whsglbrypz .gt_indent_5 {
  text-indent: 25px;
}

#whsglbrypz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#whsglbrypz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id=" " class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="Ohne Trends" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Ohne Trends</th>
<th id="Zeit-Trends" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Zeit-Trends</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D_6</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.253**</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.179**</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.080)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.061)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D_5</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.179*</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.117</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.075)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.071)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D_4</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.192**</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.140+</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.068)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.071)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D_3</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.194**</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.174*</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.065)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.081)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D_2</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.215**</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.195***</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.072)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.055)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D_1</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.175*</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.168**</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.087)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.048)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D0</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.093</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.088</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.078)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.059)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D1</td>
<td class="gt_row gt_center" headers="Ohne Trends">-0.019</td>
<td class="gt_row gt_center" headers="Zeit-Trends">-0.019</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.078)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.060)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D2</td>
<td class="gt_row gt_center" headers="Ohne Trends">-0.134</td>
<td class="gt_row gt_center" headers="Zeit-Trends">-0.133*</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.082)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.063)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D3</td>
<td class="gt_row gt_center" headers="Ohne Trends">-0.119</td>
<td class="gt_row gt_center" headers="Zeit-Trends">-0.101</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.095)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.075)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D4</td>
<td class="gt_row gt_center" headers="Ohne Trends">-0.015</td>
<td class="gt_row gt_center" headers="Zeit-Trends">-0.048</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.098)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.090)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D5</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.026</td>
<td class="gt_row gt_center" headers="Zeit-Trends">-0.018</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" "></td>
<td class="gt_row gt_center" headers="Ohne Trends">(0.087)</td>
<td class="gt_row gt_center" headers="Zeit-Trends">(0.067)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">D6</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.027</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.031</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=" " style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000"></td>
<td class="gt_row gt_center" headers="Ohne Trends" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000">(0.066)</td>
<td class="gt_row gt_center" headers="Zeit-Trends" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000">(0.045)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=" ">R2</td>
<td class="gt_row gt_center" headers="Ohne Trends">0.169</td>
<td class="gt_row gt_center" headers="Zeit-Trends">0.180</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="3" class="gt_sourcenote">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td>
</tr>
<tr class="odd">
<td colspan="3" class="gt_sourcenote">Abh. Var.: Log KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Schusswaffen</td>
</tr>
<tr class="even">
<td colspan="3" class="gt_sourcenote">Cluster-robuste Standardfehler: Bundesstaat</td>
</tr>
<tr class="odd">
<td colspan="3" class="gt_sourcenote">Fixed Effects: Bundesstaat + Jahr</td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-tbl margin-caption" id="tbl-abramsesreg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;9.4: KQ-SchÃ¤tzung der Event-Study-Spezifikation: Koeffizienten der Dummies <span class="citation" data-cites="Abrams2012">(<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">David S. Abrams 2012a</a>)</span>
</figcaption></figure>
</div>
</div>
<p>Die statistische Zusammenfassung beider Event-Study-Spezifikationen in <a href="#tbl-abramsesreg" class="quarto-xref">Tabelle&nbsp;<span>9.4</span></a> untermauern die Ergebnisse aus <a href="#tbl-abramsbase" class="quarto-xref">Tabelle&nbsp;<span>9.3</span></a>:</p>
<ul>
<li><p>Die positiven geschÃ¤tzten Koeffizienten der Dummies fÃ¼r Zeitpunkte <em>vor</em> der EinfÃ¼hrung von Add-On-Gesetzen (<span class="math inline">\(i=-6,\dots,-1\)</span>) sind signifikant und zeigen einen stabilen Verlauf der KriminalitÃ¤tsrate an.</p></li>
<li><p>Die negativen, nicht-signifikant von 0 verschiedenen geschÃ¤tzten Koeffizienten <em>nach</em> der EinfÃ¼hrung von Add-On-Gesetzen (<span class="math inline">\(i=0,\dots,6\)</span>) sind Evidenz fÃ¼r einen RÃ¼ckgang der Pro-Kopf-KriminalitÃ¤tsrate fÃ¼r RaubÃ¼berfÃ¤lle mit Schusswaffen im Folgezeitraum.</p></li>
</ul>
<p>FÃ¼r eine grafische Veranschaulichung der zeitlichen Entwicklung des geschÃ¤tzten Effekts plotten wir die SchÃ¤tzungen aus <a href="#tbl-abramsesreg" class="quarto-xref">Tabelle&nbsp;<span>9.4</span></a> zusammen mit einem 1-Standardfehler-Intervall.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Hierzu lesen wir zunÃ¤chst die geschÃ¤tzten Koeffizienten und Standardfehler aus dem Objekten <code>abrams_mod_es</code> und <code>abrams_mod_es_trends</code> aus, berechnen die zugehÃ¶rigen Konfidenzintervalle und sammeln die Ergebnisse unter Verwendung einer Indikatorvariable fÃ¼r das zugrundeliegende Modell in einem <code>tibble</code>-Objekt</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;Vgl. Abbildung 4 in <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span>.</p></div></div><div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Koeffizienten: Modell mit Trend</span></span>
<span><span class="va">coefficients_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span><span class="op">(</span><span class="va">abrams_mod_es_trends</span><span class="op">)</span></span>
<span><span class="va">std_errors_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/coeftable.html">se</a></span><span class="op">(</span><span class="va">abrams_mod_es_trends</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Koeffizienten: Modell ohne Trend</span></span>
<span><span class="va">coefficients_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span><span class="op">(</span><span class="va">abrams_mod_es</span><span class="op">)</span></span>
<span><span class="va">std_errors_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/coeftable.html">se</a></span><span class="op">(</span><span class="va">abrams_mod_es</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subset von i = -6,...,0,...,6 auslesen</span></span>
<span><span class="va">events</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">6</span><span class="op">:</span><span class="fl">6</span></span>
<span><span class="va">event_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">coefficients_1</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># SchÃ¤tzungen je Modell sammeln</span></span>
<span><span class="va">plot_data_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>  Modell <span class="op">=</span> <span class="st">"Mit Trends"</span>,</span>
<span>  Event <span class="op">=</span> <span class="va">events</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">coefficients_1</span><span class="op">[</span><span class="va">event_names</span><span class="op">]</span>,</span>
<span>  SE <span class="op">=</span> <span class="va">std_errors_1</span><span class="op">[</span><span class="va">event_names</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_data_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>  Modell <span class="op">=</span> <span class="st">"Ohne Trends"</span>,</span>
<span>  Event <span class="op">=</span> <span class="va">events</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">coefficients_2</span><span class="op">[</span><span class="va">event_names</span><span class="op">]</span>,</span>
<span>  SE <span class="op">=</span> <span class="va">std_errors_2</span><span class="op">[</span><span class="va">event_names</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Datenpunkte sammeln</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">plot_data_1</span>, <span class="va">plot_data_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># 1-Standardfehler-Intervall</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    CI_Lower <span class="op">=</span> <span class="va">Estimate</span> <span class="op">-</span> <span class="va">SE</span>,</span>
<span>    CI_Upper <span class="op">=</span> <span class="va">Estimate</span> <span class="op">+</span> <span class="va">SE</span></span>
<span>  <span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Event-Study-Plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">plot_data</span>, </span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">Event</span>, </span>
<span>    y <span class="op">=</span> <span class="va">Estimate</span>, </span>
<span>    color <span class="op">=</span> <span class="va">Modell</span>, </span>
<span>    fill <span class="op">=</span> <span class="va">Modell</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># gesch. Effekte</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># 1-SE-Intervall</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      ymin <span class="op">=</span> <span class="va">CI_Lower</span>, </span>
<span>      ymax <span class="op">=</span> <span class="va">CI_Upper</span></span>
<span>    <span class="op">)</span>,</span>
<span>    color <span class="op">=</span><span class="st">"white"</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Hilfslinien</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span></span>
<span>    yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>, </span>
<span>    linewidth <span class="op">=</span> <span class="fl">.2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span></span>
<span>    xintercept <span class="op">=</span> <span class="fl">0</span>, </span>
<span>    linetype <span class="op">=</span> <span class="st">"dashed"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Labels + Legende</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Zeitpunkt rel. zur Einf. Add-on-Gesetz"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Log-Rate: ÃœberfÃ¤lle mit Schusswaffen"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">.4</span>, <span class="fl">.4</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/theme_cowplot.html">theme_cowplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-abramsesregres" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-abramsesregres-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="EventStudies_files/figure-html/fig-abramsesregres-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-abramsesregres-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;9.2: Event-Study-Regression â€“ GeschÃ¤tze Rate: RaubÃ¼berfÃ¤lle rel. zur EinfÃ¼hrung von Add-On-Gesetzen
</figcaption></figure>
</div>
</div>
</div>
<p>Beachte, dass lediglich die Ã„nderungen der Koeffizienten in <a href="#fig-abramsesregres" class="quarto-xref">Abbildung&nbsp;<span>9.2</span></a> eine sinnvolle Interpretation haben: Die absoluten Werte auf der Y-Achse sind nicht aussagekrÃ¤ftig, da sie aus Regressionen mit mehreren Regressoren mit von Null verschiedenen Mittelwerten stammen.</p>
<p>Eine AuffÃ¤lligkeit in <a href="#fig-abramsesregres" class="quarto-xref">Abbildung&nbsp;<span>9.2</span></a> ist, dass die mittlere KriminalitÃ¤tsrate bereits eine Periode <em>vor</em> dem Zeitpunkt der GesetzeseinfÃ¼hrung eine Trendumkehr aufzuweisen scheint. <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span> weiÃŸt darauf hin, dass potenzielle StraftÃ¤ter durch die laufende Ã¶ffentliche Debatte und Diskussion Ã¼ber das Gesetz erfahren und ihr Verhaltensweisen in Erwartung der GesetzesÃ¤nderung anpassen kÃ¶nnten. Die emprische Studienlage hinsichtlich eines solches Verhalten ist jedoch nicht eindeutig, siehe die Diskussion in <span class="citation" data-cites="Abrams2012">David S. Abrams (<a href="Literatur.html#ref-Abrams2012" role="doc-biblioref">2012a</a>)</span>, Abschnitt IV B.</p>
</section></section></section><section id="zusammenfassung" class="level2" data-number="9.4"><h2 data-number="9.4" class="anchored" data-anchor-id="zusammenfassung">
<span class="header-section-number">9.4</span> Zusammenfassung</h2>
<p>Mit Event Studies kÃ¶nnen die Auswirkungen spezifischer Ereignisse oder Interventionen auf eine Ã¼ber die Zeit beobachtete Outcome-Variable untersucht werden. Die zugrunde liegende Annahme fÃ¼r die Identifizierbarkeit des kausalen Effekts ist, dass das untersuchte Event als exogener Schock fungiert, der die Outcome-Variable beeinflusst, jedoch unabhÃ¤ngig von anderen unbeobachtbaren Einflussfaktoren ist, sodass die der Front-Door-Pfad isoliert werden kann.</p>
<p>Der Effekt wird meist in einem zeitlichen Umfeld nahe des Ereignisses analysiert. Zur Bestimmung eines kontrafaktischen Vergleichswerts fÃ¼r die Outcome-Variable nach dem Event kann die Prognose des Outcomes hilfreich sein. FÃ¼r die prÃ¤zise SchÃ¤tzung des Behandlungseffekts werden hÃ¤ufig Regressionsmodelle herangezogen, die es ermÃ¶glichen, zeitliche VerÃ¤nderungen in der Outcome-Variable zu modellieren und zusÃ¤tzliche Kontrollvariablen zu berÃ¼cksichtigen. Dadurch wird die Robustheit und Genauigkeit der Ergebnisse erhÃ¶ht, was insbesondere bei der Analyse langfristiger Interventionseffekte in komplexen Ã¶konomischen und politischen Kontexten von relevant ist.</p>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Abrams2012" class="csl-entry" role="listitem">
Abrams, David S. 2012a. <span>â€žEstimating the Deterrent Effect of Incarceration Using Sentencing Enhancementsâ€œ</span>. <em>American Economic Journal: Applied Economics</em> 4 (4): 32â€“56. <a href="https://doi.org/10.1257/app.4.4.32">https://doi.org/10.1257/app.4.4.32</a>.
</div>
<div id="ref-Abrams2012data" class="csl-entry" role="listitem">
Abrams, David S. 2012b. <span>â€žReplication data for: Estimating the Deterrent Effect of Incarceration Using Sentencing Enhancementsâ€œ</span>. ICPSR - Interuniversity Consortium for Political; Social Research. <a href="https://doi.org/10.3886/E113838V1">https://doi.org/10.3886/E113838V1</a>.
</div>
<div id="ref-Jacobsonetal1993" class="csl-entry" role="listitem">
Jacobson, Louis S., Robert J. LaLonde, und Daniel G. Sullivan. 1993. <span>â€žEarnings Losses of Displaced Workersâ€œ</span>. <em>The American Economic Review</em> 83 (4): 685â€“709. <a href="http://www.jstor.org/stable/2117574">http://www.jstor.org/stable/2117574</a>.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./DiD.html" class="pagination-link" aria-label="Difference-in-Differences">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Difference-in-Differences</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./RDD.html" class="pagination-link" aria-label="Regression Discontiniuty Designs">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Regression Discontiniuty Designs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb51" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="an">webr:</span><span class="co"> </span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">  show-startup-message: true</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">  packages: [</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co">            'cowplot',</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">            'dplyr',</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">            'fixest',</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">            'ggplot2',</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">            'haven',</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co">            'tidyr',</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co">            'readr'</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="co">            ]</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="fu"># Event Studies</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=F, message=FALSE}</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="in">library(gt)</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="in">library(haven)</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="in"># Formatierung von gt-Tabellen</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a><span class="in">tabopts &lt;- function(x) {</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a><span class="in">  fmt_number(x, decimals = 3, drop_trailing_zeros = T) %&gt;%</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a><span class="in">    tab_options(</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a><span class="in">      # general</span></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a><span class="in">      table.width = "80%",</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a><span class="in">      # fonts</span></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a><span class="in">      table.font.color = "black", </span></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a><span class="in">      table.font.size = 16,</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a><span class="in">      column_labels.font.weight = "bold", </span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a><span class="in">      # table header  </span></span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a><span class="in">      column_labels.padding = 15,</span></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a><span class="in">      column_labels.border.bottom.color = "black", </span></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a><span class="in">      column_labels.border.bottom.width = "1px", </span></span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a><span class="in">      column_labels.border.top.color = "black",</span></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a><span class="in">      # group labels</span></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a><span class="in">      row_group.border.top.width = 0,</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a><span class="in">      row_group.border.bottom.width = 0,</span></span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a><span class="in">      row_group.font.weight = "bold",</span></span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a><span class="in">      row_group.padding = 20,</span></span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a><span class="in">      # body</span></span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a><span class="in">      </span></span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a><span class="in">      table_body.hlines.width = 0, </span></span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a><span class="in">      table_body.border.bottom.color = "black",</span></span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a><span class="in">      table_body.border.bottom.width = "1px",</span></span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a><span class="in">      table_body.border.top.width = "0px",</span></span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a><span class="in">      table.border.bottom.color = "black"</span></span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-52"><a href="#cb51-52" aria-hidden="true" tabindex="-1"></a><span class="in">abrams &lt;- read_dta(file = "datasets/Abrams2012.dta")</span></span>
<span id="cb51-53"><a href="#cb51-53" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-54"><a href="#cb51-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-55"><a href="#cb51-55" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr-r}</span></span>
<span id="cb51-56"><a href="#cb51-56" aria-hidden="true" tabindex="-1"></a><span class="in">#| context: setup</span></span>
<span id="cb51-57"><a href="#cb51-57" aria-hidden="true" tabindex="-1"></a><span class="in"># create dataset directory</span></span>
<span id="cb51-58"><a href="#cb51-58" aria-hidden="true" tabindex="-1"></a><span class="in">dir.create("datasets")</span></span>
<span id="cb51-59"><a href="#cb51-59" aria-hidden="true" tabindex="-1"></a><span class="in"># download the dataset</span></span>
<span id="cb51-60"><a href="#cb51-60" aria-hidden="true" tabindex="-1"></a><span class="in">download.file(</span></span>
<span id="cb51-61"><a href="#cb51-61" aria-hidden="true" tabindex="-1"></a><span class="in">    "https://raw.githubusercontent.com/mca91/kausal_data/main/Abrams2012.dta",</span></span>
<span id="cb51-62"><a href="#cb51-62" aria-hidden="true" tabindex="-1"></a><span class="in">    'datasets/Abrams2012.dta',</span></span>
<span id="cb51-63"><a href="#cb51-63" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb51-64"><a href="#cb51-64" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-65"><a href="#cb51-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-66"><a href="#cb51-66" aria-hidden="true" tabindex="-1"></a>Eine *Event Study* ist ein empirischer Ansatz, um die Auswirkungen von zufÃ¤lligen Ereignissen oder bestimmen Interventionen auf eine Outcome-Variable zu messen. Die zentrale Annahme hierbei ist, dass das untersuchte Ereignis exogen ist, also als ein 'natÃ¼rlicher' Schock wirkt: Die Intervention lÃ¶st eine Reaktion in der Outcome-Variable aus, ist jedoch unabhÃ¤ngig von anderen unbeobachtbaren Determinanten der Outcome-Variable, sodass Backdoors vermieden werden. Ist diese Annahme gegeben, so kann eine Event Study den kausalen Effekt einer Intervention vergleichsweise einfach ermitteln, indem Ã¼berprÃ¼ft wird, ob und wie stark die Outcome-Variable im Zeitraum nahe des Ereignis reagiert. Letzteres erfolgt hÃ¤ufig durch eine Analyse der durch das Event verursachten Variation in der Outcome-Variable mit einem Ã¶konometrischen Modell.</span>
<span id="cb51-67"><a href="#cb51-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-68"><a href="#cb51-68" aria-hidden="true" tabindex="-1"></a><span class="fu">## Counterfactuals und Regression</span></span>
<span id="cb51-69"><a href="#cb51-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-70"><a href="#cb51-70" aria-hidden="true" tabindex="-1"></a>Event Studies sind hilfreich, weil sie die Identifizierung kausaler ZusammenhÃ¤nge in komplexen Situationen mit vielen potentiellen (unbeobachtbaren) Backdoor-Variablen ermÃ¶glichen kÃ¶nnen. Durch die Fokussierung auf einen klar definierten Zeitraum um das Ereignis und die Anwendung zusÃ¤tzlicher Kontrollmechanismen (Regression) kann der interessierende Effekt oftmals plausibel identifiziert werden.</span>
<span id="cb51-71"><a href="#cb51-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-72"><a href="#cb51-72" aria-hidden="true" tabindex="-1"></a>FÃ¼r die SchÃ¤tzug des Behandlungseffekts ist es nÃ¶tig, einen plausiblen (kontrafaktischen) Vergleichswert fÃ¼r die nach der Intervention beobachteten Werte der Outcome-Variable zu finden. Hierbei gibt es drei wesentliche Vorgehensweisen:</span>
<span id="cb51-73"><a href="#cb51-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-74"><a href="#cb51-74" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Durschnittlichen Entwicklung als Counterfactual**: Hierbei werden Mittelwerte der Outcome Variable vor und nach der Intervention vergleichen. Diese Methode ignoriert mÃ¶gliche Zeiteffekte in der Outcome-Variable und sollte nur fÃ¼r kleine ZeitrÃ¤ume vor und nach der Intervention angewendet werden.</span>
<span id="cb51-75"><a href="#cb51-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-76"><a href="#cb51-76" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Vorhersage mit Vor-Event-Daten**: Modelliere die Outcome-Variable basierend auf Daten *vor* dem Event und erhalte Vorhersagen fÃ¼r Perioden (unmittelbar) *nach* dem Event.</span>
<span id="cb51-77"><a href="#cb51-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-78"><a href="#cb51-78" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Vorhersage mit Nach-Event-Daten**: Modelliere die Outcome basierend auf Daten *vor* dem Event unter BerÃ¼cksichtigung weiterer Regressoren. Erhalte Vorhersagen fÃ¼r Perioden  (unmittelbar) *nach* dem Event unter Einbezug der *nach* dem Event beobachteten Regressor-Werte.</span>
<span id="cb51-79"><a href="#cb51-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-80"><a href="#cb51-80" aria-hidden="true" tabindex="-1"></a>In vielem polit-Ã¶konomischen Anwendungen ist es plausibel, dass eine Intervention einen lÃ¤ngerfristigen (konstanten) Effekt hat. In solchen FÃ¤llen kann ein Interkationsmodell^<span class="co">[</span><span class="ot">Der Ansatz \eqref{eq:eslinint} wird auch als *segmentierte Regression* bezeichnet.</span><span class="co">]</span> geschÃ¤tzt werden:</span>
<span id="cb51-81"><a href="#cb51-81" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb51-82"><a href="#cb51-82" aria-hidden="true" tabindex="-1"></a>  Y_t = \beta_0 + \beta_1 t + \beta_2 \textup{post}_t + \beta_3 \cdot t \cdot \textup{post}_t + \epsilon_t.\label{eq:eslinint}</span>
<span id="cb51-83"><a href="#cb51-83" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb51-84"><a href="#cb51-84" aria-hidden="true" tabindex="-1"></a>Hier ist $t$ die Zeit-Variable und $\textup{post}_t$ ein Dummy-Regressor fÃ¼r Perioden *nach* dem Event. Die Regression \eqref{eq:eslinint} modelliert also einen linearen Trend in der Outcome-Variable $Y$, der sich vor und nach dem Event unterscheiden kann. Eine SchÃ¤tzung mit Regressions ist auÃŸerdem hilfreich, weil fÃ¼r beobachtbare Determinanten von $Y$, die mÃ¶glicherweise durch das Event beeinflusst werden, kontrolliert werden kann. Solche "robusten" Spezifikationen erhÃ¶hen die plausibilitÃ¤t der Identifikationsstrategie und kÃ¶nnen eine prÃ¤zisere SchÃ¤tzung des Behandlungseffekts gewÃ¤hrleisten.</span>
<span id="cb51-85"><a href="#cb51-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-86"><a href="#cb51-86" aria-hidden="true" tabindex="-1"></a>Modell \eqref{eq:eslinint} kann leicht auf Panel-Daten erweitert werden, wobei die zusÃ¤tzliche Information aus der Querschnittsdimension die SchÃ¤tzung eines zeitlichen Verlaufs des Interventionseffekts ermÃ¶glicht. Bei VerfÃ¼gbarkeit kÃ¶nnen Beobachtungseinheiten, die nicht von der Intervention betroffen sind als Counterfactuals herangezogen werden. Wir betrachten die Anwendung einer Event-Study-Methodik mit Panel-Daten-Modellen in der Case Study in @sec-deterrance.</span>
<span id="cb51-87"><a href="#cb51-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-88"><a href="#cb51-88" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb51-89"><a href="#cb51-89" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Key Facts zu Event Studies</span></span>
<span id="cb51-90"><a href="#cb51-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-91"><a href="#cb51-91" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Eine Event Study misst Auswirkungen eines Ereignisses oder Interventionen auf eine Ã¼ber mehrere Perioden beobachtete Outcome-Variable.</span>
<span id="cb51-92"><a href="#cb51-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-93"><a href="#cb51-93" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Ziel ist die SchÃ¤tzung des kausalen Effekt der Intervention durch die Analyse der beobachteten Variation in der Outcome-Variable Ã¼ber die Zeit, meist fÃ¼r Zeitpunkte nahe des Events.</span>
<span id="cb51-94"><a href="#cb51-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-95"><a href="#cb51-95" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Annahme: Das Event ist exogen. In empirischen Studien werden hÃ¤ufig quasi-experimentelle Forschungsdesigns verwendet (Events sind natÃ¼rliche Schocks).</span>
<span id="cb51-96"><a href="#cb51-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-97"><a href="#cb51-97" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Regressionsmodelle kÃ¶nnen genutzt werden, um den Effekt der Intervention Ã¼ber die Zeit zu schÃ¤tzen. Hierbei gewÃ¤hrleistet die Kontrolle fÃ¼r potentielle Confounder die Robustheit und PrÃ¤zision der SchÃ¤tzung des interessierenden Effekts.</span>
<span id="cb51-98"><a href="#cb51-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-99"><a href="#cb51-99" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb51-100"><a href="#cb51-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-101"><a href="#cb51-101" aria-hidden="true" tabindex="-1"></a><span class="fu">## Beispiel: Strukturbruch in Zeitreihe</span></span>
<span id="cb51-102"><a href="#cb51-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-103"><a href="#cb51-103" aria-hidden="true" tabindex="-1"></a>Zur Illustration der Methodik simulieren wir Zeitreihendaten mit einem durch ein Ereignis in der Mitte des Beobachtungszeitraums ausgelÃ¶sten Strukturbruch im Erwartungswert (der kausale Effekt des Events). Wir interessieren uns fÃ¼r den Effekt des Events auf die Variablen $X_t$ und $Y_t$.</span>
<span id="cb51-104"><a href="#cb51-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-105"><a href="#cb51-105" aria-hidden="true" tabindex="-1"></a>Der hierfÃ¼r verwendete DGP lautet</span>
<span id="cb51-106"><a href="#cb51-106" aria-hidden="true" tabindex="-1"></a>\begin{align*}</span>
<span id="cb51-107"><a href="#cb51-107" aria-hidden="true" tabindex="-1"></a>  X_t = &amp;\, \alpha_1 \textup{post}_t + \epsilon_t,<span class="sc">\\</span></span>
<span id="cb51-108"><a href="#cb51-108" aria-hidden="true" tabindex="-1"></a>  <span class="sc">\\</span></span>
<span id="cb51-109"><a href="#cb51-109" aria-hidden="true" tabindex="-1"></a>  Y_t = &amp;\, \beta_1 X_t + \beta_2 \textup{post}_t + \varepsilon_t,</span>
<span id="cb51-110"><a href="#cb51-110" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb51-111"><a href="#cb51-111" aria-hidden="true" tabindex="-1"></a>fÃ¼r $t=1,\dots,n$ mit $\epsilon_t,\ \varepsilon_t \sim\,u.i.v. N(0,1)$. Der Dummy-Regressor $\textup{post}_t$ ist definiert als</span>
<span id="cb51-112"><a href="#cb51-112" aria-hidden="true" tabindex="-1"></a>\begin{align*}</span>
<span id="cb51-113"><a href="#cb51-113" aria-hidden="true" tabindex="-1"></a>  \textup{post}_t = </span>
<span id="cb51-114"><a href="#cb51-114" aria-hidden="true" tabindex="-1"></a>  \begin{cases}</span>
<span id="cb51-115"><a href="#cb51-115" aria-hidden="true" tabindex="-1"></a>     1 \ \ \textup{fÃ¼r}  &amp;t &gt; t_\textup{Event},<span class="sc">\\</span></span>
<span id="cb51-116"><a href="#cb51-116" aria-hidden="true" tabindex="-1"></a>     0 \ \ &amp;\textup{sonst}</span>
<span id="cb51-117"><a href="#cb51-117" aria-hidden="true" tabindex="-1"></a>  \end{cases}</span>
<span id="cb51-118"><a href="#cb51-118" aria-hidden="true" tabindex="-1"></a>\end{align*}</span>
<span id="cb51-119"><a href="#cb51-119" aria-hidden="true" tabindex="-1"></a>wobei $t_\textup{Event} = \lfloor n/2 \rfloor$. FÃ¼r den Effekt des Events auf $X_t$ und $Y_t$ wÃ¤hlen wir $\alpha_1 = 2$ und $\beta_2 = 2$. Weiterhin ist $\beta_1 = .75$. Wir generieren beide Zeitreihen fÃ¼r $n=200$ Perioden.</span>
<span id="cb51-120"><a href="#cb51-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-121"><a href="#cb51-121" aria-hidden="true" tabindex="-1"></a>Beachte das $X_t$ ein *Confounder* bei der Ermittlung des Effekts auf $Y_t$ ist: Das Event zum Zeitpunkt $t=100$ hat einen kausalen Effekt von $\alpha_1 = \beta_2 = 2$ auf *beide* Variablen. Da $X_t$ einen Einfluss von $\beta_1\cdot X_t = .75\cdot X_t$ auf $Y_t$ hat, mÃ¼ssen wir fÃ¼r $X_t$ kontrollieren, um die back door durch $X_t$ zu schlieÃŸen. FÃ¼r $X_t$ hingegen ist der Event-Regressor $\textup{post}_t$ exogen.</span>
<span id="cb51-122"><a href="#cb51-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-123"><a href="#cb51-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-126"><a href="#cb51-126" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-127"><a href="#cb51-127" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb51-128"><a href="#cb51-128" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb51-129"><a href="#cb51-129" aria-hidden="true" tabindex="-1"></a><span class="co"># Daten simulieren</span></span>
<span id="cb51-130"><a href="#cb51-130" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb51-131"><a href="#cb51-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-132"><a href="#cb51-132" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter der Simulation</span></span>
<span id="cb51-133"><a href="#cb51-133" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">200</span>  <span class="co"># Anzahl der Beobachtungen</span></span>
<span id="cb51-134"><a href="#cb51-134" aria-hidden="true" tabindex="-1"></a>t_event <span class="ot">&lt;-</span> <span class="fu">floor</span>(n<span class="sc">/</span><span class="dv">2</span>)  <span class="co"># Zeitpunkt des Ereignisses</span></span>
<span id="cb51-135"><a href="#cb51-135" aria-hidden="true" tabindex="-1"></a>effect_size <span class="ot">&lt;-</span> <span class="dv">2</span>  <span class="co"># GrÃ¶ÃŸe des Effekts nach dem Ereignis</span></span>
<span id="cb51-136"><a href="#cb51-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-137"><a href="#cb51-137" aria-hidden="true" tabindex="-1"></a><span class="co"># Zeitindex</span></span>
<span id="cb51-138"><a href="#cb51-138" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>n</span>
<span id="cb51-139"><a href="#cb51-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-140"><a href="#cb51-140" aria-hidden="true" tabindex="-1"></a><span class="co"># X generieren </span></span>
<span id="cb51-141"><a href="#cb51-141" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(</span>
<span id="cb51-142"><a href="#cb51-142" aria-hidden="true" tabindex="-1"></a>  <span class="at">test =</span> time <span class="sc">&lt;=</span> t_event, </span>
<span id="cb51-143"><a href="#cb51-143" aria-hidden="true" tabindex="-1"></a>  <span class="at">yes =</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="dv">0</span>), </span>
<span id="cb51-144"><a href="#cb51-144" aria-hidden="true" tabindex="-1"></a>  <span class="at">no =</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> effect_size)</span>
<span id="cb51-145"><a href="#cb51-145" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-146"><a href="#cb51-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-147"><a href="#cb51-147" aria-hidden="true" tabindex="-1"></a><span class="co"># Y generieren</span></span>
<span id="cb51-148"><a href="#cb51-148" aria-hidden="true" tabindex="-1"></a>pre_event_mean <span class="ot">&lt;-</span> .<span class="dv">75</span> <span class="sc">*</span> x</span>
<span id="cb51-149"><a href="#cb51-149" aria-hidden="true" tabindex="-1"></a>post_event_mean <span class="ot">&lt;-</span> pre_event_mean <span class="sc">+</span> effect_size</span>
<span id="cb51-150"><a href="#cb51-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-151"><a href="#cb51-151" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(</span>
<span id="cb51-152"><a href="#cb51-152" aria-hidden="true" tabindex="-1"></a>  <span class="at">test =</span> time <span class="sc">&lt;=</span> t_event, </span>
<span id="cb51-153"><a href="#cb51-153" aria-hidden="true" tabindex="-1"></a>  <span class="at">yes =</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> pre_event_mean), </span>
<span id="cb51-154"><a href="#cb51-154" aria-hidden="true" tabindex="-1"></a>  <span class="at">no =</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> post_event_mean)</span>
<span id="cb51-155"><a href="#cb51-155" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-156"><a href="#cb51-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-157"><a href="#cb51-157" aria-hidden="true" tabindex="-1"></a><span class="co"># ZusammenfÃ¼hren der Daten</span></span>
<span id="cb51-158"><a href="#cb51-158" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb51-159"><a href="#cb51-159" aria-hidden="true" tabindex="-1"></a>  <span class="at">time =</span> time, </span>
<span id="cb51-160"><a href="#cb51-160" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> x,</span>
<span id="cb51-161"><a href="#cb51-161" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> y, </span>
<span id="cb51-162"><a href="#cb51-162" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Event bei t_event</span></span>
<span id="cb51-163"><a href="#cb51-163" aria-hidden="true" tabindex="-1"></a>  <span class="at">post =</span> <span class="fu">ifelse</span>(</span>
<span id="cb51-164"><a href="#cb51-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">test =</span> time <span class="sc">&gt;</span> t_event, </span>
<span id="cb51-165"><a href="#cb51-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">yes =</span> <span class="cn">TRUE</span>, </span>
<span id="cb51-166"><a href="#cb51-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">no =</span> <span class="cn">FALSE</span></span>
<span id="cb51-167"><a href="#cb51-167" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-168"><a href="#cb51-168" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-169"><a href="#cb51-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-170"><a href="#cb51-170" aria-hidden="true" tabindex="-1"></a><span class="co"># Ãœberblick</span></span>
<span id="cb51-171"><a href="#cb51-171" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data)</span>
<span id="cb51-172"><a href="#cb51-172" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-173"><a href="#cb51-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-176"><a href="#cb51-176" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-177"><a href="#cb51-177" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotten der Zielvariable und Regressor</span></span>
<span id="cb51-178"><a href="#cb51-178" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> time)) <span class="sc">+</span></span>
<span id="cb51-179"><a href="#cb51-179" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> y, <span class="at">linetype =</span> <span class="st">"Outcome-Variable"</span>), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb51-180"><a href="#cb51-180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> t_event, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb51-181"><a href="#cb51-181" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> x, <span class="at">linetype =</span> <span class="st">"Regressor"</span>)) <span class="sc">+</span></span>
<span id="cb51-182"><a href="#cb51-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit"</span>, <span class="at">y =</span> <span class="st">"Wert"</span>, <span class="at">color =</span> <span class="st">"Legende"</span>) <span class="sc">+</span></span>
<span id="cb51-183"><a href="#cb51-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_discrete</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb51-184"><a href="#cb51-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb51-185"><a href="#cb51-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb51-186"><a href="#cb51-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-187"><a href="#cb51-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-188"><a href="#cb51-188" aria-hidden="true" tabindex="-1"></a><span class="fu">### Event-Study-SchÃ¤tzung: Kausaler Effekt fÃ¼r $X_t$</span></span>
<span id="cb51-189"><a href="#cb51-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-190"><a href="#cb51-190" aria-hidden="true" tabindex="-1"></a>Wir schÃ¤tzen zunÃ¤chst den Effekt des Events auf $X_t$. Die Differenz der Mittelwerte nach und vor des Events ist ein erwartungstreuer und konistenter SchÃ¤tzer fÃ¼r $\alpha_1$. Dieser SchÃ¤tzer ist Ã¤quivalent zum KQ-SchÃ¤tzer von $\alpha_1$ im Modell</span>
<span id="cb51-191"><a href="#cb51-191" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb51-192"><a href="#cb51-192" aria-hidden="true" tabindex="-1"></a>  X_t = \alpha_1 \textup{post}_t + u.</span>
<span id="cb51-193"><a href="#cb51-193" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb51-194"><a href="#cb51-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-197"><a href="#cb51-197" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-198"><a href="#cb51-198" aria-hidden="true" tabindex="-1"></a><span class="co"># Effekt-SchÃ¤tzung fÃ¼r X</span></span>
<span id="cb51-199"><a href="#cb51-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-200"><a href="#cb51-200" aria-hidden="true" tabindex="-1"></a><span class="co"># Post-mean vs. Pre-Mean</span></span>
<span id="cb51-201"><a href="#cb51-201" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb51-202"><a href="#cb51-202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(post) <span class="sc">%&gt;%</span> </span>
<span id="cb51-203"><a href="#cb51-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">x_mean =</span> <span class="fu">mean</span>(x)) <span class="sc">%&gt;%</span></span>
<span id="cb51-204"><a href="#cb51-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(x_mean) <span class="sc">%&gt;%</span></span>
<span id="cb51-205"><a href="#cb51-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">diff</span>()</span>
<span id="cb51-206"><a href="#cb51-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-207"><a href="#cb51-207" aria-hidden="true" tabindex="-1"></a><span class="co"># ...ist Ã¤quivalent zum KQ-SchÃ¤tzer</span></span>
<span id="cb51-208"><a href="#cb51-208" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(</span>
<span id="cb51-209"><a href="#cb51-209" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> x <span class="sc">~</span> post,</span>
<span id="cb51-210"><a href="#cb51-210" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data</span>
<span id="cb51-211"><a href="#cb51-211" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb51-212"><a href="#cb51-212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span>
<span id="cb51-213"><a href="#cb51-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-214"><a href="#cb51-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-215"><a href="#cb51-215" aria-hidden="true" tabindex="-1"></a><span class="fu">### Event-Study-SchÃ¤tzung: Kausaler Effekt fÃ¼r $Y_t$</span></span>
<span id="cb51-216"><a href="#cb51-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-217"><a href="#cb51-217" aria-hidden="true" tabindex="-1"></a>FÃ¼r die SchÃ¤tzung von $\beta_2$ liefert diese Vorgehensweise einen verzerrten SchÃ¤tzer des kausalen Effekts des Events auf $Y_t$.</span>
<span id="cb51-218"><a href="#cb51-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-221"><a href="#cb51-221" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-222"><a href="#cb51-222" aria-hidden="true" tabindex="-1"></a><span class="co"># Verzerrte Effekt-SchÃ¤tzung fÃ¼r Y</span></span>
<span id="cb51-223"><a href="#cb51-223" aria-hidden="true" tabindex="-1"></a><span class="co"># Post-mean vs. Pre-Mean</span></span>
<span id="cb51-224"><a href="#cb51-224" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb51-225"><a href="#cb51-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(post) <span class="sc">%&gt;%</span> </span>
<span id="cb51-226"><a href="#cb51-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">y_mean =</span> <span class="fu">mean</span>(y)) <span class="sc">%&gt;%</span></span>
<span id="cb51-227"><a href="#cb51-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(y_mean) <span class="sc">%&gt;%</span></span>
<span id="cb51-228"><a href="#cb51-228" aria-hidden="true" tabindex="-1"></a>  <span class="fu">diff</span>()</span>
<span id="cb51-229"><a href="#cb51-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-230"><a href="#cb51-230" aria-hidden="true" tabindex="-1"></a><span class="co"># ...ist Ã¤quivalent zum KQ-SchÃ¤tzer</span></span>
<span id="cb51-231"><a href="#cb51-231" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(</span>
<span id="cb51-232"><a href="#cb51-232" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> y <span class="sc">~</span> post,</span>
<span id="cb51-233"><a href="#cb51-233" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data</span>
<span id="cb51-234"><a href="#cb51-234" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb51-235"><a href="#cb51-235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span>
<span id="cb51-236"><a href="#cb51-236" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-237"><a href="#cb51-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-238"><a href="#cb51-238" aria-hidden="true" tabindex="-1"></a>Eine bessere Alternative ist die SchÃ¤tzung des Effekts anhand der Vorhersage von $Y_t$ durch $X_t$ fÃ¼r Beobachtungen von $X_t$ *nach* dem Event. HierfÃ¼r schÃ¤tzen wir das Modell \begin{align}</span>
<span id="cb51-239"><a href="#cb51-239" aria-hidden="true" tabindex="-1"></a>  Y_t = \beta_0 + \beta_1 X_t + e_t\label{eq:xpredy}</span>
<span id="cb51-240"><a href="#cb51-240" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb51-241"><a href="#cb51-241" aria-hidden="true" tabindex="-1"></a>mit Beobachtungen *vor* dem Event und berechnen vorhergesagte Werte $\widehat{Y}_t$ mit Beobachtungen $X_t$ *nach* dem Event.</span>
<span id="cb51-242"><a href="#cb51-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-245"><a href="#cb51-245" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-246"><a href="#cb51-246" aria-hidden="true" tabindex="-1"></a><span class="co"># Modell zur Vorhersage von Y mit X</span></span>
<span id="cb51-247"><a href="#cb51-247" aria-hidden="true" tabindex="-1"></a>model_pre_event <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb51-248"><a href="#cb51-248" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> y <span class="sc">~</span> x, </span>
<span id="cb51-249"><a href="#cb51-249" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Beobachtungen vor dem Ereignis</span></span>
<span id="cb51-250"><a href="#cb51-250" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb51-251"><a href="#cb51-251" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span>post)</span>
<span id="cb51-252"><a href="#cb51-252" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-253"><a href="#cb51-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-254"><a href="#cb51-254" aria-hidden="true" tabindex="-1"></a><span class="co"># Vorhersage von Y mit X</span></span>
<span id="cb51-255"><a href="#cb51-255" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb51-256"><a href="#cb51-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-257"><a href="#cb51-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">predicted =</span> <span class="fu">predict</span>(</span>
<span id="cb51-258"><a href="#cb51-258" aria-hidden="true" tabindex="-1"></a>      <span class="at">object =</span> model_pre_event, </span>
<span id="cb51-259"><a href="#cb51-259" aria-hidden="true" tabindex="-1"></a>      <span class="at">newdata =</span> data</span>
<span id="cb51-260"><a href="#cb51-260" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-261"><a href="#cb51-261" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-262"><a href="#cb51-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-263"><a href="#cb51-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-264"><a href="#cb51-264" aria-hidden="true" tabindex="-1"></a>Die nachfolgende Grafik zeigt die mit $X_t$ vorhergesagte Entwicklung von $Y_t$ nach dem Event.</span>
<span id="cb51-265"><a href="#cb51-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-268"><a href="#cb51-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-269"><a href="#cb51-269" aria-hidden="true" tabindex="-1"></a><span class="co"># Vorhersage von Y und X plotten</span></span>
<span id="cb51-270"><a href="#cb51-270" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> time)) <span class="sc">+</span></span>
<span id="cb51-271"><a href="#cb51-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> y, <span class="at">color =</span> <span class="st">"Outcome Y"</span>), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb51-272"><a href="#cb51-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> t_event, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb51-273"><a href="#cb51-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb51-274"><a href="#cb51-274" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(post), </span>
<span id="cb51-275"><a href="#cb51-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> predicted, <span class="at">color =</span> <span class="st">"Counterfactual Y"</span>),</span>
<span id="cb51-276"><a href="#cb51-276" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">1</span></span>
<span id="cb51-277"><a href="#cb51-277" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-278"><a href="#cb51-278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit"</span>, <span class="at">y =</span> <span class="st">"Zielvariable"</span>) <span class="sc">+</span></span>
<span id="cb51-279"><a href="#cb51-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb51-280"><a href="#cb51-280" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>,</span>
<span id="cb51-281"><a href="#cb51-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb51-282"><a href="#cb51-282" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Outcome Y"</span> <span class="ot">=</span> <span class="st">"black"</span>, </span>
<span id="cb51-283"><a href="#cb51-283" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Counterfactual Y"</span> <span class="ot">=</span> <span class="st">"steelblue"</span></span>
<span id="cb51-284"><a href="#cb51-284" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-285"><a href="#cb51-285" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-286"><a href="#cb51-286" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb51-287"><a href="#cb51-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb51-288"><a href="#cb51-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-289"><a href="#cb51-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-290"><a href="#cb51-290" aria-hidden="true" tabindex="-1"></a>Ein SchÃ¤tzer des Effekts basierend auf dieser Vorhersage ist die Differenz zwischen dem mittleren beobachteten und vorhersagten Werten von $Y_t$ (counterfactual).</span>
<span id="cb51-291"><a href="#cb51-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-294"><a href="#cb51-294" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-295"><a href="#cb51-295" aria-hidden="true" tabindex="-1"></a><span class="co"># mean(Y) - mean(gesch. counterfactual)</span></span>
<span id="cb51-296"><a href="#cb51-296" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb51-297"><a href="#cb51-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(post) <span class="sc">%&gt;%</span> </span>
<span id="cb51-298"><a href="#cb51-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb51-299"><a href="#cb51-299" aria-hidden="true" tabindex="-1"></a>    <span class="at">effect =</span> <span class="fu">mean</span>(y) <span class="sc">-</span> <span class="fu">mean</span>(predicted)</span>
<span id="cb51-300"><a href="#cb51-300" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-301"><a href="#cb51-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-302"><a href="#cb51-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-303"><a href="#cb51-303" aria-hidden="true" tabindex="-1"></a>Unter der Annahme, dass der kausale Effekt des Events langfristig (fÃ¼r sÃ¤mtliche Beobachtungen mit $t&gt;t_\textup{Event}$) auf $Y_t$ wirkt, kÃ¶nnen wir $\beta_2$ effizienter mit einem Interaktionsmodell schÃ¤tzen. Hierbei vermeiden wir die Unsicherheit in den vorhergesagten Werten $\widehat{Y}_t$, die aus der SchÃ¤tzung des Modells \eqref{eq:xpredy} resultiert.</span>
<span id="cb51-304"><a href="#cb51-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-307"><a href="#cb51-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-308"><a href="#cb51-308" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(</span>
<span id="cb51-309"><a href="#cb51-309" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> y <span class="sc">~</span> x <span class="sc">+</span> post,</span>
<span id="cb51-310"><a href="#cb51-310" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data</span>
<span id="cb51-311"><a href="#cb51-311" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb51-312"><a href="#cb51-312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span>
<span id="cb51-313"><a href="#cb51-313" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-314"><a href="#cb51-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-315"><a href="#cb51-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-316"><a href="#cb51-316" aria-hidden="true" tabindex="-1"></a><span class="fu">## Case Study: Abschreckungseffekte durch Strafgesetzgebung {#sec-deterrance}</span></span>
<span id="cb51-317"><a href="#cb51-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-318"><a href="#cb51-318" aria-hidden="true" tabindex="-1"></a>@Abrams2012 untersucht den Abschreckungseffekt drohender Inhaftierung fÃ¼r Straftaten anhand von Daten zu verschÃ¤rfter Strafgesetzgebung ("Add-on laws") in den USA. Solche Gesetze erhÃ¶hen in der Regel die Strafen fÃ¼r Delikte, insbesondere wenn nachweiÃŸlich Schusswaffen verwendet werden. Die Studie nutzt eine Event-Study-Methodik, um die Auswirkungen dieser GesetzesÃ¤nderung auf die KriminalitÃ¤tsraten fÃ¼r verschiedene Straftaten zu analysieren. Dabei wird der Zeitpunkt der tatsÃ¤chlichen GesetzeseinfÃ¼hrung in verschiedenen US-Bundesstaaten herangezogen, um den kausalen Abschreckungseffekt einer drohenden GefÃ¤ngnisstrafe anhand von Statistiken in den unmittelbaren Folgeperioden zu isolieren. </span>
<span id="cb51-319"><a href="#cb51-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-320"><a href="#cb51-320" aria-hidden="true" tabindex="-1"></a><span class="fu">### Identifikationsstrategie</span></span>
<span id="cb51-321"><a href="#cb51-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-322"><a href="#cb51-322" aria-hidden="true" tabindex="-1"></a>Der Fokus des Forschungsdesigns liegt auf der Unterscheidung zwischen zwei wesentlichen WirkungskanÃ¤len von verschÃ¤rften Strafgesetzen auf die KriminalitÃ¤tsrate:</span>
<span id="cb51-323"><a href="#cb51-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-324"><a href="#cb51-324" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Abschreckungseffekt**: Die Aussicht auf eine lÃ¤ngere Inhaftierung erzielt einen Abschreckungseffekt, der sich 'positiv' auf die KriminalitÃ¤tsrate auswirkt (im Sinne einer verringerten KriminalitÃ¤t). Dies ist der vermutete (kausale) Effekt.</span>
<span id="cb51-325"><a href="#cb51-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-326"><a href="#cb51-326" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Inhaftierungseffekt**: Inhaftierte Individuen kÃ¶nnen keine Straftaten begehen und verringern daher die KriminalitÃ¤tsrate. Dieser Effekt ist insbesondere fÃ¼r Straftaten mit groÃŸer RÃ¼ckfÃ¤lligkeit plausibel (etwa BeschaffungskriminalitÃ¤t). FÃ¼r lÃ¤ngere Haftstrafen erwarten wir daher einen RÃ¼ckgang dieser KriminalitÃ¤tsraten nach der VerschÃ¤rfung der Gesetze.</span>
<span id="cb51-327"><a href="#cb51-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-328"><a href="#cb51-328" aria-hidden="true" tabindex="-1"></a>Der in 2. beschriebene Effekt der GesetzesverschÃ¤rfung kann sich erst *nach* der im Rahmen der alten Gesetzgebung verhÃ¤ngten durchschnitlichen Mindesthaftstrafe einstellen: Der verringernde Effekt auf die KriminalitÃ¤tsrate zeigt sich erst in den Daten, nachdem StraftÃ¤ter lÃ¤nger als gemÃ¤ÃŸ der alten Gesetzgebung Ã¼blich inhaftiert sind. RÃ¼ckgÃ¤nge der KriminalitÃ¤trate die in diesem Zeitraum unmittelbar nach der GesetztesverschÃ¤rfung gemessen werden, kÃ¶nnen also auf den Abschreckungseffekt zurÃ¼ckgefÃ¼hrt werden. Anhand von Statistiken zu verhÃ¤ngten Strafen fÃ¼r ÃœberfÃ¤lle mit Schusswaffen ermittelt @Abrams2012 ein mittleres Mindest-StrafmaÃŸ von drei Jahren.</span>
<span id="cb51-329"><a href="#cb51-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-330"><a href="#cb51-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-331"><a href="#cb51-331" aria-hidden="true" tabindex="-1"></a>Die ExogenitÃ¤t der Verabschiedung von Add-On-Gesetzen wird in @Abrams2012 wiefolgt begrÃ¼ndet: Obwohl die meisten Zusatzgesetze zu Schusswaffen in den 1970er Jahren erlassen wurden und es gemeinsame Trends in den KriminalitÃ¤sraten der Bundesstaaten gibt, sind *die genauen Zeitpunkte* der EinfÃ¼hrung solcher Gesetze aufgrund einer Vielzahl von Eigenheiten des politischen Prozesses in den Bundesstaaten weitgehend zufÃ¤llig. Die ExogenitÃ¤t ist plausibel, wenn wir (durch Regression) Backdoors aufgrund Bundesstaat-spezifischer (konstanter und zeit-variierender) Faktoren schlieÃŸen. </span>
<span id="cb51-332"><a href="#cb51-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-333"><a href="#cb51-333" aria-hidden="true" tabindex="-1"></a><span class="fu">### Replikation mit R</span></span>
<span id="cb51-334"><a href="#cb51-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-335"><a href="#cb51-335" aria-hidden="true" tabindex="-1"></a>Der Datensatz <span class="in">`Abrams2012.dta`</span> ist ein Auszug der Daten aus dem Replikationspaket <span class="co">[</span><span class="ot">@Abrams2012data</span><span class="co">]</span>, welches <span class="co">[</span><span class="ot">hier</span><span class="co">](https://www.openicpsr.org/openicpsr/project/113838/version/V1/view)</span> eingesehen werden kann. Die Daten liegen im STATA-Format <span class="in">`.dta`</span> vor und kÃ¶nnen mit <span class="in">`haven::read_dta()`</span> eingelesen werden.</span>
<span id="cb51-336"><a href="#cb51-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-337"><a href="#cb51-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{webr-r}</span></span>
<span id="cb51-338"><a href="#cb51-338" aria-hidden="true" tabindex="-1"></a><span class="in">#| autorun: true</span></span>
<span id="cb51-339"><a href="#cb51-339" aria-hidden="true" tabindex="-1"></a><span class="in">library(haven)</span></span>
<span id="cb51-340"><a href="#cb51-340" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb51-341"><a href="#cb51-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-342"><a href="#cb51-342" aria-hidden="true" tabindex="-1"></a><span class="in"># Datensatz einlesen</span></span>
<span id="cb51-343"><a href="#cb51-343" aria-hidden="true" tabindex="-1"></a><span class="in">abrams &lt;- read_dta(file = "datasets/Abrams2012.dta")</span></span>
<span id="cb51-344"><a href="#cb51-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-345"><a href="#cb51-345" aria-hidden="true" tabindex="-1"></a><span class="in"># Ãœberblick</span></span>
<span id="cb51-346"><a href="#cb51-346" aria-hidden="true" tabindex="-1"></a><span class="in">glimpse(abrams)</span></span>
<span id="cb51-347"><a href="#cb51-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-348"><a href="#cb51-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-349"><a href="#cb51-349" aria-hidden="true" tabindex="-1"></a>Die Beobachtungen (Zeilen) in <span class="in">`abrams`</span> sind Kriminalstatistiken von staatlichen Rechtsberichterstattungsagenturen, die im Rahmen der <span class="co">[</span><span class="ot">Uniform Crime Reports</span><span class="co">](https://www.fbi.gov/how-we-can-help-you/more-fbi-services-and-information/ucr)</span> des  FBI landesweit fÃ¼r den Zeitraum 1965 bis 2002 zusammengetragen wurden. Eine ErlÃ¤uterung der verfÃ¼gbaren (ausschlieÃŸlich numerischen) Variablen erfolgt in @tbl-abrams2012vars.</span>
<span id="cb51-350"><a href="#cb51-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-353"><a href="#cb51-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-354"><a href="#cb51-354" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb51-355"><a href="#cb51-355" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-abrams2012vars</span></span>
<span id="cb51-356"><a href="#cb51-356" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "`Abrams2012.dta` -- KriminalitÃ¤t in US-Bundesstaaten."</span></span>
<span id="cb51-357"><a href="#cb51-357" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb51-358"><a href="#cb51-358" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">colnames</span>(abrams),</span>
<span id="cb51-359"><a href="#cb51-359" aria-hidden="true" tabindex="-1"></a>  <span class="at">Beschreibung =</span> <span class="fu">c</span>(</span>
<span id="cb51-360"><a href="#cb51-360" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Pro-Kopf-KriminalitÃ¤tsrate"</span>,</span>
<span id="cb51-361"><a href="#cb51-361" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Pro-Kopf-Rate RaubÃ¼berfÃ¤lle mit Schusswaffen"</span>,</span>
<span id="cb51-362"><a href="#cb51-362" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Pro-Kopf-Rate Angriff mit Schusswaffen"</span>,</span>
<span id="cb51-363"><a href="#cb51-363" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Einbruch"</span>,</span>
<span id="cb51-364"><a href="#cb51-364" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mord"</span>,</span>
<span id="cb51-365"><a href="#cb51-365" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Log Pro-Kopf-Rate RaubÃ¼berfÃ¤lle mit Schusswaffen"</span>,</span>
<span id="cb51-366"><a href="#cb51-366" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Bundesstaat"</span>,</span>
<span id="cb51-367"><a href="#cb51-367" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Jahr"</span>,</span>
<span id="cb51-368"><a href="#cb51-368" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gesetzliche Mindeststrafe in Kraft"</span>,</span>
<span id="cb51-369"><a href="#cb51-369" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Perioden rel. zur EinfÃ¼hrung von Add-On-Law"</span>,</span>
<span id="cb51-370"><a href="#cb51-370" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dummy: Jemals Add-on-Law?"</span>,</span>
<span id="cb51-371"><a href="#cb51-371" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dummy: 1 Jahr nach EinfÃ¼hrung Add-On-Law"</span>,</span>
<span id="cb51-372"><a href="#cb51-372" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dummy: 2 Jahre nach EinfÃ¼hrung Add-On-Law"</span>,</span>
<span id="cb51-373"><a href="#cb51-373" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dummy: 3 Jahre nach EinfÃ¼hrung Add-On-Law"</span>,</span>
<span id="cb51-374"><a href="#cb51-374" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Armutsquote"</span>,</span>
<span id="cb51-375"><a href="#cb51-375" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Arbeitlosenquote"</span>,</span>
<span id="cb51-376"><a href="#cb51-376" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BevÃ¶lkerungsstruktur"</span>,</span>
<span id="cb51-377"><a href="#cb51-377" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Anteil 15 bis 17 JÃ¤hrige"</span>,</span>
<span id="cb51-378"><a href="#cb51-378" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Anteil 18 bis 24 JÃ¤hrige"</span>,</span>
<span id="cb51-379"><a href="#cb51-379" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Anteil 25 bis 34 JÃ¤hrige"</span>,</span>
<span id="cb51-380"><a href="#cb51-380" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Anteil PolizeikrÃ¤fte an BevÃ¶lkerung"</span>,</span>
<span id="cb51-381"><a href="#cb51-381" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Anteil Inhaftierte an der BevÃ¶lkerung"</span>,</span>
<span id="cb51-382"><a href="#cb51-382" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dummy: Beobachtung nach 1974"</span>,</span>
<span id="cb51-383"><a href="#cb51-383" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BevÃ¶lkerung"</span></span>
<span id="cb51-384"><a href="#cb51-384" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-385"><a href="#cb51-385" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb51-386"><a href="#cb51-386" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-387"><a href="#cb51-387" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabopts</span>()</span>
<span id="cb51-388"><a href="#cb51-388" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-389"><a href="#cb51-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-390"><a href="#cb51-390" aria-hidden="true" tabindex="-1"></a>Wir replizieren nachfolgend Kernergebnisse aus @Abrams2012 hinsichtlich des Abschreckungseffekts von drohenden GefÃ¤ngnisstrafen auf die Begehung von RaubÃ¼berfÃ¤llen mit Schusswaffen. </span>
<span id="cb51-391"><a href="#cb51-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-392"><a href="#cb51-392" aria-hidden="true" tabindex="-1"></a>FÃ¼r einen ersten Eindruck der Entwicklung von KriminalitÃ¤tsraten in US-Bundesstaaten, die Ã¼ber den Beobachutungszeitraum Add-On-Gesetze erlassen haben, berechnen wir zunÃ¤chst mit der Population  (<span class="in">`statepop`</span>) gewichtete Mittelwerte vor und nach der EinfÃ¼hrung dieser Gesetzte.^<span class="co">[</span><span class="ot">Die Mittelwerte hier und sÃ¤mtliche PunktschÃ¤tzer in den nachfolgenden Regressionen sind bevÃ¶lkerungsgewichtet, sodass Statistiken von BehÃ¶rden, die grÃ¶ÃŸere BevÃ¶lkerungsteile abdecken, einen grÃ¶ÃŸeren Einfluss auf die SchÃ¤tzung haben als BehÃ¶rden in Regionen mit kleinerer Population.</span><span class="co">]</span> Hierzu verwenden wir eine Teilmenge des Panel-Datensatzes <span class="in">`abrams`</span> mit Beobachtungen zu 7 Zeitpunkten vor sowie 6 Zeitpunkten nach dem Inkraftreten der GesetzesverschÃ¤rfung. </span>
<span id="cb51-393"><a href="#cb51-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-396"><a href="#cb51-396" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-397"><a href="#cb51-397" aria-hidden="true" tabindex="-1"></a><span class="co"># Datensatz fÃ¼r Vergleich mittlerer KriminalitÃ¤t vorbereiten</span></span>
<span id="cb51-398"><a href="#cb51-398" aria-hidden="true" tabindex="-1"></a>abrams_t1 <span class="ot">&lt;-</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-399"><a href="#cb51-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-400"><a href="#cb51-400" aria-hidden="true" tabindex="-1"></a>    <span class="at">before =</span> <span class="fu">case_when</span>(</span>
<span id="cb51-401"><a href="#cb51-401" aria-hidden="true" tabindex="-1"></a>      relyr <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Danach"</span>,</span>
<span id="cb51-402"><a href="#cb51-402" aria-hidden="true" tabindex="-1"></a>      T <span class="sc">~</span> <span class="st">"Bevor"</span></span>
<span id="cb51-403"><a href="#cb51-403" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-404"><a href="#cb51-404" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb51-405"><a href="#cb51-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-406"><a href="#cb51-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb51-407"><a href="#cb51-407" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Angriff mit Schusswaffen</span><span class="st">`</span> <span class="ot">=</span> pcrasltgun,</span>
<span id="cb51-408"><a href="#cb51-408" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Einbruch</span><span class="st">`</span> <span class="ot">=</span> pcrburgtot,</span>
<span id="cb51-409"><a href="#cb51-409" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">RaubÃ¼berfall mit Schusswaffe</span><span class="st">`</span> <span class="ot">=</span> pcrrobgun,</span>
<span id="cb51-410"><a href="#cb51-410" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Mord</span><span class="st">`</span> <span class="ot">=</span> pcrmurder</span>
<span id="cb51-411"><a href="#cb51-411" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-412"><a href="#cb51-412" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-413"><a href="#cb51-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-414"><a href="#cb51-414" aria-hidden="true" tabindex="-1"></a>FÃ¼r die tabellarische Zusammenfassung nutzen wir <span class="in">`modelsummary::datasummary()`</span>. Ãœber das Argument <span class="in">`formula`</span> definieren wir die zu berechnenden Statistiken <span class="in">`diagis::weighted_mean`</span> und <span class="in">`diagis::weighted_se`</span> fÃ¼r vier Kategorien von Delikten. Der Operator <span class="in">`*`</span> bewirkt eine gruppierte Berechnung dieser Statistiken (gemÃ¤ÃŸ <span class="in">`before`</span>).</span>
<span id="cb51-415"><a href="#cb51-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-418"><a href="#cb51-418" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-419"><a href="#cb51-419" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Mittlere KriminalitÃ¤tsraten je 100k Einwohner vor und nach EinfÃ¼hrung strafverschÃ¤rfender Gesetze"</span></span>
<span id="cb51-420"><a href="#cb51-420" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-abramssmmry</span></span>
<span id="cb51-421"><a href="#cb51-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-422"><a href="#cb51-422" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb51-423"><a href="#cb51-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-424"><a href="#cb51-424" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabellarische Zusammenfassung</span></span>
<span id="cb51-425"><a href="#cb51-425" aria-hidden="true" tabindex="-1"></a><span class="fu">datasummary</span>(</span>
<span id="cb51-426"><a href="#cb51-426" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span></span>
<span id="cb51-427"><a href="#cb51-427" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Angriff mit Schusswaffen</span><span class="st">`</span></span>
<span id="cb51-428"><a href="#cb51-428" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span> <span class="st">`</span><span class="at">Einbruch</span><span class="st">`</span></span>
<span id="cb51-429"><a href="#cb51-429" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span> <span class="st">`</span><span class="at">Mord</span><span class="st">`</span></span>
<span id="cb51-430"><a href="#cb51-430" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span> <span class="st">`</span><span class="at">RaubÃ¼berfall mit Schusswaffe</span><span class="st">`</span></span>
<span id="cb51-431"><a href="#cb51-431" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-432"><a href="#cb51-432" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> (<span class="fu">Factor</span>(before) </span>
<span id="cb51-433"><a href="#cb51-433" aria-hidden="true" tabindex="-1"></a>     <span class="sc">*</span> (</span>
<span id="cb51-434"><a href="#cb51-434" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb51-435"><a href="#cb51-435" aria-hidden="true" tabindex="-1"></a>          (<span class="at">mean =</span> diagis<span class="sc">::</span>weighted_mean) <span class="sc">+</span> (<span class="at">SE =</span> diagis<span class="sc">::</span>weighted_se) </span>
<span id="cb51-436"><a href="#cb51-436" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb51-437"><a href="#cb51-437" aria-hidden="true" tabindex="-1"></a>        <span class="sc">*</span> <span class="fu">Arguments</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">w =</span> statepop)</span>
<span id="cb51-438"><a href="#cb51-438" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb51-439"><a href="#cb51-439" aria-hidden="true" tabindex="-1"></a>     ), </span>
<span id="cb51-440"><a href="#cb51-440" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-441"><a href="#cb51-441" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> abrams_t1</span>
<span id="cb51-442"><a href="#cb51-442" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-443"><a href="#cb51-443" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-444"><a href="#cb51-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-445"><a href="#cb51-445" aria-hidden="true" tabindex="-1"></a>@tbl-abramssmmry zeigt, dass es in den ZeitrÃ¤umen nach GesetzesverschÃ¤rfungen im Mittel zu einer Verringerung der betrachteten Pro-Kopf-KriminalitÃ¤tsraten kommt.^<span class="co">[</span><span class="ot">@tbl-abramssmmry reproduziert Teilergebnisse von Tabelle 1 in @Abrams2012.</span><span class="co">]</span> Da @Abrams2012 sich auf die Analyse des Effekts auf Delikte unter Gebrauch von Schusswaffen fokussiert, berechnen wir weiterhin Trends in der allgemeinen Pro-Kopf-KriminalitÃ¤t (<span class="in">`pcralloffense`</span>) und RaubÃ¼berfÃ¤lle mit Schusswaffen, (<span class="in">`pcrrobgun`</span>). Wir unterscheiden hierbei zusÃ¤tzlich zwischen Bundesstaaten, die im Beobachtungszeitraum Add-On-Gesetzte verabschiedet haben (<span class="in">`everaddon`</span>) und solchen ohne.</span>
<span id="cb51-446"><a href="#cb51-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-449"><a href="#cb51-449" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-450"><a href="#cb51-450" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb51-451"><a href="#cb51-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-452"><a href="#cb51-452" aria-hidden="true" tabindex="-1"></a><span class="co"># Populationsgewichtete Trends berechnen</span></span>
<span id="cb51-453"><a href="#cb51-453" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="ot">&lt;-</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-454"><a href="#cb51-454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb51-455"><a href="#cb51-455" aria-hidden="true" tabindex="-1"></a>    year, </span>
<span id="cb51-456"><a href="#cb51-456" aria-hidden="true" tabindex="-1"></a>    everaddon, </span>
<span id="cb51-457"><a href="#cb51-457" aria-hidden="true" tabindex="-1"></a>    pcralloffense, </span>
<span id="cb51-458"><a href="#cb51-458" aria-hidden="true" tabindex="-1"></a>    pcrrobgun, </span>
<span id="cb51-459"><a href="#cb51-459" aria-hidden="true" tabindex="-1"></a>    statepop</span>
<span id="cb51-460"><a href="#cb51-460" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-461"><a href="#cb51-461" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-462"><a href="#cb51-462" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Skalierung fÃ¼r 2. Y-Achse</span></span>
<span id="cb51-463"><a href="#cb51-463" aria-hidden="true" tabindex="-1"></a>    <span class="at">pcrrobgun =</span> pcrrobgun <span class="sc">*</span> <span class="fl">33.3</span></span>
<span id="cb51-464"><a href="#cb51-464" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-465"><a href="#cb51-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb51-466"><a href="#cb51-466" aria-hidden="true" tabindex="-1"></a>    <span class="at">Schusswaffen =</span> pcrrobgun, </span>
<span id="cb51-467"><a href="#cb51-467" aria-hidden="true" tabindex="-1"></a>    <span class="at">Gesamt =</span> pcralloffense,</span>
<span id="cb51-468"><a href="#cb51-468" aria-hidden="true" tabindex="-1"></a>    <span class="at">AddOnGesetze =</span> everaddon</span>
<span id="cb51-469"><a href="#cb51-469" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-470"><a href="#cb51-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb51-471"><a href="#cb51-471" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> Schusswaffen<span class="sc">:</span>Gesamt, </span>
<span id="cb51-472"><a href="#cb51-472" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"Verbrechen"</span>, </span>
<span id="cb51-473"><a href="#cb51-473" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"Wert"</span></span>
<span id="cb51-474"><a href="#cb51-474" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-475"><a href="#cb51-475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, AddOnGesetze, Verbrechen) <span class="sc">%&gt;%</span> </span>
<span id="cb51-476"><a href="#cb51-476" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-477"><a href="#cb51-477" aria-hidden="true" tabindex="-1"></a>    <span class="at">AddOnGesetze =</span> <span class="fu">as.factor</span>(AddOnGesetze),</span>
<span id="cb51-478"><a href="#cb51-478" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-479"><a href="#cb51-479" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Gewichtete Mittelwerte</span></span>
<span id="cb51-480"><a href="#cb51-480" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb51-481"><a href="#cb51-481" aria-hidden="true" tabindex="-1"></a>    <span class="at">Wert =</span> <span class="fu">weighted.mean</span>(</span>
<span id="cb51-482"><a href="#cb51-482" aria-hidden="true" tabindex="-1"></a>      Wert, </span>
<span id="cb51-483"><a href="#cb51-483" aria-hidden="true" tabindex="-1"></a>      <span class="at">w =</span> statepop, </span>
<span id="cb51-484"><a href="#cb51-484" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> T</span>
<span id="cb51-485"><a href="#cb51-485" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-486"><a href="#cb51-486" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb51-487"><a href="#cb51-487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-488"><a href="#cb51-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-489"><a href="#cb51-489" aria-hidden="true" tabindex="-1"></a>Wir plotten die berechneten Trends in <span class="in">`plot_dat`</span> mit entsprechender Farbgebung mit <span class="in">`ggplot2()`</span>. Das Ergebnis (@fig-abramstrends) ist eine Reproduktion von Abbildung 2 in @Abrams2012.</span>
<span id="cb51-490"><a href="#cb51-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-493"><a href="#cb51-493" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-494"><a href="#cb51-494" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-abramstrends</span></span>
<span id="cb51-495"><a href="#cb51-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Populations-gewichtete mittlere Pro-Kopf-KriminalitÃ¤tsraten fÃ¼r US-Bundesstaaten (1965--2002)"</span></span>
<span id="cb51-496"><a href="#cb51-496" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb51-497"><a href="#cb51-497" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb51-498"><a href="#cb51-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-499"><a href="#cb51-499" aria-hidden="true" tabindex="-1"></a><span class="co"># Trendverlauf plotten</span></span>
<span id="cb51-500"><a href="#cb51-500" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb51-501"><a href="#cb51-501" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> plot_dat,</span>
<span id="cb51-502"><a href="#cb51-502" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb51-503"><a href="#cb51-503" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> year, </span>
<span id="cb51-504"><a href="#cb51-504" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Wert, </span>
<span id="cb51-505"><a href="#cb51-505" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> Verbrechen, </span>
<span id="cb51-506"><a href="#cb51-506" aria-hidden="true" tabindex="-1"></a>    <span class="at">lty =</span> AddOnGesetze</span>
<span id="cb51-507"><a href="#cb51-507" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-508"><a href="#cb51-508" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb51-509"><a href="#cb51-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb51-510"><a href="#cb51-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb51-511"><a href="#cb51-511" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Gesamte Anzeigen / 100k Einw."</span>,</span>
<span id="cb51-512"><a href="#cb51-512" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(</span>
<span id="cb51-513"><a href="#cb51-513" aria-hidden="true" tabindex="-1"></a>      <span class="at">transform =</span> <span class="sc">~</span> . <span class="sc">/</span> <span class="fl">33.3</span>, </span>
<span id="cb51-514"><a href="#cb51-514" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"RaubÃ¼berfÃ¤lle Schusswaffen / 100k Einw."</span></span>
<span id="cb51-515"><a href="#cb51-515" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-516"><a href="#cb51-516" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-517"><a href="#cb51-517" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb51-518"><a href="#cb51-518" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb51-519"><a href="#cb51-519" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb51-520"><a href="#cb51-520" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.left =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#F8766D"</span>),</span>
<span id="cb51-521"><a href="#cb51-521" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#00BFC4"</span>)</span>
<span id="cb51-522"><a href="#cb51-522" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-523"><a href="#cb51-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-524"><a href="#cb51-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-525"><a href="#cb51-525" aria-hidden="true" tabindex="-1"></a>@fig-abramstrends zeigt einen starken Anstieg der KriminalitÃ¤t in den 1960er und 1970er Jahren, insbesondere fÃ¼r RabÃ¼berfÃ¤lle mit Schusswaffen. Weiterhin sind die Trends in Staaten mit und ohne Zusatzstrafen deutlich korreliert. Die Entwicklung der Pro-Kopf-KriminalitÃ¤t insgesamt schwÃ¤cht sich anschlieÃŸend ab und folgt ab den 1990er Jahren einem rÃ¼cklÃ¤ufigen Trend. Es ist auffÃ¤llig, dass sowohl die bewaffneten RaubÃ¼berfÃ¤lle als auch die allgemeine KriminalitÃ¤t zu Beginn des Beobachtungszeitraums fÃ¼r Staaten mit Add-on-Gesetzen hÃ¶her sind, sich dies aber im letzten Jahrzehnt ebenfalls umkehrt. Wie in @Abrams2012 erlÃ¤utert, kÃ¶nnte dies sowohl auf verschÃ¤fte Gesetze als auch auf Variation zwischen den Bundesstaaten zurÃ¼ckzufÃ¼hren sein. Statistische Verfahren zur SchÃ¤tzung des Effekts also sollten zwischen diesen MÃ¶glichkeiten unterscheiden kÃ¶nnen, bspw. durch die Kontrolle fÃ¼r Fixed Effects und Zeit-Trends.</span>
<span id="cb51-526"><a href="#cb51-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-527"><a href="#cb51-527" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Basis-Spezifikation</span></span>
<span id="cb51-528"><a href="#cb51-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-529"><a href="#cb51-529" aria-hidden="true" tabindex="-1"></a>Wir folgen @Abrams2012 und schÃ¤tzen zunÃ¤chst eine Basis-Spezifikation fÃ¼r eine balancierte Teilstichprobe aus <span class="in">`abrams`</span>. Hierbei werden lediglich Bundesstaaten mit Datenpunkten mindestens 7 Jahre vor und maximal 6 Jahre nach der EinfÃ¼hung eines Add-On-Gesetzes berÃ¼cksichtigt. Das Regressionsmodell ist</span>
<span id="cb51-530"><a href="#cb51-530" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb51-531"><a href="#cb51-531" aria-hidden="true" tabindex="-1"></a>  \log\textup{Rob}_{at} = \beta \textup{AddOn}^i_{st} + \lambda_s + \gamma_t + x_{st} + \epsilon_{at},\label{eq:abramsbase}</span>
<span id="cb51-532"><a href="#cb51-532" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb51-533"><a href="#cb51-533" aria-hidden="true" tabindex="-1"></a>wobei $\log\textup{Rob}_{at}$ die logarithmierte Pro-Kopf-Rate fÃ¼r ÃœberfÃ¤lle mit Schusswaffe (`lnpcrrobgun`). $\textup{AddOn}^i_{st}$ ist eine Dummy-Variable die 1 ist fÃ¼r Beobachtungen des Bundesstaats $s$ in Jahr $t$, wenn die EinfÃ¼hrung des Add-On-Gesetzes $i$ Jahre zurÃ¼ckliegt. Wir folgen @Abrams2012 und betrachten Modelle mit $i\in<span class="sc">\{</span>1,2,3<span class="sc">\}</span>$, d.h. wir unterscheiden zwischen Effekten bis zu drei Jahren (durchschnittliche Mindeststrafe nach alter Gesetzgebung) nach EinfÃ¼hrung eines Add-On-Gesetzes.</span>
<span id="cb51-534"><a href="#cb51-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-535"><a href="#cb51-535" aria-hidden="true" tabindex="-1"></a>$\lambda_s$ und $\gamma_t$ sind Fixed Effects fÃ¼r Bundesstaaten und Perioden. $x_{st}$ reprÃ¤sentiert alle Kontrollvariablen auf Bundesstaatenebene. Hierbei werden stets sÃ¤mtliche Variablen mit einer Bezeichnung beginnend mit <span class="in">`dc`</span> berÃ¼cksichtigt, vgl. @tbl-abrams2012vars. Weiterhin wird mit <span class="in">`ymm`</span> fÃ¼r den Effekt eines aktiven Gesetzes fÃ¼r eine Mindeststrafe kontrolliert.</span>
<span id="cb51-536"><a href="#cb51-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-537"><a href="#cb51-537" aria-hidden="true" tabindex="-1"></a>Eine Erweiterung von \eqref{eq:abramsbase} kontrolliert fÃ¼r Bundesstaat-spezifische Zeit-Trends^<span class="co">[</span><span class="ot">FÃ¼r die Implementierung in R wÃ¤hlen wir $\omega_s = \beta_s \cdot D_s$, wobei $\beta_s$ der Trend-Koeffizient fÃ¼r Bundesstaat $s$ und $D_s$ ein Indikator fÃ¼r den Staat $s$ ist.</span><span class="co">]</span> $\omega_s\cdot t$,</span>
<span id="cb51-538"><a href="#cb51-538" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb51-539"><a href="#cb51-539" aria-hidden="true" tabindex="-1"></a>  \log\textup{Rob}_{at} = \beta \textup{AddOn}^i_{st} + \lambda_s + \gamma_t + \omega_s\cdot t + x_{st} + \epsilon_{at}.\label{eq:abramstrend}</span>
<span id="cb51-540"><a href="#cb51-540" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb51-541"><a href="#cb51-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-542"><a href="#cb51-542" aria-hidden="true" tabindex="-1"></a>Anhand von \eqref{eq:abramstrend} kontrollieren wir zusÃ¤tzlich fÃ¼r Ã¼ber die Zeit variierende Faktoren in $\log\textup{Rob}_{at}$ welche die Wahrscheinlichkeit einer Verabschiedung von Add-On in den jeweiligen Bundesstaaten beeinflussen. Diese Spezifikation ist also etwas konservativer als Modell \eqref{eq:abramsbase}, da hier lediglich der Zeitpunkt der EinfÃ¼hrung der Gesetze exogen sein muss, siehe die Diskussion in Abschnitt II in @Abrams2012.</span>
<span id="cb51-543"><a href="#cb51-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-544"><a href="#cb51-544" aria-hidden="true" tabindex="-1"></a>FÃ¼r die komfortable SchÃ¤tzung von Modellen mit Fixed Effects und die Berechnung von cluster-robusten Standardfehlern (Clustering auf Bundesstaaten-Ebene) verwenden wir <span class="in">`fixest::feols()`</span>, siehe @sec-paneldata fÃ¼r Details zur SchÃ¤tzung von Panel-Daten-Modellen.</span>
<span id="cb51-545"><a href="#cb51-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-546"><a href="#cb51-546" aria-hidden="true" tabindex="-1"></a>Aufgrund eine DiskontinuitÃ¤t in Daten fÃ¼r die Beobachtungen mehrerer Variablen im Jahr 1974 SchÃ¤tzen wir \eqref{eq:abramsbase} und \eqref{eq:abramstrend} jeweils zusÃ¤tzlich fÃ¼r Daten nach 1974. Insgesamt schÃ¤tzen wir also neun Modelle:</span>
<span id="cb51-547"><a href="#cb51-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-548"><a href="#cb51-548" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Spezifikation \eqref{eq:abramsbase}, jeweils einmal fÃ¼r $i\in<span class="sc">\{</span>1,2,3<span class="sc">\}</span>$</span>
<span id="cb51-549"><a href="#cb51-549" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Spezifikation \eqref{eq:abramstrend}, jeweils einmal fÃ¼r $i\in<span class="sc">\{</span>1,2,3<span class="sc">\}</span>$</span>
<span id="cb51-550"><a href="#cb51-550" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Spezifikation \eqref{eq:abramstrend}, jeweils einmal fÃ¼r $i\in<span class="sc">\{</span>1,2,3<span class="sc">\}</span>$ und fÃ¼r Beobachtungen mit $t&gt;1974$.</span>
<span id="cb51-551"><a href="#cb51-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-554"><a href="#cb51-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-555"><a href="#cb51-555" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fixest)</span>
<span id="cb51-556"><a href="#cb51-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-557"><a href="#cb51-557" aria-hidden="true" tabindex="-1"></a><span class="co"># Basis-Spezifikation (1): 1 Jahr</span></span>
<span id="cb51-558"><a href="#cb51-558" aria-hidden="true" tabindex="-1"></a>mod_basis_1J <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-559"><a href="#cb51-559" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-560"><a href="#cb51-560" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span id="cb51-561"><a href="#cb51-561" aria-hidden="true" tabindex="-1"></a>   yaddon</span>
<span id="cb51-562"><a href="#cb51-562" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-563"><a href="#cb51-563" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> ymm</span>
<span id="cb51-564"><a href="#cb51-564" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-565"><a href="#cb51-565" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcpoverty</span>
<span id="cb51-566"><a href="#cb51-566" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcunemp</span>
<span id="cb51-567"><a href="#cb51-567" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcblack_per</span>
<span id="cb51-568"><a href="#cb51-568" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp15t17</span>
<span id="cb51-569"><a href="#cb51-569" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-570"><a href="#cb51-570" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp25t34</span>
<span id="cb51-571"><a href="#cb51-571" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-572"><a href="#cb51-572" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-573"><a href="#cb51-573" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Fixed Effects</span></span>
<span id="cb51-574"><a href="#cb51-574" aria-hidden="true" tabindex="-1"></a>   <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-575"><a href="#cb51-575" aria-hidden="true" tabindex="-1"></a>   <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-576"><a href="#cb51-576" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>), </span>
<span id="cb51-577"><a href="#cb51-577" aria-hidden="true" tabindex="-1"></a>   <span class="at">weights =</span> <span class="sc">~</span> statepop,</span>
<span id="cb51-578"><a href="#cb51-578" aria-hidden="true" tabindex="-1"></a>   <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-579"><a href="#cb51-579" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-580"><a href="#cb51-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-581"><a href="#cb51-581" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_basis_1J)</span>
<span id="cb51-582"><a href="#cb51-582" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-583"><a href="#cb51-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-586"><a href="#cb51-586" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-587"><a href="#cb51-587" aria-hidden="true" tabindex="-1"></a><span class="co"># Basis-Spezifikation (1): 2 Jahre</span></span>
<span id="cb51-588"><a href="#cb51-588" aria-hidden="true" tabindex="-1"></a>mod_basis_2J <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-589"><a href="#cb51-589" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-590"><a href="#cb51-590" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Effekt 2 Jahre nach Add-on law              </span></span>
<span id="cb51-591"><a href="#cb51-591" aria-hidden="true" tabindex="-1"></a>   twoyears_add</span>
<span id="cb51-592"><a href="#cb51-592" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-593"><a href="#cb51-593" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> ymm</span>
<span id="cb51-594"><a href="#cb51-594" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-595"><a href="#cb51-595" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcpoverty</span>
<span id="cb51-596"><a href="#cb51-596" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcunemp</span>
<span id="cb51-597"><a href="#cb51-597" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcblack_per</span>
<span id="cb51-598"><a href="#cb51-598" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp15t17</span>
<span id="cb51-599"><a href="#cb51-599" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-600"><a href="#cb51-600" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp25t34</span>
<span id="cb51-601"><a href="#cb51-601" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-602"><a href="#cb51-602" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-603"><a href="#cb51-603" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Fixed Effects</span></span>
<span id="cb51-604"><a href="#cb51-604" aria-hidden="true" tabindex="-1"></a>   <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-605"><a href="#cb51-605" aria-hidden="true" tabindex="-1"></a>   <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-606"><a href="#cb51-606" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>), </span>
<span id="cb51-607"><a href="#cb51-607" aria-hidden="true" tabindex="-1"></a>   <span class="at">weights =</span> <span class="sc">~</span> statepop,</span>
<span id="cb51-608"><a href="#cb51-608" aria-hidden="true" tabindex="-1"></a>   <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-609"><a href="#cb51-609" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-610"><a href="#cb51-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-611"><a href="#cb51-611" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_basis_2J)</span>
<span id="cb51-612"><a href="#cb51-612" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-613"><a href="#cb51-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-614"><a href="#cb51-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-617"><a href="#cb51-617" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-618"><a href="#cb51-618" aria-hidden="true" tabindex="-1"></a><span class="co"># Basis-Spezifikation (1): 3 Jahre</span></span>
<span id="cb51-619"><a href="#cb51-619" aria-hidden="true" tabindex="-1"></a>mod_basis_3J <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-620"><a href="#cb51-620" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-621"><a href="#cb51-621" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Effekt 2 Jahre nach Add-on law              </span></span>
<span id="cb51-622"><a href="#cb51-622" aria-hidden="true" tabindex="-1"></a>   threeyears_add</span>
<span id="cb51-623"><a href="#cb51-623" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-624"><a href="#cb51-624" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> ymm</span>
<span id="cb51-625"><a href="#cb51-625" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-626"><a href="#cb51-626" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcpoverty</span>
<span id="cb51-627"><a href="#cb51-627" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcunemp</span>
<span id="cb51-628"><a href="#cb51-628" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcblack_per</span>
<span id="cb51-629"><a href="#cb51-629" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp15t17</span>
<span id="cb51-630"><a href="#cb51-630" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-631"><a href="#cb51-631" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcp25t34</span>
<span id="cb51-632"><a href="#cb51-632" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-633"><a href="#cb51-633" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-634"><a href="#cb51-634" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Fixed Effects</span></span>
<span id="cb51-635"><a href="#cb51-635" aria-hidden="true" tabindex="-1"></a>   <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-636"><a href="#cb51-636" aria-hidden="true" tabindex="-1"></a>   <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-637"><a href="#cb51-637" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>), </span>
<span id="cb51-638"><a href="#cb51-638" aria-hidden="true" tabindex="-1"></a>   <span class="at">weights =</span> <span class="sc">~</span> statepop,</span>
<span id="cb51-639"><a href="#cb51-639" aria-hidden="true" tabindex="-1"></a>   <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-640"><a href="#cb51-640" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-641"><a href="#cb51-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-642"><a href="#cb51-642" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_basis_3J)</span>
<span id="cb51-643"><a href="#cb51-643" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-644"><a href="#cb51-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-645"><a href="#cb51-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-646"><a href="#cb51-646" aria-hidden="true" tabindex="-1"></a>Vor der SchÃ¤tzung der Spezifikationen mit Trends transformieren wir <span class="in">`FSTATE`</span> zu einer Variable des kategorischen Typs <span class="in">`factor`</span>, damit Bundesstaat-spezifische Trends mit <span class="in">` FSTATE:year`</span> Ã¼ber das Argument <span class="in">`fml`</span> in <span class="in">`feols()`</span> definiert werden kÃ¶nnen.</span>
<span id="cb51-647"><a href="#cb51-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-650"><a href="#cb51-650" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-651"><a href="#cb51-651" aria-hidden="true" tabindex="-1"></a><span class="co"># 'FSTATE' zu factor transformieren</span></span>
<span id="cb51-652"><a href="#cb51-652" aria-hidden="true" tabindex="-1"></a>abrams <span class="ot">&lt;-</span> abrams <span class="sc">%&gt;%</span></span>
<span id="cb51-653"><a href="#cb51-653" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-654"><a href="#cb51-654" aria-hidden="true" tabindex="-1"></a>    <span class="at">FSTATE =</span> <span class="fu">factor</span>(FSTATE)</span>
<span id="cb51-655"><a href="#cb51-655" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-656"><a href="#cb51-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-657"><a href="#cb51-657" aria-hidden="true" tabindex="-1"></a><span class="co"># Spezifikation (2): 1 Jahr</span></span>
<span id="cb51-658"><a href="#cb51-658" aria-hidden="true" tabindex="-1"></a>mod_trends_1J <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-659"><a href="#cb51-659" aria-hidden="true" tabindex="-1"></a>    <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-660"><a href="#cb51-660" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span id="cb51-661"><a href="#cb51-661" aria-hidden="true" tabindex="-1"></a>        yaddon</span>
<span id="cb51-662"><a href="#cb51-662" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-663"><a href="#cb51-663" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> ymm</span>
<span id="cb51-664"><a href="#cb51-664" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-665"><a href="#cb51-665" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-666"><a href="#cb51-666" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-667"><a href="#cb51-667" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-668"><a href="#cb51-668" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-669"><a href="#cb51-669" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-670"><a href="#cb51-670" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-671"><a href="#cb51-671" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-672"><a href="#cb51-672" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-673"><a href="#cb51-673" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Trends: Bundesstaat</span></span>
<span id="cb51-674"><a href="#cb51-674" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> FSTATE<span class="sc">:</span>year</span>
<span id="cb51-675"><a href="#cb51-675" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-676"><a href="#cb51-676" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-677"><a href="#cb51-677" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-678"><a href="#cb51-678" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>), </span>
<span id="cb51-679"><a href="#cb51-679" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop,</span>
<span id="cb51-680"><a href="#cb51-680" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-681"><a href="#cb51-681" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-682"><a href="#cb51-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-683"><a href="#cb51-683" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_trends_1J, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb51-684"><a href="#cb51-684" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-685"><a href="#cb51-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-688"><a href="#cb51-688" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-689"><a href="#cb51-689" aria-hidden="true" tabindex="-1"></a><span class="co"># Spezifikation (2): 2 Jahre</span></span>
<span id="cb51-690"><a href="#cb51-690" aria-hidden="true" tabindex="-1"></a>mod_trends_2J <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-691"><a href="#cb51-691" aria-hidden="true" tabindex="-1"></a>    <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-692"><a href="#cb51-692" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span id="cb51-693"><a href="#cb51-693" aria-hidden="true" tabindex="-1"></a>        twoyears_add</span>
<span id="cb51-694"><a href="#cb51-694" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-695"><a href="#cb51-695" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> ymm</span>
<span id="cb51-696"><a href="#cb51-696" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-697"><a href="#cb51-697" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-698"><a href="#cb51-698" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-699"><a href="#cb51-699" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-700"><a href="#cb51-700" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-701"><a href="#cb51-701" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-702"><a href="#cb51-702" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-703"><a href="#cb51-703" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-704"><a href="#cb51-704" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-705"><a href="#cb51-705" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Trends: Bundesstaat</span></span>
<span id="cb51-706"><a href="#cb51-706" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> FSTATE<span class="sc">:</span>year</span>
<span id="cb51-707"><a href="#cb51-707" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-708"><a href="#cb51-708" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-709"><a href="#cb51-709" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-710"><a href="#cb51-710" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>), </span>
<span id="cb51-711"><a href="#cb51-711" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop,</span>
<span id="cb51-712"><a href="#cb51-712" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-713"><a href="#cb51-713" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-714"><a href="#cb51-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-715"><a href="#cb51-715" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_trends_2J, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb51-716"><a href="#cb51-716" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-717"><a href="#cb51-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-720"><a href="#cb51-720" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-721"><a href="#cb51-721" aria-hidden="true" tabindex="-1"></a><span class="co"># Spezifikation (2): 3 Jahre</span></span>
<span id="cb51-722"><a href="#cb51-722" aria-hidden="true" tabindex="-1"></a>mod_trends_3J <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-723"><a href="#cb51-723" aria-hidden="true" tabindex="-1"></a>    <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-724"><a href="#cb51-724" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Effekt 1 Jahr nach Add-on law              </span></span>
<span id="cb51-725"><a href="#cb51-725" aria-hidden="true" tabindex="-1"></a>        threeyears_add</span>
<span id="cb51-726"><a href="#cb51-726" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-727"><a href="#cb51-727" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> ymm</span>
<span id="cb51-728"><a href="#cb51-728" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-729"><a href="#cb51-729" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-730"><a href="#cb51-730" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-731"><a href="#cb51-731" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-732"><a href="#cb51-732" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-733"><a href="#cb51-733" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-734"><a href="#cb51-734" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-735"><a href="#cb51-735" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-736"><a href="#cb51-736" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-737"><a href="#cb51-737" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Trends: Bundesstaat</span></span>
<span id="cb51-738"><a href="#cb51-738" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> FSTATE<span class="sc">:</span>year</span>
<span id="cb51-739"><a href="#cb51-739" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-740"><a href="#cb51-740" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-741"><a href="#cb51-741" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-742"><a href="#cb51-742" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>), </span>
<span id="cb51-743"><a href="#cb51-743" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop,</span>
<span id="cb51-744"><a href="#cb51-744" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-745"><a href="#cb51-745" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-746"><a href="#cb51-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-747"><a href="#cb51-747" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_trends_3J, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb51-748"><a href="#cb51-748" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-749"><a href="#cb51-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-752"><a href="#cb51-752" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-753"><a href="#cb51-753" aria-hidden="true" tabindex="-1"></a><span class="co"># Spezifikation (2): 1 Jahr</span></span>
<span id="cb51-754"><a href="#cb51-754" aria-hidden="true" tabindex="-1"></a><span class="co"># Post 1974</span></span>
<span id="cb51-755"><a href="#cb51-755" aria-hidden="true" tabindex="-1"></a>mod_trends_1J_post <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-756"><a href="#cb51-756" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-757"><a href="#cb51-757" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Effekt 1 Jahr nach Add-on law</span></span>
<span id="cb51-758"><a href="#cb51-758" aria-hidden="true" tabindex="-1"></a>        yaddon</span>
<span id="cb51-759"><a href="#cb51-759" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-760"><a href="#cb51-760" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> ymm</span>
<span id="cb51-761"><a href="#cb51-761" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-762"><a href="#cb51-762" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-763"><a href="#cb51-763" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-764"><a href="#cb51-764" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-765"><a href="#cb51-765" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-766"><a href="#cb51-766" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-767"><a href="#cb51-767" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-768"><a href="#cb51-768" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-769"><a href="#cb51-769" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-770"><a href="#cb51-770" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Trends: Bundesstaat</span></span>
<span id="cb51-771"><a href="#cb51-771" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> FSTATE<span class="sc">:</span>year</span>
<span id="cb51-772"><a href="#cb51-772" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-773"><a href="#cb51-773" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-774"><a href="#cb51-774" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-775"><a href="#cb51-775" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(</span>
<span id="cb51-776"><a href="#cb51-776" aria-hidden="true" tabindex="-1"></a>          relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>, </span>
<span id="cb51-777"><a href="#cb51-777" aria-hidden="true" tabindex="-1"></a>          post74 <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb51-778"><a href="#cb51-778" aria-hidden="true" tabindex="-1"></a>        ), </span>
<span id="cb51-779"><a href="#cb51-779" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop, </span>
<span id="cb51-780"><a href="#cb51-780" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-781"><a href="#cb51-781" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-782"><a href="#cb51-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-783"><a href="#cb51-783" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_trends_1J_post, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb51-784"><a href="#cb51-784" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-785"><a href="#cb51-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-788"><a href="#cb51-788" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-789"><a href="#cb51-789" aria-hidden="true" tabindex="-1"></a><span class="co"># Spezifikation (2): 2 Jahre</span></span>
<span id="cb51-790"><a href="#cb51-790" aria-hidden="true" tabindex="-1"></a><span class="co"># Post 1974</span></span>
<span id="cb51-791"><a href="#cb51-791" aria-hidden="true" tabindex="-1"></a>mod_trends_2J_post <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-792"><a href="#cb51-792" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-793"><a href="#cb51-793" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Effekt 1 Jahr nach Add-on law</span></span>
<span id="cb51-794"><a href="#cb51-794" aria-hidden="true" tabindex="-1"></a>        twoyears_add</span>
<span id="cb51-795"><a href="#cb51-795" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-796"><a href="#cb51-796" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> ymm</span>
<span id="cb51-797"><a href="#cb51-797" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-798"><a href="#cb51-798" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-799"><a href="#cb51-799" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-800"><a href="#cb51-800" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-801"><a href="#cb51-801" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-802"><a href="#cb51-802" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-803"><a href="#cb51-803" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-804"><a href="#cb51-804" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-805"><a href="#cb51-805" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-806"><a href="#cb51-806" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Trends: Bundesstaat</span></span>
<span id="cb51-807"><a href="#cb51-807" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> FSTATE<span class="sc">:</span>year</span>
<span id="cb51-808"><a href="#cb51-808" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-809"><a href="#cb51-809" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-810"><a href="#cb51-810" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-811"><a href="#cb51-811" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(</span>
<span id="cb51-812"><a href="#cb51-812" aria-hidden="true" tabindex="-1"></a>          relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>, </span>
<span id="cb51-813"><a href="#cb51-813" aria-hidden="true" tabindex="-1"></a>          post74 <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb51-814"><a href="#cb51-814" aria-hidden="true" tabindex="-1"></a>        ), </span>
<span id="cb51-815"><a href="#cb51-815" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop, </span>
<span id="cb51-816"><a href="#cb51-816" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-817"><a href="#cb51-817" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-818"><a href="#cb51-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-819"><a href="#cb51-819" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_trends_2J_post, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb51-820"><a href="#cb51-820" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-821"><a href="#cb51-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-824"><a href="#cb51-824" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-825"><a href="#cb51-825" aria-hidden="true" tabindex="-1"></a><span class="co"># Spezifikation (2): 3 Jahre</span></span>
<span id="cb51-826"><a href="#cb51-826" aria-hidden="true" tabindex="-1"></a><span class="co"># Post 1974</span></span>
<span id="cb51-827"><a href="#cb51-827" aria-hidden="true" tabindex="-1"></a>mod_trends_3J_post <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-828"><a href="#cb51-828" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-829"><a href="#cb51-829" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Effekt 1 Jahr nach Add-on law</span></span>
<span id="cb51-830"><a href="#cb51-830" aria-hidden="true" tabindex="-1"></a>        threeyears_add</span>
<span id="cb51-831"><a href="#cb51-831" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ges. Mindeststrafe?</span></span>
<span id="cb51-832"><a href="#cb51-832" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> ymm</span>
<span id="cb51-833"><a href="#cb51-833" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-834"><a href="#cb51-834" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-835"><a href="#cb51-835" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-836"><a href="#cb51-836" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-837"><a href="#cb51-837" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-838"><a href="#cb51-838" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-839"><a href="#cb51-839" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-840"><a href="#cb51-840" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-841"><a href="#cb51-841" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-842"><a href="#cb51-842" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Trends: Bundesstaat</span></span>
<span id="cb51-843"><a href="#cb51-843" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> FSTATE<span class="sc">:</span>year</span>
<span id="cb51-844"><a href="#cb51-844" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-845"><a href="#cb51-845" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-846"><a href="#cb51-846" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-847"><a href="#cb51-847" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(</span>
<span id="cb51-848"><a href="#cb51-848" aria-hidden="true" tabindex="-1"></a>          relyr <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">7</span> <span class="sc">&amp;</span> relyr <span class="sc">&lt;=</span> <span class="dv">6</span>, </span>
<span id="cb51-849"><a href="#cb51-849" aria-hidden="true" tabindex="-1"></a>          post74 <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb51-850"><a href="#cb51-850" aria-hidden="true" tabindex="-1"></a>        ), </span>
<span id="cb51-851"><a href="#cb51-851" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop, </span>
<span id="cb51-852"><a href="#cb51-852" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-853"><a href="#cb51-853" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-854"><a href="#cb51-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-855"><a href="#cb51-855" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_trends_3J_post, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb51-856"><a href="#cb51-856" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-857"><a href="#cb51-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-858"><a href="#cb51-858" aria-hidden="true" tabindex="-1"></a>Wir fassen die Ergebnisse mit tabellarisch mit <span class="in">`modelsummary::modelsummary()`</span> zusammen. Hierzu sammeln wir die Modell-Objekte gemÃ¤ÃŸ der Struktur der zugrundeliegenden Spezifikation in benannten Listen und erzeugen eine nach dem Zeithorizont nach der EinfÃ¼hrung eines Add-On-Gesetzes gruppierte Tabelle. FÃ¼r eine bessere Ãœbersicht berÃ¼cksichtigen wir hierbei jeweils nur die Koeffizienten fÃ¼r den Zeitpunkt der GesetzesverschÃ¤rfung und die Dummyvariable fÃ¼r gesetzliche Mindeststrafen (<span class="in">`ymm`</span>). Ãœber das Argument <span class="in">`coef_map`</span> definieren wir entsprechende Labels fÃ¼r diese geschÃ¤tzten Koeffizienten.</span>
<span id="cb51-859"><a href="#cb51-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-862"><a href="#cb51-862" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-863"><a href="#cb51-863" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-abramsbase</span></span>
<span id="cb51-864"><a href="#cb51-864" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "`abrams` -- Einfluss von Add-on-Gesetzen auf KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Waffen [@Abrams2012] "</span></span>
<span id="cb51-865"><a href="#cb51-865" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb51-866"><a href="#cb51-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-867"><a href="#cb51-867" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelle in benannten Listen sammeln</span></span>
<span id="cb51-868"><a href="#cb51-868" aria-hidden="true" tabindex="-1"></a>panels <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb51-869"><a href="#cb51-869" aria-hidden="true" tabindex="-1"></a>  <span class="st">"1 Jahr nach Add-On"</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb51-870"><a href="#cb51-870" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(1) Basis"</span> <span class="ot">=</span> mod_basis_1J,</span>
<span id="cb51-871"><a href="#cb51-871" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Trends"</span> <span class="ot">=</span> mod_trends_1J,</span>
<span id="cb51-872"><a href="#cb51-872" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Nach 74"</span> <span class="ot">=</span> mod_trends_1J_post</span>
<span id="cb51-873"><a href="#cb51-873" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb51-874"><a href="#cb51-874" aria-hidden="true" tabindex="-1"></a>  <span class="st">"2 Jahre nach Add-On"</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb51-875"><a href="#cb51-875" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(1) Basis"</span> <span class="ot">=</span> mod_basis_2J,</span>
<span id="cb51-876"><a href="#cb51-876" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Trends"</span> <span class="ot">=</span> mod_trends_2J,</span>
<span id="cb51-877"><a href="#cb51-877" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Nach 74"</span> <span class="ot">=</span> mod_trends_2J_post</span>
<span id="cb51-878"><a href="#cb51-878" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb51-879"><a href="#cb51-879" aria-hidden="true" tabindex="-1"></a>  <span class="st">"3 Jahre nach Add-On"</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb51-880"><a href="#cb51-880" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(1) Basis"</span> <span class="ot">=</span> mod_basis_3J,</span>
<span id="cb51-881"><a href="#cb51-881" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Trends"</span> <span class="ot">=</span> mod_trends_3J,</span>
<span id="cb51-882"><a href="#cb51-882" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Nach 74"</span> <span class="ot">=</span> mod_trends_3J_post</span>
<span id="cb51-883"><a href="#cb51-883" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-884"><a href="#cb51-884" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-885"><a href="#cb51-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-886"><a href="#cb51-886" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabellarische Zusammenfassung</span></span>
<span id="cb51-887"><a href="#cb51-887" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb51-888"><a href="#cb51-888" aria-hidden="true" tabindex="-1"></a>  <span class="at">models =</span> panels,</span>
<span id="cb51-889"><a href="#cb51-889" aria-hidden="true" tabindex="-1"></a>  <span class="at">shape =</span> <span class="st">"rbind"</span>,</span>
<span id="cb51-890"><a href="#cb51-890" aria-hidden="true" tabindex="-1"></a>  <span class="at">coef_omit =</span> <span class="st">"^(?!.*(add|ymm)).*$"</span>,</span>
<span id="cb51-891"><a href="#cb51-891" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> T,</span>
<span id="cb51-892"><a href="#cb51-892" aria-hidden="true" tabindex="-1"></a>  <span class="at">gof_omit =</span> <span class="st">"^(?!(R2*)$).*"</span>,</span>
<span id="cb51-893"><a href="#cb51-893" aria-hidden="true" tabindex="-1"></a>  <span class="at">coef_map =</span> <span class="fu">c</span>(</span>
<span id="cb51-894"><a href="#cb51-894" aria-hidden="true" tabindex="-1"></a>    <span class="st">"yaddon"</span> <span class="ot">=</span> <span class="st">"Add-On"</span>,</span>
<span id="cb51-895"><a href="#cb51-895" aria-hidden="true" tabindex="-1"></a>    <span class="st">"twoyears_add"</span> <span class="ot">=</span> <span class="st">"Add-On"</span>,</span>
<span id="cb51-896"><a href="#cb51-896" aria-hidden="true" tabindex="-1"></a>    <span class="st">"threeyears_add"</span> <span class="ot">=</span> <span class="st">"Add-On"</span>,</span>
<span id="cb51-897"><a href="#cb51-897" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ymm"</span> <span class="ot">=</span> <span class="st">"Mindeststrafe"</span></span>
<span id="cb51-898"><a href="#cb51-898" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb51-899"><a href="#cb51-899" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> <span class="fu">c</span>(</span>
<span id="cb51-900"><a href="#cb51-900" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Abh. Var.: Log KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Schusswaffen"</span>, </span>
<span id="cb51-901"><a href="#cb51-901" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cluster-robuste Standardfehler: Bundesstaat"</span>,</span>
<span id="cb51-902"><a href="#cb51-902" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Fixed Effects: Bundesstaat + Jahr"</span></span>
<span id="cb51-903"><a href="#cb51-903" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb51-904"><a href="#cb51-904" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"gt"</span></span>
<span id="cb51-905"><a href="#cb51-905" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb51-906"><a href="#cb51-906" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabopts</span>()</span>
<span id="cb51-907"><a href="#cb51-907" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-908"><a href="#cb51-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-909"><a href="#cb51-909" aria-hidden="true" tabindex="-1"></a>Die in @tbl-abramsbase zusammengefassten Ergebnisse deuten darauf, dass es im ersten Jahr nach der EinfÃ¼hrung eines Add-On-Gesetzes keinen Signifikanten Effekt auf die KriminalitÃ¤tsrate fÃ¼r RaubÃ¼berfÃ¤lle mit Schusswaffen gibt, wenngleich der geschÃ¤tzte Koeffizient in sÃ¤mtlichen Modellen negativ ist und damit konsistent mit dem vermuteten Abschreckungseffekt ist.In den Folgeperioden finden wir signifikante negative Effekte verschÃ¤rfter Gesetze auf die KriminalitÃ¤tsrate von bis zu 12.7\% (Effekt in Modell \eqref{eq:abramsbase} nach drei Jahren). Die konservativste Spezifikation (Modell \eqref{eq:abramstrend} mit Beobachtungen nach 1974) liefert Evidenz eines RÃ¼ckgangs der KriminalitÃ¤t durch Abschreckungseffekte in HÃ¶he von etwa 5\% innerhalb der ersten drei Jahre nach der GesetzesÃ¤nderung. Weiterhin ist der geschÃ¤tzte Effekt von gesetzlichen Vorschriften zu Mindeststrafen zwar durchweg negativ, jedoch insignifikant.</span>
<span id="cb51-910"><a href="#cb51-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-911"><a href="#cb51-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-912"><a href="#cb51-912" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Event-Study-Regression</span></span>
<span id="cb51-913"><a href="#cb51-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-914"><a href="#cb51-914" aria-hidden="true" tabindex="-1"></a>FÃ¼r eine detalliertere EinschÃ¤tzung des zeitlichen Verlaufs des Effekts verschÃ¤rfender Gesetze betrachtet @Abrams2012 eine Spezifikation Ã¤hnlich zu @Jacobsonetal1993,</span>
<span id="cb51-915"><a href="#cb51-915" aria-hidden="true" tabindex="-1"></a>\begin{align}</span>
<span id="cb51-916"><a href="#cb51-916" aria-hidden="true" tabindex="-1"></a>  \log\textup{Rob}_{at} = \sum_{i\in[-6,6]} \beta_i\cdot\textup{AddOn}^i_{st} + \lambda_s + \gamma_t + \omega_s\cdot t + x_{st} + \epsilon_{at},\label{eq:abramsesreg}</span>
<span id="cb51-917"><a href="#cb51-917" aria-hidden="true" tabindex="-1"></a>\end{align}</span>
<span id="cb51-918"><a href="#cb51-918" aria-hidden="true" tabindex="-1"></a>mit perioden-spezifischen Effekten $\beta_i$ in einem Zeitfenster von sechs Jahren vor und nach GesetzesÃ¤nderungen, wobei die $\textup{AddOn}^i_{st}$ definiert sind wie in \eqref{eq:abramsbase} FÃ¼r die SchÃ¤tzung von Modell \eqref{eq:abramsesreg} mit R zeigen wir zunÃ¤chst, wie diese Dummies anhand der Variable <span class="in">`relyr`</span> effizient erzeugt werden kÃ¶nnen. </span>
<span id="cb51-919"><a href="#cb51-919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-922"><a href="#cb51-922" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-923"><a href="#cb51-923" aria-hidden="true" tabindex="-1"></a><span class="co"># AusprÃ¤gungen von 'relyr'</span></span>
<span id="cb51-924"><a href="#cb51-924" aria-hidden="true" tabindex="-1"></a>abrams <span class="sc">%&gt;%</span> </span>
<span id="cb51-925"><a href="#cb51-925" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(relyr) <span class="sc">%&gt;%</span> </span>
<span id="cb51-926"><a href="#cb51-926" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>()</span>
<span id="cb51-927"><a href="#cb51-927" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-928"><a href="#cb51-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-929"><a href="#cb51-929" aria-hidden="true" tabindex="-1"></a>HierfÃ¼r generieren wir mit <span class="in">`tidyr::pivot_wider()`</span> eine Variante des Datensatzes, <span class="in">`abrams_es`</span>, in der Beobachtungen von <span class="in">`relyr`</span> spaltenweise in binÃ¤rer Kodierung abgetragen sind. Diese Variablen erhalten das PrÃ¤fix <span class="in">`D`</span>. FÃ¼r leichtere Handhabung der Variablennamen innerhalb von <span class="in">`feols()`</span> wird das negative Vorzeichen wird druch <span class="in">`dplyr::rename_with()`</span> in einen Underscore umgewandelt.</span>
<span id="cb51-930"><a href="#cb51-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-933"><a href="#cb51-933" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-934"><a href="#cb51-934" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy-Variablen fÃ¼r Event-Study-Regression erzeugen</span></span>
<span id="cb51-935"><a href="#cb51-935" aria-hidden="true" tabindex="-1"></a>abrams_es <span class="ot">&lt;-</span> abrams <span class="sc">%&gt;%</span></span>
<span id="cb51-936"><a href="#cb51-936" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb51-937"><a href="#cb51-937" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> relyr, </span>
<span id="cb51-938"><a href="#cb51-938" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> relyr, </span>
<span id="cb51-939"><a href="#cb51-939" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">"D"</span>, </span>
<span id="cb51-940"><a href="#cb51-940" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_fn =</span> <span class="fu">list</span>(<span class="at">relyr =</span> <span class="sc">~</span> <span class="dv">1</span>), </span>
<span id="cb51-941"><a href="#cb51-941" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb51-942"><a href="#cb51-942" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb51-943"><a href="#cb51-943" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(</span>
<span id="cb51-944"><a href="#cb51-944" aria-hidden="true" tabindex="-1"></a>        <span class="at">.fn =</span> <span class="sc">~</span> <span class="fu">gsub</span>(<span class="st">"-"</span>, <span class="st">"_"</span>, .), </span>
<span id="cb51-945"><a href="#cb51-945" aria-hidden="true" tabindex="-1"></a>        <span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"D"</span>)</span>
<span id="cb51-946"><a href="#cb51-946" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-947"><a href="#cb51-947" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-948"><a href="#cb51-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-949"><a href="#cb51-949" aria-hidden="true" tabindex="-1"></a>Wir schÃ¤tzen nun die Regression \eqref{eq:abramsesreg}, sowohl mit als auch ohne Bundesstaat-spezifische Zeit-Trends und fassen die Ergebnisse anschlieÃŸend mit <span class="in">`modelsummary()`</span> zusammen.</span>
<span id="cb51-950"><a href="#cb51-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-953"><a href="#cb51-953" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-954"><a href="#cb51-954" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb51-955"><a href="#cb51-955" aria-hidden="true" tabindex="-1"></a><span class="co"># Event-Study-Regression ohne Zeit-Trends</span></span>
<span id="cb51-956"><a href="#cb51-956" aria-hidden="true" tabindex="-1"></a>abrams_mod_es <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-957"><a href="#cb51-957" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-958"><a href="#cb51-958" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Rel. Zeitpunkt-Dummies</span></span>
<span id="cb51-959"><a href="#cb51-959" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_6</span>
<span id="cb51-960"><a href="#cb51-960" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_5</span>
<span id="cb51-961"><a href="#cb51-961" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_4</span>
<span id="cb51-962"><a href="#cb51-962" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_3</span>
<span id="cb51-963"><a href="#cb51-963" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_2</span>
<span id="cb51-964"><a href="#cb51-964" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_1</span>
<span id="cb51-965"><a href="#cb51-965" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D0      </span>
<span id="cb51-966"><a href="#cb51-966" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D1</span>
<span id="cb51-967"><a href="#cb51-967" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D2</span>
<span id="cb51-968"><a href="#cb51-968" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D3</span>
<span id="cb51-969"><a href="#cb51-969" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D4</span>
<span id="cb51-970"><a href="#cb51-970" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D5</span>
<span id="cb51-971"><a href="#cb51-971" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D6</span>
<span id="cb51-972"><a href="#cb51-972" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-973"><a href="#cb51-973" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-974"><a href="#cb51-974" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-975"><a href="#cb51-975" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-976"><a href="#cb51-976" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-977"><a href="#cb51-977" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-978"><a href="#cb51-978" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-979"><a href="#cb51-979" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-980"><a href="#cb51-980" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-981"><a href="#cb51-981" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-982"><a href="#cb51-982" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-983"><a href="#cb51-983" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> abrams_es,</span>
<span id="cb51-984"><a href="#cb51-984" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop, </span>
<span id="cb51-985"><a href="#cb51-985" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-986"><a href="#cb51-986" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-987"><a href="#cb51-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-988"><a href="#cb51-988" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(abrams_mod_es, <span class="at">n =</span> <span class="dv">13</span>)</span>
<span id="cb51-989"><a href="#cb51-989" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-990"><a href="#cb51-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-993"><a href="#cb51-993" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-994"><a href="#cb51-994" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb51-995"><a href="#cb51-995" aria-hidden="true" tabindex="-1"></a><span class="co"># Event-Study-Regression mit Zeit-Trends</span></span>
<span id="cb51-996"><a href="#cb51-996" aria-hidden="true" tabindex="-1"></a>abrams_mod_es_trends <span class="ot">&lt;-</span> <span class="fu">feols</span>(</span>
<span id="cb51-997"><a href="#cb51-997" aria-hidden="true" tabindex="-1"></a>  <span class="at">fml =</span> lnpcrrobgun <span class="sc">~</span></span>
<span id="cb51-998"><a href="#cb51-998" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Rel. Zeitpunkt-Dummies</span></span>
<span id="cb51-999"><a href="#cb51-999" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_6</span>
<span id="cb51-1000"><a href="#cb51-1000" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_5</span>
<span id="cb51-1001"><a href="#cb51-1001" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_4</span>
<span id="cb51-1002"><a href="#cb51-1002" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_3</span>
<span id="cb51-1003"><a href="#cb51-1003" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_2</span>
<span id="cb51-1004"><a href="#cb51-1004" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D_1</span>
<span id="cb51-1005"><a href="#cb51-1005" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D0      </span>
<span id="cb51-1006"><a href="#cb51-1006" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D1</span>
<span id="cb51-1007"><a href="#cb51-1007" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D2</span>
<span id="cb51-1008"><a href="#cb51-1008" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D3</span>
<span id="cb51-1009"><a href="#cb51-1009" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D4</span>
<span id="cb51-1010"><a href="#cb51-1010" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D5</span>
<span id="cb51-1011"><a href="#cb51-1011" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> D6</span>
<span id="cb51-1012"><a href="#cb51-1012" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Kontrollvariablen</span></span>
<span id="cb51-1013"><a href="#cb51-1013" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpoverty</span>
<span id="cb51-1014"><a href="#cb51-1014" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcunemp</span>
<span id="cb51-1015"><a href="#cb51-1015" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcblack_per</span>
<span id="cb51-1016"><a href="#cb51-1016" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp15t17</span>
<span id="cb51-1017"><a href="#cb51-1017" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp18t24 </span>
<span id="cb51-1018"><a href="#cb51-1018" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcp25t34</span>
<span id="cb51-1019"><a href="#cb51-1019" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcpolice_per1</span>
<span id="cb51-1020"><a href="#cb51-1020" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> dcprison_per1</span>
<span id="cb51-1021"><a href="#cb51-1021" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Trends: Bundesstaaten</span></span>
<span id="cb51-1022"><a href="#cb51-1022" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+</span> FSTATE<span class="sc">:</span>year</span>
<span id="cb51-1023"><a href="#cb51-1023" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fixed Effects</span></span>
<span id="cb51-1024"><a href="#cb51-1024" aria-hidden="true" tabindex="-1"></a>      <span class="sc">|</span> FSTATE <span class="sc">+</span> year,</span>
<span id="cb51-1025"><a href="#cb51-1025" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> abrams_es,</span>
<span id="cb51-1026"><a href="#cb51-1026" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="sc">~</span> statepop, </span>
<span id="cb51-1027"><a href="#cb51-1027" aria-hidden="true" tabindex="-1"></a>      <span class="at">vcov =</span> <span class="sc">~</span> FSTATE</span>
<span id="cb51-1028"><a href="#cb51-1028" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-1029"><a href="#cb51-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1030"><a href="#cb51-1030" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(abrams_mod_es_trends, <span class="at">n =</span> <span class="dv">13</span>)</span>
<span id="cb51-1031"><a href="#cb51-1031" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1032"><a href="#cb51-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1033"><a href="#cb51-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1036"><a href="#cb51-1036" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1037"><a href="#cb51-1037" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-abramsesreg</span></span>
<span id="cb51-1038"><a href="#cb51-1038" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "KQ-SchÃ¤tzung der Event-Study-Spezifikation: Koeffizienten der Dummies [@Abrams2012] "</span></span>
<span id="cb51-1039"><a href="#cb51-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1040"><a href="#cb51-1040" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelle in benannten Listen sammeln</span></span>
<span id="cb51-1041"><a href="#cb51-1041" aria-hidden="true" tabindex="-1"></a>modelle <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb51-1042"><a href="#cb51-1042" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ohne Trends"</span> <span class="ot">=</span> abrams_mod_es,</span>
<span id="cb51-1043"><a href="#cb51-1043" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Zeit-Trends"</span> <span class="ot">=</span> abrams_mod_es_trends</span>
<span id="cb51-1044"><a href="#cb51-1044" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-1045"><a href="#cb51-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1046"><a href="#cb51-1046" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabellarische Zusammenfassung</span></span>
<span id="cb51-1047"><a href="#cb51-1047" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb51-1048"><a href="#cb51-1048" aria-hidden="true" tabindex="-1"></a>  <span class="at">models =</span> modelle,</span>
<span id="cb51-1049"><a href="#cb51-1049" aria-hidden="true" tabindex="-1"></a>  <span class="at">coef_omit =</span> <span class="st">"^(?!.*(D|D</span><span class="sc">\\</span><span class="st">_)).*$"</span>,</span>
<span id="cb51-1050"><a href="#cb51-1050" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> T,</span>
<span id="cb51-1051"><a href="#cb51-1051" aria-hidden="true" tabindex="-1"></a>  <span class="at">gof_omit =</span> <span class="st">"^(?!(R2*)$).*"</span>,</span>
<span id="cb51-1052"><a href="#cb51-1052" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> <span class="fu">c</span>(</span>
<span id="cb51-1053"><a href="#cb51-1053" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Abh. Var.: Log KriminalitÃ¤tsrate: RaubÃ¼berfÃ¤lle mit Schusswaffen"</span>, </span>
<span id="cb51-1054"><a href="#cb51-1054" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cluster-robuste Standardfehler: Bundesstaat"</span>,</span>
<span id="cb51-1055"><a href="#cb51-1055" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Fixed Effects: Bundesstaat + Jahr"</span></span>
<span id="cb51-1056"><a href="#cb51-1056" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb51-1057"><a href="#cb51-1057" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"gt"</span></span>
<span id="cb51-1058"><a href="#cb51-1058" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb51-1059"><a href="#cb51-1059" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabopts</span>()</span>
<span id="cb51-1060"><a href="#cb51-1060" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1061"><a href="#cb51-1061" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1062"><a href="#cb51-1062" aria-hidden="true" tabindex="-1"></a>Die statistische Zusammenfassung beider Event-Study-Spezifikationen in @tbl-abramsesreg untermauern die Ergebnisse aus @tbl-abramsbase: </span>
<span id="cb51-1063"><a href="#cb51-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1064"><a href="#cb51-1064" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Die positiven geschÃ¤tzten Koeffizienten der Dummies fÃ¼r Zeitpunkte *vor* der EinfÃ¼hrung von Add-On-Gesetzen ($i=-6,\dots,-1$) sind signifikant und zeigen einen stabilen Verlauf der KriminalitÃ¤tsrate an.</span>
<span id="cb51-1065"><a href="#cb51-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1066"><a href="#cb51-1066" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Die negativen, nicht-signifikant von 0 verschiedenen geschÃ¤tzten Koeffizienten *nach* der EinfÃ¼hrung von Add-On-Gesetzen ($i=0,\dots,6$) sind Evidenz fÃ¼r einen RÃ¼ckgang der Pro-Kopf-KriminalitÃ¤tsrate fÃ¼r RaubÃ¼berfÃ¤lle mit Schusswaffen im Folgezeitraum.</span>
<span id="cb51-1067"><a href="#cb51-1067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1068"><a href="#cb51-1068" aria-hidden="true" tabindex="-1"></a>FÃ¼r eine grafische Veranschaulichung der zeitlichen Entwicklung des geschÃ¤tzten Effekts plotten wir die SchÃ¤tzungen aus @tbl-abramsesreg zusammen mit einem 1-Standardfehler-Intervall.^<span class="co">[</span><span class="ot">Vgl. Abbildung 4 in @Abrams2012.</span><span class="co">]</span> Hierzu lesen wir zunÃ¤chst die geschÃ¤tzten Koeffizienten und Standardfehler aus dem Objekten <span class="in">`abrams_mod_es`</span> und <span class="in">`abrams_mod_es_trends`</span> aus, berechnen die zugehÃ¶rigen Konfidenzintervalle und sammeln die Ergebnisse unter Verwendung einer Indikatorvariable fÃ¼r das zugrundeliegende Modell in einem <span class="in">`tibble`</span>-Objekt</span>
<span id="cb51-1069"><a href="#cb51-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1072"><a href="#cb51-1072" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1073"><a href="#cb51-1073" aria-hidden="true" tabindex="-1"></a><span class="co"># Koeffizienten: Modell mit Trend</span></span>
<span id="cb51-1074"><a href="#cb51-1074" aria-hidden="true" tabindex="-1"></a>coefficients_1 <span class="ot">&lt;-</span> <span class="fu">coef</span>(abrams_mod_es_trends)</span>
<span id="cb51-1075"><a href="#cb51-1075" aria-hidden="true" tabindex="-1"></a>std_errors_1 <span class="ot">&lt;-</span> <span class="fu">se</span>(abrams_mod_es_trends)</span>
<span id="cb51-1076"><a href="#cb51-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1077"><a href="#cb51-1077" aria-hidden="true" tabindex="-1"></a><span class="co"># Koeffizienten: Modell ohne Trend</span></span>
<span id="cb51-1078"><a href="#cb51-1078" aria-hidden="true" tabindex="-1"></a>coefficients_2 <span class="ot">&lt;-</span> <span class="fu">coef</span>(abrams_mod_es)</span>
<span id="cb51-1079"><a href="#cb51-1079" aria-hidden="true" tabindex="-1"></a>std_errors_2 <span class="ot">&lt;-</span> <span class="fu">se</span>(abrams_mod_es)</span>
<span id="cb51-1080"><a href="#cb51-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1081"><a href="#cb51-1081" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset von i = -6,...,0,...,6 auslesen</span></span>
<span id="cb51-1082"><a href="#cb51-1082" aria-hidden="true" tabindex="-1"></a>events <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">6</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb51-1083"><a href="#cb51-1083" aria-hidden="true" tabindex="-1"></a>event_names <span class="ot">&lt;-</span> <span class="fu">names</span>(coefficients_1)[<span class="dv">1</span><span class="sc">:</span><span class="dv">13</span>]</span>
<span id="cb51-1084"><a href="#cb51-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1085"><a href="#cb51-1085" aria-hidden="true" tabindex="-1"></a><span class="co"># SchÃ¤tzungen je Modell sammeln</span></span>
<span id="cb51-1086"><a href="#cb51-1086" aria-hidden="true" tabindex="-1"></a>plot_data_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb51-1087"><a href="#cb51-1087" aria-hidden="true" tabindex="-1"></a>  <span class="at">Modell =</span> <span class="st">"Mit Trends"</span>,</span>
<span id="cb51-1088"><a href="#cb51-1088" aria-hidden="true" tabindex="-1"></a>  <span class="at">Event =</span> events,</span>
<span id="cb51-1089"><a href="#cb51-1089" aria-hidden="true" tabindex="-1"></a>  <span class="at">Estimate =</span> coefficients_1[event_names],</span>
<span id="cb51-1090"><a href="#cb51-1090" aria-hidden="true" tabindex="-1"></a>  <span class="at">SE =</span> std_errors_1[event_names]</span>
<span id="cb51-1091"><a href="#cb51-1091" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-1092"><a href="#cb51-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1093"><a href="#cb51-1093" aria-hidden="true" tabindex="-1"></a>plot_data_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb51-1094"><a href="#cb51-1094" aria-hidden="true" tabindex="-1"></a>  <span class="at">Modell =</span> <span class="st">"Ohne Trends"</span>,</span>
<span id="cb51-1095"><a href="#cb51-1095" aria-hidden="true" tabindex="-1"></a>  <span class="at">Event =</span> events,</span>
<span id="cb51-1096"><a href="#cb51-1096" aria-hidden="true" tabindex="-1"></a>  <span class="at">Estimate =</span> coefficients_2[event_names],</span>
<span id="cb51-1097"><a href="#cb51-1097" aria-hidden="true" tabindex="-1"></a>  <span class="at">SE =</span> std_errors_2[event_names]</span>
<span id="cb51-1098"><a href="#cb51-1098" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-1099"><a href="#cb51-1099" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1100"><a href="#cb51-1100" aria-hidden="true" tabindex="-1"></a><span class="co"># Datenpunkte sammeln</span></span>
<span id="cb51-1101"><a href="#cb51-1101" aria-hidden="true" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(plot_data_1, plot_data_2) <span class="sc">%&gt;%</span></span>
<span id="cb51-1102"><a href="#cb51-1102" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1-Standardfehler-Intervall</span></span>
<span id="cb51-1103"><a href="#cb51-1103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-1104"><a href="#cb51-1104" aria-hidden="true" tabindex="-1"></a>    <span class="at">CI_Lower =</span> Estimate <span class="sc">-</span> SE,</span>
<span id="cb51-1105"><a href="#cb51-1105" aria-hidden="true" tabindex="-1"></a>    <span class="at">CI_Upper =</span> Estimate <span class="sc">+</span> SE</span>
<span id="cb51-1106"><a href="#cb51-1106" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1107"><a href="#cb51-1107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1108"><a href="#cb51-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1111"><a href="#cb51-1111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1112"><a href="#cb51-1112" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-abramsesregres</span></span>
<span id="cb51-1113"><a href="#cb51-1113" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Event-Study-Regression -- GeschÃ¤tze Rate: RaubÃ¼berfÃ¤lle rel. zur EinfÃ¼hrung von Add-On-Gesetzen"</span></span>
<span id="cb51-1114"><a href="#cb51-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1115"><a href="#cb51-1115" aria-hidden="true" tabindex="-1"></a><span class="co"># Event-Study-Plot</span></span>
<span id="cb51-1116"><a href="#cb51-1116" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb51-1117"><a href="#cb51-1117" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> plot_data, </span>
<span id="cb51-1118"><a href="#cb51-1118" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb51-1119"><a href="#cb51-1119" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> Event, </span>
<span id="cb51-1120"><a href="#cb51-1120" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Estimate, </span>
<span id="cb51-1121"><a href="#cb51-1121" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> Modell, </span>
<span id="cb51-1122"><a href="#cb51-1122" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> Modell</span>
<span id="cb51-1123"><a href="#cb51-1123" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1124"><a href="#cb51-1124" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb51-1125"><a href="#cb51-1125" aria-hidden="true" tabindex="-1"></a>  <span class="co"># gesch. Effekte</span></span>
<span id="cb51-1126"><a href="#cb51-1126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb51-1127"><a href="#cb51-1127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb51-1128"><a href="#cb51-1128" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1-SE-Intervall</span></span>
<span id="cb51-1129"><a href="#cb51-1129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(</span>
<span id="cb51-1130"><a href="#cb51-1130" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb51-1131"><a href="#cb51-1131" aria-hidden="true" tabindex="-1"></a>      <span class="at">ymin =</span> CI_Lower, </span>
<span id="cb51-1132"><a href="#cb51-1132" aria-hidden="true" tabindex="-1"></a>      <span class="at">ymax =</span> CI_Upper</span>
<span id="cb51-1133"><a href="#cb51-1133" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb51-1134"><a href="#cb51-1134" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span><span class="st">"white"</span>,</span>
<span id="cb51-1135"><a href="#cb51-1135" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.2</span></span>
<span id="cb51-1136"><a href="#cb51-1136" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-1137"><a href="#cb51-1137" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Hilfslinien</span></span>
<span id="cb51-1138"><a href="#cb51-1138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(</span>
<span id="cb51-1139"><a href="#cb51-1139" aria-hidden="true" tabindex="-1"></a>    <span class="at">yintercept =</span> <span class="fu">c</span>(<span class="dv">0</span>), </span>
<span id="cb51-1140"><a href="#cb51-1140" aria-hidden="true" tabindex="-1"></a>    <span class="at">linewidth =</span> .<span class="dv">2</span></span>
<span id="cb51-1141"><a href="#cb51-1141" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-1142"><a href="#cb51-1142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb51-1143"><a href="#cb51-1143" aria-hidden="true" tabindex="-1"></a>    <span class="at">xintercept =</span> <span class="dv">0</span>, </span>
<span id="cb51-1144"><a href="#cb51-1144" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span></span>
<span id="cb51-1145"><a href="#cb51-1145" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-1146"><a href="#cb51-1146" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Labels + Legende</span></span>
<span id="cb51-1147"><a href="#cb51-1147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb51-1148"><a href="#cb51-1148" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Zeitpunkt rel. zur Einf. Add-on-Gesetz"</span>,</span>
<span id="cb51-1149"><a href="#cb51-1149" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Log-Rate: ÃœberfÃ¤lle mit Schusswaffen"</span>) <span class="sc">+</span></span>
<span id="cb51-1150"><a href="#cb51-1150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">4</span>, .<span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb51-1151"><a href="#cb51-1151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb51-1152"><a href="#cb51-1152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb51-1153"><a href="#cb51-1153" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1154"><a href="#cb51-1154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1155"><a href="#cb51-1155" aria-hidden="true" tabindex="-1"></a>Beachte, dass lediglich die Ã„nderungen der Koeffizienten in  @fig-abramsesregres eine sinnvolle Interpretation haben: Die absoluten Werte auf der Y-Achse  sind nicht aussagekrÃ¤ftig, da sie aus Regressionen mit mehreren Regressoren mit von Null verschiedenen Mittelwerten stammen. </span>
<span id="cb51-1156"><a href="#cb51-1156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1157"><a href="#cb51-1157" aria-hidden="true" tabindex="-1"></a>Eine AuffÃ¤lligkeit in @fig-abramsesregres ist, dass die mittlere KriminalitÃ¤tsrate bereits eine Periode *vor* dem Zeitpunkt der GesetzeseinfÃ¼hrung eine Trendumkehr aufzuweisen scheint. @Abrams2012 weiÃŸt darauf hin, dass potenzielle StraftÃ¤ter durch die laufende Ã¶ffentliche Debatte und Diskussion Ã¼ber das Gesetz erfahren und ihr Verhaltensweisen in Erwartung der GesetzesÃ¤nderung anpassen kÃ¶nnten. Die emprische Studienlage hinsichtlich eines solches Verhalten ist jedoch nicht eindeutig, siehe die Diskussion in @Abrams2012, Abschnitt IV B.</span>
<span id="cb51-1158"><a href="#cb51-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1159"><a href="#cb51-1159" aria-hidden="true" tabindex="-1"></a><span class="fu">## Zusammenfassung</span></span>
<span id="cb51-1160"><a href="#cb51-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1161"><a href="#cb51-1161" aria-hidden="true" tabindex="-1"></a>Mit Event Studies kÃ¶nnen die Auswirkungen spezifischer Ereignisse oder Interventionen auf eine Ã¼ber die Zeit beobachtete Outcome-Variable untersucht werden. Die zugrunde liegende Annahme fÃ¼r die Identifizierbarkeit des kausalen Effekts ist, dass das untersuchte Event als exogener Schock fungiert, der die Outcome-Variable beeinflusst, jedoch unabhÃ¤ngig von anderen unbeobachtbaren Einflussfaktoren ist, sodass die der Front-Door-Pfad isoliert werden kann.</span>
<span id="cb51-1162"><a href="#cb51-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1163"><a href="#cb51-1163" aria-hidden="true" tabindex="-1"></a>Der Effekt wird meist in einem zeitlichen Umfeld nahe des Ereignisses analysiert. Zur Bestimmung eines kontrafaktischen Vergleichswerts fÃ¼r die Outcome-Variable nach dem Event kann die Prognose des Outcomes hilfreich sein. FÃ¼r die prÃ¤zise SchÃ¤tzung des Behandlungseffekts werden hÃ¤ufig Regressionsmodelle herangezogen, die es ermÃ¶glichen, zeitliche VerÃ¤nderungen in der Outcome-Variable zu modellieren und zusÃ¤tzliche Kontrollvariablen zu berÃ¼cksichtigen. Dadurch wird die Robustheit und Genauigkeit der Ergebnisse erhÃ¶ht, was insbesondere bei der Analyse langfristiger Interventionseffekte in komplexen Ã¶konomischen und politischen Kontexten von relevant ist.</span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<script type="module">
// Handle cell initialization initialization
qwebrCellDetails.map(
  (entry) => {
    // Handle the creation of the element
    qwebrCreateHTMLElement(entry);
    // In the event of interactive, initialize the monaco editor
    if (entry.options.context == EvalTypes.Interactive) {
      qwebrCreateMonacoEditorInstance(entry);
    }
  }
);

// Identify non-interactive cells (in order)
const filteredEntries = qwebrCellDetails.filter(entry => {
  const contextOption = entry.options && entry.options.context;
  return ['output', 'setup'].includes(contextOption) || (contextOption == "interactive" && entry.options && entry.options.autorun === 'true');
});

// Condition non-interactive cells to only be run after webR finishes its initialization.
qwebrInstance.then(
  async () => {
    const nHiddenCells = filteredEntries.length;
    var currentHiddenCell = 0;


    // Modify button state
    qwebrSetInteractiveButtonState(`ðŸŸ¡ Running hidden code cells ...`, false);

    // Begin processing non-interactive sections
    // Due to the iteration policy, we must use a for() loop.
    // Otherwise, we would need to switch to using reduce with an empty
    // starting promise
    for (const entry of filteredEntries) {

      // Determine cell being examined
      currentHiddenCell = currentHiddenCell + 1;
      const formattedMessage = `Evaluating hidden cell ${currentHiddenCell} out of ${nHiddenCells}`;

      // Update the document status header
      if (qwebrShowStartupMessage) {
        qwebrUpdateStatusHeader(formattedMessage);
      }

      // Display the update in non-active areas
      qwebrUpdateStatusMessage(formattedMessage);

      // Extract details on the active cell
      const evalType = entry.options.context;
      const cellCode = entry.code;
      const qwebrCounter = entry.id;

      if (['output', 'setup'].includes(evalType)) {
        // Disable further global status updates
        const activeContainer = document.getElementById(`qwebr-non-interactive-loading-container-${qwebrCounter}`);
        activeContainer.classList.remove('qwebr-cell-needs-evaluation');
        activeContainer.classList.add('qwebr-cell-evaluated');

        // Update status on the code cell
        const activeStatus = document.getElementById(`qwebr-status-text-${qwebrCounter}`);
        activeStatus.innerText = " Evaluating hidden code cell...";
        activeStatus.classList.remove('qwebr-cell-needs-evaluation');
        activeStatus.classList.add('qwebr-cell-evaluated');
      }

      switch (evalType) {
        case 'interactive':
          // TODO: Make this more standardized.
          // At the moment, we're overriding the interactive status update by pretending its
          // output-like. 
          const tempOptions = entry.options;
          tempOptions["context"] = "output"
          // Run the code in a non-interactive state that is geared to displaying output
          await qwebrExecuteCode(`${cellCode}`, qwebrCounter, tempOptions);
          break;
        case 'output':
          // Run the code in a non-interactive state that is geared to displaying output
          await qwebrExecuteCode(`${cellCode}`, qwebrCounter, entry.options);
          break;
        case 'setup':
          const activeDiv = document.getElementById(`qwebr-noninteractive-setup-area-${qwebrCounter}`);

          // Store code in history
          qwebrLogCodeToHistory(cellCode, entry.options);

          // Run the code in a non-interactive state with all output thrown away
          await mainWebR.evalRVoid(`${cellCode}`);
          break;
        default: 
          break; 
      }

      if (['output', 'setup'].includes(evalType)) {
        // Disable further global status updates
        const activeContainer = document.getElementById(`qwebr-non-interactive-loading-container-${qwebrCounter}`);
        // Disable visibility
        activeContainer.style.visibility = 'hidden';
        activeContainer.style.display = 'none';
      }
    }
  }
).then(
  () => {
    // Release document status as ready

    if (qwebrShowStartupMessage) {
      qwebrStartupMessage.innerText = "ðŸŸ¢ Ready!"
    }
  
    qwebrSetInteractiveButtonState(
      `<i class="fa-solid fa-play qwebr-icon-run-code"></i> <span>Run Code</span>`, 
      true
    );  
  }
);
</script>


</body></html>